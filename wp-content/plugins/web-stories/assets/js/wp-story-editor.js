(()=>{var e,t,n,r,a,o={8968:(e,t,n)=>{"use strict";n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(72070),a=n(97765);const __WEBPACK_DEFAULT_EXPORT__=function(e){return(0,r.useContextSelector)(a.StoryAnimationContext,e??r.identity)}},44258:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>l,ANIMATION_PARTS:()=>s,ANIMATION_TYPES:()=>o,AXIS:()=>m,BACKGROUND_ANIMATION_EFFECTS:()=>i,BEZIER:()=>a,BG_MAX_SCALE:()=>E,BG_MIN_SCALE:()=>h,DIRECTION:()=>c,FIELD_TYPES:()=>f,ROTATION:()=>p,SCALE_DIRECTION:()=>d,SCALE_DIRECTION_MAP:()=>u,STORY_ANIMATION_STATE:()=>g});var r=n(91655);const a={linear:"linear",in:"ease-in",out:"ease-out",inOut:"ease-in-out",inQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",outQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",inOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",inCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",outCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",inQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",outQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",inOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",inQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",outQuint:"cubic-bezier(0.23, 1, 0.32, 1)",inOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",inSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",outSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",inOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",inExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",outExpo:"cubic-bezier(0.19, 1, 0.22, 1)",inOutExpo:"cubic-bezier(1, 0, 0, 1)",inCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",outCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",default:"cubic-bezier(0.4, 0.4, 0.0, 1)"},o={BLINK_ON:"blinkOn",BOUNCE:"bounce",FADE:"fade",FLIP:"flip",FLOAT_ON:"floatOn",MOVE:"move",PULSE:"pulse",SPIN:"spin",ZOOM:"zoom"},l={DROP:{value:"effect-drop",name:(0,r._x)("Drop","animation effect","web-stories")},FADE_IN:{value:"effect-fade-in",name:(0,r._x)("Fade In","animation effect","web-stories")},FLY_IN:{value:"effect-fly-in",name:(0,r._x)("Fly In","animation effect","web-stories")},PAN:{value:"effect-pan",name:(0,r._x)("Pan","animation effect","web-stories")},PULSE:{value:"effect-pulse",name:(0,r._x)("Pulse","animation effect","web-stories")},TWIRL_IN:{value:"effect-twirl-in",name:(0,r._x)("Twirl In","animation effect","web-stories")},WHOOSH_IN:{value:"effect-whoosh-in",name:(0,r._x)("Whoosh In","animation effect","web-stories")},ZOOM:{value:"effect-zoom",name:(0,r._x)("Scale","animation effect","web-stories")},ROTATE_IN:{value:"effect-rotate-in",name:(0,r._x)("Rotate In","animation effect","web-stories")}},i={ZOOM:{value:"effect-background-zoom",name:(0,r._x)("Zoom","animation effect","web-stories")},PAN:{value:"effect-background-pan",name:l.PAN.name},PAN_AND_ZOOM:{value:"effect-background-pan-and-zoom",name:(0,r._x)("Pan and Zoom","animation effect","web-stories")}},s={BLINK_ON:{value:o.BLINK_ON,name:(0,r._x)("Blink On","animation effect","web-stories")},BOUNCE:{value:o.BOUNCE,name:(0,r._x)("Bounce","animation effect","web-stories")},FADE:{value:o.FADE,name:(0,r._x)("Fade","animation effect","web-stories")},FLIP:{value:o.FLIP,name:(0,r._x)("Flip","animation effect","web-stories")},FLOAT_ON:{value:o.FLOAT_ON,name:(0,r._x)("Float On","animation effect","web-stories")},MOVE:{value:o.MOVE,name:(0,r._x)("Move","animation effect","web-stories")},PULSE:{value:o.PULSE,name:(0,r._x)("Pulse","animation effect","web-stories")},SPIN:{value:o.SPIN,name:(0,r._x)("Spin","animation effect","web-stories")},ZOOM:{value:o.ZOOM,name:(0,r._x)("Zoom","animation effect","web-stories")}},c={TOP_TO_BOTTOM:"topToBottom",RIGHT_TO_LEFT:"rightToLeft",BOTTOM_TO_TOP:"bottomToTop",LEFT_TO_RIGHT:"leftToRight"},d={DYNAMIC_PROPERTY_VALUE:"dynamicPropertyValue",SCALE_IN:"scaleIn",SCALE_OUT:"scaleOut",SCALE_OUT_TOP_RIGHT:"scaleOutTopRight",SCALE_OUT_BOTTOM_LEFT:"scaleOutBottomLeft",SCALE_IN_TOP_LEFT:"scaleInTopLeft",SCALE_IN_BOTTOM_RIGHT:"scaleInBottomRight"},u={SCALE_IN:[d.SCALE_IN_TOP_LEFT,d.SCALE_IN_BOTTOM_RIGHT],SCALE_OUT:[d.SCALE_OUT_TOP_RIGHT,d.SCALE_OUT_BOTTOM_LEFT]},p={CLOCKWISE:"clockwise",COUNTER_CLOCKWISE:"counterClockwise",PING_PONG:"pingPong"},m={X:"x",Y:"y"},f={DROPDOWN:"dropdown",HIDDEN:"hidden",ROTATION_PICKER:"rotation_picker",DIRECTION_PICKER:"direction_picker",NUMBER:"number",FLOAT:"float",TEXT:"text",CHECKBOX:"checkbox",RANGE:"RANGE"},g={RESET:"reset",PAUSED:"paused",SCRUBBING:"scrubbing",PLAYING:"playing",PLAYING_SELECTED:"playing-selected"},h=100,E=400},77175:(e,t,n)=>{"use strict";n.d(t,{FlyInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={flyInDir:a().shape(i.AnimationInputPropTypes)},c={flyInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.TOP_TO_BOTTOM,l.DIRECTION.BOTTOM_TO_TOP,l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},47730:(e,t,n)=>{"use strict";n.d(t,{PanEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={panDir:a().shape(i.AnimationInputPropTypes)},c={panDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.TOP_TO_BOTTOM,l.DIRECTION.BOTTOM_TO_TOP,l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.BOTTOM_TO_TOP}}},78582:(e,t,n)=>{"use strict";n.d(t,{PulseEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={scale:a().shape(i.AnimationInputPropTypes),iterations:a().shape(i.AnimationInputPropTypes)},c={scale:{label:(0,o.__)("Scale","web-stories"),tooltip:"Valid values are greater than or equal to 0",type:l.FIELD_TYPES.FLOAT,defaultValue:.5},iterations:{label:(0,o._x)("Pulses","number of pulses","web-stories"),type:l.FIELD_TYPES.NUMBER,defaultValue:1},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1450}}},32619:(e,t,n)=>{"use strict";n.d(t,{RotateInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={rotateInDir:a().shape(i.AnimationInputPropTypes)},c={rotateInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.LEFT_TO_RIGHT}}},27609:(e,t,n)=>{"use strict";n.d(t,{WhooshInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={whooshInDir:a().shape(i.AnimationInputPropTypes)},c={whooshInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.LEFT_TO_RIGHT},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},4891:(e,t,n)=>{"use strict";n.d(t,{ZoomEffectInputPropTypes:()=>c,default:()=>d});var r=n(45697),a=n.n(r),o=n(91655),l=n(87602),i=n(44258),s=n(87745);const c={scaleDirection:a().shape(s.AnimationInputPropTypes)},d={scaleDirection:{label:(0,o.__)("Direction","web-stories"),tooltip:(0,l.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,o.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.SCALE_DIRECTION.SCALE_IN,i.SCALE_DIRECTION.SCALE_OUT],defaultValue:i.SCALE_DIRECTION.SCALE_IN},duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}}},22188:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>d.ANIMATION_EFFECTS,ANIMATION_PARTS:()=>d.ANIMATION_PARTS,AnimationProps:()=>u.AnimationProps,BACKGROUND_ANIMATION_EFFECTS:()=>d.BACKGROUND_ANIMATION_EFFECTS,BG_MAX_SCALE:()=>d.BG_MAX_SCALE,BG_MIN_SCALE:()=>d.BG_MIN_SCALE,DIRECTION:()=>d.DIRECTION,FIELD_TYPES:()=>d.FIELD_TYPES,ROTATION:()=>d.ROTATION,SCALE_DIRECTION:()=>d.SCALE_DIRECTION,SCALE_DIRECTION_MAP:()=>d.SCALE_DIRECTION_MAP,STORY_ANIMATION_STATE:()=>d.STORY_ANIMATION_STATE,StoryAnimation:()=>c,getAnimationEffectDefaults:()=>u.getAnimationEffectDefaults,getAnimationEffectProps:()=>u.getAnimationEffectProps,getTotalDuration:()=>p.getTotalDuration,hasOffsets:()=>m.hasOffsets,useStoryAnimationContext:()=>s.default});var r=n(97765),a=n(79968),o=n(5954),l=n(98236),i=n(34433),s=n(8968);const c={Provider:r.default,WAAPIWrapper:a.default,AMPWrapper:o.default,AMPKeyframes:l.default,AMPAnimations:i.default};var d=n(44258),u=n(40320),p=(n(13418),n(18034)),m=n(40126);n(69332)},79871:(e,t,n)=>{"use strict";n.d(t,{BasicAnimationInputPropTypes:()=>s,basicAnimationProps:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={duration:a().shape(i.AnimationInputPropTypes),delay:a().shape(i.AnimationInputPropTypes)},c={duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1e3},delay:{label:(0,o.__)("Delay","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:0}};l.FIELD_TYPES.HIDDEN,(0,o.__)("Animation Type","web-stories"),l.FIELD_TYPES.DROPDOWN,Object.values(l.ANIMATION_TYPES),Object.values(l.ANIMATION_EFFECTS).map((e=>e.value)),l.FIELD_TYPES.DROPDOWN,(0,o.__)("Easing Presets","web-stories"),l.FIELD_TYPES.DROPDOWN,Object.keys(l.BEZIER),Object.keys(l.BEZIER)[0],l.FIELD_TYPES.TEXT,l.FIELD_TYPES.DROPDOWN,(0,o.__)('Valid values are numerical or the word "infinity"',"web-stories"),l.FIELD_TYPES.TEXT},40320:(e,t,n)=>{"use strict";n.d(t,{AnimationPart:()=>AnimationPart,AnimationProps:()=>Y.AnimationProps,getAnimationEffectDefaults:()=>V,getAnimationEffectProps:()=>W});var r=n(67294),a=n(44258);const o=e=>{switch(e){case a.FIELD_TYPES.CHECKBOX:return!1;case a.FIELD_TYPES.NUMBER:case a.FIELD_TYPES.FLOAT:case a.FIELD_TYPES.RANGE:return 0;default:return""}};var l=n(11533),i=n(96302),s=n(5644),c=n(3200),d=n(37308),u=n(84276),p=n(54913),m=n(63898),f=n(75590),g=n(51352),h=n(93886),E=n(44130),b=n(45697),y=n.n(b),_=n(91655),v=n(87745);y().shape(v.AnimationInputPropTypes);const w={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}};var T=n(77175),S=n(47730),C=n(78582),I=n(32619),x=n(27609),A=n(4891);y().shape(v.AnimationInputPropTypes);const k={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:1600}};var O=n(87602);y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes);const N={zoomDirection:{label:(0,_.__)("Direction","web-stories"),tooltip:(0,O.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,_.__)("Valid values are %1$s or %2$s","web-stories"),"zoomIn","zoomOut"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.SCALE_DIRECTION.SCALE_IN,a.SCALE_DIRECTION.SCALE_OUT],defaultValue:a.SCALE_DIRECTION.SCALE_OUT},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}},P=(y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes),{panDir:{label:(0,_.__)("Direction","web-stories"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.DIRECTION.TOP_TO_BOTTOM,a.DIRECTION.BOTTOM_TO_TOP,a.DIRECTION.LEFT_TO_RIGHT,a.DIRECTION.RIGHT_TO_LEFT],defaultValue:a.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}});var R=n(85805),M=n(85242),L=n(15604),D=n(75351),B=n(83072),F=n(60106),H=n(11006),U=n(76585),z=n(10638),G=n(8748),j=n(79871),Y=n(66776);function EmptyAMPTarget(e){let{children:t,...n}=e;return r.createElement("div",n,t)}function Z(){return{id:-1,generatedKeyframes:{},WAAPIAnimation:{},AMPTarget:EmptyAMPTarget,AMPAnimation:()=>null}}function AnimationPart(e,t){const n={[a.ANIMATION_TYPES.BOUNCE]:M.AnimationBounce,[a.ANIMATION_TYPES.BLINK_ON]:L.AnimationBlinkOn,[a.ANIMATION_TYPES.FADE]:D.AnimationFade,[a.ANIMATION_TYPES.FLIP]:B.AnimationFlip,[a.ANIMATION_TYPES.FLOAT_ON]:F.AnimationFloatOn,[a.ANIMATION_TYPES.MOVE]:H.AnimationMove,[a.ANIMATION_TYPES.PULSE]:U.AnimationPulse,[a.ANIMATION_TYPES.SPIN]:z.AnimationSpin,[a.ANIMATION_TYPES.ZOOM]:G.AnimationZoom,[a.ANIMATION_EFFECTS.FADE_IN.value]:i.EffectFadeIn,[a.ANIMATION_EFFECTS.FLY_IN.value]:s.EffectFlyIn,[a.ANIMATION_EFFECTS.PAN.value]:c.EffectPan,[a.ANIMATION_EFFECTS.PULSE.value]:d.EffectPulse,[a.ANIMATION_EFFECTS.TWIRL_IN.value]:u.EffectTwirlIn,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:p.EffectWhooshIn,[a.ANIMATION_EFFECTS.ZOOM.value]:m.EffectZoom,[a.ANIMATION_EFFECTS.DROP.value]:l.EffectDrop,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:f.EffectRotateIn,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:g.EffectBackgroundZoom,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:h.EffectBackgroundPan,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:E.EffectBackgroundPanAndZoom}[e?.value||e]||Z;return t.easing=t.easing||a.BEZIER[t.easingPreset],t.easingPreset=void 0,n(t)}function W(e){const t={[a.ANIMATION_EFFECTS.FLY_IN.value]:T.default,[a.ANIMATION_EFFECTS.PAN.value]:S.default,[a.ANIMATION_EFFECTS.PULSE.value]:C.default,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:I.default,[a.ANIMATION_EFFECTS.FADE_IN.value]:w,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:x.default,[a.ANIMATION_EFFECTS.ZOOM.value]:A.default,[a.ANIMATION_EFFECTS.DROP.value]:k,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:N,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:P,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:P};let n=Object.keys({...t[e]||{},...j.basicAnimationProps});if(e===a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value){const e="zoomDirection",t=n.indexOf(e);t>-1&&(n=[...n.slice(0,t),...n.slice(t+1),e])}return{type:e,props:(0,R.orderByKeys)({obj:{...j.basicAnimationProps,...t[e]||{}},keys:n})}}function V(e){const{props:t}=W(e);return Object.keys(t).reduce(((e,n)=>({...e,[n]:t[n].defaultValue??o(t[n].type)})),{})}},40126:(e,t,n)=>{"use strict";n.d(t,{getMediaBoundOffsets:()=>l,hasOffsets:()=>i});var r=n(1787),a=n(15985),o=n(7868);function l(e){let{element:t}=e;const n=(0,r.getBox)(t,a.PAGE_WIDTH,a.PAGE_HEIGHT),l=(0,o.default)(t.resource,n.width,n.height,t.scale,t.focalX,t.focalY);return{top:l.offsetY/l.height*100,right:(l.width-(l.offsetX+a.PAGE_WIDTH))/l.width*-1*100,left:l.offsetX/l.width*100,bottom:(l.height-(l.offsetY+a.FULLBLEED_HEIGHT))/l.height*-1*100}}function i(e){let{element:t}=e;const n=l({element:t});return r=n,a=e=>Math.abs(e)>1,Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return e[n]=a(r),e}),{});var r,a}},85805:(e,t,n)=>{"use strict";function r(e){let{obj:t={},keys:n=[]}=e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}function a(e){let{obj:t={},keys:n=[]}=e;return{...n.reduce(((e,n)=>{const r=t[n];return n in t&&(e[n]=r),e}),{}),...r({obj:t,keys:n})}}n.d(t,{orderByKeys:()=>a})},52589:(e,t,n)=>{"use strict";n.d(t,{CONTEXT_MENU_MIN_WIDTH:()=>g,default:()=>y});var r=n(67294),a=n(45697),o=n.n(a),l=n(72070),i=n(26300),s=n(40981),c=n(66044),d=n(66394),u=n(82302),p=n(8682),m=n(19683);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}const g=200,h=i.default.div.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-1xfj06c-0"})((e=>{let{theme:t}=e;return(0,i.css)(["background-color:",";border-radius:",";border:1px solid ",";gap:6px;display:flex;"," *:last-child{margin-bottom:0;}"],(e=>{let{isSecondary:n}=e;return n?t.colors.bg.secondary:t.colors.bg.primary}),(e=>{let{isHorizontal:n}=e;return n?t.borders.radius.medium:t.borders.radius.small}),t.colors.border.disable,(e=>{let{isHorizontal:t,isIconMenu:n}=e;return t?(0,i.css)(["height:52px;padding:7px 10px;align-items:center;"]):(0,i.css)(["flex-direction:column;width:",";padding:",";max-width:","px;",";"],n?"40px":"auto",n?"4px 3px":"8px 0",300,!n&&(0,i.css)(["min-width:","px;"],g))}))}));function E(e,t){const n=Array.from(e.querySelectorAll(s.FOCUSABLE_SELECTORS.join(", ")));return t?n:n.filter((e=>!e.matches(`[role="menu"], [role="menu"] [role="menu"] *, .${m.CONTEXT_MENU_SKIP_ELEMENT}`)))}h.propTypes={isIconMenu:o().bool,isHorizontal:o().bool,isSecondary:o().bool};const b=(0,l.forwardRef)(((e,t)=>{let{children:n,disableControlledTabNavigation:a,isOpen:o,onFocus:i=c.noop,isSubMenu:m=!1,isSecondary:g=!1,parentMenuRef:b,onCloseSubMenu:y=c.noop,dismissOnEscape:_=!0,...v}=e;const{isRTL:w}=v,{focusedId:T,isIconMenu:S,isHorizontal:C,onDismiss:I,setFocusedId:x}=(0,p.default)((e=>{let{state:t,actions:n}=e;return{focusedId:t.focusedId,isIconMenu:t.isIconMenu,isHorizontal:t.isHorizontal,onDismiss:n.onDismiss,setFocusedId:n.setFocusedId}})),A=(0,d.default)((()=>{o&&!m&&I()})),k=(0,l.useRef)(null),O=(0,l.useCombinedRefs)(A,k,t),N=(0,l.useCallback)((e=>{i(e);const t=k.current.children||[],n=t.length&&![...t].some((t=>t.contains(e.target)));if(k.current===e.target&&n){E(k.current)?.[0]?.focus()}}),[i]),P=(0,l.useCallback)((e=>{let t=e.findIndex((e=>e.id===T));return-1===t&&(t=e.findIndex((e=>e.id===document.activeElement.id))),t}),[T]),R=(0,l.useCallback)((e=>{const{key:t}=e;if("Escape"===t)return void I(e);const n=E(k.current,m);let r=P(n);-1===r&&n.length&&(x(n[0].id),r=0);const a=C?s.KEYS.LEFT:s.KEYS.UP;if([a,C?s.KEYS.RIGHT:s.KEYS.DOWN].includes(t)){let e=r+(a===t?-1:1);-1===e&&(e=n.length-1);const o=n[e%n.length];return o?.focus(),void x(o?.id||-1)}const o=C?s.KEYS.UP:w?s.KEYS.RIGHT:s.KEYS.LEFT;if(m&&o===t){b.current.querySelector('button[aria-expanded="true"]')?.focus(),y()}}),[m,P,C,w,I,x,b,y]);(0,l.useEffect)((()=>{if(o){const e=E(k.current);e.length&&(e?.[0]?.focus(),x(e?.[0]?.id))}}),[o,x]);const M=(0,l.useMemo)((()=>a?{key:[]}:{key:["tab"],shift:!0}),[a]);return(0,u.useKeyDownEffect)(k,{key:_?["esc","down","up","left","right"]:["down","up","left","right"]},R,[R,_]),(0,u.useKeyDownEffect)(k,M,I,[M,I]),r.createElement(h,f({ref:O,"data-testid":"context-menu-list",role:"menu",isIconMenu:S,isHorizontal:C,isSecondary:g,tabIndex:k.current?.contains(document.activeElement)?-1:0,onFocus:N},v),n)})),y=(o().node,o().func,o().bool,o().bool,o().func,o().bool,o().bool,o().bool,o().object,o().bool,b)},82302:(e,t,n)=>{"use strict";n.d(t,{Shortcut:()=>Shortcut,createShortcutAriaLabel:()=>A,isPlatformMacOS:()=>C,prettifyShortcut:()=>x,useEscapeToBlurEffect:()=>v,useGlobalIsKeyPressed:()=>_,useGlobalKeyDownEffect:()=>y,useKeyDownEffect:()=>h,useKeyEffect:()=>g});var r=n(67294),a=n(42441),o=n.n(a),l=n(72070),i=n(91655),s=n(8579);const c="__WEB_STORIES_MT__",d=["submit","button","checkbox","radio","image","file","range","reset","hidden"],u=["submit","button","checkbox","radio","image","file","reset"],p=(0,l.createRef)();function m(){p.current||(p.current=document.documentElement)}function f(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const{keys:o}=(0,l.useContext)(s.default),i=(0,l.useBatchingCallback)(r,a||[]);(0,l.useEffect)((()=>{const r=void 0!==e?.current?e.current:e;if(!r)return;if(1!==r.nodeType&&9!==r.nodeType)throw new Error("only an element or a document node can be used");const a=T(o,t);if(1===a.key.length&&""===a.key[0])return;const l=w(r),s=S(r,a,i);return l.bind(a.key,s,n),()=>{l.unbind(a.key,n)}}),[i,o])}function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,void 0,n,r)}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,"keydown",n,r)}function E(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,"keyup",n,r)}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const[r,a]=(0,l.useState)(!1),o=(0,l.useCallback)((()=>{a(!1)}),[]);return(0,l.useEffect)((()=>(window.addEventListener("blur",o),function(){window.removeEventListener("blur",o)})),[o]),h(e,t,(()=>a(!0)),n),E(e,t,(()=>a(!1)),n),r}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;m(),h(p,e,t,n)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return m(),b(p,e,t)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;h(e,{key:"esc",editable:!0},(()=>{const t=void 0!==e?.current?e.current:e,{activeElement:n}=document;t.contains(n)&&n.blur()}),t)}function w(e){return e[c]||(e[c]=new(o())(e))}function T(e,t){const n="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:r,shift:a=!1,repeat:o=!0,clickable:l=!0,editable:i=!1,dialog:s=!1,allowDefault:c=!1}=n,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}([].concat(r).map((t=>e[t]||t)).flat(),a);return{key:d,shift:a,clickable:l,repeat:o,editable:i,dialog:s,allowDefault:c}}function S(e,t,n){let{repeat:r,editable:a,clickable:o,dialog:l,allowDefault:i=!1}=t;return t=>{const{repeat:s,target:c}=t;if((r||!s)&&(a||!function(e){let{tagName:t,isContentEditable:n,type:r,readOnly:a}=e;if(!0===a)return!1;if(n||"TEXTAREA"===t)return!0;if("INPUT"===t)return!d.includes(r);return!1}(c))&&(o||!function(e){let{tagName:t,type:n}=e;if(["BUTTON","A"].includes(t))return!0;if("INPUT"===t)return u.includes(n);return!1}(c))&&(l||!function(e,t){if(1!==e.nodeType)return!1;const n=e.closest('dialog,[role="dialog"]');return n&&t!==n&&t.contains(n)}(c,e)))return n(t),i}}function C(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function I(e){const t=C();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function x(e){const t=C()?"":"+";return e.toLowerCase().replace("alt",I("alt")).replace("ctrl",I("ctrl")).replace("mod",I("mod")).replace("cmd",I("cmd")).replace("shift",I("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}function A(e){const t=C(),n=(0,i.__)("Command","web-stories"),r=(0,i.__)("Control","web-stories"),a=(0,i.__)("Option","web-stories"),o=(0,i.__)("Alt","web-stories"),l={alt:t?a:o,mod:t?n:r,
/* translators: Control key on the keyboard */
ctrl:(0,i.__)("Control","web-stories"),
/* translators: shift key on the keyboard */
shift:(0,i.__)("Shift","web-stories"),
/* translators: delete key on the keyboard */
delete:(0,i.__)("Delete","web-stories"),
/* translators: comma character ',' */
",":(0,i.__)("Comma","web-stories"),
/* translators: period character '.' */
".":(0,i.__)("Period","web-stories"),
/* translators: backtick character '`' */
"`":(0,i.__)("Backtick","web-stories")},s=t?" ":"+";
/* translators: Command key on the keyboard */return e.toLowerCase().replace("alt",l.alt).replace("ctrl",l.ctrl).replace("mod",l.mod).replace("cmd",l.cmd).replace("shift",l.shift).replace("delete",l.delete).replace(",",l[","]).replace(".",l["."]).replace("`",l["`"]).split(/[\s+]/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(s)}const Kbd=()=>r.createElement("kbd",null);function Shortcut(e){let{component:t=Kbd,shortcut:n=""}=e;const a=n.split(" ");return r.createElement(t,{"aria-label":A(n)},a.map(((e,n)=>r.createElement(t,{key:`${n}-${e}`},x(e)))))}},99566:(e,t,n)=>{"use strict";n.d(t,{Z_INDEX:()=>a});var r=n(91655);(0,r.__)("Search","web-stories"),(0,r.__)("Clear Search","web-stories"),(0,r.__)("Search","web-stories");const a={CLEAR_BUTTON:5}},19722:(e,t,n)=>{"use strict";n.d(t,{FOCUS_VISIBLE_DATA_ATTRIBUTE:()=>o,FOCUS_VISIBLE_SELECTOR:()=>a,overrideFocusOutlineStyles:()=>l});var r=n(26300);n.e(8624).then(n.t.bind(n,35202,23)).catch((()=>{}));const a="focus-visible",o="data-focus-visible-added",l=(0,r.css)([".js-focus-visible :focus:not(.","):not([data-focus-visible-added]),.js-focus-visible :focus-visible:not(.","):not([data-focus-visible-added]){outline:none;}"],a,a);(0,r.createGlobalStyle)(["",";"],l)},72676:(e,t,n)=>{"use strict";function r(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}n.d(t,{default:()=>r})},88766:(e,t,n)=>{"use strict";n.d(t,{LayerText:()=>y.LayerText,SHARED_DEFAULT_ATTRIBUTES:()=>r.SHARED_DEFAULT_ATTRIBUTES,elementFillContent:()=>s,elementWithBackgroundColor:()=>g,elementWithBorder:()=>f,elementWithBorderRadius:()=>p,elementWithFlip:()=>b,elementWithFont:()=>h,elementWithHighlightBorderRadius:()=>m,elementWithPosition:()=>c,elementWithRotation:()=>u,elementWithSize:()=>d,elementWithTextParagraphStyle:()=>E,useColorTransformHandler:()=>_.default});var r=n(56527),a=n(26300),o=n(18535),l=n(25784),i=n(95740);const s=(0,a.css)(["position:absolute;top:0;left:0;width:100%;height:100%;"]),c=(0,a.css)(["position:absolute;z-index:1;left:",";top:",";"],(e=>{let{x:t}=e;return`${t}px`}),(e=>{let{y:t}=e;return`${t}px`})),d=(0,a.css)(["width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),u=(0,a.css)(["transform:",";"],(e=>{let{rotationAngle:t}=e;return`rotate(${t}deg)`})),p=(0,a.css)(["",""],(e=>(0,l.getBorderRadius)(e))),m=e=>{let{borderRadius:t,dataToEditorY:n}=e;return n&&(0,a.css)(["border-radius:","px ","px ","px ","px;"],n(t?.topLeft||0),n(t?.topRight||0),n(t?.bottomRight||0),n(t?.bottomLeft||0))},f=(0,a.css)([""," background-clip:padding-box;"],(e=>{let{border:t,borderRadius:n,width:r,height:a,mask:o}=e;return(0,l.getBorderStyle)({border:t,borderRadius:n,width:r,height:a,mask:o})})),g=(0,a.css)(["",";"],(e=>{let{backgroundColor:t}=e;return t&&(0,o.default)(t)})),h=(0,a.css)(["white-space:pre-wrap;font-family:",";overflow-wrap:break-word;word-break:break-word;letter-spacing:normal;font-style:",";font-size:","px;font-weight:",";color:#000000;"],(e=>{let{font:t}=e;return(0,i.generateFontFamily)(t)}),(e=>{let{fontStyle:t}=e;return t}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t})),E=(0,a.css)(["margin:",";padding:",";line-height:",";text-align:",";overflow-wrap:break-word;"],(e=>{let{margin:t}=e;return t}),(e=>{let{padding:t}=e;return t||0}),(e=>{let{lineHeight:t}=e;return t}),(e=>{let{textAlign:t}=e;return t})),b=(0,a.css)(["transform:",";"],(e=>{let{transformFlip:t}=e;return t}));var y=n(81493),_=n(66027)},25205:(e,t,n)=>{"use strict";n.d(t,{BACKGROUND_TEXT_MODE:()=>i,BackgroundAudioPropType:()=>x,DEFAULT_PAGE_BACKGROUND_COLOR:()=>m,ELEMENT_TYPES:()=>r,MEDIA_ELEMENT_TYPES:()=>a,OverlayType:()=>s,StoryPropTypes:()=>I,TEXT_ELEMENT_DEFAULT_FONT:()=>l,createNewElement:()=>p,createPage:()=>f,duplicateElement:()=>h,duplicatePage:()=>E,elementTypes:()=>_.elementTypes,getDefinitionForType:()=>c.default,getTransformFlip:()=>y.default,isElementBelowLimit:()=>b.default,registerElementType:()=>_.registerElementType});const r={IMAGE:"image",SHAPE:"shape",TEXT:"text",VIDEO:"video",GIF:"gif",STICKER:"sticker",PRODUCT:"product"},a=[r.IMAGE,r.VIDEO,r.GIF,r.PRODUCT],o="((MULTIPLE))",l={family:"Roboto",weights:[100,300,400,500,700,900],styles:["italic","regular"],variants:[[0,100],[1,100],[0,300],[1,300],[0,400],[1,400],[0,500],[1,500],[0,700],[1,700],[0,900],[1,900]],fallbacks:["Helvetica Neue","Helvetica","sans-serif"],service:"fonts.google.com",metrics:{upm:2048,asc:1900,des:-500,tAsc:1536,tDes:-512,tLGap:102,wAsc:1946,wDes:512,xH:1082,capH:1456,yMin:-555,yMax:2163,hAsc:1900,hDes:-500,lGap:0}},i={NONE:"NONE",FILL:"FILL",HIGHLIGHT:"HIGHLIGHT"},s={NONE:"none",SOLID:"solid",LINEAR:"linear",RADIAL:"radial"};var c=n(77839),d=n(44586),u=n(72676);const p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,c.default)(e);if(!n)throw new Error(`Unknown element type: ${e}`);const{defaultAttributes:r}=n,a={...r,...t,type:e,id:(0,d.default)()};return t.isDefaultBackground?(0,u.default)(a,["backgroundColor"]):a};const m=(0,n(80852).default)(255,255,255),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t={x:1,y:1,width:1,height:1,mask:{type:"rectangle"},isBackground:!0,isDefaultBackground:!0},n=p("shape",t),r={elements:[n],backgroundColor:m,...e};return p("page",r)};var g=n(15985);const h=function(e){let{element:t,animations:n=[],existingElements:r=[]}=e;const{type:a,...o}=t,l={...t,...p(a,o)};l.basedOn=t.id,r.forEach((e=>{if(e.id===l.basedOn||e.basedOn===l.basedOn){const e=function(e,t){const n=e+30,r=t+30;return{x:g.PAGE_WIDTH-n>20?n:30,y:g.PAGE_HEIGHT-r>20?r:30}}(l.x,l.y);l.x=e.x,l.y=e.y}}));const i=n.filter((e=>e.targets.includes(t.id))).map((e=>({...e,targets:[l.id],id:(0,d.default)()}))).filter((e=>e.targets.length>0));return{element:l,elementAnimations:i}},E=e=>{const{elements:t,animations:n,postId:r,title:a,...o}=e,l=(0,u.default)(o,["postId","title"]),{elements:i,animations:s}=t.reduce(((e,t)=>{let{elements:r,animations:a}=e;const{element:o,elementAnimations:l}=h({element:t,animations:n});return{elements:[...r,o],animations:[...a,...l]}}),{elements:[],animations:[]}),c={elements:i,animations:s,...l};return p("page",c)};var b=n(58474),y=n(24901),_=n(55993),v=n(45697),w=n.n(v),T=n(15662),S=n(9675),C=n(22188);const I={},x=w().shape({id:w().number,src:w().string,length:w().number,lengthFormatted:w().string,mimeType:w().string});I.mask=w().shape({type:w().string.isRequired}),I.link=w().shape({url:w().string.isRequired,desc:w().string,needsProxy:w().bool,icon:w().string,rel:w().arrayOf(w().string)}),I.box=w().exact({x:w().number.isRequired,y:w().number.isRequired,width:w().number.isRequired,height:w().number.isRequired,rotationAngle:w().number.isRequired}),I.page=w().shape({id:w().string.isRequired,animations:w().arrayOf(w().shape(C.AnimationProps)),elements:w().arrayOf(w().shape(I.element)),overlay:w().oneOf(Object.values(s)),backgroundAudio:w().shape({resource:x,loop:w().bool,tracks:w().arrayOf(S.ResourcePropTypes.trackResource)})});const A={id:w().string.isRequired,type:w().string.isRequired};I.flip=w().shape({vertical:w().bool,horizontal:w().bool});const k={id:w().string.isRequired,type:w().string.isRequired,x:w().number.isRequired,y:w().number.isRequired,width:w().number.isRequired,height:w().number.isRequired,flip:I.flip,rotationAngle:w().number.isRequired,mask:I.mask,link:I.link,opacity:w().number,lockAspectRatio:w().bool,isBackground:w().bool},O={scale:w().number.isRequired,focalX:w().number,focalY:w().number};I.element=w().shape(k),I.layer=w().shape(A),I.elements={},I.elements.image=w().shape({...k,...O,resource:S.ResourcePropTypes.imageResource}),I.elements.video=w().shape({...k,...O,resource:S.ResourcePropTypes.videoResource,poster:w().string,tracks:w().arrayOf(S.ResourcePropTypes.trackResource),loop:w().bool}),I.elements.gif=w().shape({...k,...O,resource:S.ResourcePropTypes.gifResource}),I.elements.media=w().oneOfType([I.elements.image,I.elements.video,I.elements.gif]);const N=w().shape({family:w().string,service:w().string,weights:w().arrayOf(w().number),styles:w().arrayOf(w().string),variants:w().arrayOf(w().array),fallbacks:w().array}),P=w().shape({horizontal:w().oneOfType([w().number,w().oneOf([o])]),vertical:w().oneOfType([w().number,w().oneOf([o])]),locked:w().oneOfType([w().bool,w().oneOf([o])])}),R={content:w().string,backgroundTextMode:w().oneOf(Object.values(i)),backgroundColor:T.PatternPropType,font:N.isRequired,fontSize:w().number,lineHeight:w().number,padding:P,textAlign:w().string,tagName:w().oneOf(["h1","h2","h3","p","auto"])};I.textContent=w().shape({...R}),I.elements.text=w().shape({...k,...R}),I.elements.shape=w().shape({...k,backgroundColor:T.PatternPropType}),I.elements.sticker=w().shape({...k,sticker:w().shape({type:w().string.isRequired})}),I.elements.background=w().shape({...A,inner:I.element})},25784:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MASK:()=>a.DEFAULT_MASK,DisplayWithMask:()=>l.default,FrameWithMask:()=>y,MASKS:()=>a.MASKS,MaskTypes:()=>a.MaskTypes,OutputWithMask:()=>_.default,canMaskHaveBorder:()=>r.canMaskHaveBorder,canSupportMultiBorder:()=>r.canSupportMultiBorder,getBorderPositionCSS:()=>o.getBorderPositionCSS,getBorderRadius:()=>o.getBorderRadius,getBorderStyle:()=>o.getBorderStyle,getMaskByType:()=>r.getMaskByType,getResponsiveBorder:()=>o.getResponsiveBorder,shouldDisplayBorder:()=>o.shouldDisplayBorder});var r=n(99371),a=n(71356),o=n(34075),l=n(3562),i=n(67294),s=n(26300),c=n(72070),d=n(25205);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}const p={position:"absolute",top:0,left:0,right:0,bottom:0},m=(0,s.css)(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),f=s.default.svg.withConfig({displayName:"frame__DropTargetSVG",componentId:"sc-1cagagv-0"})([""," z-index:",";"],m,(e=>{let{active:t}=e;return t?1:-1})),g=s.default.svg.withConfig({displayName:"frame__Filler",componentId:"sc-1cagagv-1"})(["",""],m),h=s.default.path.withConfig({displayName:"frame__FillerPath",componentId:"sc-1cagagv-2"})(["pointer-events:all;"]),E=s.default.path.withConfig({displayName:"frame__DropTargetPath",componentId:"sc-1cagagv-3"})(["transition:opacity 0.5s;pointer-events:visibleStroke;opacity:",";stroke:",";"],(e=>{let{active:t}=e;return t?.3:0}),(e=>{let{theme:t}=e;return t.colors.border.selection})),b=s.default.div.withConfig({displayName:"frame__Wrapper",componentId:"sc-1cagagv-4"})(["width:100%;height:100%;::before{transition:opacity 0.5s;opacity:",";display:block;content:'';position:absolute;width:calc(100% + 8px);height:calc(100% + 8px);border-radius:8px;left:-4px;top:-4px;border:1px solid ",";}"],(e=>{let{hasBackgroundOutline:t}=e;return t?1:0}),(e=>{let{theme:t}=e;return t.colors.border.selection}));function WithDropTarget(e){let{element:t,children:n,hover:a,draggingResource:o,activeDropTargetId:l,isDropSource:s,registerDropTarget:d,unregisterDropTarget:p}=e;const m=(0,c.useRef)(null),{id:g,resource:h,isBackground:y}=t,_=(0,r.getElementMask)(t);if((0,c.useEffect)((()=>(d(g,m.current),()=>{p(g)})),[g,d,p]),!_)return n;const v=a&&!o||Boolean(o)&&s(o.type)&&o!==h,w=v&&!y,T=v&&y,S={vectorEffect:"non-scaling-stroke",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",d:_?.path};return i.createElement(b,{hasBackgroundOutline:T},n,i.createElement(f,{viewBox:"0 0 1 "+1/_.ratio,width:"100%",height:"100%",preserveAspectRatio:"none",active:l===t.id},i.createElement(E,u({},S,{strokeWidth:"3",style:{opacity:w?1:0}})),i.createElement(E,u({ref:m,strokeWidth:"48"},S))))}const y=(0,c.forwardRef)(((e,t)=>{let{element:n,fill:o,style:l,children:s,flip:m,draggingResource:f,activeDropTargetId:E,isDropSource:b,registerDropTarget:y,unregisterDropTarget:_,...v}=e;const[w,T]=(0,c.useState)(!1),{isBackground:S}=n,C={draggingResource:f,activeDropTargetId:E,isDropSource:b,registerDropTarget:y,unregisterDropTarget:_},I=(0,r.getElementMask)(n),x=m?{transform:(0,d.getTransformFlip)(m)}:null;if(!I?.type||S&&I.type!==a.MaskTypes.RECTANGLE)return i.createElement("div",u({style:{...o?p:{},...l,...x}},v),s);const A=`mask-${I.type}-${n.id}-frame`;return i.createElement("div",u({ref:t,style:{...o?p:{},...l,...x,...S?{}:{clipPath:`url(#${A})`}}},v,{onPointerOver:()=>T(!0),onPointerOut:()=>T(!1)}),i.createElement("svg",{width:0,height:0},i.createElement("defs",null,i.createElement("clipPath",{id:A,transform:`scale(1 ${I.ratio})`,clipPathUnits:"objectBoundingBox"},i.createElement("path",{d:I.path})))),i.createElement(g,{viewBox:"0 0 1 "+1/I.ratio,width:"100%",height:"100%",preserveAspectRatio:"none"},i.createElement(h,{fill:"none",d:I?.path})),i.createElement(WithDropTarget,u({element:n,hover:w},C,v),s))}));var _=n(12204)},50136:(e,t,n)=>{"use strict";n.d(t,{createBlob:()=>a,isBlobURL:()=>l,revokeBlob:()=>o});const r={};function a(e){const t=window.URL.createObjectURL(e);return r[t]=e,t}function o(e){(function(e){return r[e]})(e)&&window.URL.revokeObjectURL(e),delete r[e]}function l(e){return e?.startsWith("blob:")}},17001:(e,t,n)=>{"use strict";n.d(t,{CropMoveableGlobalStyle:()=>b,DefaultMoveableGlobalStyle:()=>_,InOverlay:()=>f,Moveable:()=>E,areEventsDragging:()=>S.default,withOverlay:()=>T});var r=n(67294),a=n(72070),o=n(29154),l=n(45697),i=n.n(l),s=n(26300);const c=(0,a.createContext)({container:null,layer:null});function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}const u=(0,s.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""})),p=s.default.div.withConfig({displayName:"overlay__Wrapper",componentId:"sc-1ibws6s-0"})([""," position:absolute;top:0;left:0;width:0;height:0;z-index:",";"],u,(e=>{let{zIndex:t}=e;return`${t}`}));const m=(0,a.forwardRef)((function InOverlayWithRef(e,t){let{zIndex:n,pointerEvents:o,render:l,children:i=null,...s}=e;const{container:u,overlay:m}=(0,a.useContext)(c);if(!u||!m)return null;const f=r.createElement(p,d({},s,{ref:t,zIndex:n||0,pointerEvents:o,onMouseDown:e=>e.stopPropagation()}),l?l({container:u,overlay:m}):i);return(0,a.createPortal)(f,m)})),f=m;function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const h=(0,a.forwardRef)((function MoveableWithRef(e,t){let{onContextMenu:n,...a}=e;return r.createElement(f,{onContextMenu:n,zIndex:10,pointerEvents:"initial",render:e=>{let{container:n}=e;return r.createElement(o.default,g({ref:t,container:n},a))}})}));h.propTypes={onContextMenu:i().func};const E=h,b=(0,s.createGlobalStyle)([".crop-moveable .moveable-control{background:"," !important;border:none !important;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s,.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{border:1px solid "," !important;border-radius:4px;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s{width:","px !important;height:","px !important;margin-left:-12px !important;}.crop-moveable .moveable-control.moveable-n{margin-top:-8px !important;}.crop-moveable .moveable-control.moveable-s{margin-top:0px !important;}.crop-moveable .moveable-control.moveable-e{margin-left:0 !important;}.crop-moveable .moveable-control.moveable-w{margin-top:0 !important;margin-left:-8px !important;}.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{width:","px !important;height:","px !important;margin-top:-12px !important;}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se,.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{left:initial !important;right:initial !important;top:initial !important;bottom:initial !important;background:"," !important;position:absolute !important;border-style:solid !important;border-color:"," !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{content:'';}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw{top:-","px !important;left:-","px !important;border-width:1px 0 0 1px !important;border-radius:2px 0 0 0 !important;}.crop-moveable .moveable-control.moveable-ne{top:-","px !important;right:-","px !important;border-width:1px 1px 0 0 !important;border-radius:0 2px 0 0 !important;}.crop-moveable .moveable-control.moveable-sw{left:-","px !important;bottom:-","px !important;border-width:0 0 1px 1px !important;border-radius:0 0 0 2px !important;}.crop-moveable .moveable-control.moveable-se{right:-","px !important;bottom:-","px !important;border-width:0 1px 1px 0 !important;border-radius:0 0 2px 0 !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{width:","px !important;height:","px !important;top:0;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-sw::before{left:","px !important;border-width:1px 1px 1px 0;border-radius:0 2px 2px 0;}.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-se::before{right:","px !important;border-width:1px 0 1px 1px;border-radius:2px 0 0 2px;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before{top:-","px !important;}.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{bottom:-","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after{top:","px !important;border-width:0 1px 1px 1px;border-radius:0 0 2px 2px;}.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{bottom:","px !important;border-width:1px 1px 0 1px;border-radius:2px 2px 0 0;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-sw::after{left:-","px !important;}.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-se::after{right:-",'px !important;}.crop-moveable .moveable-line.moveable-direction[data-line-index="0"]{margin-top:-4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="3"]{margin-top:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="1"]{margin-left:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="2"]{margin-left:-4px;}.crop-moveable .moveable-direction.moveable-line{background:'," !important;width:2px;height:2px;pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),24,8,8,24,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),7,7,1,1,1,7,1,7,7,7,17,8,6,6,1,1,8,17,6,6,1,1,(e=>{let{theme:t}=e;return t.colors.border.selection}));var y=n(37047);const _=(0,s.createGlobalStyle)([".default-moveable .moveable-control,.default-moveable .moveable-line.moveable-rotation-line .moveable-control{background:"," !important;border:1px solid "," !important;}.default-moveable.type-text .moveable-direction.moveable-n,.default-moveable.type-text .moveable-direction.moveable-s{pointer-events:none;}.default-moveable .moveable-control.moveable-n{display:none !important;}.default-moveable .moveable-line{border:0;background:transparent !important;width:1px;height:1px;}.default-moveable .moveable-horizontal{border-bottom:1px dashed "," !important;}.default-moveable .moveable-vertical{border-right:1px dashed "," !important;}.default-moveable .moveable-gap{border-color:"," !important;}.default-moveable .moveable-target{border-style:solid !important;}.default-moveable .moveable-control.moveable-s,.default-moveable .moveable-control.moveable-e,.default-moveable .moveable-control.moveable-w{border-radius:4px;}.default-moveable .moveable-control.moveable-nw,.default-moveable .moveable-control.moveable-ne,.default-moveable .moveable-control.moveable-sw,.default-moveable .moveable-control.moveable-se{border-radius:2px;width:8px;height:8px;margin-left:-4px;margin-top:-4px;}.default-moveable .moveable-control.moveable-s{height:6px !important;width:16px !important;margin-top:-3px !important;}.default-moveable .moveable-control.moveable-e{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable .moveable-control.moveable-w{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable.moveable-control-box .moveable-line.moveable-direction{background:"," !important;width:1px;height:1px;}.default-moveable.moveable-control-box .moveable-line.moveable-rotation-line{background:"," !important;width:1px;height:12px;top:28px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control{border-radius:50px;width:29px;height:29px;margin-left:-14.5px;top:10.5px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control::after{content:'';position:absolute;width:28px;height:28px;left:-1px;top:-1px;background-image:url(\"",'");background-size:100%;filter:invert(100%);}.default-moveable.hide-handles .moveable-line.moveable-rotation-line,.default-moveable.hide-handles .moveable-line.moveable-direction{display:none;}.default-moveable.visually-hide-handles .moveable-control.moveable-e,.default-moveable.visually-hide-handles .moveable-control.moveable-w,.default-moveable.visually-hide-handles .moveable-control.moveable-s,.default-moveable.visually-hide-handles .moveable-control.moveable-ne,.default-moveable.visually-hide-handles .moveable-control.moveable-nw,.default-moveable.visually-hide-handles .moveable-control.moveable-sw{opacity:0;}'],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.negativePress}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.selection}),y);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const w=s.default.div.withConfig({displayName:"withOverlay__Overlay",componentId:"sc-hntauo-0"})(["position:absolute;top:0;/*! @noflip */ left:0;width:0;height:0;z-index:",";"],(e=>{let{zIndex:t}=e;return t}));const T=function(e){const t=(0,a.forwardRef)((function WithOverlay(t,n){let{children:o,...l}=t;const[i,s]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),{zIndex:p=1}=l;return r.createElement(c.Provider,{value:{container:d,overlay:i}},r.createElement(e,v({ref:(0,a.useCombinedRefs)(n,u)},l),o,r.createElement(w,{ref:s,zIndex:p})))}));return t};var S=n(8580)},72070:(e,t,n)=>{"use strict";n.d(t,{Component:()=>o.Component,Fragment:()=>o.Fragment,StrictMode:()=>o.StrictMode,Suspense:()=>o.Suspense,cloneElement:()=>o.cloneElement,createContext:()=>a.createContext,createElement:()=>o.createElement,createPortal:()=>l.createPortal,createRef:()=>o.createRef,forwardRef:()=>o.forwardRef,identity:()=>a.identity,lazy:()=>o.lazy,memo:()=>o.memo,render:()=>l.render,renderToStaticMarkup:()=>f.default,shallowEqual:()=>b.default,unmountComponentAtNode:()=>l.unmountComponentAtNode,useBatchingCallback:()=>i.default,useCallback:()=>o.useCallback,useCombinedRefs:()=>s.default,useContext:()=>a.useContext,useContextReact:()=>o.useContextReact,useContextSelector:()=>c.default,useDebouncedCallback:()=>r.default,useEffect:()=>o.useEffect,useFocusOut:()=>d.default,useImperativeHandle:()=>o.useImperativeHandle,useInitializedValue:()=>E,useLayoutEffect:()=>o.useLayoutEffect,useMemo:()=>o.useMemo,usePrevious:()=>u.default,useReducer:()=>o.useReducer,useReduction:()=>p,useRef:()=>o.useRef,useResizeEffect:()=>m.default,useState:()=>o.useState,useUnmount:()=>g.default});var r=n(19302),a=n(24778),o=n(66803),l=n(73935),i=n(6075),s=n(20814),c=n(76969),d=n(24114),u=n(95471);function p(e,t){const[n,r]=(0,o.useReducer)(function(e){return(t,n)=>n&&n.type&&e[n.type]?e[n.type](t,n):t}(t),e),a=(0,o.useMemo)((()=>function(e,t){return Object.keys(e).reduce(((e,n)=>(e[n]||(e[n]=e=>{t({type:n,payload:e})}),e)),{})}(t,r)),[t]);return[n,a]}var m=n(13920),f=n(86757),g=n(84067),h=(n(40083),n(67294));const E=function(e){return(0,h.useState)(e)[0]};var b=n(14821)},66803:(e,t,n)=>{"use strict";n.d(t,{Component:()=>r.Component,Fragment:()=>r.Fragment,StrictMode:()=>r.StrictMode,Suspense:()=>r.Suspense,cloneElement:()=>r.cloneElement,createElement:()=>r.createElement,createRef:()=>r.createRef,forwardRef:()=>r.forwardRef,lazy:()=>r.lazy,memo:()=>r.memo,useCallback:()=>r.useCallback,useContextReact:()=>r.useContext,useEffect:()=>r.useEffect,useImperativeHandle:()=>r.useImperativeHandle,useLayoutEffect:()=>r.useLayoutEffect,useMemo:()=>r.useMemo,useReducer:()=>r.useReducer,useRef:()=>r.useRef,useState:()=>r.useState});var r=n(67294)},53649:(e,t,n)=>{"use strict";n.d(t,{fauxStylesToCSS:()=>i,useFauxSelection:()=>l});var r=n(72070),a=n(9041);const o="CUSTOM-FAUX";function l(e,t){const[n,l]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!e)return void l(null);const r=e.getCurrentContent(),i=e.getSelection(),s=i?.getHasFocus(),c=(u=i,!((d=n)&&u&&d.serialize().replace(/has focus: .*$/i,"")===u.serialize().replace(/has focus: .*$/i,"")));var d,u;const p=Boolean(n);if(!s&&!p){const n=a.Modifier.applyInlineStyle(r,i,o),s=a.EditorState.push(e,n,"change-inline-style");t(s),l(i)}s&&c&&p&&(t((e=>{try{const t=a.Modifier.removeInlineStyle(e.getCurrentContent(),n,o),r=a.EditorState.push(e,t,"change-inline-style");return a.EditorState.forceSelection(r,e.getSelection())}catch(t){return e}})),l(null))}),[n,e,t])}function i(e,t){if(!e.includes(o))return null;const n={backgroundColor:"rgba(169, 169, 169, 0.7)"};return t?.color&&(n.color=`var(--faux-selection-color, ${t.color})`),n}},56862:(e,t,n)=>{"use strict";n.d(t,{RichTextEditor:()=>T.default,RichTextProvider:()=>w,getCaretCharacterOffsetWithin:()=>x.default,getFontVariants:()=>I.default,getHTMLFormatters:()=>A.getHTMLFormatters,getHTMLInfo:()=>A.getHTMLInfo,usePasteTextContent:()=>C,useRichText:()=>S.default});var r=n(67294),a=n(72070),o=n(9041),l=n(34224),i=n(97643),s=n(47682),c=n(53649),d=n(21229),u=n(11810),p=n(92507);const m={BOLD:(0,n(28020).weightToStyle)("700"),ITALIC:p.ITALIC,UNDERLINE:p.UNDERLINE};const f=function(e,t,n){let r=n,a=null;return e.findStyleRanges((e=>(a=e,!0)),((e,n)=>{const l=a.getStyle().toArray(),i=function(e){return e.map((e=>e in m?m[e]:null)).filter(Boolean)}(l),s=t.merge({anchorOffset:e,focusOffset:n});l.forEach((e=>{r=o.Modifier.removeInlineStyle(r,s,e)})),i.forEach((e=>{r=o.Modifier.applyInlineStyle(r,s,e)}))})),r};class CustomBlockRenderMap{constructor(){this._map={unstyled:{element:"div",aliasedElements:["p","h1","h2","h3","blockquote","pre"]},"unordered-list-item":{element:"li"},"ordered-list-item":{element:"li"}}}mapKeys(e){return Object.keys(this._map).map((t=>e(t,this._map[t])))}}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=new CustomBlockRenderMap,{contentBlocks:r,entityMap:a}=(0,o.convertFromHTML)(e,void 0,n),l=o.ContentState.createFromBlockArray(r,a),i=h(l),s=o.Modifier.applyEntity(l,i,null),c=s.getBlocksAsArray();let d=s,u=null,p=0;c.forEach((e=>{const t=o.SelectionState.createEmpty(e.getKey());d=f(e,t,d);const n=e.getType();if("unstyled"!==n){let r=null;switch(n){case"unordered-list-item":r="– ";break;case"ordered-list-item":p=u===n?p+1:1,r=`${p}. `}r&&(d=o.Modifier.insertText(d,t,r));const a=t.merge({focusOffset:e.getLength()});d=o.Modifier.setBlockType(d,a,"unstyled")}u=n}));const m=h(d);return t.forEach((e=>{d=o.Modifier.applyInlineStyle(d,m,e)})),d.getBlockMap()};function h(e){const t=e.getFirstBlock(),n=e.getLastBlock();return o.SelectionState.createEmpty(t.getKey()).merge({focusKey:n.getKey(),focusOffset:n.getLength()})}var E=n(54530);const b=function(e){return(0,a.useCallback)(((t,n,r)=>{const a=r.getCurrentContent(),l=r.getSelection();let i,s;if(n){let e=(0,E.getPrefixStylesInSelection)(r,p.COLOR);e.length>1&&(e=e.slice(0,1));const t=g(n,e);i=o.Modifier.replaceWithFragment(a,l,t),s="insert-fragment"}else{const e=r.getCurrentInlineStyle();i=o.Modifier.replaceText(a,l,t,e),s="insert-characters"}const c=o.EditorState.push(r,i,s);return e(c),!0}),[e])};var y=n(33251);const _=function(e,t){const n=(0,a.useRef)(null),r=(0,a.useRef)(null);(0,a.useEffect)((()=>{n.current=e,e?e.getSelection().hasFocus&&(r.current=e.getSelection()):r.current=null}),[e]);const l=(0,a.useCallback)((function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const l=n.current,i=r.current,s=a?o.EditorState.forceSelection(l,i):l,c=e(s);t(c)}),[t]),i=(0,a.useCallback)((e=>`${e}InSelection`),[]),s=(0,a.useCallback)(((e,t)=>function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return l((t=>e(t,...r)),t)}),[l]);return(0,a.useMemo)((()=>y.default.reduce(((e,t)=>{let{setters:n,autoFocus:r}=t;return{...e,...Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[i(t),s(n,r)]})))}}),{})),[i,s])},v={isBold:!1,isItalic:!1,isUnderline:!1,isUppercase:!1};const w=function RichTextProvider(e){let{children:t,editingState:n}=e;const[p,m]=(0,a.useState)(null),f=(0,a.useRef)(null),g=(0,a.useMemo)((()=>p?(0,s.default)(p):v),[p]),h=(0,a.useCallback)((e=>{const{offset:t,clearContent:r,selectAll:a}=n||{};let l,s=o.EditorState.createWithContent((0,d.default)(e));r&&(s=o.EditorState.push(s,(0,d.default)(""),"remove-range")),a?l=(0,i.getSelectionForAll)(s.getCurrentContent()):isNaN(t)||(l=(0,i.getSelectionForOffset)(s.getCurrentContent(),t)),l&&(s=o.EditorState.forceSelection(s,l)),f.current=s.getCurrentInlineStyle(),m(s)}),[n,m]);(0,c.useFauxSelection)(p,m);const E=(0,a.useCallback)((e=>{let t=(0,i.getFilteredState)(e,p);""===t.getCurrentContent().getPlainText("")?t=o.EditorState.setInlineStyleOverride(t,f.current):f.current=t.getCurrentInlineStyle(),m(t)}),[p,m]),y=(0,a.useCallback)((()=>(0,i.getHandleKeyCommandFromState)(E)),[E]),w=b(m),T=(0,a.useCallback)((()=>{m(null)}),[m]),S=Boolean(p),C=_(p,m),I={state:{editorState:p,hasCurrentEditor:S,selectionInfo:g},actions:{setStateFromContent:h,updateEditorState:E,getHandleKeyCommand:y,handlePastedText:w,clearState:T,selectionActions:C,getContentFromState:u.default}};return r.createElement(l.default.Provider,{value:I},t)};var T=n(4517),S=n(56991);const C=function(e,t){return(0,a.useCallback)((n=>{const r=g(n).toArray(),a=o.ContentState.createFromBlockArray(r),l=o.EditorState.createWithContent(a),i=(0,u.default)(l);return!!i&&(e("text",{...t,content:i}),!0)}),[e,t])};var I=n(44397),x=n(40098),A=n(67187)},97643:(e,t,n)=>{"use strict";n.d(t,{getFilteredState:()=>c,getHandleKeyCommandFromState:()=>d,getSelectionForAll:()=>u,getSelectionForOffset:()=>p});var r=n(9041),a=n(84693),o=n(28020),l=n(28653),i=n(57778),s=n(15948);function c(e,t){return t.getCurrentContent()!==e.getCurrentContent()&&"insert-fragment"===e.getLastChangeType()?(0,a.filterEditorState)({blocks:[],styles:["BOLD","ITALIC","UNDERLINE"],entities:[],maxNesting:1,whitespacedCharacters:[]},e):e}const d=e=>(t,n)=>{const a=function(e,t){switch(e){case"bold":return o.default.setters.toggleBold(t);case"italic":return l.default.setters.toggleItalic(t);case"underline":return i.default.setters.toggleUnderline(t);case"uppercase":return s.default.setters.toggleUppercase(t);case"selectall":return r.EditorState.forceSelection(t,u(t.getCurrentContent()));default:return null}}(t,n);return a?(e(a),"handled"):"not-handled"};function u(e){const t=e.getFirstBlock(),n=e.getLastBlock();return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:n.getLength()})}function p(e,t){const n=e.getBlocksAsArray();let a=t;for(let e=0;e<n.length&&a>=0;e++){const t=n[e],o=t.getLength();if(a<=o){return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:a,focusKey:t.getKey(),focusOffset:a})}a-=o+1}return null}},24359:(e,t,n)=>{"use strict";n.d(t,{getTimeTracker:()=>c.default,initializeTracking:()=>r.default,trackClick:()=>o.default,trackError:()=>l.default,trackEvent:()=>i.default,trackTiming:()=>s});var r=n(73323),a=(n(82303),n(51165));n(35467);var o=n(99365),l=n(16373),i=n(86602);const s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click";(0,i.default)("timing_complete",{name:r,value:t,event_category:e,event_label:n,send_to:a.config.trackingId}),(0,i.default)(r,{value:t,event_category:e,event_label:n,send_to:a.config.trackingIdGA4})};n(53419);var c=n(20904)},2357:(e,t,n)=>{"use strict";n.d(t,{TransformProvider:()=>i,useTransform:()=>s,useTransformHandler:()=>c});var r=n(67294),a=n(72070),o=n(62531);const l=e=>{if(null===e)return!0;return 1===Object.keys(e).length&&"dropTargets"in e},i=function TransformProvider(e){let{children:t}=e;const n=(0,a.useRef)({}),i=(0,a.useRef)({}),[s,c]=(0,a.useState)(!1),d={state:{isAnythingTransforming:s},actions:{registerTransformHandler:(0,a.useCallback)(((e,t)=>{const r=n.current,a=r[e]||(r[e]=[]);return a.push(t),()=>{a.splice(a.indexOf(t),1)}}),[]),pushTransform:(0,a.useCallback)(((e,t)=>{const r=n.current,a=i.current,o=r[e];if(o&&o.forEach((e=>e(t))),a[e]=null===t?null:{...a[e],...t},l(a[e])){Object.values(a).every(l)&&(i.current={},c(!1))}else t.staticTransformation||c(!0)}),[]),clearTransforms:(0,a.useCallback)((()=>{i.current={},c(!1)}),[c])}};return r.createElement(o.default.Provider,{value:d},t)};const s=function(e){return(0,a.useContextSelector)(o.default,e??a.identity)};const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=s((e=>{let{actions:t}=e;return t.registerTransformHandler}));(0,a.useEffect)((()=>r(e,t)),n)}},15985:(e,t,n)=>{"use strict";n.d(t,{DANGER_ZONE_HEIGHT:()=>s,DEFAULT_DPR:()=>d,DEFAULT_EM:()=>c,FULLBLEED_HEIGHT:()=>i,FULLBLEED_RATIO:()=>l,PAGE_HEIGHT:()=>o,PAGE_RATIO:()=>r,PAGE_WIDTH:()=>a});const r=2/3,a=412,o=618,l=9/16,i=a/l,s=(i-o)/2,c=.02186*o,d=.5},1787:(e,t,n)=>{"use strict";n.d(t,{dataFontEm:()=>o,dataPixels:()=>a,dataToEditorX:()=>i,dataToEditorY:()=>s,dataToFontSizeY:()=>c,editorPixels:()=>l,editorToDataX:()=>d,editorToDataY:()=>u,getBox:()=>p});var r=n(15985);function a(e){return Number(e.toFixed(0))}function o(e){return Number((e*r.DEFAULT_EM).toFixed(1))}function l(e){return Number(e.toFixed(5))}function i(e,t){return l(e*t/r.PAGE_WIDTH)}function s(e,t){return l(e*t/r.PAGE_HEIGHT)}function c(e,t){return(s(e,t)/10).toFixed(6)}function d(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=e*r.PAGE_WIDTH/t;return!1===n?o:a(o)}function u(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=e*r.PAGE_HEIGHT/t;return!1===n?o:a(o)}function p(e,t,n){let{x:a,y:o,width:l,height:c,rotationAngle:d,isBackground:u}=e;return{x:i(u?0:a,t),y:s(u?-r.DANGER_ZONE_HEIGHT:o,n),width:i(u?r.PAGE_WIDTH:l,t),height:s(u?r.FULLBLEED_HEIGHT:c,n),rotationAngle:u?0:d}}},70333:(e,t,n)=>{"use strict";n.d(t,{calcRotatedObjectPositionAndSize:()=>a,default:()=>__WEBPACK_DEFAULT_EXPORT__,getCorners:()=>o});var r=n(1787);function a(e,t,n,r,a){if(!e||0===e)return{x:t,y:n,width:r,height:a};const{topLeftPoint:l,topRightPoint:i,bottomRightPoint:s,bottomLeftPoint:c}=o(e,t,n,r,a),d=Math.min(l.x,i.x,s.x,c.x),u=Math.min(l.y,i.y,s.y,c.y);return{x:d,y:u,width:Math.max(l.x,i.x,s.x,c.x)-d,height:Math.max(l.y,i.y,s.y,c.y)-u}}function o(e,t,n,r,a){const o=t+.5*r,i=n+.5*a,s=e*Math.PI/180;return{topLeftPoint:l(o,i,t,n,s),topRightPoint:l(o,i,t+r,n,s),bottomRightPoint:l(o,i,t+r,n+a,s),bottomLeftPoint:l(o,i,t,n+a,s)}}function l(e,t,n,a,o){const l=n-e,i=a-t,s=Math.sqrt(l*l+i*i);o+=Math.atan2(i,l);return{x:(0,r.dataPixels)(e+s*Math.cos(o)),y:(0,r.dataPixels)(t+s*Math.sin(o))}}const __WEBPACK_DEFAULT_EXPORT__=function(e){const t=e.map((e=>a(e.rotationAngle,e.x,e.y,e.width,e.height))),n=t[0];let r=n.x,o=n.y,l=r+n.width,i=o+n.height;return t.slice(1).forEach((e=>{r=Math.min(e.x,r),o=Math.min(e.y,o),l=Math.max(e.x+e.width,l),i=Math.max(e.y+e.height,i)})),{startX:r,startY:o,endX:l,endY:i,width:l-r,height:i-o}}},38803:(e,t,n)=>{var r={"./contact.json":[34759,2476],"./cover.json":[97478,9027],"./editorial.json":[16989,3871],"./list.json":[12233,2634],"./quote.json":[4971,2563],"./section_header.json":[48438,9843],"./step.json":[89696,7611],"./table.json":[81464,2761]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n.t(a,17)))}a.keys=()=>Object.keys(r),a.id=38803,e.exports=a},73502:(e,t,n)=>{"use strict";function r(e,t){return document?.fonts?document.fonts.load(e,t||"").then((()=>document.fonts.check(e,t||""))):Promise.resolve(!0)}n.d(t,{default:()=>r})},58860:(e,t,n)=>{"use strict";n.d(t,{ensureFontLoaded:()=>i.default,escapeHTML:()=>l,loadInlineStylesheet:()=>s.loadInlineStylesheet,loadStylesheet:()=>s.loadStylesheet,stripHTML:()=>a});const r=document.createElement("div");function a(e){return r.innerHTML=e,r.textContent}const o=document.createElement("div");function l(e){return o.textContent=e,o.innerHTML}var i=n(73502),s=n(99659)},99659:(e,t,n)=>{"use strict";function r(e,t){return new Promise(((n,r)=>{const a=document.createElement("link");a.id=t,a.rel="stylesheet",a.href=e,a.crossOrigin="anonymous",a.addEventListener("load",n),a.addEventListener("error",r),document.head.appendChild(a)}))}function a(e,t){if(!t)return;const n=document.createElement("style");n.textContent=t,n.id=e,document.head.appendChild(n)}n.d(t,{loadInlineStylesheet:()=>a,loadStylesheet:()=>r})},49925:(e,t,n)=>{"use strict";n.d(t,{DATA_VERSION:()=>r.DATA_VERSION,migrate:()=>r.migrate});var r=n(36267)},50542:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{addItem:()=>Fa,cancelUploading:()=>za,finishItem:()=>qa,finishMuting:()=>Za,finishTranscoding:()=>ja,finishTrimming:()=>Va,finishUploading:()=>Ua,removeItem:()=>Ka,replacePlaceholderResource:()=>$a,startMuting:()=>Ya,startTranscoding:()=>Ga,startTrimming:()=>Wa,startUploading:()=>Ha});var a={};n.r(a),n.d(a,{deleteMediaElement:()=>$l,fetchMediaError:()=>Zl,fetchMediaStart:()=>jl,fetchMediaSuccess:()=>Yl,prependMedia:()=>ii,removeAudioProcessing:()=>Jl,removeBaseColorProcessing:()=>ti,removeBlurhashProcessing:()=>ri,removePosterProcessing:()=>oi,resetFilters:()=>ql,setAudioProcessing:()=>Ql,setBaseColorProcessing:()=>ei,setBlurhashProcessing:()=>ni,setMedia:()=>li,setMediaType:()=>Xl,setNextPage:()=>Wl,setPosterProcessing:()=>ai,setSearchTerm:()=>Kl,updateMediaElement:()=>Vl});var o={};n.r(o),n.d(o,{deleteMediaElement:()=>Gl,deselectCategory:()=>pi,fetchCategoriesError:()=>di,fetchCategoriesStart:()=>si,fetchCategoriesSuccess:()=>ci,fetchMediaError:()=>Hl,fetchMediaStart:()=>Bl,fetchMediaSuccess:()=>Fl,selectCategory:()=>ui,setNextPage:()=>Ul,setSearchTerm:()=>fi,setSelectedProvider:()=>mi,updateMediaElement:()=>zl});var l={};n.r(l),n.d(l,{AlignBottom:()=>af,AlignCenter:()=>cf,AlignLeft:()=>mf,AlignMiddle:()=>Ef,AlignRight:()=>vf,AlignTextCenter:()=>Sf,AlignTextJustified:()=>xf,AlignTextLeft:()=>Of,AlignTextRight:()=>Rf,AlignTop:()=>Bf,Angle:()=>Uf,ArrowCloud:()=>lm,ArrowDown:()=>Gf.default,ArrowDownLeftCurved:()=>gd,ArrowDownRightCurved:()=>bd,ArrowLeft:()=>Yf,ArrowLeftCurved:()=>Vf,ArrowLeftLarge:()=>qf.default,ArrowOutline:()=>Xf,ArrowRight:()=>eg,ArrowRightCurved:()=>rg,ArrowRightLarge:()=>og.default,ArrowUp:()=>ig,ArrowsLeftRight:()=>dg,Border:()=>mg,BorderBox:()=>hg,Box1:()=>yg,Box4:()=>vg.default,Box4Alternate:()=>Tg,Bucket:()=>xg,Camera:()=>Ng,Captions:()=>Lg,Checkbox:()=>fp,Checklist:()=>Fg,Checkmark:()=>Ug.default,CheckmarkCircle:()=>Ap,CheckmarkSmall:()=>zg.default,ChevronDown:()=>Gg.default,ChevronDownSmall:()=>Xu.default,ChevronRightSmall:()=>Yg,ChevronUp:()=>Wg.default,ChevronUpSmall:()=>$g,CircleSpeed:()=>Qg,ColorBucket:()=>rh,ColorDrop:()=>lh,Corner:()=>ch,Cross:()=>Du.default,CrossLarge:()=>ph.default,CrossSmall:()=>mh.default,DistributeHorizontal:()=>gh,DistributeVertical:()=>yh,Dots:()=>wh,DotsFillSmall:()=>Ch,Eraser:()=>Oh,ExclamationOutline:()=>Ph.default,ExclamationTriangle:()=>Mh,Eye:()=>Cd,FloppyDisk:()=>Fh,GearWithGauge:()=>Gh,Keyboard:()=>tE,Launch:()=>rE.default,LetterAHeight:()=>oE,LetterAWidth:()=>sE,LetterBBold:()=>uE,LetterIItalic:()=>fE,LetterIOutline:()=>EE,LetterMOutline:()=>vE,LetterSStrikethrough:()=>SE,LetterT:()=>IE.default,LetterTArrow:()=>AE,LetterTLargeLetterTSmall:()=>BE,LetterTPlus:()=>NE,LetterTUppercase:()=>ME,LetterUUnderline:()=>UE,Link:()=>jE,LockClosed:()=>ZE.default,LockOpen:()=>VE,Magnifier:()=>KE.default,Media:()=>QE,MirrorLeftRight:()=>rb,MirrorUpDown:()=>sb,Muted:()=>gb,PageMargin:()=>bb,PagePlus:()=>vb,PageSwap:()=>xb,PatternLinear:()=>Pb,PatternRadial:()=>Bb,PatternSolid:()=>Ub,Pencil:()=>Gb.default,Percent:()=>Yb,Picture:()=>Vb,PictureSwap:()=>Qb,Pipette:()=>ty,Play:()=>ay,PlayFilled:()=>ly.default,PlayOutline:()=>uy,Plus:()=>fy,PlusFilled:()=>Ey,PlusFilledSmall:()=>sy,PlusOutline:()=>_y,QuestionMarkOutline:()=>Sy,Scissors:()=>Py,Shapes:()=>Ly,Sparkles:()=>Hy,StopFilled:()=>zy.default,StopOutline:()=>jy,Table:()=>Zy.default,TailedRectangle:()=>Vy,Timeline:()=>Ky,Trash:()=>Qy.default,TrashFilledSmall:()=>e_,TurningLine:()=>r_,Union:()=>l_,Video:()=>i_.default});var i={};n.r(i),n.d(i,{addPublisherLogo:()=>MJ,getPublisherLogos:()=>RJ});var s={};n.r(s),n.d(s,{addPageTemplate:()=>N1,autoSaveById:()=>m1,createTaxonomyTerm:()=>z1,deleteMedia:()=>C1,deletePageTemplate:()=>R1,getAuthors:()=>o1,getCurrentUser:()=>L1,getCustomPageTemplates:()=>O1,getFonts:()=>G1,getHotlinkInfo:()=>B1,getLinkMetadata:()=>I1,getMedia:()=>E1,getMediaById:()=>y1,getMediaForCorsCheck:()=>b1,getMutedMediaById:()=>_1,getOptimizedMediaById:()=>v1,getPosterMediaById:()=>w1,getProducts:()=>j1,getProxyUrl:()=>F1,getStoryById:()=>d1,getTaxonomies:()=>H1,getTaxonomyTerm:()=>U1,saveStoryById:()=>p1,updateCurrentUser:()=>D1,updateMedia:()=>S1,updatePageTemplate:()=>P1,uploadMedia:()=>T1});var c=n(67294);n.p=window.webStories.publicPath;var d=n(91655);for(const e of window?.webStories?.localeData||[])(0,d.setLocaleData)(e);var u=n(72070),p=n(26300),m=n(46324),f=n(22049),g=n(45246),h=n(17216),E=n(70250);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}const y=e=>{let{onClose:t,onSecondary:n,onPrimary:r,primaryText:a,secondaryText:o,primaryRest:l,secondaryRest:i,actions:s,children:d,...y}=e;const _=(0,u.useMemo)((()=>a&&c.createElement(m.Button,b({type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>r?.()},l),a)),[a,l,r]),v=(0,u.useMemo)((()=>o&&c.createElement(m.Button,b({type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>n?.()||t()},i),o)),[o,i,n,t]);return c.createElement(p.ThemeProvider,{theme:{...g.theme,colors:h.light}},c.createElement(E.Dialog,b({onClose:t},y,{actions:s||c.createElement(c.Fragment,null,v,_)}),d))};var _=n(14194),v=n(7471),w=n(11756),T=n(59042),S=n(1745),C=n(2357),I=n(17001),x=n(95370);const A=(0,p.createGlobalStyle)(["ul#adminmenu a.wp-has-current-submenu::after{border-right-color:",";}.web-stories-content b,.web-stories-content strong{font-weight:bold;}body.edit-story #wpbody *{",";}"],g.theme.colors.bg.secondary,x.scrollbarCSS);const k=g.theme;var O=n(24359);const N=p.default.div.withConfig({displayName:"errorActions__Message",componentId:"sc-mspoll-0"})(["color:#fff;font-size:16px;font-weight:300;line-height:1.6;padding:20px;button{margin-right:6px;}"]),P=p.default.textarea.withConfig({displayName:"errorActions__TextArea",componentId:"sc-mspoll-1"})(["width:100%;min-height:200px;"]),R=p.default.p.withConfig({displayName:"errorActions__P",componentId:"sc-mspoll-2"})(["margin:0 0 8px 0;"]),M=p.default.div.withConfig({displayName:"errorActions__Wrapper",componentId:"sc-mspoll-3"})(["display:flex;"]);const L=function ErrorActions(e){let{error:t,errorInfo:n}=e;const r=`${t}\n${n.componentStack}`;return c.createElement(N,null,c.createElement(R,null,(0,d.__)("Something went wrong!","web-stories")),c.createElement(R,null,(0,d.__)("The editor has crashed. Please try reloading the page and report the error using the button below.","web-stories")),c.createElement(R,null,(0,d.__)("Apologies for the inconvenience.","web-stories")),c.createElement(R,null,c.createElement(P,{readOnly:!0,value:r,onFocus:e=>e.target.setSelectionRange(0,r.length)})),c.createElement(M,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>{window.location.reload(!0)}},(0,d.__)("Reload","web-stories")),c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,href:"https://wordpress.org/support/plugin/web-stories/#new-topic-0",target:"_blank",rel:"noreferrer"},(0,d.__)("Report Error","web-stories"))))};class ErrorBoundary extends u.Component{state={error:null,errorInfo:null};componentDidCatch(e,t){this.setState({error:e,errorInfo:t});const n=t?`${e.message}\n\n${t.componentName}\n${t.componentStack}`:e.message;(0,O.trackError)("editor_error_boundary",n,!0)}render(){const{error:e,errorInfo:t}=this.state;return e?c.createElement(L,{error:e,errorInfo:t}):this.props.children}}const D=ErrorBoundary,B=(0,u.createContext)({});const F=function ConfigProvider(e){let{config:t,children:n}=e;return c.createElement(B.Provider,{value:t},n)};const H=function(e){return(0,u.useContextSelector)(B,e??u.identity)};var U=n(30065),z=n(16769);const G=(0,U.default)(z.default);const j=(0,u.createContext)({state:{},actions:{}});const Y=function APIProvider(e){let{children:t}=e;const{apiCallbacks:n,cdnURL:r}=H(),a=(0,u.useRef)({base:[]});return n.getPageTemplates=(0,u.useCallback)((async()=>(0===a.current.base.length&&(a.current.base=await async function(e){let{cdnURL:t}=e;const n=await G(t),r={createdBy:"Google",modified:"2020-04-21"};return n.map(((e,t)=>({id:t+1,...r,...e})))}({cdnURL:r})),a.current.base)),[r]),c.createElement(j.Provider,{value:{actions:n}},t)};const Z=function(e){return(0,u.useContextSelector)(j,e??u.identity)},W=e=>{let{name:t=""}=e;return t.includes(".")?t.split(".").slice(0,-1).join("."):t},V=e=>{const t=new window.FileReader;return new Promise(((n,r)=>{t.onload=()=>n(t),t.onerror=r,t.readAsArrayBuffer(e)}))};var $=n(50136),q=n(86957);const K=async e=>{const t=await(0,q.default)({src:e});return{width:t.naturalWidth,height:t.naturalHeight}},X=e=>e?.split("/")[0]||null;const src_normalizeResourceSizes=function(e){const t={};if(!e)return t;for(const n of Object.keys(e)){const r=e[n];t[n]={...r,width:Number(r.width),height:Number(r.height)}}return t};const Q=function(e){let{baseColor:t,blurHash:n,type:r,mimeType:a,creationDate:o,src:l,width:i,height:s,poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:f,sizes:g,attribution:h,output:E,isPlaceholder:b=!1,isOptimized:y=!1,isMuted:_=!1,isExternal:v=!1,trimData:w,needsProxy:T=!1}=e;return{baseColor:t,blurHash:n,type:r||X(a),mimeType:a,creationDate:o,src:l,width:Number(i||0),height:Number(s||0),poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:f,sizes:src_normalizeResourceSizes(g),attribution:h,output:E,isPlaceholder:b,isOptimized:y,isMuted:_,isExternal:v,trimData:w,needsProxy:T}};var J=n(15985);const ee=function(e){let{width:t,height:n,posterGenerated:r,posterWidth:a,posterHeight:o}=e;return r&&a&&o?{width:a,height:o}:t||n?{width:t,height:n}:{width:J.PAGE_WIDTH,height:J.FULLBLEED_HEIGHT}},te=e=>{const t=document.createElement("video");return t.muted=!0,t.crossOrigin="anonymous",t.preload="metadata",new Promise(((n,r)=>{t.addEventListener("loadedmetadata",(()=>n(t))),t.addEventListener("error",r),t.src=e}))};const ne=async function(e){const t=await te(e);return new Promise(((e,n)=>{t.addEventListener("canplay",(()=>e(t)),{once:!0}),t.addEventListener("error",n),t.preload="auto"}))},re=e=>e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});const ae=function(e){const t=parseInt(e/3600);e%=3600;const n=parseInt(e/60);return e%=60,t?`${t}:${re(n)}:${re(e)}`:`${n}:${re(e)}`};const oe=function(e){const t=!isNaN(e.duration)&&1/0!==e.duration?e.duration:0,n=Math.round(t);return{length:n,lengthFormatted:ae(n)}};const le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.99;return e.currentTime===t?Promise.resolve():new Promise(((n,r)=>{e.addEventListener("seeking",(e=>{const t=setTimeout((()=>{clearTimeout(t),r(e)}),3e3)})),e.addEventListener("error",r),e.addEventListener("seeked",(()=>n(e)),{once:!0}),e.currentTime=t}))};const ie=function(e){return e.mozHasAudio||Boolean(e.webkitAudioDecodedByteCount)||Boolean(e.audioTracks?.length)};const se=function(e,t,n){return new File([e],t,{type:n})};const ce=function(e){return new Promise((function(t){e.toBlob((e=>{t(e,"image/jpeg")}))}))};const de=function(e){const t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),ce(t)};var ue=n(44586);const pe={100:(0,d._x)("Thin","font weight","web-stories"),200:(0,d._x)("Extra-light","font weight","web-stories"),300:(0,d._x)("Light","font weight","web-stories"),400:(0,d._x)("Regular","font weight","web-stories"),500:(0,d._x)("Medium","font weight","web-stories"),600:(0,d._x)("Semi-bold","font weight","web-stories"),700:(0,d._x)("Bold","font weight","web-stories"),800:(0,d._x)("Extra-bold","font weight","web-stories"),900:(0,d._x)("Black","font weight","web-stories")},me=2147483648,fe="jpeg",ge="image/jpeg",he="video/mp4",Ee="mp4",be=720,ye=1280,_e="((MULTIPLE))",ve=(0,d.__)("Mixed","web-stories"),we={PAGE_NAVIGATION:{category:"page",label:"arrow_navigate"},PAGE_PREVIEW_CLICK:{category:"page",label:"carousel_navigate"},PAGE_ADD:{category:"page",label:"add_new"},PAGE_DELETE:{category:"page",label:"delete"},SELECT_ELEMENT:{category:"select_element"},LIBRARY_PANEL_CLICK:{category:"library_panel"},DESIGN_PANEL_CLICK:{category:"design_panel"},INSERT_ELEMENT:{category:"insert_element"},DELETE_ELEMENT:{category:"delete_element"},SET_BACKGROUND_MEDIA:{category:"background",label:"set_media_as_bg"}},Te={FILL:"FILL",FIT:"FIT",FIXED:"FIXED"},Se={OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},Ce=300,Ie=12,xe=150,Ae="FRONT",ke="BACK",Oe="FORWARD",Ne="BACKWARD",Pe=400,Re=700,Me={horizontal:8,vertical:4},Le="dark",De="light",Be="style",Fe="colors",He=[],Ue=e=>e+"-poster."+fe,ze=e=>{const t=W(e),n=X(e.type);return r={type:n||"image",mimeType:"image"===n?"image/png":"video/mp4",src:"",...ee({}),alt:t},Q({...r,isPlaceholder:!0});var r},Ge=async e=>{const t=X(e.type);let n=ze(e),r=null;try{if("image"===t&&(n=await(async e=>{const t=W(e),n=e.type,r=await V(e),a=(0,$.createBlob)(new window.Blob([r.result],{type:n})),{width:o,height:l}=await K(a);return Q({type:"image",mimeType:n,src:a,...ee({width:o,height:l}),alt:t})})(e)),"video"===t){const t=await(async e=>{const t=W(e),n=e.type,r=await V(e),a=(0,$.createBlob)(new Blob([r.result],{type:n})),o=await ne(a),l=""!==o.canPlayType(n),{length:i,lengthFormatted:s}=oe(o);await le(o);const c=ie(o),d=se(await de(o),Ue(W(e)),ge),u=(0,$.createBlob)(d),{width:p,height:m}=await K(u);return{resource:Q({type:"video",mimeType:n,src:l?a:"",...ee({width:p,height:m}),poster:u,isMuted:!c,length:i,lengthFormatted:s,alt:t}),posterFile:d}})(e);n=t.resource,r=t.posterFile}}catch{}return n.id=(0,ue.default)(),{resource:n,posterFile:r}};var je,Ye,Ze=n(87602),We=n(84967),Ve=n(67480),$e=n(91778);function qe(){return qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}const SvgTenorLogoWhite=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qe({viewBox:"0 0 1386 177",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,je||(je=c.createElement("defs",null,c.createElement("path",{id:"a",d:"M0 .136H92.92v175.707H0z"}),c.createElement("path",{id:"c",d:"M0 .383h82.728V137.28H0z"}))),Ye||(Ye=c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("path",{d:"M961.4 97.28c-.594-5.14-2.057-9.885-3.995-14.512-11.547-27.168-41.562-27.88-56.984-14.632-8.107 6.96-12.892 15.858-15.265 26.14-.237.949-.316 1.898-.514 3.005H961.4Zm-77.193 20.13c.95 7.118 3.005 13.484 6.644 19.218 8.541 13.485 20.959 19.892 36.856 19.773 13.05-.08 24.24-4.825 33.89-13.525 5.062-4.587 12.18-3.717 15.739 1.78 2.57 3.955 2.056 8.74-1.503 12.299-10.796 10.795-23.648 17.518-38.873 19.377-9.965 1.226-19.89.988-29.58-2.017-22.066-6.841-36.737-21.473-43.262-43.46-7.632-25.823-3.559-49.827 14.434-70.47 12.22-13.96 28.038-20.603 46.663-20.286 16.056.276 30.055 5.734 41.325 17.4 9.372 9.688 14.553 21.512 16.925 34.641.91 4.983 1.305 10.045 1.543 15.106.277 5.576-4.073 9.926-9.65 10.203-.79.04-1.581 0-2.372 0h-85.971c-.791-.04-1.622-.04-2.808-.04ZM1256.802 109.383c-.198-13.564-4.113-24.874-12.694-34.444-17.518-19.575-49.51-18.824-66.318 1.344-13.999 16.807-14.987 46.466 1.266 64.736 14.473 16.293 40.494 19.654 58.21 7 13.485-9.65 19.14-23.293 19.536-38.636m-113.337-1.82c.04-34.957 27.128-67.82 68.571-67.74 38.636.04 68.255 29.975 68.177 68.887-.08 38.24-30.292 68.057-69.007 68.097-37.291 0-67.82-31.161-67.741-69.244M1030.173 59.042c2.491-2.373 4.508-4.39 6.604-6.288 10.123-9.254 22.224-13.05 35.709-12.931 10.637.118 20.643 2.491 29.5 8.66 10.994 7.672 16.966 18.547 19.298 31.478a76.652 76.652 0 0 1 1.187 12.773c.119 24.202.04 48.364.04 72.566 0 4.626-2.927 9.016-7.237 10.598-4.508 1.66-8.74.988-12.22-2.492-2.451-2.412-3.52-5.457-3.52-8.937.04-22.422.12-44.805-.078-67.227-.04-4.429-.672-8.976-1.74-13.247-3.362-13.09-12.734-21.038-26.14-22.58-9.53-1.108-18.586.395-26.534 6.168-10.559 7.672-14.79 18.587-14.83 31.241-.079 22.066 0 44.172-.04 66.238 0 8.463-8.225 13.96-16.055 10.757-4.152-1.7-6.96-6.21-6.96-11.27v-113.1c0-4.469 2.057-7.87 5.853-10.084 3.915-2.294 7.988-2.175 11.824.237 3.282 2.096 5.26 5.141 5.339 9.175.04 2.61 0 5.14 0 8.265",fill:"currentColor"}),c.createElement("g",{transform:"translate(760 .259)"},c.createElement("mask",{id:"b",fill:"currentColor"},c.createElement("use",{xlinkHref:"#a"})),c.createElement("path",{d:"M49.11 42.054h31.044c4.27.199 7.75 1.583 9.965 5.419 3.678 6.445-.079 14.236-7.434 15.343-1.147.158-2.373.198-3.56.197H49.037V135.817c.075 4.745.826 9.293 4.03 13.168 2.61 3.164 6.129 4.509 9.965 5.102 5.734.91 11.428.434 17.004-1.306 5.3-1.7 10.52.673 12.299 5.616 1.819 5.022-.752 9.965-5.655 12.338-6.644 3.243-13.604 4.666-20.96 5.062-19.06.95-36.183-12.892-39.07-31.794-.395-2.452-.514-4.983-.514-7.475-.04-23.53-.04-47.058-.035-70.588v-2.728c-.874-.04-1.586-.12-2.258-.12-4.35 0-8.7.08-13.05-.039C3.674 62.856-.914 57.517.154 50.794c.751-4.745 5.062-8.304 10.48-8.462 4.27-.119 8.58-.04 12.852-.04 2.61 0 2.61 0 2.614-2.728V12.08C26.096 5.357 30.96.216 37.445.136c6.486-.078 11.587 5.102 11.626 11.905.04 9.213 0 18.467 0 27.681.04.751.04 1.542.04 2.53v-.198Z",fill:"currentColor",mask:"url(#b)"})),c.createElement("g",{transform:"translate(1302.955 39.409)"},c.createElement("mask",{id:"d",fill:"currentColor"},c.createElement("use",{xlinkHref:"#c"})),c.createElement("path",{d:"M23.095 28.135c3.4-3.875 6.405-7.711 9.886-11.112 7.948-7.75 17.28-13.169 28.275-15.344 3.321-.672 6.801-.83 10.202-.672 6.446.356 11.27 5.734 11.27 12.061 0 6.249-4.903 11.548-11.27 12.14-4.706.436-9.49.515-14.117 1.503-12.694 2.73-21.671 10.4-27.445 21.909-5.062 10.044-6.762 20.88-6.801 31.992-.08 14.829 0 29.658 0 44.488 0 6.88-5.063 12.22-11.588 12.18C4.943 137.24 0 132.139 0 125.258V11.803C0 6.663 3.638 1.996 8.542.77c5.378-1.345 10.598.87 12.93 5.813.91 1.898 1.425 4.113 1.504 6.248.237 4.39.079 8.819.079 13.248.04.672.04 1.305.04 2.056",fill:"currentColor",mask:"url(#d)"})),c.createElement("path",{d:"M35.938 68.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.75 0-9.104-.917-13.062-2.75s-7.312-4.5-10.063-8v34.25h-12v-90.5h11.5v10.5c2.667-3.667 6.042-6.437 10.126-8.313 4.083-1.875 8.583-2.812 13.5-2.812Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.937.98-11.312 2.938-3.375 1.958-6.042 4.687-8 8.187-1.958 3.5-2.938 7.542-2.938 12.125s.959 8.646 2.876 12.188c1.916 3.541 4.583 6.291 8 8.25 3.416 1.958 7.208 2.937 11.375 2.937Zm78.5 10.5c-6.584 0-12.5-1.458-17.75-4.375s-9.355-6.937-12.313-12.063c-2.958-5.125-4.438-10.937-4.438-17.437 0-6.5 1.48-12.312 4.438-17.438 2.958-5.125 7.062-9.124 12.313-12 5.25-2.875 11.166-4.312 17.75-4.312 6.583 0 12.479 1.437 17.687 4.313 5.208 2.875 9.292 6.874 12.25 12 2.958 5.125 4.438 10.937 4.438 17.437 0 6.5-1.48 12.312-4.438 17.438-2.958 5.125-7.042 9.145-12.25 12.062s-11.104 4.375-17.688 4.375Zm0-10.5c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.02-4.708 7.938-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.563-6.27-7.938-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.25 0-8.062.958-11.437 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm148.375-56.5L237.063 135h-11.5l-19.125-50.25L187.063 135h-11.5l-24.625-66.25h11.375l19.25 52.75 20-52.75h10.125l19.625 53 19.75-53h10.75Zm69.125 33.5c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm59.875 1.625c2.083-3.833 5.166-6.75 9.25-8.75 4.083-2 9.041-3 14.875-3V79.75c-.667-.083-1.584-.125-2.75-.125-6.5 0-11.605 1.937-15.313 5.813-3.708 3.875-5.563 9.395-5.563 16.562v33h-12V68.75h11.5v11.125Zm97.125 22.375c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm110.875-36V135h-11.5v-10.5c-2.667 3.667-6.042 6.458-10.125 8.375-4.084 1.917-8.584 2.875-13.5 2.875-6.417 0-12.167-1.417-17.25-4.25-5.084-2.833-9.063-6.812-11.938-11.938-2.875-5.125-4.313-11.02-4.313-17.687 0-6.667 1.438-12.542 4.313-17.625s6.854-9.042 11.938-11.875c5.083-2.833 10.833-4.25 17.25-4.25 4.75 0 9.124.896 13.125 2.688 4 1.791 7.333 4.437 10 7.937v-36.5h12Zm-34.125 83c4.166 0 7.958-.98 11.375-2.938 3.416-1.958 6.083-4.708 8-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.584-6.27-8-8.187-3.417-1.917-7.209-2.875-11.375-2.875-4.25 0-8.063.958-11.438 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm123.625-57.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.916 0-9.416-.958-13.5-2.875-4.083-1.917-7.458-4.708-10.125-8.375V135h-11.5V42.25h12v36.5c2.667-3.5 6-6.146 10-7.938 4-1.791 8.375-2.687 13.125-2.687Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.958.958-11.375 2.875-3.416 1.917-6.083 4.646-8 8.188-1.916 3.541-2.875 7.604-2.875 12.187 0 4.583.959 8.646 2.875 12.188 1.917 3.541 4.584 6.291 8 8.25 3.417 1.958 7.209 2.937 11.375 2.937Zm106.875-56.5-32.125 72.875c-2.834 6.75-6.146 11.5-9.938 14.25-3.792 2.75-8.354 4.125-13.688 4.125-3.25 0-6.395-.52-9.437-1.563-3.042-1.041-5.563-2.562-7.563-4.562l5.125-9c3.417 3.25 7.375 4.875 11.875 4.875 2.917 0 5.355-.77 7.313-2.313 1.958-1.541 3.73-4.187 5.313-7.937l2.125-4.625-29.25-66.125h12.5l23.125 53 22.875-53h11.75Z",fill:"currentColor",fillRule:"nonzero"}))))},Ke=(0,c.memo)(SvgTenorLogoWhite);var Xe;function Qe(){return Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}const SvgUnsplashLogoFull=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 457.19 104.19","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xe||(Xe=c.createElement("path",{d:"M59.88 38.66h27.53v48.75H0V38.66h27.53v24.37h32.35zm93 25c0 8.25-5.45 13.13-12.9 13.13-7.28 0-12.81-4.88-12.81-13.13V24.41h-12.22v39.13c0 15.45 11 25.21 25.06 25.21s25.15-9.76 25.15-25.21V24.41h-12.25zm43.7-21.13c-4.7 0-9.94 2-12.6 6.57v-5.41h-11.45v43.64h11.81v-25.1c0-5 3-9 8.16-9 5.68 0 8.08 3.82 8.08 8.7v25.4h11.8V59.82c.03-9.59-4.94-17.31-15.77-17.31zm43.31 18.37-6.48-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.23-4.35 5.33-4.35 4.36 0 6.09 2.25 6.51 4.88h10.18c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.81 11.19 12.24 13l6.05 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.5c.59 6.53 5.32 14.84 18.46 14.84 11.45 0 17.22-7.28 17.22-14.38-.01-6.36-4.36-11.59-12.97-13.37zm63.19 4.53c0 13.22-8.26 23-20.59 23-6 0-10.48-2.4-12.61-5.33v21.13h-11.8V43.67h11.45v5.41c2-3.37 6.83-6.39 13.4-6.39 12.81 0 20.18 9.76 20.18 22.72zm-11.63.09c0-7.72-4.79-12.25-10.83-12.25s-10.91 4.53-10.91 12.25 4.88 12.33 10.91 12.33 10.91-4.54 10.91-12.35zm68-21.83h11.45v43.64h-11.8v-5.31c-2 3.5-6.57 6.38-12.61 6.38-12.33 0-20.59-9.77-20.59-23 0-13 7.37-22.72 20.15-22.72 6.57 0 11.32 3.05 13.4 6.39zm-.18 21.83c0-7.72-4.88-12.25-10.91-12.25s-10.83 4.51-10.83 12.23 4.79 12.33 10.83 12.33 10.92-4.6 10.92-12.33zm-50.66 21.81h11.8V24.41h-11.8zm132.35-44.81c-4.17 0-9 1.41-11.81 4.78V24.41h-11.8v62.91h11.8V61.68c.27-4.8 3.2-8.52 8.17-8.52 5.68 0 8.08 3.83 8.07 8.71v25.47h11.81V59.82c-.01-9.59-5.15-17.3-16.24-17.3zm-42 18.36-6.43-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.22-4.35 5.33-4.35 4.35 0 6.08 2.25 6.5 4.88h10.17c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.82 11.19 12.25 13l6 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.49c.58 6.53 5.31 14.84 18.45 14.84 11.45 0 17.22-7.28 17.22-14.38 0-6.34-4.35-11.57-12.95-13.35zM59.88 0H27.53v24.37h32.35z"})))},Je=(0,c.memo)(SvgUnsplashLogoFull);var et,tt;function nt(){return nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nt.apply(this,arguments)}const SvgCoverrLogo=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nt({viewBox:"0 0 742 132",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,et||(et=c.createElement("g",{clipPath:"url(#a)"},c.createElement("path",{d:"M17.875 112.892C5.958 100.096 0 84.494 0 65.912c0-18.757 5.958-34.358 17.875-46.804C29.967 6.31 45.04 0 62.914 0h19.453S72.202 26.645 62.563 26.645c-10.514 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.948 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H62.74c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#0072BB"}),c.createElement("path",{d:"M34.699 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.804C46.791 6.31 61.862 0 79.738 0H99.19S89.026 26.645 79.387 26.645c-10.515 0-19.277 3.682-26.462 11.22C46.09 45.401 42.41 54.692 42.41 65.912c0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H79.563c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#7DC24B"}),c.createElement("path",{d:"M51.523 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.98C63.79 6.311 78.686 0 96.562 0h19.452s-9.989 26.645-19.627 26.645c-10.515 0-19.278 3.682-26.463 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.713 15.948 11.395 26.462 11.395 8.763 0 14.02 26.645 14.02 26.645H96.562c-17.876 0-32.772-6.311-45.039-19.108Z",fill:"#FED035"}),c.createElement("path",{d:"M68.347 112.892C56.43 100.096 50.47 84.494 50.47 65.912c0-18.757 5.959-34.358 17.876-46.98C80.614 6.311 95.51 0 113.385 0h19.453s-10.164 26.645-19.803 26.645c-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.514 28.048 7.186 7.538 15.948 11.219 26.463 11.219 8.762 0 14.02 26.646 14.02 26.646H113.21c-17.7.175-32.596-6.136-44.863-18.933Z",fill:"#FF4C3D"}),c.createElement("path",{d:"M86.047 112.892C74.13 100.096 68.17 84.494 68.17 65.912c0-18.757 5.959-34.358 17.876-46.98C98.139 6.311 113.21 0 131.085 0c23.133 0 43.637 12.621 53.101 32.43l-22.082 13.498c-5.432-12.095-16.999-19.283-31.194-19.283-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 14.02 0 25.937-7.538 31.72-19.283l22.081 13.323C174.547 119.378 154.218 132 131.085 132c-17.875 0-32.946-6.311-45.038-19.108ZM213.102 112.892c-12.092-12.796-18.401-28.398-18.401-46.98 0-18.581 6.134-34.183 18.401-46.98C225.194 6.311 240.265 0 257.615 0c17.7 0 32.421 6.31 44.513 19.108 12.092 12.796 18.401 28.398 18.401 46.98 0 18.581-6.134 34.183-18.401 46.98-12.092 12.797-26.988 19.107-44.513 19.107-17.35-.175-32.421-6.486-44.513-19.283Zm44.513-7.187c10.515 0 19.277-3.681 26.462-11.219 7.186-7.538 10.691-17.004 10.691-28.398 0-11.22-3.505-20.86-10.691-28.399-7.185-7.538-15.947-11.394-26.462-11.394s-19.277 3.681-26.462 11.219c-7.186 7.538-10.691 17.004-10.691 28.398 0 11.22 3.505 20.86 10.691 28.399 7.185 7.538 15.947 11.394 26.462 11.394ZM419.895 3.33h28.039l-46.44 125.514h-29.793L325.261 3.331H353.3l33.298 95.362 33.297-95.362ZM479.654 77.482c3.855 19.108 18.401 29.626 38.204 29.626 13.669 0 23.833-5.259 30.668-15.602l21.205 12.972c-11.742 18.231-29.091 27.347-52.224 27.347-19.277 0-35.05-6.311-46.966-18.582-11.917-12.621-17.876-28.398-17.876-47.506 0-18.757 5.959-34.358 17.7-46.98C482.107 6.311 497.354 0 515.755 0c17.349 0 31.72 6.486 42.935 19.283 11.216 12.797 16.999 28.574 16.999 46.98 0 2.805-.175 6.486-.876 11.22h-95.159Zm69.924-22.088c-3.505-20.334-17.175-30.852-33.999-30.852-19.102 0-32.421 11.745-35.925 30.852h69.924ZM623.883 24.366c6.484-15.602 18.751-23.315 36.627-23.315v29.275c-9.814-.701-18.401 1.753-25.762 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.937v21.036ZM705.374 24.366C711.858 8.764 724.125 1.051 742 1.051v29.275c-9.813-.701-18.401 1.753-25.761 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.761v21.036h.176Z",fill:"#fff"}))),tt||(tt=c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h742v132H0z"})))))},rt=(0,c.memo)(SvgCoverrLogo),at=p.default.div.withConfig({displayName:"attribution__AttributionPill",componentId:"sc-1j8k1n4-0"})(["position:absolute;left:24px;bottom:10px;border-radius:100px;padding:2px 8px;height:24px;display:flex;flex-wrap:nowrap;background-color:",";cursor:pointer;align-items:center;z-index:9999;"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.black,.7)})),ot=(0,p.default)(Ve.Text).withConfig({displayName:"attribution__Text",componentId:"sc-1j8k1n4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),lt=(0,p.css)(["color:",";fill:",";margin-left:6px;line-height:14px;"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),it=(0,p.default)(Je).withConfig({displayName:"attribution__UnsplashLogo",componentId:"sc-1j8k1n4-2"})(["height:14px;",""],lt),st=(0,p.default)(rt).withConfig({displayName:"attribution__CoverrLogo",componentId:"sc-1j8k1n4-3"})([""," height:12px;margin-top:2px;"],lt),ct=(0,p.default)(Ke).withConfig({displayName:"attribution__TenorLogo",componentId:"sc-1j8k1n4-4"})(["height:14px;"," margin:0 2px 2px 6px;"],lt),dt="Coverr",ut="Tenor",pt="Unsplash",mt=e=>(0,Ze.default)(
/* translators: %s: media provider name. */
(0,d.__)("Powered by %s","web-stories"),e);const ft={IMAGE:"image",VIDEO:"video",GIF:"gif"},gt="coverr",ht="tenor",Et={["unsplash"]:{displayName:(0,d.__)("Images","web-stories"),supportsCategories:!0,requiresAuthorAttribution:!0,attributionComponent:function UnsplashAttribution(){return c.createElement("a",{href:"https://unsplash.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":mt(pt)},c.createElement(at,{"aria-hidden":!0},c.createElement(ot,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(it,null)))},fetchMediaErrorMessage:(0,Ze.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Unsplash"),fetchCategoriesErrorMessage:(0,Ze.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading categories from %s","web-stories"),"Unsplash")},[gt]:{displayName:(0,d.__)("Video","web-stories"),supportsCategories:!1,requiresAuthorAttribution:!1,attributionComponent:function CoverrAttribution(){return c.createElement("a",{href:"https://coverr.co?utm_source=web_stories_wordpress&utm_medium=referral&utm_campaign=api_powered_by",target:"_blank",rel:"noreferrer","aria-label":mt(dt)},c.createElement(at,{"aria-hidden":!0},c.createElement(ot,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(st,null)))},fetchMediaErrorMessage:(0,Ze.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Coverr"),defaultPreviewWidth:640},[ht]:{displayName:(0,d.__)("GIFs","web-stories"),contentTypeFilter:ft.GIF,supportsCategories:!0,requiresAuthorAttribution:!1,attributionComponent:function TenorAttribution(){return c.createElement("a",{href:"https://tenor.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":mt(ut)},c.createElement(at,{"aria-hidden":!0},c.createElement(ct,null)))},fetchMediaErrorMessage:(0,Ze.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Tenor")}};function bt(e,t){const n=t.sort(((e,t)=>(t.width??0)-(e.width??0))),r=function(e){return{originalWidth:e[0].width,originalHeight:e[0].height}}(n);return n.map((t=>function(e,t,n){const{originalWidth:r,originalHeight:a}=n;if(!r||!a)throw new Error("No original size present.");const o=Et[e.provider.toLowerCase()];if(!(t.width&&t.height||o.defaultPreviewWidth))throw new Error("Missing width and height for: "+e);return{file:e.name,sourceUrl:t.url,mimeType:t.mimeType,width:t.width??o.defaultPreviewWidth,height:t.height??o.defaultPreviewWidth*a/r}}(e,t,r)))}function yt(e){return(e.author||e.registerUsageUrl)&&{author:e.author&&{displayName:e.author.displayName,url:e.author.url},registerUsageUrl:e.registerUsageUrl}}function _t(e){return Math.floor(e/60)+":"+Math.floor(e%60).toString().padStart(2,"0")}function vt(e){const t=function(e){if("image"!==e.type.toLowerCase())throw new Error("Invalid media type.");if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=bt(e,e.imageUrls),n=[["full",t[0]],["large",t[1]],...t.slice(2,t.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",t[t.length-1]]];return Object.fromEntries(new Map(n))}(e);return Q({id:e.name,baseColor:e.color,blurHash:e.blurHash,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,sizes:t,attribution:yt(e)})}function wt(e){const t=function(e){if("video"!==e.type.toLowerCase())throw new Error("Invalid media type.");if(e.videoUrls?.length<2)throw new Error("Invalid number of urls for asset. Need at least 2: "+e);const t=bt(e,e.videoUrls);return{full:t[0],preview:t[t.length-1]}}(e),n=parseInt(e.videoMetadata.duration.trimEnd("s"));return Q({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:e.imageUrls[0].url,length:n,lengthFormatted:_t(n),alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,isOptimized:!0,isMuted:!0,sizes:t,attribution:yt(e)})}function Tt(e){const{imageUrls:t,videoUrls:n,previewUrl:r}=function(e){if("gif"!==e.type.toLowerCase())throw new Error("Invalid media type");if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=e.imageUrls.filter((e=>{let{imageName:t}=e;return t.endsWith("preview")})).map((e=>{let{url:t}=e;return t})).shift(),n=e.imageUrls.filter((e=>{let{url:n}=e;return n!==t})),r=bt(e,n),a=bt(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"image/webm"===t}))),o=bt(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"video/mp4"===t}))),l=[["full",r[0]],["large",r[1]],...r.slice(2,r.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",r[r.length-1]]];return{imageUrls:Object.fromEntries(new Map(l)),videoUrls:{webm:{full:a[0],preview:a[a.length-1]},mp4:{full:o[0],preview:o[a.length-1]}},previewUrl:t}}(e);return Q({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:r,alt:e.description||e.title||e.name,isPlaceholder:!1,isOptimized:!0,isExternal:!0,sizes:t,output:{mimeType:n.mp4.full.mimeType,src:n.mp4.full.sourceUrl},attribution:yt(e)})}function St(e){switch(e.type.toLowerCase()){case"image":return vt(e);case"video":return wt(e);case"gif":return Tt(e);default:throw new Error("Invalid media type.")}}const Ct=function(e){const t=new Uint8Array(e);let n=0;if(71!==t[0]||73!==t[1]||70!==t[2]||56!==t[3])return!1;for(let e=4;e<t.length;e++)0===t[e]&&33===t[e+1]&&249===t[e+2]&&n++;return n>1};var It=n(71469),xt=n(22133),At=n.n(xt);function kt(e){return At().getExtension(e)}function Ot(e){switch(e){case"audio/mpeg":return["mp3","m3a"];case"audio/aac":return["aac"];case"audio/ogg":return["oga","ogg"];case"image/jpeg":return["jpg","jpeg"];default:return[kt(e)].filter(Boolean)}}const Nt=function(e,t,n){const r=new Error;return r.name=e,r.file=t,r.isUserError=!0,r.message=n,r},Pt=e=>Math.round(e/Math.pow(1024,2));const Rt=function(){const{actions:{uploadMedia:e}}=Z(),{storyId:t,maxUpload:n,allowedMimeTypes:{image:r,vector:a,video:o},capabilities:{hasUploadMediaAction:l}}=H(),i=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]),s=(0,u.useMemo)((()=>i.map((e=>Ot(e))).flat()),[i]),c=(0,u.useCallback)((e=>{let{type:t}=e;return i.includes(t)}),[i]),p=(0,u.useCallback)((e=>{let{size:t}=e;return t<=n}),[n]),m=(0,u.useCallback)(((e,t,r)=>{if(!l){const t=(0,d.__)("Sorry, you are not allowed to upload files.","web-stories");throw Nt("PermissionError",e.name,t)}if(t){if(r){const t=(0,Ze.default)(
/* translators: 1: File size in MB. 2: Maximum allowed file size in MB. */
(0,d.__)("Your file is too large (%1$s MB) and cannot be processed. Please try again with a file that is smaller than %2$s MB.","web-stories"),Pt(e.size),Pt(me));throw Nt("SizeError",e.name,t)}}else{if(!p(e)){const t=(0,Ze.default)(
/* translators: first %s is the file size in MB and second %s is the upload file limit in MB */
(0,d.__)("Your file is %1$sMB and the upload limit is %2$sMB. Please resize and try again!","web-stories"),Pt(e.size),Pt(n));throw Nt("SizeError",e.name,t)}if(!c(e)){let t=(0,d.__)("No file types are currently supported.","web-stories");throw s.length&&(
/* translators: %s is a list of allowed file extensions. */
t=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to upload.","web-stories"),(0,It.default)(s))),Nt("ValidError",e.name,t)}}}),[l,p,n,s,c]),f=(0,u.useCallback)((function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(n);const a={storyId:t,altText:W(n),mediaSource:"editor",...r};return e(n,a)}),[m,e,t]);return(0,u.useMemo)((()=>({actions:{uploadFile:f,validateFileForUpload:m}})),[m,f])};function Mt(){}const Lt=e=>e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));const Dt=async function(e){const t=await ne(e);return await le(t),de(t)},Bt="ADD_PAGE",Ft="UPDATE_PAGE",Ht="DELETE_PAGE",Ut="ARRANGE_PAGE",zt="DELETE_ELEMENTS",Gt="ADD_ELEMENTS",jt="UPDATE_ELEMENTS",Yt="UPDATE_ELEMENTS_BY_RESOURCE_ID",Zt="DELETE_ELEMENTS_BY_RESOURCE_ID",Wt="SET_BACKGROUND_ELEMENT",Vt="ARRANGE_ELEMENT",$t="COMBINE_ELEMENTS",qt="DUPLICATE_ELEMENTS_BY_ID",Kt="COPY_SELECTED_ELEMENT",Xt="UPDATE_ELEMENTS_BY_FONT_FAMILY",Qt="SET_CURRENT_PAGE",Jt="SET_SELECTED_ELEMENTS",en="SELECT_ELEMENT",tn="UNSELECT_ELEMENT",nn="TOGGLE_ELEMENT_IN_SELECTION",rn="TOGGLE_LAYER",an="UPDATE_STORY",on="UPDATE_ANIMATION_STATE",ln="ADD_ANIMATIONS",sn="RESTORE",cn=["id","elements"],dn=["id","isBackground","isDefaultBackground"];function un(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}function pn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&n?.length?n.reduce(((e,t)=>e.filter((e=>t.includes(e)))),e):e}function mn(e,t,n){return e>=t&&e<=n}function fn(e,t,n){const r=e[t],a=[...e.slice(0,t),...e.slice(t+1)];return[...a.slice(0,n),r,...a.slice(n)]}function gn(e,t){const n=un("function"==typeof t?t(e):t,dn);return 0===Object.keys(n).length?e:{...e,...n}}function hn(e,t){return(e||[]).reduce(((e,n)=>t.some((e=>n.targets?.includes(e)))?e:[...e,n]),[])}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.values(Object.fromEntries(e.map((e=>[e.id,e]))))}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=En(t),r=e.map((e=>{let{id:t}=e;return t}));return n.filter((e=>{let{id:t}=e;return!r.includes(t)}))}const yn=function(e,t){let{page:n,position:r}=t;const a=null!==r&&mn(r,0,e.pages.length-1),o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=a?r:o+1,{id:i}=n;return n.elements?.length?{...e,pages:[...e.pages.slice(0,l),n,...e.pages.slice(l)],current:i,selection:[n.elements[0].id]}:e};const _n=function(e,t){let{pageId:n}=t;if(e.pages.length<=1)return e;const r=null===n?e.current:n,a=e.pages.findIndex((e=>{let{id:t}=e;return t===r}));if(-1===a)return e;const o=[...e.pages.slice(0,a),...e.pages.slice(a+1)];let l=e.current;if(r===e.current){l=o[Math.min(o.length-1,a)].id}return{...e,pages:o,current:l,selection:[]}};const vn=function(e,t){let{pageId:n,properties:r}=t;const a=null===n?e.current:n,o=e.pages.findIndex((e=>{let{id:t}=e;return t===a}));if(-1===o)return e;const l=un(r,cn),i={...e.pages[o],...l},s=[...e.pages.slice(0,o),i,...e.pages.slice(o+1)];return{...e,pages:s}};const wn=function(e,t){let{pageId:n,position:r}=t;if(e.pages.length<2)return e;const a=e.pages.findIndex((e=>{let{id:t}=e;return t===n})),o=mn(r,0,e.pages.length-1);if(-1===a||!o||a===r)return e;const l=fn(e.pages,a,r);return{...e,pages:l}};const Tn=function(e,t){let{elements:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=bn(a.elements,n);if(0===o.length)return e;const l={...a,elements:[...a.elements,...o]},i=[...e.pages.slice(0,r),l,...e.pages.slice(r+1)],s=o.map((e=>{let{id:t}=e;return t}));return{...e,pages:i,selection:s}};const Sn=function(e,t){let{elementIds:n}=t;const r=null===n?e.selection:n;if(0===r.length)return e;const a=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),o=e.pages[a],l=o.elements.map((e=>{let{id:t}=e;return t})),i=o.elements[0],s=r.some((e=>e===i.id)),c=i.isDefaultBackground,d=s&&c?r.filter((e=>e!==i.id)):r;if(!(pn(l,d).length>0))return e;let u=o.elements.filter((e=>!d.includes(e.id)));s&&!c&&(u=[o.defaultBackgroundElement,...u]);const p=o.animations||[],m=p.filter((e=>e.targets.some((e=>!d.includes(e))))),f={...o,elements:u,...p.length>0?{animations:m}:{}},g=[...e.pages.slice(0,a),f,...e.pages.slice(a+1)],h=pn(e.selection,d).length>0?e.selection.filter((e=>!d.includes(e))):e.selection;return{...e,pages:g,selection:h}};var Cn=n(22188);const In=function(e,t){let{elementIds:n,properties:r}=t;if([Cn.STORY_ANIMATION_STATE.PLAYING,Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED,Cn.STORY_ANIMATION_STATE.SCRUBBING].includes(e.animationState))return e;const a=null===n?e.selection:n;if(0===a.length)return e;const o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=e.pages[o];if(!(pn(l.elements.map((e=>{let{id:t}=e;return t})),a).length>0))return e;const i=l.elements.reduce(((e,t)=>{if(!a.includes(t.id))return e;const{animation:n,...o}=gn(t,r),l=n?{[n.id]:{...n,targets:[o.id]}}:{};return{...e,...l}}),{}),s=l.elements.reduce(((e,t)=>{if(!a.includes(t.id))return[...e,t];const{animation:n,...o}=gn(t,r);return[...e,o]}),[]),c=Object.keys(i).length>0,d=c?function(e,t){const n=e.reduce(((e,n)=>{const r=t[n.id];return delete t[n.id],r?.delete?e:r?[...e,r]:[...e,n]}),[]);return Object.values(t).forEach((e=>n.push(e))),n}(l.animations||[],i):l.animations,u=d&&{animations:d},p={elements:s},m={...l,...c?u:p},f=[...e.pages.slice(0,o),m,...e.pages.slice(o+1)];return{...e,pages:f}};const xn=function(e,t){let{id:n,properties:r}=t;if(!n)return e;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return e;const a=e.pages.map((e=>{const t=e.elements.map((e=>e.resource?.id===n?gn(e,r):e));return{...e,elements:t}}));return{...e,pages:a}};const An=function(e,t){let{id:n}=t;if(null===n)return e;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return e;const r=[],a=e.pages.map((e=>{const{elements:t,animations:a}=e,o=t[0].resource?.id===n,l=t[0].isDefaultBackground;let i=t.map((e=>{const{id:t,resource:a}=e;return a?.id!==n||o&&l?e:void r.push(t)}));o&&!l&&(i=[e.defaultBackgroundElement,...i]),i=i.filter(Boolean);const s=a||[],c=s.filter((e=>e.targets.some((e=>!r.includes(e)))));return{...e,elements:i,...s.length>0?{animations:c}:{}}})),o=e.selection.filter((e=>!r.includes(e)));return{...e,pages:a,selection:o}};const kn=function(e,t){let{elementId:n}=t;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=a.elements[0];let l,i=e.selection;if(null===n){if(o.isDefaultBackground)return e;const t=a.defaultBackgroundElement,n=a.elements.map((e=>e.isBackground?un(e,["isBackground"]):e));l={...a,elements:[t,...n]},i=[t.id]}else{const t=a.elements.findIndex((e=>{let{id:t}=e;return t===n})),r=0===t;if(!(-1!==t)||r)return e;const s=o.isDefaultBackground?o:a.defaultBackgroundElement,c=a.elements.slice(1),d=t-1;e.selection.includes(o.id)&&(i=e.selection.filter((e=>e!==o.id)));const u=fn(c,d,0).map((e=>e.id===n?{...e,isBackground:!0,...Object.prototype.hasOwnProperty.call(e,"opacity")&&{opacity:100}}:e));e.selection.includes(n)&&e.selection.length>1&&(i=e.selection.filter((e=>e!==n))),l={...a,defaultBackgroundElement:s,elements:u}}const s=a.elements.find((e=>e.isBackground)),c=hn(a.animations,[n,s.id]),d=[...e.pages.slice(0,r),{...l,animations:c||[]},...e.pages.slice(r+1)];return{...e,pages:d,selection:i}};const On=function(e,t){let{elementId:n,position:r}=t;if(null===n&&1!==e.selection.length)return e;const a=null!==n?n:e.selection[0],o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=e.pages[o];if(l.elements.length<3)return e;const i=l.elements.findIndex((e=>{let{id:t}=e;return t===a}));if(-1===i||l.elements[0].id===a)return e;const s=function(e){let{currentPosition:t,minPosition:n,maxPosition:r,desiredPosition:a}=e;if("number"==typeof a)return Math.min(r,Math.max(n,a));if("string"!=typeof a)return t;switch(a){case Ae:return r;case ke:return n;case Oe:return Math.min(r,t+1);case Ne:return Math.max(n,t-1);default:return t}}({currentPosition:i,minPosition:1,maxPosition:l.elements.length-1,desiredPosition:r});if(i===s)return e;const c=fn(l.elements,i,s),d=[...e.pages.slice(0,o),{...l,elements:c},...e.pages.slice(o+1)];return{...e,pages:d}};var Nn=n(25784),Pn=n(88766),Rn=(n(27342),n(40630)),Mn=n(95740),Ln=n(98465),Dn=(n(72858),n(64282));function Bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&"object"==typeof e?Object.assign({},...t.map((t=>e&&t in e?{[t]:e&&e[t]}:{}))):{}}const Fn=function(e,t){let{firstElement:n,secondId:r,shouldRetainAnimations:a=!0}=t;if(!n||!r)return e;const o=n.id,l=n,i=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),s=e.pages[i],c=s.elements.findIndex((e=>{let{id:t}=e;return t===r})),d=s.elements[c];if(!l||!l.resource||!d)return e;const u=d.isDefaultBackground?{defaultBackgroundElement:{...d,id:(0,ue.default)()}}:{},p=["alt","type","resource","scale","focalX","focalY","tracks","poster"];d.isBackground?(p.push("flip"),p.push("overlay")):(p.push("link"),(0,Nn.canMaskHaveBorder)(d)&&(p.push("border"),(0,Nn.canSupportMultiBorder)(d)&&p.push("borderRadius")));const m=Bn(l,p),f=Bn(l,["width","height","x","y"]),g={...un(d,["isDefaultBackground"]),...Ln.DEFAULT_ATTRIBUTES_FOR_MEDIA,...m,...d.isBackground?f:{}},h=s.elements.filter((e=>{let{id:t}=e;return t!==o})).map((e=>e.id===r?g:e)),E=hn(s.animations,a?[o]:[o,r]),b={...s,elements:h,...u,animations:E},y=[...e.pages.slice(0,i),b,...e.pages.slice(i+1)];return{...e,pages:y,selection:[r]}};var Hn=n(25205);const Un=function(e,t){let{elementIds:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o={...a},l=[];if(n.forEach((e=>{const t=o.elements.findIndex((t=>{let{id:n}=t;return n===e}));if(t<0)return;const n=o.elements[t];if(n.isBackground)return;const{element:r,elementAnimations:i}=(0,Hn.duplicateElement)({element:n,animations:a.animations,existingElements:a.elements});l.push(r.id),o.animations=[...o.animations||[],...i],o.elements=[...o.elements.slice(0,t),n,r,...o.elements.slice(t+1)]})),!l.length)return e;const i=[...e.pages.slice(0,r),o,...e.pages.slice(r+1)];return{...e,pages:i,selection:l}},zn=["background","backgroundColor","backgroundTextMode","border","borderRadius","content","flip","font","fontSize","lineHeight","lockAspectRatio","opacity","overlay","padding","rotationAngle","textAlign"];const Gn=function(e){if(1!==e.selection?.length)return e;const t=e.selection[0];if(!t)return e;const n=e.pages.find((t=>{let{id:n}=t;return n===e.current})),r=n.elements.findIndex((e=>{let{id:n}=e;return n===t}));if(-1===r)return e;const a=n.elements[r],o=(n.animations||[]).filter((e=>{let{targets:t}=e;return t.includes(a.id)})),l=Bn(a,zn);return{...e,copiedElementState:{animations:o,styles:l,type:a.type}}};const jn=function(e,t){let{family:n,properties:r}=t;if(!n)return e;if(!e.pages.some((e=>e.elements.some((e=>"text"===e.type&&e?.font?.family===n)))))return e;const a=e.pages.map((e=>{const t=e.elements.map((e=>e?.font?.family===n?gn(e,r):e));return{...e,elements:t}}));return{...e,pages:a}};const Yn=function(e,t){let{pageId:n}=t;return e.pages.some((e=>{let{id:t}=e;return t===n}))?e.current===n?e:{...e,current:n,selection:[]}:e};const Zn=function(e,t){let{elementIds:n}=t;const r="function"==typeof n?n(e.selection):n;if(!Array.isArray(r))return e;const a=[...new Set(r)];if(e.selection.length===a.length){if(pn(e.selection,a).length===e.selection.length)return e}const o=e.pages.find((t=>{let{id:n}=t;return n===e.current})),l=a.length>1?a.filter((e=>(e=>o.elements[0].id!==e)(e)&&(e=>{const t=o.elements.find((t=>t.id===e))?.resource?.isPlaceholder;return!t})(e))):a;return{...e,animationState:Cn.STORY_ANIMATION_STATE.RESET,selection:l}};const Wn=function(e,t){let{elementId:n}=t;if(!n||e.selection.includes(n))return e;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current})),a=r.elements[0].id===n,o=r.elements.find((e=>{let{id:t}=e;return t===n}))?.resource?.isPlaceholder,l=e.selection.length>0;return(a||o)&&l?e:e.selection.includes(r.elements[0].id)?{...e,selection:[n]}:{...e,selection:[...e.selection,n]}};const Vn=function(e,t){let{elementId:n}=t;return n&&e.selection.includes(n)?{...e,selection:e.selection.filter((e=>e!==n))}:e};const $n=function(e,t){let{elementId:n}=t;if(!n)return e;const r=e.selection.includes(n),a=e.pages.find((t=>{let{id:n}=t;return n===e.current})).elements[0].id,o=a===n,l=e.selection.length>0;return r?{...e,selection:e.selection.filter((e=>e!==n))}:o&&l?e:e.selection.includes(a)?{...e,selection:[n]}:{...e,selection:[...e.selection,n]}};const qn=function(e,t){let{elementId:n,metaKey:r,shiftKey:a}=t;if(r)return $n(e,{elementId:n});if(e.selection.length<=0||!a)return Zn(e,{elementIds:[n]});const o=e.selection[0],l=e.pages.find((t=>{let{id:n}=t;return n===e.current})).elements.map((e=>e.id)),i=l.findIndex((e=>e===o)),s=l.findIndex((e=>e===n)),c=Math.min(i,s),d=Math.max(i,s),u=l.slice(c,d+1);return o!==u[0]&&u.reverse(),Zn(e,{elementIds:u})};const Kn=function(e,t){let{animationState:n}=t;return e.animationState===n?e:{...e,animationState:n}};const Xn=function(e,t){let{animations:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=a.animations||[],l=bn(o,n);if(0===l.length)return e;const i={...a,animations:[...o,...l]},s=[...e.pages.slice(0,r),i,...e.pages.slice(r+1)];return{...e,pages:s}};const Qn=function(e,t){let{pages:n,current:r,selection:a,story:o,capabilities:l}=t;if(!Array.isArray(n)||0===n.length)return e;const i="object"==typeof o?o:{},s="object"==typeof l?l:{},c=r??e.current,d=n.some((e=>{let{id:t}=e;return t===c}))?c:n[0].id;return{pages:n,current:d,selection:Array.isArray(a)?a:[],story:i,animationState:e.animationState,capabilities:s,copiedElementState:{}}};const Jn=function(e,t){let{properties:n}=t;return{...e,story:"function"==typeof n?n(e.story):{...e.story,...n}}},er=(0,u.createContext)({state:{},actions:{}});var tr=n(49925),nr=n(82302);const rr=(0,u.createContext)({listeners:new Map});const ar=function(){const e=(0,u.useContext)(rr);return(0,u.useCallback)(((t,n)=>{n?(e.listeners.has(t)||e.listeners.set(t,(e=>((e,t)=>{e.preventDefault(),e.returnValue=t})(e,t))),window.addEventListener("beforeunload",e.listeners.get(t))):(window.removeEventListener("beforeunload",e.listeners.get(t)),e.listeners.delete(t))}),[e])},or="set_state",lr="clear",ir="replay",sr={entries:[],offset:0,requestedState:null,versionNumber:0},cr=e=>(t,n)=>{let{type:r,payload:a}=n;const o=t.entries[t.offset];switch(r){case or:if(t.requestedState){if(Object.keys(t.requestedState).every((e=>t.requestedState[e]===a[e]))){const e=t.entries.indexOf(t.requestedState);if(o.pages!==t.requestedState.pages&&o.pages.length===t.requestedState.pages.length&&o.current!==t.requestedState.current){const n=o.pages.filter(((e,n)=>e!==t.requestedState.pages[n]));if(1===n.length){const r=n[0].id,a={...t.requestedState,current:r};return{...t,offset:e,requestedState:a}}}return{...t,offset:e,requestedState:null}}}return{entries:[a,...t.entries.slice(t.offset)].slice(0,e),versionNumber:t.versionNumber+1,offset:0,requestedState:null};case ir:return{...t,versionNumber:t.versionNumber+(t.offset-a),requestedState:t.entries[a]};case lr:return{...sr};default:throw new Error(`Unknown history reducer action: ${r}`)}};const dr=function(e){const[t,n]=(0,u.useReducer)(cr(e),{...sr}),{entries:r,offset:a,requestedState:o,versionNumber:l}=t,i=r.length,s=(0,u.useCallback)((e=>{const t=a+e;return!(t<0||t>i-1)&&(n({type:ir,payload:t}),!0)}),[n,a,i]),c=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?e:1)}),[s]),d=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?-e:-1)}),[s]),p=(0,u.useCallback)((()=>n({type:lr})),[n]);return{requestedState:o,stateToHistory:(0,u.useCallback)((e=>{n({type:or,payload:e})}),[n]),clearHistory:p,currentEntry:r?.[a],offset:a,historyLength:i,versionNumber:l,undo:c,redo:d}},ur=(0,u.createContext)({state:{},actions:{}});function HistoryProvider(e){let{children:t,size:n}=e;const{requestedState:r,stateToHistory:a,clearHistory:o,currentEntry:l,offset:i,historyLength:s,undo:d,redo:p,versionNumber:m}=dr(n),[f,g]=(0,u.useState)(!1),h=ar(),E=(0,u.useRef)(1);(0,u.useEffect)((()=>(h("history",f),()=>h("history",!1))),[h,f]),(0,u.useEffect)((()=>{g(m!==E.current)}),[m]);const b=(0,u.useCallback)((()=>{E.current=m,g(!1)}),[m]),y={state:{currentEntry:l,hasNewChanges:f,requestedState:r,canUndo:i<s-1,canRedo:i>0,versionNumber:m},actions:{stateToHistory:a,clearHistory:o,resetNewChanges:b,undo:d,redo:p}};return(0,nr.useGlobalKeyDownEffect)({key:"undo",dialog:!0},(()=>d()),[d]),(0,nr.useGlobalKeyDownEffect)({key:"redo",dialog:!0},(()=>p()),[p]),c.createElement(ur.Provider,{value:y},t)}HistoryProvider.defaultProps={size:50};const pr=HistoryProvider;const mr=function(e){return(0,u.useContextSelector)(ur,e??u.identity)};const fr=function(e){const t=e.map((e=>JSON.stringify(e)));return Array.from(new Set(t)).map((e=>JSON.parse(e)))};function gr(e,t,n,r){const{title:{raw:a=""}={},status:o,slug:l,date:i,modified:s,excerpt:{raw:c=""}={},link:d,storyData:u,permalinkTemplate:p,stylePresets:m={},password:f,previewLink:g,editLink:h,embedPostLink:E,author:b,capabilities:y={publish:!1,"assign-author":!1},extras:_={},featuredMedia:v,publisherLogo:w,taxonomies:T,terms:S}=t,[C,I]=p?p.split(/%(?:postname|pagename)%/):[],x=void 0!==C&&void 0!==I?{prefix:C,suffix:I}:null,A="auto-draft"===o?"draft":o;r();const k=u&&(0,tr.migrate)(u,u.version||0),O=k?.pages?.length>0?k.pages:[(0,Hn.createPage)()];m.colors?m.colors=fr(m.colors):m.colors=[],m.textStyles?m.textStyles=fr(m.textStyles):m.textStyles=[];n({pages:O,story:{storyId:e,title:a,status:A,author:b,date:i,modified:s,excerpt:c,slug:l,link:d,extras:_,featuredMedia:v,permalinkConfig:x,publisherLogo:w,password:f,previewLink:g,editLink:h,embedPostLink:E,currentStoryStyles:{colors:k?.currentStoryStyles?.colors?fr(k.currentStoryStyles.colors):[]},globalStoryStyles:m,autoAdvance:k?.autoAdvance,defaultPageDuration:k?.defaultPageDuration,backgroundAudio:k?.backgroundAudio,taxonomies:T,terms:S},selection:[],current:null,capabilities:y})}const hr=function(e){let{storyId:t,story:n,shouldLoad:r,restore:a}=e;const{actions:{getStoryById:o}}=Z(),{actions:{clearHistory:l}}=mr();(0,u.useEffect)((()=>{t&&r&&(n?gr(t,n,a,l):o(t).then((e=>{gr(t,e,a,l)})))}),[t,n,r,a,o,l])};var Er=n(96905),br=n(58860);const yr=function(e,t){return(0,u.useCallback)((()=>{try{const n=new URL(t);n.hash=window.location.hash,window.history.replaceState({id:e},(0,Ze.default)(
/* translators: %d: current story id. */
(0,d.__)("Post %d","web-stories"),e),n.toString())}catch(e){}}),[e,t])},_r=e=>{const t=[{src:"https://cdn.ampproject.org/v0.js"},{name:"amp-story",src:"https://cdn.ampproject.org/v0/amp-story-1.0.js"}],n={name:"amp-video",src:"https://cdn.ampproject.org/v0/amp-video-0.1.js"},r={name:"amp-story-captions",src:"https://cdn.ampproject.org/v0/amp-story-captions-0.1.js"},a={name:"amp-story-shopping",src:"https://cdn.ampproject.org/v0/amp-story-shopping-0.1.js"};for(const{elements:o,backgroundAudio:l}of e){l?.resource?.src&&l?.tracks?.length>0&&(t.push(n),t.push(r));for(const{type:e,tracks:l}of o)switch(e){case"video":t.push(n),l?.length>0&&t.push(r);break;case"gif":t.push(n);break;case"product":t.push(a)}}return[...new Set(t)]};const vr=function Boilerplate(){return c.createElement(c.Fragment,null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}"}}),c.createElement("noscript",null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}"}})))};const wr=function(e){return/^#(?:[a-f0-9]{3}){1,2}$/i.test(e)};const Tr=function CustomStyles(){const e=J.PAGE_RATIO/J.FULLBLEED_RATIO,t=1/e,n=J.PAGE_RATIO,r=J.FULLBLEED_RATIO,a=g.theme.colors.bg.primary,o=wr(a)?a:"#1B1D1C";return c.createElement("style",{"amp-custom":"",dangerouslySetInnerHTML:{__html:`\n              h1, h2, h3 { font-weight: normal; }\n\n              amp-story-page {\n                background-color: ${o};\n              }\n\n              amp-story-grid-layer {\n                overflow: visible;\n              }\n\n              @media (max-aspect-ratio: 9 / 16)  {\n                @media (min-aspect-ratio: 320 / 678) {\n                  amp-story-grid-layer.grid-layer {\n                    margin-top: calc((100% / ${r} - 100% / ${n}) / 2);\n                  }\n                }\n              }\n          \n              @media not all and (min-resolution:.001dpcm) {\n                @media {\n                  p.text-wrapper > span {\n                    font-size: calc(100% - 0.5px);\n                  }\n                }\n              }\n\n              .page-fullbleed-area,\n              .page-background-overlay-area {\n                position: absolute;\n                overflow: hidden;\n                width: 100%;\n                left: 0;\n                height: calc(${e} * 100%);\n                top: calc((1 - ${e}) * 100% / 2);\n              }\n\n              .element-overlay-area {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n              }\n\n              .page-safe-area {\n                overflow: visible;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                width: 100%;\n                height: calc(${t} * 100%);\n                margin: auto 0;\n              }\n\n              .mask {\n                position: absolute;\n                overflow: hidden;\n              }\n\n              .fill {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                margin: 0;\n              }\n\n              @media (prefers-reduced-motion: no-preference) {\n                .animation-wrapper {\n                  opacity: var(--initial-opacity);\n                  transform: var(--initial-transform);\n                }\n              }\n\n              amp-story-grid-layer.align-bottom {\n                align-content: end;\n                padding: 0;\n              }\n\n              .captions-area {\n                padding: 0 32px 0;\n              }\n\n              amp-story-captions {\n                margin-bottom: 16px;\n                text-align: center;\n              }\n\n              amp-story-captions span {\n                display: inline-block;\n                margin: 0;\n                padding: 6px 12px;\n                vertical-align: middle;\n                border-radius: 15px;\n                background: rgba(11, 11, 11, 0.6);\n                color: rgba(255, 255, 255, 1);\n                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;;\n                font-size: calc(4 * var(--story-page-vw));\n                line-height: 1.4;\n                word-break: break-word;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n              }\n              `}})};const Sr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"swap";const n=new URL("https://fonts.googleapis.com/css2");n.searchParams.append("display",t);for(const{family:t,variants:r=[]}of e){const e=r.reduce(((e,t)=>{let[n,r]=t;return 1!==n||e.includes("ital")||e.push("ital"),r&&400!==r&&!e.includes("wght")&&e.push("wght"),e}),[]).sort();let a=t;const o=e.join(",");o&&(a+=":"+o);const l=r.sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:e[1]-t[1])).map((t=>{let[n,r]=t;const a=[];return e.includes("ital")&&a.push(n),e.includes("wght")&&a.push(r),a})).join(";"),i="400"===l;l&&!i&&(a+="@"+l),n.searchParams.append("family",a)}return decodeURI(n.toString())};const Cr=function(e,t){const n=function(e){const t=e.split(/[#?]/)[0].split(".").pop().trim();switch(t){case"woff":case"woff2":return t;case"ttf":return"truetype";case"otf":return"opentype";default:return null}}(t);return n?`@font-face {\n    font-family: "${e}";\n    src: url('${t}') format('${n}');\n    font-weight: normal;\n    font-display:swap;\n  }`:null};var Ir=n(56862);const xr=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),Ar=(e,t)=>Math.abs(e[0]+e[1]-t[0]-t[1]),kr=(e,t)=>e.reduce(((e,n)=>Ar(n,t)<Ar(e,t)?n:e));const Or=function FontDeclarations(e){let{pages:t}=e;const n=new Map;for(const{elements:e}of t){const t=e.filter((e=>{let{type:t}=e;return"text"===t}));for(const{font:e,content:r}of t){const{service:t,family:a,variants:o=[],url:l}=e;if(!t||"system"===t)continue;const i=n.get(t)||new Map;n.set(t,i);const s=i.get(a)||{family:a,variants:[],url:l},c=(0,Ir.getFontVariants)(r);if(o.length>0)for(const e of c){const t=kr(o,e),n=xr(s.variants,t),r=xr(o,t);!n&&r&&s.variants.push(t)}i.set(a,s)}}return c.createElement(c.Fragment,null,Array.from(n.keys()).map((e=>{const t=n.get(e);switch(e){case"fonts.google.com":return c.createElement("link",{key:e,href:Sr(Array.from(t.values())),rel:"stylesheet"});case"custom":return Array.from(t.values()).map((e=>{let{family:t,url:n}=e;const r=Cr(t,n);return c.createElement("style",{key:t,dangerouslySetInnerHTML:{__html:r}})}));default:return null}})))};var Nr=n(18535);const Pr=7,Rr=!0;var Mr=n(1787);function Lr(e,t){try{return new URL(t,e).href}catch(e){return t}}function Dr(e){try{return new URL(e),!0}catch{return!1}}function Br(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}function Fr(){return Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fr.apply(this,arguments)}const Hr=function WithLink(e){let{element:t,children:n,...r}=e;const a=t.link||{},{url:o,icon:l,desc:i,rel:s=[]}=a;if(!o)return n;s.push("noreferrer");const d=Br(o);return c.createElement("a",Fr({href:d,"data-tooltip-icon":l||void 0,"data-tooltip-text":i,target:"_blank",rel:s.join(" ")},r),n)};const Ur=function OutputElement(e){let{element:t}=e;const{id:n,opacity:r,type:a,border:o,backgroundColor:l,backgroundTextMode:i,overlay:s}=t,{Output:d,isMaskable:u}=(0,Hn.getDefinitionForType)(a),p=(0,Mr.getBox)(t,100,100),{x:m,y:f,width:g,height:h,rotationAngle:E}=p,b={backgroundClip:"content-box",...(0,Nr.default)(l)};return c.createElement("div",{style:{position:"absolute",pointerEvents:"none",left:m?`${m}%`:0,top:f?`${f}%`:0,width:`${g}%`,height:`${h}%`,...(0,Nn.shouldDisplayBorder)(t)?(0,Nn.getBorderPositionCSS)({...o,width:`${g}%`,height:`${h}%`,posTop:`${f}%`,posLeft:`${m}%`}):null,transform:E?`rotate(${E}deg)`:null,opacity:void 0!==r?r/100:null}},c.createElement(Cn.StoryAnimation.AMPWrapper,{target:n},c.createElement(Nn.OutputWithMask,{className:u?"mask":void 0,element:t,box:p,id:"el-"+n,style:{...(0,Nn.shouldDisplayBorder)(t)?(0,Nn.getBorderStyle)(t):null,pointerEvents:"initial",width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0,zIndex:0,...(0,Nn.getBorderRadius)(t),...i===Hn.BACKGROUND_TEXT_MODE.FILL?b:null},skipDefaultMask:!0},c.createElement(Hr,{element:t,style:{width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0}},c.createElement(d,{element:t,box:p})),s&&c.createElement("div",{className:"element-overlay-area",style:(0,Nr.default)(s)}))))};function zr(){return zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zr.apply(this,arguments)}const Gr=function BackgroundAudio(e){let{backgroundAudio:t,id:n}=e;const{resource:r,tracks:a,loop:o}=t||{},{mimeType:l,src:i}=r,s={loop:o?"loop":void 0,id:`page-${n}-background-audio`,"captions-id":a?.length>0?`el-${n}-captions`:void 0},d={type:l,src:i};return c.createElement("amp-story-grid-layer",{template:"fill"},c.createElement("amp-video",zr({autoPlay:"autoplay",layout:"nodisplay",poster:""},s),c.createElement("source",d),a&&a.map(((e,t)=>{let{srclang:n,label:r,kind:a,track:o,id:l}=e;return c.createElement("track",{srcLang:n,label:r,kind:a,src:o,key:l,default:0===t})}))))};const jr=function(e){return e.sort(((e,t)=>e.y-t.y)).reduce(((e,t)=>{let{id:n,fontSize:r,content:a}=t;if(a.length<=3)return e.set(n,"p"),e;const o=Array.from(e.values()).includes("h1");return r>=36&&!o?(e.set(n,"h1"),e):(r>=27?e.set(n,"h2"):r>=21?e.set(n,"h3"):e.set(n,"p"),e)}),new Map)};const Yr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((e=>{let{type:t,loop:n}=e;const{isMedia:r}=(0,Hn.getDefinitionForType)(t);return r&&!n})).reduce(((e,n)=>n?.resource?.length?n?.resource?.length<t||e?.resource?.length>n?.resource?.length?e:n:e),void 0)};const Zr=function(e){let{animations:t,defaultPageDuration:n=Pr,elements:r,backgroundAudio:a,id:o}=e;const{resource:l,loop:i}=a||{},s=(0,Cn.getTotalDuration)({animations:t})/1e3,c=!i&&l?.length?l.length:0,d=Yr(r,Math.max(s||1,c));if(d?.id)return`el-${d?.id}-media`;const u=Math.max(s||0,c,n);return u>c?`${u}s`:`page-${o}-background-audio`};const Wr=function Outlink(e){let{ctaText:t,url:n,icon:r,theme:a,rel:o=[]}=e;return c.createElement("amp-story-page-outlink",{layout:"nodisplay","cta-image":r||void 0,theme:a},c.createElement("a",{href:n,rel:o.join(" ")},t||(0,d.__)("Learn more","web-stories")))};const Vr=function ShoppingAttachment(e){let{products:t,theme:n}=e;return c.createElement("amp-story-shopping-attachment",{theme:n},c.createElement("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify({items:t})}}))},$r=`${J.PAGE_WIDTH}:${J.PAGE_HEIGHT}`;const qr=function OutputPage(e){let{page:t,autoAdvance:n=Rr,defaultPageDuration:r=Pr,flags:a}=e;const{id:o,animations:l,elements:i,backgroundColor:s,backgroundAudio:d,pageAttachment:u}=t,[p,...m]=i,f=p?.resource?.baseColor,g=f?{backgroundColor:f}:{backgroundColor:"white",...(0,Nr.default)(s)},h=n?Zr({animations:l,elements:i,defaultPageDuration:r,backgroundAudio:d,id:o}):void 0,E=jr(m.filter((e=>{let{type:t}=e;return"text"===t}))),b=m.map((e=>{const{id:t,type:n,tagName:r="auto"}=e;return"text"===n&&"auto"===r&&(e.tagName=E.get(t)),u?.url&&(0,Hn.isElementBelowLimit)(e)&&delete e.link,e})),y=i.filter((e=>{let{type:t}=e;return t===Hn.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t})).filter(Boolean),_=i.filter((e=>{let{type:t,tracks:n}=e;return t===Hn.ELEMENT_TYPES.VIDEO&&n?.length>0})).map((e=>{let{id:t}=e;return`el-${t}-captions`})),v=d?.resource?.src,w=d?.tracks?.length>0,T=w||!1===d?.loop&&d?.resource?.length;return v&&w&&_.push(`el-${o}-captions`),c.createElement("amp-story-page",{id:o,"auto-advance-after":h,"background-audio":v&&!T?v:void 0},c.createElement(Cn.StoryAnimation.Provider,{animations:l,elements:i},c.createElement(Cn.StoryAnimation.AMPAnimations,null),p&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":$r,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area",style:g},c.createElement("div",{className:"page-safe-area"},c.createElement(Ur,{element:p}),p.overlay&&c.createElement("div",{className:"page-background-overlay-area",style:(0,Nr.default)(p.overlay)})))),c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":$r,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area"},c.createElement("div",{className:"page-safe-area"},b.map((e=>c.createElement(Ur,{key:e.id,element:e}))))))),v&&T&&c.createElement(Gr,{backgroundAudio:d,id:o}),_.length>0&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":$r,class:"grid-layer align-bottom"},c.createElement("div",{className:"captions-area"},_.map((e=>c.createElement("amp-story-captions",{key:e,id:e,layout:"fixed-height",height:"100"}))))),u?.url&&c.createElement(Wr,u),y.length>0&&a?.shoppingIntegration&&c.createElement(Vr,{products:y,theme:u?.theme}))};const Kr=function(e){const t=[];if(0===e.length)return t;for(const{type:n,resource:r,isBackground:a}of e[0].elements){if(!["image","video","gif"].includes(n))continue;if(!a)continue;const e=r?.output?.src||r.src;t.push({url:e,type:"image"===n?"image":"video"})}return t};const Xr=function OutputStory(e){let{story:{featuredMedia:t,link:n,title:r,autoAdvance:a,defaultPageDuration:o,backgroundAudio:l,publisherLogo:i},pages:s,metadata:{publisher:d},flags:u}=e;const p=_r(s),m=Kr(s),f=t?.url||"",g=i?.url||"";return c.createElement("html",{amp:"",lang:"en"},c.createElement("head",null,c.createElement("meta",{charSet:"utf-8"}),c.createElement("meta",{name:"viewport",content:"width=device-width,minimum-scale=1,initial-scale=1"}),p.map((e=>{let{name:t,src:n}=e;return c.createElement("script",{key:n,async:"async",src:n,"custom-element":t})})),c.createElement(Or,{pages:s}),m.map((e=>{let{url:t,type:n}=e;return c.createElement("link",{key:t,href:t,rel:"preload",as:n})})),c.createElement(vr,null),c.createElement(Tr,null),c.createElement("meta",{name:"web-stories-replace-head-start"}),c.createElement("title",null,r),n&&c.createElement("link",{rel:"canonical",href:n}),c.createElement("meta",{name:"web-stories-replace-head-end"})),c.createElement("body",null,c.createElement("amp-story",{standalone:"",publisher:d,"publisher-logo-src":g,title:r,"poster-portrait-src":f,"background-audio":l?.resource?.src??void 0},s.map((e=>c.createElement(qr,{key:e.id,page:e,autoAdvance:a,defaultPageDuration:o,flags:u}))))))};function Qr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,u.renderToStaticMarkup)(c.createElement(Xr,{story:e,pages:t,metadata:n,flags:r}))}const Jr=function(e){let{story:t,pages:n,metadata:r,flags:a}=e;const{terms:o,...l}=Bn(t,["title","status","author","date","modified","slug","excerpt","featuredMedia","password","currentStoryStyles","globalStoryStyles","autoAdvance","defaultPageDuration","backgroundAudio","terms"]);return{content:Qr(t,n,r,a),pages:n,...l,...o,meta:{web_stories_publisher_logo:t.publisherLogo?.id}}},ea={400:(0,d._x)("Bad Request","HTTP status description","web-stories"),401:(0,d._x)("Unauthorized","HTTP status description","web-stories"),403:(0,d._x)("Forbidden","HTTP status description","web-stories"),500:(0,d._x)("Internal Server Error","HTTP status description","web-stories")};const ta=function(e){let{storyId:t,pages:n,story:r,updateStory:a}=e;const{actions:{saveStoryById:o}}=Z(),{actions:{resetNewChanges:l}}=mr(),{metadata:i,flags:s}=H(),{showSnackbar:c}=(0,Er.useSnackbar)(),[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),{editLink:h}=r,E=yr(t,h),b=(0,u.useCallback)((e=>{m(!0);const u=["publish","future","private"].includes(r.status),p=(0,O.getTimeTracker)("load_save_story");return Promise.resolve().then((()=>o({storyId:t,...Jr({story:r,pages:n,metadata:i,flags:s}),...e}))).then((e=>{const{status:t,slug:n,link:r,previewLink:o,editLink:l,embedPostLink:i,featuredMedia:s}=e;a({properties:{status:t,slug:n,link:r,previewLink:o,editLink:l,embedPostLink:i,featuredMedia:s}}),E();const c=["publish","future","private"].includes(e.status);g(!u&&c)})).catch((e=>{const t=e.message?(0,br.stripHTML)(e.message):null;let n=(0,d.__)("Failed to save the story","web-stories");t&&(n=(0,Ze.default)(
/* translators: %s: error message */
(0,d.__)("Failed to save the story: %s","web-stories"),t)),Object.prototype.hasOwnProperty.call(ea,e?.data?.status)&&(n=t?(0,Ze.default)(
/* translators: 1: error message. 2: status code */
(0,d.__)("Failed to save the story: %1$s (%2$s)","web-stories"),t,ea[e?.data?.status]):(0,Ze.default)(
/* translators: %s: error message */
(0,d.__)("Failed to save the story: %s","web-stories"),ea[e?.data?.status])),console.log((0,d.__)("Failed to save the story","web-stories"),e),(0,O.trackError)("save_story",t),c({message:n,dismissible:!0})})).finally((()=>{m(!1),l(),p()}))}),[r,n,i,o,t,a,E,c,l,s]);return{saveStory:b,isSaving:p,isFreshlyPublished:f}};function na(e){return new URLSearchParams(e.startsWith("#")?e.substr(1):e)}const ra=function(e,t){const[n,r]=(0,u.useState)((()=>{const n=na(window.location.hash);let r=t;try{n.has(e)&&(r=JSON.parse(decodeURI(n.get(e))))}catch(e){}return r}));return(0,u.useEffect)((()=>{const t=na(window.location.hash);n?t.set(e,encodeURI(JSON.stringify(n))):t.delete(e),(window.location.hash||t.toString())&&history.replaceState(history.state,"",`#${t.toString()}`)}),[e,n]),[n,r]};var aa=n(30738),oa=n.n(aa);const la=function(e){return t=>{Array.isArray(e)&&e.forEach((e=>{const n=e.split(".");if(!n.length)return;if(1===n.length)return void delete t[n[0]];const r=n.pop(),a=n.pop(),o=n.reduce(((e,t)=>e?.[t]||e),t);Object.prototype.hasOwnProperty.call(o,a)&&"object"==typeof o[a]&&o[a]&&delete o[a][r]}))}},ia=["resource.baseColor","resource.blurHash","resource.id","resource.isMuted","resource.posterId","resource.poster"];const sa=function(e){let{story:t,current:n,pages:r,selection:a,capabilities:o}=e;const{state:{currentEntry:l},actions:{stateToHistory:i}}=mr(),s=(0,u.useRef)();(0,u.useEffect)((()=>{l&&(s.current=oa()(l))}),[l]);const c=(0,u.useRef)(),d=(0,u.useRef)();(0,u.useEffect)((()=>{c.current=n,d.current=a}),[n,a]);const p=e=>oa()(e).map((e=>(e.elements.forEach(la(ia)),e)));(0,u.useEffect)((()=>{let e=!1;if(ia.length&&s.current&&r?.length){const n={story:t,capabilities:o};if(Object.keys(n).every((e=>JSON.stringify(n[e])===JSON.stringify(s.current[e])))){const t=p(r),n=p(s.current.pages);e=JSON.stringify(t)===JSON.stringify(n)}}e||i({story:t,current:c.current,selection:d.current,pages:r,capabilities:o})}),[t,r,i,o])};const ca=function(e){let{restore:t}=e;const{state:{requestedState:n}}=mr();(0,u.useEffect)((()=>{if(!n)return;const{current:e,pages:r,selection:a,story:o,capabilities:l}=n;t({pages:r,current:e,story:o,selection:a,capabilities:l})}),[t,n])},da={addPage:e=>t=>{let{page:n}=t;return e({type:Bt,payload:{page:n,position:null}})},addPageAt:e=>t=>{let{page:n,position:r}=t;return e({type:Bt,payload:{page:n,position:r}})},copySelectedElement:e=>()=>e({type:Kt}),deletePage:e=>t=>{let{pageId:n}=t;return e({type:Ht,payload:{pageId:n}})},deleteCurrentPage:e=>()=>e({type:Ht,payload:{pageId:null}}),updatePageProperties:e=>t=>{let{pageId:n,properties:r}=t;return e({type:Ft,payload:{pageId:n,properties:r}})},updateCurrentPageProperties:e=>t=>{let{properties:n}=t;return e({type:Ft,payload:{pageId:null,properties:n}})},arrangePage:e=>t=>{let{pageId:n,position:r}=t;return e({type:Ut,payload:{pageId:n,position:r}})},setCurrentPage:e=>t=>{let{pageId:n}=t;return e({type:Qt,payload:{pageId:n}})},addElements:e=>t=>{let{elements:n}=t;return e({type:Gt,payload:{elements:n}})},addElement:e=>t=>{let{element:n}=t;return e({type:Gt,payload:{elements:[n]}})},deleteElementsById:e=>t=>{let{elementIds:n}=t;return e({type:zt,payload:{elementIds:n}})},deleteElementById:e=>t=>{let{elementId:n}=t;return e({type:zt,payload:{elementIds:[n]}})},deleteSelectedElements:e=>()=>e({type:zt,payload:{elementIds:null}}),updateElementsById:e=>t=>{let{elementIds:n,properties:r}=t;return e({type:jt,payload:{elementIds:n,properties:r}})},updateElementsByResourceId:e=>t=>{let{id:n,properties:r}=t;return e({type:Yt,payload:{id:n,properties:r}})},deleteElementsByResourceId:e=>t=>{let{id:n}=t;return e({type:Zt,payload:{id:n}})},updateElementById:e=>t=>{let{elementId:n,properties:r}=t;return e({type:jt,payload:{elementIds:[n],properties:r}})},duplicateElementsById:e=>t=>{let{elementIds:n}=t;return e({type:qt,payload:{elementIds:n}})},updateSelectedElements:e=>t=>{let{properties:n}=t;return e({type:jt,payload:{elementIds:null,properties:n}})},combineElements:e=>t=>{let{firstElement:n,secondId:r,shouldRetainAnimations:a}=t;return e({type:$t,payload:{firstElement:n,secondId:r,shouldRetainAnimations:a}})},setBackgroundElement:e=>t=>{let{elementId:n}=t;return e({type:Wt,payload:{elementId:n}})},clearBackgroundElement:e=>()=>e({type:Wt,payload:{elementId:null}}),arrangeElement:e=>t=>{let{elementId:n,position:r}=t;return e({type:Vt,payload:{elementId:n,position:r}})},arrangeSelection:e=>t=>{let{position:n}=t;return e({type:Vt,payload:{elementId:null,position:n}})},setSelectedElementsById:e=>t=>{let{elementIds:n}=t;return e({type:Jt,payload:{elementIds:n}})},clearSelection:e=>()=>e({type:Jt,payload:{elementIds:[]}}),addElementToSelection:e=>t=>{let{elementId:n}=t;return e({type:en,payload:{elementId:n}})},removeElementFromSelection:e=>t=>{let{elementId:n}=t;return e({type:tn,payload:{elementId:n}})},toggleElementInSelection:e=>t=>{let{elementId:n}=t;return e({type:nn,payload:{elementId:n}})},updateAnimationState:e=>t=>{let{animationState:n}=t;return e({type:on,payload:{animationState:n}})},addAnimations:e=>t=>{let{animations:n}=t;return e({type:ln,payload:{animations:n}})},updateStory:e=>t=>{let{properties:n}=t;return e({type:an,payload:{properties:n}})},toggleLayer:e=>t=>{let{metaKey:n,shiftKey:r,elementId:a}=t;return e({type:rn,payload:{metaKey:n,shiftKey:r,elementId:a}})},updateElementsByFontFamily:e=>t=>{let{family:n,properties:r}=t;return e({type:Xt,payload:{family:n,properties:r}})}},ua={restore:e=>t=>{let{pages:n,selection:r,current:a,story:o,capabilities:l}=t;return e({type:sn,payload:{pages:n,selection:r,current:a,story:o,capabilities:l}})}};const pa=function(e,t){let{type:n,payload:r}=t;switch(n){case Bt:return yn(e,r);case Ht:return _n(e,r);case Ft:return vn(e,r);case Ut:return wn(e,r);case Qt:return Yn(e,r);case Gt:return Tn(e,r);case zt:return Sn(e,r);case jt:return In(e,r);case Yt:return xn(e,r);case Zt:return An(e,r);case $t:return Fn(e,r);case Wt:return kn(e,r);case Vt:return On(e,r);case Jt:return Zn(e,r);case en:return Wn(e,r);case tn:return Vn(e,r);case nn:return $n(e,r);case rn:return qn(e,r);case qt:return Un(e,r);case an:return Jn(e,r);case on:return Kn(e,r);case ln:return Xn(e,r);case Kt:return Gn(e,r);case sn:return Qn(e,r);case Xt:return jn(e,r);default:return e}},ma={pages:[],capabilities:{},current:null,selection:[],story:{},animationState:Cn.STORY_ANIMATION_STATE.RESET,copiedElementState:{}};const fa=function(e){const[t,n]=(0,u.useReducer)(pa,{...ma,...e}),{internal:r,api:a}=(0,u.useMemo)((()=>{const e=e=>Object.keys(e).reduce(((t,r)=>({...t,[r]:e[r](n)})),{});return{internal:e(ua),api:e(da)}}),[n]);return{state:t,internal:r,api:a}};const ga=function(e){let{storyId:t,pages:n,story:r}=e;const{actions:{autoSaveById:a}}=Z(),{metadata:o,flags:l}=H(),[i,s]=(0,u.useState)(!1);return{autoSave:(0,u.useCallback)((e=>(s(!0),a({storyId:t,...Jr({story:r,pages:n,metadata:o,flags:l}),...e}).finally((()=>s(!1))))),[r,n,o,a,t,l]),isAutoSaving:i}};var ha=n(45697),Ea=n.n(ha);const ba={onInitialElementAdded:"onInitialElementAdded",onSecondPageAdded:"onSecondPageAdded",onFifthPageAdded:"onFifthPageAdded",onReplaceBackgroundMedia:"onReplaceBackgroundMedia",onReplaceForegroundMedia:"onReplaceForegroundMedia"};function OnInitialElementAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)(!1);return(0,u.useEffect)((()=>{var e;r.current||(0===(e=t)?.pages?.length||1===e?.pages?.length&&e?.pages[0]?.elements?.length<=1)||(n(ba.onInitialElementAdded),r.current=!0)}),[n,t]),null}function OnPageAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)({[ba.onSecondPageAdded]:!1,[ba.onFifthPageAdded]:!1});return(0,u.useEffect)((()=>{!r.current[ba.onSecondPageAdded]&&t?.pages?.length>=2&&(n(ba.onSecondPageAdded),r.current[ba.onSecondPageAdded]=!0)}),[n,t?.pages]),(0,u.useEffect)((()=>{!r.current[ba.onFifthPageAdded]&&t?.pages?.length>=5&&(n(ba.onFifthPageAdded),r.current[ba.onFifthPageAdded]=!0)}),[n,t?.pages]),null}OnInitialElementAddedRegister.propTypes={currentStory:Ea().shape({story:Ea().shape({pages:Ea().arrayOf(Ea().shape({elements:Ea().arrayOf(Ea().shape(Hn.StoryPropTypes.element))}))})}),prevStory:Ea().shape({story:Ea().shape({pages:Ea().arrayOf(Ea().shape({elements:Ea().arrayOf(Ea().shape(Hn.StoryPropTypes.element))}))})}),dispatchStoryEvent:Ea().func.isRequired},OnPageAddedRegister.propTypes={currentStory:Ea().shape({pages:Ea().array}),prevStory:Ea().shape({pages:Ea().array}),dispatchStoryEvent:Ea().func.isRequired};const ya=[OnInitialElementAddedRegister,OnPageAddedRegister],_a=(0,u.createContext)({state:{},actions:{}});function va(){return Object.values(ba).reduce(((e,t)=>({...e,[t]:new Map})),{})}function wa(e,t){let[n]=e;return[t,n]}function StoryTriggersProvider(e){let{children:t,story:n}=e;const[[r,a],o]=(0,u.useReducer)(wa,[n,null]),l=(0,u.useMemo)(va,[]);(0,u.useEffect)((()=>o(n)),[n]);const i=(0,u.useCallback)(((e,t)=>{const n=Symbol();return l[e].set(n,t),()=>l[e].delete(n)}),[l]),s=(0,u.useCallback)((e=>{l[e]?.forEach((e=>e(r)))}),[l,r]),d=(0,u.useMemo)((()=>[i,s]),[i,s]);return c.createElement(_a.Provider,{value:d},c.createElement(c.Fragment,null,ya.map((e=>c.createElement(e,{key:e.name,currentStory:r,previousStory:a,dispatchStoryEvent:s}))),t))}function Ta(e){return e[0]}function Sa(e){return e[1]}function Ca(e,t){const n=(0,u.useContextSelector)(_a,Ta);(0,u.useEffect)((()=>n(e,t)),[e,t,n])}const Ia=function StoryProvider(e){let{storyId:t,initialEdits:n,children:r}=e;const[a,o]=ra("page",null),{state:l,api:i,internal:{restore:s}}=fa({current:a}),{pages:d,current:p,selection:m,story:f,animationState:g,capabilities:h,copiedElementState:E}=l;(0,u.useEffect)((()=>o(p)),[p,o]);let b=null,y=null,_=null,v=null;p&&(b=p,y=d.findIndex((e=>{let{id:t}=e;return t===p})),_=y+1,v=d[y]);const w=(0,u.useMemo)((()=>m.length>0?m:He),[m]),T=!v,S=v?.elements,C=(0,u.useMemo)((()=>{if(T)return He;const e=S.filter((e=>{let{id:t}=e;return m.includes(t)}));return e.length>0?e:He}),[T,S,m]),I=v?.animations,x=(0,u.useMemo)((()=>{if(T)return He;const e=(I||[]).reduce(((e,t)=>{let{targets:n,...r}=t;return n.some((e=>m.includes(e)))?[...e,{targets:n,...r}]:e}),[]);return e.length>0?e:He}),[T,m,I]),A=C.length>0,k=0===d.length;hr({restore:s,shouldLoad:k,storyId:t,story:n?.story}),sa({pages:d,current:p,selection:m,story:f,capabilities:h}),ca({restore:s});const{updateStory:O}=i,{saveStory:N,isSaving:P,isFreshlyPublished:R}=ta({storyId:t,pages:d,story:f,updateStory:O}),{autoSave:M,isAutoSaving:L}=ga({storyId:t,pages:d,story:f}),D=(0,u.useMemo)((()=>({pages:d,currentPage:v,currentPageId:b,currentPageIndex:y,currentPageNumber:_,selectedElementIds:w,selectedElements:C,selectedElementAnimations:x,hasSelection:A,story:f,animationState:g,capabilities:h,meta:{isSaving:P||L,isSavingStory:P,isAutoSavingStory:L,isFreshlyPublished:R},copiedElementState:E})),[d,v,b,y,_,w,C,x,A,f,g,h,P,L,R,E]),B={state:D,actions:{...i,autoSave:M,saveStory:N},internal:{reducerState:l,restore:s}};return c.createElement(er.Provider,{value:B},c.createElement(StoryTriggersProvider,{story:D},r))};const xa=function(e){return(0,u.useContextSelector)(er,e??u.identity)};const Aa=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=Z(),{actions:{uploadFile:r}}=Rt(),{storyId:a}=H(),{updateElementsByResourceId:o}=xa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),l=(0,u.useCallback)((async(e,t,o)=>{if(!o)return{};o.name||(o.name=t);const l=await r(o,{mediaId:e,mediaSource:"poster-generation"}),{id:i,src:s,width:c,height:d}=l;e&&await n(e,{posterId:i,storyId:a});try{await(0,q.default)({src:s})}catch{}return{posterId:i,poster:s,posterWidth:c,posterHeight:d}}),[a,n,r]),i=(0,u.useCallback)((async(e,n)=>{const r=(0,O.getTimeTracker)("load_video_poster");try{const a=Lt(n),i=Ue(a),s=await Dt(n),{posterId:c,poster:d,posterWidth:u,posterHeight:p}=await l(e,i,s),m=u&&p&&{width:u,height:p}||null;o({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,posterId:c,poster:d,...m}}}}),t({id:e,data:{posterId:c,poster:d,...m}})}catch(e){(0,O.trackError)("video_poster_generation",e.message)}finally{r()}}),[l,o,t]);return{uploadVideoFrame:i,uploadVideoPoster:l}},ka=(0,u.createContext)({state:{},actions:{}});const Oa=function CurrentUserProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{actions:{getCurrentUser:a,updateCurrentUser:o}}=Z();(0,u.useEffect)((()=>{let e=!0;return a&&!Object.keys(n).length&&a().then((t=>{e&&r(t)})),()=>{e=!1}}),[n,a]);const l=(0,u.useCallback)((e=>o?o(e).then(r):null),[o]),i=(0,u.useCallback)((()=>l({mediaOptimization:!n.mediaOptimization})),[n,l]),s={state:{currentUser:n},actions:{toggleWebStoriesMediaOptimization:i,updateCurrentUser:l}};return c.createElement(ka.Provider,{value:s},t)};const Na=function(e){return(0,u.useContextSelector)(ka,e??u.identity)},Pa=["video/3gpp","video/3gpp2","video/MP2T","video/mp4","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-flv","video/x-h261","video/x-h263","video/x-m4v","video/x-matroska","video/x-mjpeg","video/x-ms-asf","video/x-msvideo","video/x-nut"],Ra=e=>{let{size:t}=e;return t>=me},Ma={CODEC:["-vcodec","libx264"],SCALE:["-vf",`scale='min(${ye},iw)':'min(${be},ih)':'force_original_aspect_ratio=decrease',pad='width=ceil(iw/2)*2:height=ceil(ih/2)*2'`],FPS:["-r","24"],FASTSTART:["-movflags","+faststart"],COLOR_PROFILE:["-pix_fmt","yuv420p"],PRESET:["-preset","fast"],SEEK_TO_START:["-ss","00:00:01.000"],SINGLE_FRAME:["-frames:v","1"]},La=[...Ma.CODEC,...Ma.SCALE,...Ma.FPS,...Ma.FASTSTART,...Ma.COLOR_PROFILE,...Ma.PRESET];const Da=function(){const{ffmpegCoreUrl:e,capabilities:{hasUploadMediaAction:t}}=H(),{currentUser:r}=Na((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),a=Boolean(window?.crossOriginIsolated),o=(0,u.useCallback)((async t=>{const{createFFmpeg:r,fetchFile:a}=await n.e(7098).then(n.t.bind(n,15045,23)),o=r({corePath:e,log:false});return await o.load(),o.FS("writeFile",t.name,await a(t)),o}),[e]),l=(0,u.useCallback)((async e=>{const t=(0,O.getTimeTracker)("load_video_poster_ffmpeg");let n;try{n=await o(e);const r=(0,ue.default)()+"."+fe,a=W(e),l=Ue(a);await n.run(...Ma.SEEK_TO_START,"-i",e.name,...Ma.SINGLE_FRAME,...Ma.SCALE,...Ma.COLOR_PROFILE,...Ma.PRESET,r);const i=n.FS("readFile",r);return se(new Blob([i.buffer],{type:ge}),l,ge)}catch(e){throw console.error(e),(0,O.trackError)("video_poster_generation_ffmpeg",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),i=(0,u.useCallback)((async e=>{const t=(0,O.getTimeTracker)("load_video_transcoding");let n;try{n=await o(e);const r=(0,ue.default)()+"."+Ee,a=W(e)+"."+Ee;await n.run("-i",e.name,...La,r);const l=n.FS("readFile",r);return se(new Blob([l.buffer],{type:he}),a,he)}catch(e){throw console.error(e),(0,O.trackError)("video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),s=(0,u.useCallback)((async(e,t,n)=>{const r=(0,O.getTimeTracker)("load_trim_video_transcoding");let a;try{a=await o(e);const l=e?.type||he,i=kt(l),s=(0,ue.default)()+"."+i,c=W(e)+"-trimmed."+i;await a.run("-i",e.name,"-ss",t,"-to",n,s);const d=a.FS("readFile",s);return se(new Blob([d.buffer],{type:l}),c,l)}catch(e){throw console.log(e),(0,O.trackError)("trim_video_transcoding",e.message),e}finally{try{a.exit()}catch{}r()}}),[o]),c=(0,u.useCallback)((async e=>{const t=(0,O.getTimeTracker)("load_mute_video_transcoding");let n;try{n=await o(e);const r=e?.type||he,a=kt(r),l=(0,ue.default)()+"."+a,i=W(e)+"-muted."+a;await n.run("-i",e.name,"-vcodec","copy","-an",l);const s=n.FS("readFile",l);return se(new Blob([s.buffer],{type:r}),i,r)}catch(e){throw console.log(e),(0,O.trackError)("mute_video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),d=(0,u.useCallback)((async e=>{const t=(0,O.getTimeTracker)("load_gif_conversion");let n;try{n=await o(e);const r=(0,ue.default)()+"."+Ee,a=W(e)+"."+Ee;await n.run("-i",e.name,...La,r);const l=n.FS("readFile",r);return new se(new Blob([l.buffer],{type:he}),a,he)}catch(e){throw console.error(e),(0,O.trackError)("gif_conversion",e.message),e}finally{try{n.exit()}catch(e){}t()}}),[o]),p=(0,u.useCallback)((e=>Pa.includes(e.type)),[]),m=Boolean(r?.mediaOptimization),f=t&&m&&a;return(0,u.useMemo)((()=>({isTranscodingEnabled:f,canTranscodeFile:p,isFileTooLarge:Ra,transcodeVideo:i,stripAudioFromVideo:c,getFirstFrameOfVideo:l,convertGifToVideo:d,trimVideo:s})),[f,p,i,c,l,d,s])},Ba={PENDING:"PENDING",CANCELLED:"CANCELLED",UPLOADED:"UPLOADED",UPLOADING:"UPLOADING",TRANSCODED:"TRANSCODED",TRANSCODING:"TRANSCODING",MUTING:"MUTING",MUTED:"MUTED",TRIMMING:"TRIMMING",TRIMMED:"TRIMMED",FINISHED:"FINISHED"};function Fa(e,t){let{payload:{file:n,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,additionalData:s,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m}}=t;const f=(0,ue.default)();r.id||(r.id=(0,ue.default)());const g={id:f,file:n,state:Ba.PENDING,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,additionalData:s,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m};return{...e,queue:[...e.queue,g]}}function Ha(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ba.UPLOADING}:e))}}function Ua(e,t){let{payload:{id:n,resource:r}}=t;const a=e.queue.find((e=>e.id===n));return a?(a.resource.src&&a.resource.src!==r.src&&(0,$.revokeBlob)(a.resource.src),r.poster&&a.resource.poster&&a.resource.poster!==r.poster&&(0,$.revokeBlob)(a.resource.poster),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,poster:r.poster||e.resource.poster},previousResourceId:e.resource.id,posterFile:null,originalResourceId:null,state:Ba.UPLOADED}:e))}):e}function za(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ba.CANCELLED}:e))}}function Ga(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ba.TRANSCODING}:e))}}function ja(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:Ba.TRANSCODED,resource:{...e.resource,isOptimized:!0},additionalData:{...e.additionalData,...a}}:e))}}function Ya(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ba.MUTING}:e))}}function Za(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:Ba.MUTED,resource:{...e.resource,isMuted:!0},additionalData:{...e.additionalData,...a}}:e))}}function Wa(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ba.TRIMMING}:e))}}function Va(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:Ba.TRIMMED,additionalData:{...e.additionalData,...a}}:e))}}function $a(e,t){let{payload:{id:n,resource:r,posterFile:a}}=t;const o=e.queue.find((e=>e.id===n));return o&&o.resource.isPlaceholder?(o.resource.src!==r.src&&((0,$.revokeBlob)(o.resource.src),(0,$.revokeBlob)(o.resource.poster)),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,id:e.resource.id,isPlaceholder:!1},posterFile:a}:e))}):e}function qa(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ba.FINISHED}:e))}}function Ka(e,t){let{payload:{id:n}}=t;const r=e.queue.filter((e=>e.id!==n));return{...e,queue:r}}const Xa={queue:[]};const Qa=function(){const{actions:{uploadFile:e}}=Rt(),{isTranscodingEnabled:t,canTranscodeFile:n,transcodeVideo:a,stripAudioFromVideo:o,getFirstFrameOfVideo:l,convertGifToVideo:i,trimVideo:s}=Da(),[c,d]=(0,u.useReduction)(Xa,r),{uploadVideoPoster:p}=Aa({updateMediaElement:Mt}),m=(0,u.useRef)(!1),f=(0,u.useRef)(null),g=(0,u.useRef)(null),{startUploading:h,finishUploading:E,cancelUploading:b,startTranscoding:y,startMuting:_,startTrimming:v,finishTranscoding:w,finishMuting:T,finishTrimming:S,replacePlaceholderResource:C}=d;(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:t,file:n,state:r,resource:a}=e;if([Ba.TRIMMED,Ba.MUTED,Ba.TRANSCODED].includes(r)&&a.isPlaceholder&&!a.poster)try{const{resource:e,posterFile:r}=await Ge(n);if(!m.current)return;C({id:t,resource:e,posterFile:r})}catch{}})))})()}),[c.queue,C]),(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:r,file:a,state:o,resource:i}=e;if(Ba.PENDING!==o||!i.isPlaceholder)return;if(!t||!n(a))return;if(!(null!==g.current)){g.current=r;try{const e=await l(a),t=(0,$.createBlob)(e),{width:n,height:o}=await K(t),s={...i,poster:t,width:n,height:o};if(!m.current)return;C({id:r,resource:s,posterFile:e})}catch{}finally{g.current=null}}})))})()}),[c.queue,t,n,l,C]);const I=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;y({id:t});try{const e=await i(n);if(!m.current)return;r.mediaSource="gif-conversion",r.isMuted=!0,w({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,O.trackError)("upload_media",e?.message)}finally{f.current=null}}),[y,w,i,b]),x=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={},trimData:a}=e;v({id:t});try{const e=await s(n,a.start,a.end);if(!m.current)return;r.meta={...r.meta,trimData:a},S({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,O.trackError)("upload_media",e?.message)}finally{f.current=null}}),[v,S,s,b]),A=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;_({id:t});try{const e=await o(n);if(!m.current)return;r.isMuted=!0,T({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,O.trackError)("upload_media",e?.message)}finally{f.current=null}}),[_,T,o,b]),k=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;y({id:t});try{const e=await a(n);if(!m.current)return;r.mediaSource="video-optimization",w({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,O.trackError)("upload_media",e?.message)}finally{f.current=null}}),[y,w,a,b]),N=(0,u.useCallback)((async t=>{const{id:n,file:r,resource:a,additionalData:o={}}=t;let{posterFile:i}=t,s=await e(r,o);if(m.current){if(!a.poster&&!i)try{i=await l(r)}catch{}try{const e=W(i),{poster:t,posterId:n}=await p(s.id,e,i);if(!m.current)return;s={...s,poster:t||s.poster||a.poster,posterId:n}}catch{}E({id:n,resource:s})}}),[E,l,e,p]),P=(0,u.useCallback)((async t=>{const{id:n,file:r,additionalData:a={}}=t,o=await e(r,a);m.current&&E({id:n,resource:o})}),[E,e]),R=(0,u.useCallback)((async e=>{const{id:t,file:n,resource:r}=e;h({id:t}),(0,O.trackEvent)("upload_media",{file_size:n?.size,file_type:n?.type});const a=(0,O.getTimeTracker)("load_upload_media");try{["video","gif"].includes(r.type)?await N(e):await P(e)}catch(e){b({id:t,error:e}),(0,O.trackError)("upload_media",e?.message)}finally{a()}}),[h,b,P,N]);return(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:r,file:a,state:o,resource:l,additionalData:i={},muteVideo:s,trimData:c}=e;if(Ba.PENDING!==o)return;"video"===l.type&&null!==l.isMuted&&void 0===i?.isMuted&&(i.isMuted=l.isMuted),l?.baseColor&&(i.meta={...i.meta,baseColor:l.baseColor}),l?.blurHash&&!l?.trimData&&(i.meta={...i.meta,blurHash:l.blurHash});const d="image/gif"===l.mimeType&&Ct(await a.arrayBuffer()),u=t&&(d||n(a)),p=null!==f.current;if(!u||!p){if(t){if(d)return f.current=r,void I(e);if(n(a))return f.current=r,c?void x(e):s?void A(e):void k(e)}R(e)}})))})()}),[c.queue,t,n,I,x,A,k,R]),(0,u.useEffect)((()=>{c.queue.map((e=>{const{state:t}=e;[Ba.TRANSCODED,Ba.MUTED,Ba.TRIMMED].includes(t)&&R(e)}))}),[c.queue,R]),(0,u.useEffect)((()=>(m.current=!0,()=>{m.current=!1})),[]),(0,u.useMemo)((()=>{const e=c.queue.filter((e=>![Ba.PENDING,Ba.CANCELLED,Ba.UPLOADED,Ba.FINISHED].includes(e.state))),t=c.queue.filter((e=>e.state===Ba.PENDING)),n=c.queue.filter((e=>e.state===Ba.UPLOADED)),r=c.queue.filter((e=>e.state===Ba.FINISHED)),a=c.queue.filter((e=>e.state===Ba.CANCELLED)),o=c.queue.some((e=>![Ba.FINISHED,Ba.CANCELLED,Ba.PENDING].includes(e.state))),l=c.queue.some((e=>e.state===Ba.TRANSCODING)),i=c.queue.some((e=>e.state===Ba.MUTING)),s=c.queue.some((e=>e.state===Ba.TRIMMING));return{state:{progress:e,pending:t,uploaded:n,failures:a,finished:r,isUploading:o,isTranscoding:l,isMuting:i,isTrimming:s,isCurrentResourceMuting:e=>c.queue.some((t=>t.state===Ba.MUTING&&t.resource.id===e)),isCurrentResourceProcessing:e=>c.queue.some((t=>[Ba.TRANSCODING,Ba.TRIMMING,Ba.MUTING].includes(t.state)&&t.resource.id===e)),isCurrentResourceUploading:e=>c.queue.some((t=>[Ba.PENDING,Ba.UPLOADING,Ba.UPLOADED,Ba.FINISHED].includes(t.state)&&(t.resource.id===e||t.previousResourceId===e))),isCurrentResourceTranscoding:e=>c.queue.some((t=>t.state===Ba.TRANSCODING&&t.resource.id===e)),isCurrentResourceTrimming:e=>c.queue.some((t=>t.state===Ba.TRIMMING&&t.resource.id===e)),isNewResourceMuting:e=>c.queue.some((t=>t.state===Ba.MUTING&&t.originalResourceId===e)),isNewResourceProcessing:e=>c.queue.some((t=>[Ba.TRANSCODING,Ba.TRIMMING,Ba.MUTING].includes(t.state)&&t.originalResourceId===e)),isNewResourceTranscoding:e=>c.queue.some((t=>t.state===Ba.TRANSCODING&&t.originalResourceId===e)),isElementTrimming:e=>c.queue.some((t=>t.state===Ba.TRIMMING&&t.elementId===e)),canTranscodeResource:e=>{const{isExternal:t,id:n,src:r}=e||{};return!t&&r&&!c.queue.some((e=>e.resource.id===n||e.previousResourceId===n||e.originalResourceId===n))}},actions:{addItem:d.addItem,removeItem:d.removeItem,finishItem:d.finishItem}}}),[c,d])},Ja="/v1/media",eo="/v1/categories",to="/v1/media:registerUsage",no={RELEVANCE:"relevance",LATEST:"latest"},ro={TRENDING:"trending"};function ao(e,t){if(!(null==t||Object.values(e).indexOf(t.toLowerCase())>-1))throw new Error("Invalid order_by: "+t)}function oo(e){if(!(null==e||e>0))throw new Error("Invalid page_size: "+e)}const lo=new class ApiFetcher{async listMedia(){let{languageCode:e=null,filter:t=null,orderBy:n=null,pageSize:r=null,pageToken:a=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){ao(no,e)}(n),await oo(r);const o=new URLSearchParams([["language_code",e],["filter",t],["order_by",n],["page_size",r],["page_token",a]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:o,path:Ja})}async listCategories(){let{filter:e=null,orderBy:t=null,pageSize:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){ao(ro,e)}(t),await oo(n);const r=new URLSearchParams([["filter",e],["order_by",t],["page_size",n]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:r,path:eo})}async registerUsage(e){let{registerUsageUrl:t}=e;await function(e){if(!e||!e.includes(to))throw new Error("Invalid url: "+e)}(t),await this.fetchUrl({url:new URL(t),method:"POST"})}fetchPath(e){let{path:t,params:n,method:r}=e;const a=new URL("https://media3p.googleapis.com"+t);return n.forEach(((e,t)=>{a.searchParams.append(t,e)})),this.fetchUrl({url:a,method:r})}async fetchUrl(e){let{url:t,method:n}=e;t.searchParams.append("key","AIzaSyDqgPsZ0VnxAuakmX7bjnzmNQsE7Drlvk0");const r=await window.fetch(t.href,{method:n??"GET"});if(!r.ok)throw new Error("Obtained an error from the "+t.pathname+" call, statusCode: "+r.status+", statusText: "+r.statusText);return r.json()}},io=(0,u.createContext)({actions:{}});const so=function Media3pApiProvider(e){let{children:t}=e;function n(e){let{provider:t,contentType:n,searchTerm:r,categoryId:a}=e;if(!Object.keys(Et).includes(t))throw new Error(`Unsupported provider: ${t}`);if(a&&r)throw new Error("searchTerm and categoryId are mutually exclusive.");return[`provider:${t}`,n&&`type:${n}`,a&&`category:${a}`,r].filter(Boolean).join(" ")}const r={actions:{listMedia:async function(e){let{provider:t,filter:r,orderBy:a,pageToken:o}=e;const{contentType:l,searchTerm:i,categoryId:s}=r??{},c=await lo.listMedia({filter:n({provider:t,contentType:l,searchTerm:i,categoryId:s}),orderBy:a,pageSize:20,pageToken:o});return{media:(c.media||[]).map(St),nextPageToken:c.nextPageToken}},listCategories:async function(e){let{provider:t,orderBy:r}=e;const a=n({provider:t});return{categories:(await lo.listCategories({filter:a,orderBy:r})).categories.map((e=>({id:e.name,label:e.displayName})))}},registerUsage:async function(e){let{registerUsageUrl:t}=e;await lo.registerUsage({registerUsageUrl:t})}}};return c.createElement(io.Provider,{value:r},t)};const co=function(){return(0,u.useContextSelector)(io,u.identity)},uo=["Karla","Lato","Lora","Merriweather","Montserrat","Nunito","Oswald","Playfair Display","Poppins","Raleway","Roboto","Roboto Condensed","Source Serif Pro","Titillium Web","Work Sans","Alegreya","Arimo","EB Garamond","IBM Plex Mono","IBM Plex Serif","Inconsolata","Mulish","Noto Sans","Noto Serif","Open Sans","PT Mono","PT Sans","PT Serif","Roboto Mono","Source Sans Pro","Ubuntu","Anton","BioRhyme","Bungee","Bungee Shade","Cookie","Dancing Script","Monoton","Nothing You Could Do","Parisienne","Rock Salt","UnifrakturMaguntia"],po=(0,u.createContext)({state:{},actions:{}});function mo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?[e].map((e=>e.replace(/[\s./_]/g,"-"))).map((e=>t?e:e.replace(/^-+|-+$/g,""))).map((e=>t?e:e.replace(/--+/g,"-"))).map((e=>e.normalize("NFD"))).map((e=>e.replace(/[\u0300-\u036f]/g,""))).map((e=>t?e:e.replace(/[^a-zA-Z0-9-_]/g,""))).map((e=>e.toLowerCase())).pop():""}const fo=function(){const e=(0,u.useCallback)((async e=>{const{family:t,service:n,variants:r,url:a}=e,o=`web-stories-${mo(t)}-font-css`;if(!document.getElementById(o))switch(n){case"fonts.google.com":await(0,br.loadStylesheet)(Sr([{family:t,variants:r}],"auto"),o);break;case"custom":await(0,br.loadInlineStylesheet)(o,Cr(t,a));break;default:return}}),[]),t=(0,u.useCallback)((t=>Promise.allSettled(t.map((async t=>{let{font:n,fontWeight:r,fontStyle:a,content:o}=t;const{family:l,service:i}=n;if(!l||"system"===i)return null;const s=`\n              ${a||""} ${r||""} 0 '${l}'\n            `.trim();return await e(n),(0,br.ensureFontLoaded)(s,o)})))),[e]);return{maybeEnqueueFontStyle:t,maybeLoadFont:e}};const go=function FontProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)([]),[a,o]=(0,u.useState)([]),[l,i]=(0,u.useState)([]),[s,d]=(0,u.useState)(null),{actions:{getFonts:p}}=Z(),m=n.length>0?n:a,f=(0,u.useCallback)((async()=>{if(s||!p)return;const e=await p({service:"custom"});if(!e.length)return;const t=e.map((e=>({...e,id:e.family,name:e.family,value:e.family})));d(t)}),[p,s]),g=(0,u.useCallback)((async()=>{if(a.length||!p)return;const e=await p({include:uo.join(",")});if(!e.length)return;const t=e.map((e=>({id:e.family,name:e.family,value:e.family,...e})));o(t)}),[p,a]),{maybeEnqueueFontStyle:h,maybeLoadFont:E}=fo(),b=(0,u.useCallback)((e=>{const t=m.find((t=>t.family===e));return t||{}}),[m]),y=(0,u.useCallback)((async e=>{if(e.length<2)return r([]),[];const t=(await p({search:e})).map((e=>({...e,id:e.family,name:e.family,value:e.family})));return r(t),t}),[p]),_=(0,u.useCallback)((e=>{const t=[{name:pe[400],value:400}],n=b(e);let r=t;if(n){const{weights:e}=n;e&&(r=e.map((e=>({name:pe[e],value:e}))))}return r}),[b]),v=(0,u.useCallback)((e=>{const t=b(e);return t?.fallbacks?t.fallbacks:[]}),[b]),w=(0,u.useCallback)((e=>{const t=[e];l.forEach((n=>{e.family!==n.family&&t.push(n)})),i(t.slice(0,5))}),[l]),T=(0,u.useRef)([]),S=(0,u.useCallback)((e=>{const t=e.filter((e=>!T.current.includes(e)));if(!t?.length)return;T.current=T.current.concat(t);const n=`https://fonts.googleapis.com/css?family=${encodeURIComponent(t.join("|"))}&subset=menu&display=swap`;(0,br.loadStylesheet)(n,"web-stories-google-fonts-menu-css").catch((()=>{T.current=T.current.filter((e=>!t.includes(e)))}))}),[]),C=(0,u.useCallback)((e=>{for(const t of e){const e=s.find((e=>{let{family:n}=e;return n===t}));e&&E(e)}}),[s,E]),I={state:{fonts:n.length>0?n:a,curatedFonts:a,customFonts:s,recentFonts:l},actions:{getFontsBySearch:y,getFontByName:b,maybeEnqueueFontStyle:h,getFontWeight:_,getFontFallback:v,ensureMenuFontsLoaded:S,ensureCustomFontsLoaded:C,addRecentFont:w,getCustomFonts:f,getCuratedFonts:g}};return c.createElement(po.Provider,{value:I},t)};const ho=function(e){return(0,u.useContextSelector)(po,e??u.identity)};var Eo=n(52935);const bo=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`An error has occured: ${t.status}`);return await t.blob()};const yo=async function(e,t){const n=await bo(e),r=function(e){const t=Lt(e),n=t.split(/[#?]/)[0].split(".").pop().trim();return t.replace(`.${n}`,`-optimized.${n}`)}(e);return se(n,r,t)};const _o=function(e){let{uploadMedia:t,postProcessingResource:n,updateMedia:r,deleteMediaElement:a}=e;const{actions:{getOptimizedMediaById:o,getMutedMediaById:l}}=Z(),{updateElementsByResourceId:i,updateElementById:s}=xa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId,updateElementById:e.actions.updateElementById}))),c=(0,u.useCallback)((e=>{let{oldResource:t,resource:n}=e;const{id:r,alt:a}=t;i({id:r,properties:()=>({type:n.type,resource:{...n,alt:a}})})}),[i]),d=(0,u.useCallback)((e=>{let{elementId:t,oldResource:n,resource:r}=e;const{alt:a}=n;s({elementId:t,properties:()=>({type:r.type,resource:{...r,alt:a}})})}),[s]),p=(0,u.useCallback)(((e,t)=>{s({elementId:e,properties:e=>({resource:{...e.resource,...t}})})}),[s]),m=(0,u.useCallback)(((e,t)=>{i({id:e,properties:e=>({resource:{...e.resource,...t}})})}),[i]),f=(0,u.useCallback)(((e,t,n)=>{r(e,{mediaSource:n,optimizedId:t})}),[r]),g=(0,u.useCallback)(((e,t)=>{r(e,{mutedId:t})}),[r]),h=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:l,src:i,mimeType:s}=r,d=()=>m(l,{isOptimized:!1}),u=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),f(l,t.id,"source-video"),a({id:l}),n(t)},p=e=>{let{resource:t}=e;const n={...t,id:r.id};m(l,{...n})};(async()=>{const e=await o(l);if(e)return void m(l,e);let n=!1;try{n=await yo(i,s)}catch(e){return}await t([n],{onUploadSuccess:u,onUploadError:d,onUploadProgress:p,additionalData:{originalId:r.id,isMuted:r.isMuted},originalResourceId:r.id})})()}),[m,c,f,a,n,o,t]),E=(0,u.useCallback)((e=>{let{resource:r,canvasResourceId:a,elementId:o,start:l,end:i}=e;const{id:s,...c}=r,{src:u,mimeType:m,poster:f,isMuted:g,isOptimized:h}=r,E={original:s,start:l,end:i},b=()=>p(o,{trimData:E}),y=()=>p(o,{trimData:r.trimData||{}}),_=e=>{let{resource:t}=e;const l={alt:r.alt,id:a};d({elementId:o,oldResource:l,resource:t}),n(t)},v=e=>{let{resource:t}=e;const n={...t,id:a};p(o,{...n})};return(async()=>{let e=!1,n=!1;try{e=await yo(u,m)}catch(e){return}if(f)try{n=await bo(f)}catch(e){}await t([e],{onUploadSuccess:_,onUploadStart:b,onUploadError:y,onUploadProgress:v,additionalData:{originalId:s,isMuted:g,mediaSource:h?"video-optimization":"editor"},elementId:o,trimData:E,resource:{...c,trimData:E},originalResourceId:a,posterFile:n})})()}),[p,d,n,t]),b=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:a,...o}=r,{src:i,mimeType:s,poster:d,isOptimized:u}=r,p=()=>{m(a,{isMuted:!1})},f=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),g(r.id,t.id),n(t)},h=e=>{let{resource:t}=e;const n={...t,id:r.id};m(a,{...n})};(async()=>{const e=await l(a);if(e)return void m(a,e);let n=!1,r=!1;try{n=await yo(i,s)}catch(e){return}if(d)try{r=await bo(d)}catch(e){}await t([n],{onUploadSuccess:f,onUploadError:p,onUploadProgress:h,additionalData:{originalId:a,mediaSource:u?"video-optimization":"editor"},muteVideo:!0,resource:{...o,isMuted:!0},originalResourceId:a,posterFile:r})})()}),[m,c,g,n,l,t]);return{optimizeVideo:h,optimizeGif:(0,u.useCallback)((e=>{let{resource:r}=e;const{id:o,src:l,mimeType:i}=r,s=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),f(r.id,t.id,"source-image"),a({id:r.id}),n(t)},d=e=>{let{resource:t}=e;const n={...t,id:r.id};m(o,{...n})};return(async()=>{let e=!1;try{e=await yo(l,i)}catch(e){return}const n=await e.arrayBuffer();Ct(n)&&await t([e],{onUploadSuccess:s,onUploadProgress:d,additionalData:{original_id:o},originalResourceId:o})})()}),[c,f,a,n,m,t]),muteExistingVideo:b,trimExistingVideo:E}},vo={PANEL:"web_stories_ui_panel_settings",TEXT_SET_SETTINGS:"web_stores_text_set_settings",TERMS_MEDIA3P:"web_stories_media3p_terms_agreement",VIDEO_OPTIMIZATION_DIALOG_DISMISSED:"web_stories_video_optimization_dialog_dismissed",HELP_CENTER:"web_stories_help_center",DELETE_COLOR_PRESET_DIALOG_DISMISSED:"web_stories_delete_color_preset_dialog_dismissed",DELETE_STYLE_PRESET_DIALOG_DISMISSED:"web_stories_delete_style_preset_dialog_dismissed",DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT:"web_stories_default_template_view",BACKGROUND_IS_SET_DIALOG_DISMISSED:"web_stories_background_is_set_dialog_dismissed",CORS_CHECK_DIALOG_DISMISSED:"web_stories_cors_check_dialog_dismissed"};const wo={getItemByKey:function(e){let t=null;try{const n=localStorage.getItem(e);t=JSON.parse(n)}catch(e){(0,O.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){(0,O.trackError)("local_storage_write",e.message)}}},To=vo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const So=function(e){let{media:t,prependMedia:n,updateMediaElement:r,deleteMediaElement:a}=e;const{actions:{validateFileForUpload:o}}=Rt(),{showSnackbar:l}=(0,Er.useSnackbar)(),i=ar(),{state:{isUploading:s,isTranscoding:c,pending:p,progress:m,uploaded:f,failures:g,finished:h,isNewResourceProcessing:E,isCurrentResourceProcessing:b,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I},actions:{addItem:x,removeItem:A,finishItem:k}}=Qa(),{isTranscodingEnabled:O,canTranscodeFile:N,isFileTooLarge:P}=Da(),R=(0,u.useRef)();R.current=t,(0,u.useEffect)((()=>{i("upload",s)}),[s,i]),(0,u.useEffect)((()=>{const e=Boolean(wo.getItemByKey(To));c&&e&&l({message:(0,d.__)("Video optimization in progress","web-stories"),dismissible:!0})}),[c,l]),(0,u.useEffect)((()=>{const e=p.filter((e=>{let{resource:{id:t}}=e;return!R.current.find((e=>{let{id:n}=e;return n===t}))}));if(!e.length)return;for(const{onUploadStart:t,resource:n}of e)t&&t({resource:n});const t=e.map((e=>{let{resource:t}=e;return t}));n({media:t})}),[p,n]),(0,u.useEffect)((()=>{for(const{onUploadProgress:e,resource:t}of m){const{id:n}=t;t&&(r({id:n,data:t}),e&&e({id:n,resource:t}))}}),[m,r]),(0,u.useEffect)((()=>{for(const{id:e,resource:t,onUploadSuccess:n,previousResourceId:a}of f){const{id:o}=t;t&&(r({id:o,data:t}),a&&r({id:a,data:t}),n&&(n({id:o,resource:t}),a&&n({id:a,resource:t})),k({id:e}))}}),[f,r,k]),(0,u.useEffect)((()=>{for(const{id:e}of h)A({id:e})}),[h,A]),(0,u.useEffect)((()=>{for(const{id:e,onUploadError:t,error:n,resource:r}of g){const{id:o}=r;t&&t({id:o}),a({id:o}),A({id:e});const i=r&&["video","gif"].includes(r.type)?r.poster:r.src;l({message:n?.message||(0,d.__)("File could not be uploaded. Please try a different file.","web-stories"),thumbnail:i&&{src:i,alt:r?.alt},dismissible:!0})}}),[g,a,A,l]);const M=(0,u.useCallback)((async function(e){let{onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:i,muteVideo:s,trimData:c,resource:d,posterFile:u,originalResourceId:p,elementId:m}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?.length&&await Promise.all(e.reverse().map((async e=>{const f=O&&N(e),g=f&&P(e);try{o(e,f,g)}catch(e){return void l({message:e.message,dismissible:!0})}if(!d||!u){const{resource:t,posterFile:n}=await Ge(e);u=n,d=t}x({file:e,resource:d,onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:i,posterFile:u,muteVideo:s,trimData:c,originalResourceId:p,elementId:m})})))}),[l,o,x,N,O,P]);return{uploadMedia:M,isUploading:s,isTranscoding:c,isNewResourceProcessing:E,isCurrentResourceProcessing:b,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I}};const Co=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=Z(),{updateElementsByResourceId:r}=xa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:a}}=H(),o=(0,u.useCallback)((async(e,o)=>{if(a)try{const a=await ne(o);await le(a);const l=ie(a);r({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,isMuted:!l}}}}),t({id:e,data:{isMuted:!l}}),await n(e,{isMuted:!l})}catch(e){}}),[a,r,t,n]);return{updateVideoIsMuted:o}};const Io=function(e){return`#${e.map((e=>e.toString(16))).map((e=>e.padStart(2,"0"))).join("")}`};async function xo(e){const{default:t}=await n.e(7498).then(n.bind(n,80269));return new Promise(((n,r)=>{try{const r=(new t).getColor(e);n(Io(r))}catch(e){(0,O.trackError)("image_base_color",e.message),r(e)}}))}const Ao=async function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";if(!e)throw new Error("No source to image");const o=(0,O.getTimeTracker)("load_get_base_color");try{n=await(0,q.default)({src:e,width:r,height:a}),t=await xo(n)}catch(e){if("TypeError"!==e?.name)throw e;t="#ffffff"}finally{n?.remove(),o()}return t};const ko=function(){const{actions:{getProxyUrl:e}}=Z(),t=(0,u.useCallback)((async e=>{let t=!1;if(!e)return t;try{await fetch(e,{method:"HEAD"})}catch(e){t=!0}return t}),[]),n=(0,u.useCallback)(((t,n)=>{const{needsProxy:r}=t;return r&&n?e(n):n}),[e]);return{getProxiedUrl:n,checkResourceAccess:t}};const Oo=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=Z(),{updateElementsByResourceId:a}=xa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=H(),{getProxiedUrl:l}=ko(),i=(0,u.useCallback)((async(e,r)=>{let{id:l,isExternal:i}=e;try{a({id:l,properties:e=>{let{resource:t}=e;return{resource:{...t,baseColor:r}}}}),i||(t({id:l,data:{baseColor:r}}),o&&await n(l,{baseColor:r}))}catch(e){}}),[a,t,o,n]),s=(0,u.useCallback)((async e=>{const{type:t,poster:n,id:a,isExternal:o}=e;let s=n;if("image"===t)s=(0,Eo.default)(0,e);else if(!o){const e=r?await r(a):null;e&&(s=(0,Eo.default)(0,e))}if(!s)return;const c=l(e,s);try{const t=await Ao(c);await i(e,t)}catch(e){}}),[l,r,i]);return{updateBaseColor:s}};var No=n(20477),Po=n.n(No);function Worker_fn(){return Po()('(()=>{"use strict";const t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],a=(a,o)=>{var r="";for(let e=1;e<=o;e++){let h=Math.floor(a)/Math.pow(83,o-e)%83;r+=t[Math.floor(h)]}return r},o=t=>{let a=t/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)},r=t=>{let a=Math.max(0,Math.min(1,t));return a<=.0031308?Math.round(12.92*a*255+.5):Math.round(255*(1.055*Math.pow(a,1/2.4)-.055)+.5)},e=(t,a)=>(t<0?-1:1)*Math.pow(Math.abs(t),a);class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}}const h=(t,a,r,e)=>{let h=0,n=0,s=0;const l=4*a;for(let M=0;M<a;M++)for(let a=0;a<r;a++){const r=e(M,a);h+=r*o(t[4*M+0+a*l]),n+=r*o(t[4*M+1+a*l]),s+=r*o(t[4*M+2+a*l])}let M=1/(a*r);return[h*M,n*M,s*M]},n=(t,o,n,s,l)=>{if(s<1||s>9||l<1||l>9)throw new ValidationError("BlurHash must have between 1 and 9 components");if(o*n*4!==t.length)throw new ValidationError("Width and height must match the pixels array");let M=[];for(let a=0;a<l;a++)for(let r=0;r<s;r++){const e=0==r&&0==a?1:2,s=h(t,o,n,((t,h)=>e*Math.cos(Math.PI*r*t/o)*Math.cos(Math.PI*a*h/n)));M.push(s)}const i=M[0],c=M.slice(1);let m,f="";if(f+=a(s-1+9*(l-1),1),c.length>0){let t=Math.max(...c.map((t=>Math.max(...t)))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(166*t-.5))));m=(o+1)/166,f+=a(o,1)}else m=1,f+=a(0,1);var u;return f+=a((r((u=i)[0])<<16)+(r(u[1])<<8)+r(u[2]),4),c.forEach((t=>{f+=a(((t,a)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[0]/a,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[1]/a,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[2]/a,.5)+9.5)))))(t,m),2)})),f},s=function(t){const{image:a,width:o,height:r,componentX:e,componentY:h}=t.data;try{const t=n(a,o,r,e,h);postMessage({type:"success",blurHash:t})}catch(t){postMessage({type:"error",error:t})}};self.onmessage=s})();',"Worker",void 0,n.p+"generateBlurhash.worker.worker.js")}const Ro=async e=>{let t;try{t=await(0,q.default)({src:e})}catch{return Promise.reject(new Error("Failed to get blurhash from image"))}const n=(e=>{const{width:t,height:n}=e,r=document.createElement("canvas");r.width=t,r.height=n;const a=r.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,t,n)})(t),{data:r,width:a,height:o}=n,l=(0,O.getTimeTracker)("load_get_blurhash");return new Promise(((e,t)=>{const n=new Worker_fn;n.postMessage({image:r,width:a,height:o,componentX:4,componentY:4}),n.addEventListener("message",(function(r){n.terminate(),l(),"success"===r.data.type?e(r.data.blurHash):((0,O.trackError)("blurhash_generation",r.data.error?.message),t(r.data.error))})),n.addEventListener("error",(e=>{n.terminate(),l(),(0,O.trackError)("blurhash_generation",e?.message),t(e)}))}))};const Mo=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=Z(),{updateElementsByResourceId:a}=xa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=H(),{getProxiedUrl:l}=ko(),i=(0,u.useCallback)((async(e,r)=>{try{a({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,blurHash:r}}}}),t({id:e,data:{blurHash:r}}),o&&await n(e,{blurHash:r})}catch(e){}}),[a,t,o,n]);return{updateBlurHash:(0,u.useCallback)((async e=>{let{resource:t}=e;const{type:n,poster:a,id:o,isExternal:s}=t;let c=a;if("image"===n)c=(0,Eo.default)(300,t);else if(!s){const e=r?await r(o):null;e&&(c=(0,Eo.default)(300,e))}if(!c)return;const d=l(t,c);try{const e=await Ro(d);await i(t.id,e)}catch(e){(0,O.trackError)("blurhash_generation",e?.message)}}),[l,r,i])}},Lo="LOCAL_MEDIA_RESET_FILTERS",Do="LOCAL_MEDIA_SET_SEARCH_TERM",Bo="LOCAL_MEDIA_SET_MEDIA_TYPE",Fo="LOCAL_MEDIA_SET_MEDIA",Ho="LOCAL_MEDIA_PREPEND_MEDIA",Uo="LOCAL_MEDIA_REMOVE_AUDIO_PROCESSING",zo="LOCAL_MEDIA_ADD_AUDIO_PROCESSING",Go="LOCAL_MEDIA_REMOVE_BASE_COLOR_PROCESSING",jo="LOCAL_MEDIA_ADD_BASE_COLOR_PROCESSING",Yo="LOCAL_MEDIA_REMOVE_BLURHASH_PROCESSING",Zo="LOCAL_MEDIA_ADD_BLURHASH_PROCESSING",Wo="LOCAL_MEDIA_REMOVE_POSTER_PROCESSING",Vo="LOCAL_MEDIA_ADD_POSTER_PROCESSING",$o="LOCAL_MEDIA_TYPE_ALL";function qo(e,t,n){const{selectedProvider:r,searchTerm:a}=t,{pageToken:o,isMediaLoading:l,isMediaLoaded:i,categories:{categories:s,selectedCategoryId:c}}=t[e],{fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m,fetchCategoriesStart:f,fetchCategoriesSuccess:g,fetchCategoriesError:h}=n;return function(e){let{provider:t,selectedProvider:n,searchTerm:r,selectedCategoryId:a,pageToken:o,isMediaLoading:l,isMediaLoaded:i,fetchMediaStart:s,fetchMediaSuccess:c,fetchMediaError:d}=e;const{actions:{listMedia:p}}=co(),{showSnackbar:m}=(0,Er.useSnackbar)(),f=(0,u.useRef)();(0,u.useEffect)((()=>{const e=f.current;f.current={pageToken:o,searchTerm:r,selectedCategoryId:a,isMediaLoading:l,isMediaLoaded:i};const u=e&&(o!==e.pageToken||r!==e.searchTerm||a!==e.selectedCategoryId),g=!e||!e.isMediaLoading&&!e.isMediaLoaded||u;t===n&&g&&async function(){s({provider:t,pageToken:o});try{const{media:e,nextPageToken:n}=await p({provider:t,filter:{contentType:Et[t].contentTypeFilter,searchTerm:a?null:r,categoryId:a},pageToken:o});c({provider:t,media:e,pageToken:o,nextPageToken:n})}catch(e){d({provider:t,pageToken:o}),m({message:Et[t].fetchMediaErrorMessage,dismissible:!0})}}()}),[n,o,r,a,t,p,d,s,c,m,f])}({provider:e,selectedProvider:r,pageToken:o,isMediaLoading:l,isMediaLoaded:i,searchTerm:a,selectedCategoryId:c,fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m}),function(e){let{provider:t,selectedProvider:n,categories:r,fetchCategoriesStart:a,fetchCategoriesSuccess:o,fetchCategoriesError:l}=e;const{actions:{listCategories:i}}=co(),{showSnackbar:s}=(0,Er.useSnackbar)();(0,u.useEffect)((()=>{t===n&&Et[t].supportsCategories&&!r?.length&&async function(){a({provider:t});try{const{categories:e}=await i({provider:t});o({provider:t,categories:e})}catch(e){l({provider:t}),s({message:Et[t].fetchCategoriesErrorMessage,dismissible:!0})}}()}),[s,n,r,t,i,a,o,l])}({provider:e,selectedProvider:r,categories:s,fetchCategoriesStart:f,fetchCategoriesSuccess:g,fetchCategoriesError:h}),{state:t[e],actions:{setNextPage:(0,u.useCallback)((()=>n.setNextPage({provider:e})),[n,e]),selectCategory:(0,u.useCallback)((t=>n.selectCategory({provider:e,categoryId:t})),[n,e]),deselectCategory:(0,u.useCallback)((()=>n.deselectCategory({provider:e})),[n,e])}}}function Ko(e,t){const n={};for(const r of Object.keys(Et))n[r]=qo(r,e,t);return n}const Xo="FETCH_MEDIA_START",Qo="FETCH_MEDIA_SUCCESS",Jo="FETCH_MEDIA_ERROR",el="SET_NEXT_PAGE",tl="UPDATE_MEDIA_ELEMENT",nl="DELETE_MEDIA_ELEMENT",rl={media:[],pageToken:void 0,nextPageToken:void 0,hasMore:!0,totalPages:1,isMediaLoading:!1,isMediaLoaded:!1,totalItems:0},al={...rl,audioProcessing:[],audioProcessed:[],blurHashProcessed:[],blurHashProcessing:[],baseColorProcessed:[],baseColorProcessing:[],posterProcessing:[],posterProcessed:[],mediaType:"",searchTerm:""};const ol=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Xo:return{...e,isMediaLoaded:!1,isMediaLoading:!0};case Qo:{const{media:t,pageToken:r,nextPageToken:a,totalPages:o,totalItems:l}=n;return{...e,media:r?[...e.media,...t]:t,nextPageToken:a,totalPages:o,hasMore:Boolean(a),isMediaLoaded:!0,isMediaLoading:!1,totalItems:l}}case Jo:return{...e,isMediaLoaded:!0,isMediaLoading:!1};case el:return e.nextPageToken?{...e,pageToken:e.nextPageToken}:e;case tl:{const{id:t,provider:r,data:a}=n,o=e.media.findIndex((e=>e.id===t));if(-1===o)return e;const l={...e.media[o],provider:r,...a},i=[...e.media.slice(0,o),l,...e.media.slice(o+1)];return{...e,media:i}}case nl:{const{id:t}=n;return{...e,media:e.media.filter((e=>e.id!==t))}}default:return e}};const ll=function(e,t){let{type:n,payload:r}=t;return"local"==r?.provider?ol(e,{type:n,payload:r}):e};const il=function(e,t){let{type:n,payload:r}=t;const{provider:a,mediaType:o,searchTerm:l}=r;return"local"===a&&o===e.mediaType&&l===e.searchTerm?ol(e,{type:n,payload:r}):e};const sl=function(e,t){let{mediaType:n}=t;return n===e.mediaType?e:{...al,media:e.media.filter((e=>{let{local:t}=e;return t})),audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],searchTerm:e.searchTerm,mediaType:n}};const cl=function(e,t){let{searchTerm:n}=t;return n===e.searchTerm?e:{...al,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],mediaType:e.mediaType,searchTerm:n}};const dl=function(e){return{...al,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed]}};const ul=function(e,t){let{media:n}=t;return{...e,media:n}};const pl=function(e,t){let{media:n}=t;return{...e,media:[...n,...e.media]}};const ml=function(e,t){let{id:n}=t;return!n||e.baseColorProcessing.includes(n)?e:{...e,baseColorProcessing:[...e.baseColorProcessing,n]}};const fl=function(e,t){let{id:n}=t;if(!n||!e.baseColorProcessing.includes(n))return e;const r=[...e.baseColorProcessing].filter((e=>e!==n));return{...e,baseColorProcessing:r,baseColorProcessed:[...e.baseColorProcessed,n]}};const gl=function(e,t){let{id:n}=t;return!n||e.posterProcessing.includes(n)?e:{...e,posterProcessing:[...e.posterProcessing,n]}};const hl=function(e,t){let{id:n}=t;if(!n||!e.posterProcessing.includes(n))return e;const r=[...e.posterProcessing].filter((e=>e!==n));return{...e,posterProcessing:r,posterProcessed:[...e.posterProcessed,n]}};const El=function(e,t){let{id:n}=t;return!n||e.audioProcessing.includes(n)?e:{...e,audioProcessing:[...e.audioProcessing,n]}};const bl=function(e,t){let{id:n}=t;if(!n||!e.audioProcessing.includes(n))return e;const r=[...e.audioProcessing].filter((e=>e!==n));return{...e,audioProcessing:r,audioProcessed:[...e.audioProcessed,n]}};const yl=function(e,t){let{id:n}=t;return!n||e.blurHashProcessing.includes(n)?e:{...e,blurHashProcessing:[...e.blurHashProcessing,n]}};const _l=function(e,t){let{id:n}=t;if(!n||!e.blurHashProcessing.includes(n))return e;const r=[...e.blurHashProcessing].filter((e=>e!==n));return{...e,blurHashProcessing:r,blurHashProcessed:[...e.blurHashProcessed,n]}};const vl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:al,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Qo:return il(e,{type:t,payload:n});case Lo:return dl(e);case Do:return cl(e,n);case Bo:return sl(e,n);case Fo:return ul(e,n);case Ho:return pl(e,n);case Vo:return gl(e,n);case Wo:return hl(e,n);case jo:return ml(e,n);case Go:return fl(e,n);case Zo:return yl(e,n);case Yo:return _l(e,n);case zo:return El(e,n);case Uo:return bl(e,n);default:return ll(e,{type:t,payload:n})}},wl="INITIAL_STATE",Tl="MEDIA3P_SET_SELECTED_PROVIDER",Sl="MEDIA3P_SET_SEARCH_TERM",Cl="FETCH_MEDIA_CATEGORIES_START",Il="FETCH_MEDIA_CATEGORIES_SUCCESS",xl="FETCH_MEDIA_CATEGORIES_ERROR",Al="SELECT_CATEGORY",kl="DESELECT_CATEGORY",Ol={isLoading:!0,isLoaded:!1,categories:[],selectedCategoryId:void 0};const Nl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ol,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Cl:return{...e,isLoading:!0,isLoaded:!1};case Il:{const{categories:t}=n;return{...e,categories:t,isLoading:!1,isLoaded:!0}}case xl:return{...e,isLoading:!1,isLoaded:!0};case Al:{const{categoryId:t}=n;return{...e,selectedCategoryId:t}}case kl:case Sl:return{...e,selectedCategoryId:void 0};default:return e}},Pl={...rl,categories:Ol};const Rl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e={...ol(e,{type:t,payload:n}),categories:Nl(e.categories,{type:t,payload:n})},t){case Sl:return{...e,isMediaLoaded:!1,pageToken:void 0,nextPageToken:void 0};case Al:case kl:return{...e,pageToken:void 0,nextPageToken:void 0};default:return e}},Ml={selectedProvider:void 0,searchTerm:""};function Ll(e,t){let{type:n,payload:r}=t;const a={...e};for(const t of Object.keys(Et))n!=wl&&r?.provider&&t!=r?.provider||(a[t]=Rl(e[t],{type:n,payload:r}));return(0,u.shallowEqual)(a,e)?e:a}const Dl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e=Ll(e,{type:t,payload:n}),t){case Tl:return{...e,selectedProvider:n.provider};case Sl:return{...e,searchTerm:n.searchTerm};default:return e}},Bl=e=>t=>{let{provider:n,pageToken:r}=t;e({type:Xo,payload:{provider:n,pageToken:r}})},Fl=e=>t=>{let{provider:n,media:r,nextPageToken:a,totalPages:o,...l}=t;e({type:Qo,payload:{provider:n,media:r,nextPageToken:a,totalPages:o,...l}})},Hl=e=>t=>{let{provider:n}=t;e({type:Jo,payload:{provider:n}})},Ul=e=>t=>{let{provider:n}=t;e({type:el,payload:{provider:n}})},zl=e=>t=>{let{provider:n,id:r,data:a}=t;e({type:tl,payload:{provider:n,id:r,data:a}})},Gl=e=>t=>{let{provider:n,id:r}=t;e({type:nl,payload:{provider:n,id:r}})},jl=e=>t=>Bl(e)({...t,provider:"local"}),Yl=e=>t=>Fl(e)({...t,provider:"local"}),Zl=e=>t=>Hl(e)({...t,provider:"local"}),Wl=e=>t=>Ul(e)({...t,provider:"local"}),Vl=e=>t=>{let{id:n,data:r}=t;return zl(e)({provider:"local",id:n,data:r})},$l=e=>t=>Gl(e)({...t,provider:"local"}),ql=e=>()=>{e({type:Lo})},Kl=e=>t=>{let{searchTerm:n}=t;e({type:Do,payload:{searchTerm:n}})},Xl=e=>t=>{let{mediaType:n}=t;e({type:Bo,payload:{mediaType:n}})},Ql=e=>t=>{let{id:n}=t;e({type:zo,payload:{id:n}})},Jl=e=>t=>{let{id:n}=t;e({type:Uo,payload:{id:n}})},ei=e=>t=>{let{id:n}=t;e({type:jo,payload:{id:n}})},ti=e=>t=>{let{id:n}=t;e({type:Go,payload:{id:n}})},ni=e=>t=>{let{id:n}=t;e({type:Zo,payload:{id:n}})},ri=e=>t=>{let{id:n}=t;e({type:Yo,payload:{id:n}})},ai=e=>t=>{let{id:n}=t;e({type:Vo,payload:{id:n}})},oi=e=>t=>{let{id:n}=t;e({type:Wo,payload:{id:n}})},li=e=>t=>{let{media:n}=t;e({type:Fo,payload:{media:n}})},ii=e=>t=>{let{media:n}=t;e({type:Ho,payload:{media:n}})},si=e=>t=>{let{provider:n}=t;e({type:Cl,payload:{provider:n}})},ci=e=>t=>{let{provider:n,categories:r}=t;e({type:Il,payload:{provider:n,categories:r}})},di=e=>t=>{let{provider:n}=t;e({type:xl,payload:{provider:n}})},ui=e=>t=>{let{provider:n,categoryId:r}=t;e({type:Al,payload:{provider:n,categoryId:r}})},pi=e=>t=>{let{provider:n}=t;e({type:kl,payload:{provider:n}})},mi=e=>t=>{let{provider:n}=t;e({type:Tl,payload:{provider:n}})},fi=e=>t=>{let{searchTerm:n}=t;e({type:Sl,payload:{searchTerm:n}})};function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return{local:vl(e.local,{type:t,payload:n}),media3p:Dl(e.media3p,{type:t,payload:n})}}const hi=(e,t)=>{if(e instanceof Function)return e(t);const n=e;return Object.keys(n).reduce(((e,r)=>({...e,[r]:hi(n[r],t)})),{})};const Ei=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gi,t=arguments.length>1?arguments[1]:void 0;const n=(0,u.useMemo)((()=>({local:a,media3p:o})),[]);t=t??n;const r=(0,u.useMemo)((()=>e(void 0,{type:wl})),[e]),[l,i]=(0,u.useReducer)(e,r),s=(0,u.useMemo)((()=>hi(t,i)),[t]);return{state:l,actions:s}},bi=(0,u.createContext)({local:{state:{},actions:{}},media3p:{state:{},actions:{}}});const yi=function MediaProvider(e){let{children:t}=e;const{state:n,actions:r}=Ei(),a=function(e,t){const{media:n,pageToken:r,mediaType:a,searchTerm:o}=e,{fetchMediaStart:l,fetchMediaSuccess:i,fetchMediaError:s,resetFilters:c,prependMedia:d,setMediaType:p,setSearchTerm:m,setNextPage:f,setAudioProcessing:g,removeAudioProcessing:h,setPosterProcessing:E,removePosterProcessing:b,setBaseColorProcessing:y,removeBaseColorProcessing:_,setBlurhashProcessing:v,removeBlurhashProcessing:w,updateMediaElement:T,deleteMediaElement:S}=t,{actions:{getMedia:C,updateMedia:I}}=Z(),x=(0,u.useRef)(!1);(0,u.useEffect)((()=>(x.current=!0,()=>{x.current=!1})),[]);const A=(0,u.useCallback)((function(){let{searchTerm:e="",pageToken:t=1,mediaType:n,cacheBust:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(!C)return null;l({pageToken:t});const o=(0,O.getTimeTracker)("load_media");return C({mediaType:n===$o?"":n,searchTerm:e,pagingNum:t,cacheBust:r}).then((r=>{let{data:o,headers:l}=r;if(!x.current)return;const i=parseInt(l.totalPages),s=parseInt(l.totalItems);a({media:o,mediaType:n,searchTerm:e,pageToken:t,nextPageToken:t<i?t+1:void 0,totalPages:i,totalItems:s})})).catch(s).finally((()=>{o()}))}),[s,l,C]),{uploadMedia:k,isUploading:N,isTranscoding:P,isNewResourceProcessing:R,isCurrentResourceProcessing:M,isNewResourceTranscoding:L,isNewResourceMuting:D,isElementTrimming:B,isCurrentResourceUploading:F,isCurrentResourceTranscoding:U,isCurrentResourceMuting:z,isCurrentResourceTrimming:G,canTranscodeResource:j}=So({media:n,prependMedia:d,updateMediaElement:T,deleteMediaElement:S}),{uploadVideoFrame:Y}=Aa({updateMediaElement:T}),{updateVideoIsMuted:W}=Co({updateMediaElement:T}),{updateBaseColor:V}=Oo({updateMediaElement:T}),{updateBlurHash:$}=Mo({updateMediaElement:T}),{allowedMimeTypes:{video:q},capabilities:{hasUploadMediaAction:K}}=H(),X=(0,u.useRef)();X.current=e;const Q=(0,u.useCallback)((()=>{const{mediaType:e}=X.current;c();const t=!X.current.pageToken;e||X.current.searchTerm||!t||A({mediaType:e,cacheBust:!0},i)}),[A,i,c]);(0,u.useEffect)((()=>{A({searchTerm:o,pageToken:r,mediaType:a},i)}),[A,i,a,r,o]);const J=(0,u.useCallback)(((e,t)=>{const{posterProcessed:n,posterProcessing:r}=X.current;(async()=>{n.includes(e)||r.includes(e)||(E({id:e}),await Y(e,t),b({id:e}))})()}),[E,Y,b]),ee=(0,u.useCallback)(((e,t)=>{const{audioProcessed:n,audioProcessing:r}=X.current;(async()=>{n.includes(e)||r.includes(e)||(g({id:e}),await W(e,t),h({id:e}))})()}),[g,W,h]),te=(0,u.useCallback)((e=>{const{baseColorProcessed:t,baseColorProcessing:n}=X.current,{id:r}=e;(async()=>{t.includes(r)||n.includes(r)||(y({id:r}),await V(e),_({id:r}))})()}),[y,V,_]),ne=(0,u.useCallback)((e=>{const{blurHashProcessed:t,blurHashProcessing:n}=X.current,{id:r}=e;(async()=>{t.includes(r)||n.includes(r)||(v({id:r}),await $({resource:e}),w({id:r}))})()}),[X,v,$,w]),re=(0,u.useCallback)((e=>{if(!e)return;const{type:t,isMuted:n,baseColor:r,src:a,id:o,posterId:l,mimeType:i,poster:s,blurHash:c}=e;if(!j(e))return;K&&(!q.includes(i)&&"gif"!==t||l||J(o,a),q.includes(i)&&null===n&&ee(o,a));const d="image"===t?(0,Eo.default)(0,e):s;d&&!r&&te(e),d&&!c&&ne(e)}),[j,q,te,ne,ee,J,K]),{optimizeVideo:ae,optimizeGif:oe,muteExistingVideo:le,trimExistingVideo:ie}=_o({postProcessingResource:re,uploadMedia:k,updateMedia:I,deleteMediaElement:S});(0,u.useEffect)((()=>{n?.forEach((e=>re(e)))}),[n,a,o,re]);const se=Boolean(X.current?.posterProcessing?.length);return{state:{...e,isUploading:N||se,isTranscoding:P,isNewResourceProcessing:R,isCurrentResourceProcessing:M,isNewResourceTranscoding:L,isNewResourceMuting:D,isElementTrimming:B,isCurrentResourceUploading:F,isCurrentResourceTranscoding:U,isCurrentResourceMuting:z,isCurrentResourceTrimming:G,canTranscodeResource:j},actions:{setNextPage:f,setMediaType:p,setSearchTerm:m,resetFilters:c,uploadMedia:k,resetWithFetch:Q,uploadVideoPoster:J,postProcessingResource:re,deleteMediaElement:S,updateMediaElement:T,optimizeVideo:ae,optimizeGif:oe,muteExistingVideo:le,trimExistingVideo:ie}}}(n.local,r.local);var o,l;const i={local:a,media3p:(o=n.media3p,l=r.media3p,{state:{selectedProvider:o.selectedProvider,searchTerm:o.searchTerm},actions:{setSelectedProvider:l.setSelectedProvider,setSearchTerm:l.setSearchTerm},...Ko(o,l)})};return c.createElement(bi.Provider,{value:i},t)};const _i=function(e){return(0,u.useContextSelector)(bi,e??u.identity)};const vi=function(e){return _i((t=>{let{local:n}=t;return(e??u.identity)(n)}))},wi=(0,u.createContext)({state:{},actions:{}});function Ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{})}function Si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return e[n]={...r,...e[n]},e}),{...t})}function Ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function Ii(){return Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ii.apply(this,arguments)}const xi=function TaxonomyProvider(e){const[t,n]=(0,u.useState)([]),[r,a]=(0,u.useState)({}),[o,l]=(0,u.useState)(!0),{actions:{clearHistory:i}}=mr(),{updateStory:s,isStoryLoaded:d,terms:p,hasTaxonomies:m}=xa((e=>{let{state:{pages:t,story:n},actions:{updateStory:r}}=e;return{updateStory:r,isStoryLoaded:t.length>0,terms:n.terms,hasTaxonomies:n?.taxonomies?.length>0}})),{getTaxonomyTerm:f,createTaxonomyTerm:g,getTaxonomies:h}=Z((e=>{let{actions:t}=e;return t}));(0,u.useEffect)((()=>{m&&async function(){try{const e=await h();n(e)}catch(e){console.error(e.message)}}()}),[m,h]);const E=(0,u.useRef)(!1);(0,u.useEffect)((()=>{if(t.length>0&&d&&!E.current){const e=Ci(t,"slug"),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return Ti(Object.entries(e).map((e=>{let[n,r]=e;return[t(n),r]})))}(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>((t||[]).forEach((t=>{e[t.taxonomy]=e[t.taxonomy]||{},e[t.taxonomy][t.slug]=t})),e)),{})}(p),(t=>e[t]?.restBase)),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return Ti(Object.entries(e).map((e=>{let[n,r]=e;return[n,t(r)]})))}(n,(e=>Object.values(e).map((e=>e.id))));a(n),i(),s({properties:{terms:r}}),E.current=!0}}),[p,d,t,a,i,s]);const b=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];s({properties:n=>{const r="function"==typeof t?t(n.terms[e.restBase]):t;return{...n,terms:{...n.terms,[e.restBase]:r}}}})}),[s]),y=(0,u.useCallback)(((e,t)=>{b(e,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(t.id)?e:[...e,t.id]}))}),[b]),_=(0,u.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];const o=e?.restPath;if(!o)return[];try{r=await f(o,t)}catch(e){console.error(e.message)}if(r.length<1)return r;const l={[e.restBase]:Ci(r,"slug")};if(a((e=>Si(e,l))),n&&t.search){const n=mo(t.search),a=r.find((e=>e.slug===n));a&&y(e,a)}return r}),[f,y]),v=(0,u.useCallback)((async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l={name:t};n?.id&&(l.parent=n.id,l.slug=`${n.slug}-${mo(l.name)}`);const i=l?.slug||mo(t),s=r[e.restBase]?.[i];if(s)return void(o&&y(e,s));const c=e?.restPath;if(c)try{const t=await g(c,l),n={[e.restBase]:{[t.slug]:t}};a((e=>Si(e,n))),o&&y(e,t)}catch(n){"term_exists"===n.code&&_(e,{search:t},o)}}),[g,r,_,y]);(0,u.useEffect)((()=>{if(o&&t?.length){t.filter((e=>e.hierarchical)).forEach((e=>_(e,{per_page:-1}))),l(!1)}}),[_,o,t]);const w=(0,u.useMemo)((()=>({state:{taxonomies:t,termCache:r,terms:Array.isArray(p)?{}:p},actions:{createTerm:v,addSearchResultsToCache:_,setTerms:b,addTermToSelection:y}})),[r,p,t,v,_,b,y]);return c.createElement(wi.Provider,Ii({},e,{value:w}))};const Ai=function(e){return(0,u.useContextSelector)(wi,e??u.identity)};var ki=n(95123);const Oi=[1,0];function Ni(e){return"number"==typeof e}const Pi=function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const{updateForResizeEvent:l,defaultAttributes:i}=(0,Hn.getDefinitionForType)(e);if(Ni(t)||(t=Ni(n)?n*a:o?Math.min(o.width*J.DEFAULT_DPR,.8*J.PAGE_WIDTH):J.PAGE_WIDTH/2),!Ni(n)&&l&&(n=l({...i,...r},Oi,t).height),Ni(n)||(n=t/a),t>J.PAGE_WIDTH||n>J.PAGE_HEIGHT){const e=t/n;e<=J.PAGE_WIDTH/J.PAGE_HEIGHT?n=(t=Math.min(t,J.PAGE_WIDTH))/e:t=(n=Math.min(n,J.PAGE_HEIGHT))*e}return{width:t=(0,Mr.dataPixels)(t),height:n=(0,Mr.dataPixels)(n)}};function Ri(e){return"number"==typeof e}const Mi=function(e,t){let{resource:n,x:r,y:a,width:o,height:l,mask:i,rotationAngle:s=0,scale:c=100,focalX:d=50,focalY:u=50,sticker:p,...m}=t;const{isMaskable:f}=(0,Hn.getDefinitionForType)(e),g={type:e,...m},h=p&&ki.default?.[p?.type]?.aspectRatio,E=n&&Ri(n.width)&&Ri(n.height)?n.width/n.height:1,b=Pi(e,o,l,g,h||E,n);return o=b.width,l=b.height,Ri(r)||(r=48),Ri(a)||(a=0),r=(0,Mr.dataPixels)(r),a=(0,Mr.dataPixels)(a),{...g,resource:n,x:r,y:a,width:o,height:l,rotationAngle:s,scale:c,focalX:d,focalY:u,...f?{mask:i||Nn.DEFAULT_MASK}:{},...p?{sticker:p}:{}}},Li=(0,u.createContext)({state:{},actions:{}}),Di=Hn.MEDIA_ELEMENT_TYPES,Bi=Hn.MEDIA_ELEMENT_TYPES.concat(Hn.ELEMENT_TYPES.SHAPE),Fi=e=>Di.includes(e),Hi=e=>Bi.includes(e);const Ui=function DropTargetsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)(null),[a,o]=(0,u.useState)({}),[l,i]=(0,u.useState)(null),{actions:{pushTransform:s}}=(0,C.useTransform)(),{currentPage:d,combineElements:p}=xa((e=>{let{state:{currentPage:t},actions:{combineElements:n}}=e;return{currentPage:t,combineElements:n}})),m=(0,u.useMemo)((()=>d?.elements||[]),[d?.elements]),f=(0,u.useMemo)((()=>m.filter((e=>{let{id:t}=e;return t in a})).map((e=>{let{id:t}=e;return t})).reverse()),[a,m]),g=(0,u.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=document.elementsFromPoint(e,t);return f.find((e=>r.includes(a[e])&&e!==n))||null}),[f,a]),h=(0,u.useCallback)(((e,t)=>{o((n=>({...n,[e]:t})))}),[]),E=(0,u.useCallback)((e=>{o((t=>{const{[e]:n,...r}=t;return r}))}),[]),b=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!Fi(e?.type))return;const a=Mi(e.type,{resource:e}),o=m.find((e=>{let{id:t}=e;return t===r})),c=o?.scale??a.scale,d=o?.focalX??a.focalX,u=o?.focalY??a.focalY,p=o?.flip??a.flip,f=g(t,n,r);f&&f!==l?(s(f,{dropTargets:{active:!0,replacement:{resource:e,scale:c,focalX:d,focalY:u,flip:p}}}),r&&s(r,{dropTargets:{hover:!0}})):f||r&&s(r,{dropTargets:{hover:!1}}),i(f),m.filter((e=>{let{id:t}=e;return t!==f})).forEach((e=>s(e.id,{dropTargets:{active:!1,replacement:null}})))}),[l,m,g,s]),y=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Fi(e?.type))return;if(!l||l===t)return void Object.keys(a).filter((e=>e!==t)).map((e=>s(e,null)));const n={secondId:l},r=m.find((e=>{let{id:n}=e;return n===t}));n.firstElement=r||Mi(e.type,{resource:e}),p(n),m.filter((e=>{let{id:n}=e;return a[n]&&n!==t})).forEach((e=>{s(e.id,{dropTargets:{active:!1,replacement:null}}),s(e.id,null)})),i(null);const{onDropHandler:o}=(0,Hn.getDefinitionForType)(e.type);o&&e.src&&!e.isPlaceholder&&o(l)}),[l,p,m,a,s]),_=(0,nr.useGlobalIsKeyPressed)("mod"),v={state:{dropTargets:a,activeDropTargetId:l,draggingResource:n,isDropTargetingDisabled:_},actions:{registerDropTarget:_?Mt:h,unregisterDropTarget:E,isDropSource:_?()=>!1:Fi,isDropTarget:_?()=>!1:Hi,handleDrag:_?Mt:b,handleDrop:_?Mt:y,setDraggingResource:_?Mt:r}};return c.createElement(Li.Provider,{value:v},t)};const zi=function(e,t){return(0,u.useContextSelector)(Li,e??u.identity,t)};var Gi=n(63594),ji=n.n(Gi),Yi=n(93991);const Zi=function UnitsProvider(e){let{pageSize:t,children:n}=e;const{width:r,height:a}=t,o=(0,u.useMemo)((()=>({state:{pageSize:{width:r,height:a}},actions:{dataToEditorX:e=>(0,Mr.dataToEditorX)(e,r),dataToEditorY:e=>(0,Mr.dataToEditorY)(e,a),editorToDataX:(e,t)=>(0,Mr.editorToDataX)(e,r,t),editorToDataY:(e,t)=>(0,Mr.editorToDataY)(e,a,t),getBox:e=>(0,Mr.getBox)(e,r,a)}})),[r,a]);return c.createElement(Yi.default.Provider,{value:o},n)},Wi=(0,u.createContext)({actions:{setZoomSetting:()=>{}},state:{}});const Vi=function(e){return(0,u.useContextSelector)(Wi,e??u.identity)},$i=72,qi={zoomSetting:Te.FIT,zoomLevel:null,workspaceSize:{width:null,height:null,availableHeight:null},scrollOffset:{left:0,top:0}},Ki={setZoomSetting:(e,t)=>{let{payload:n}=t;return{...e,zoomSetting:n,scrollOffset:{left:0,top:0}}},setZoomLevel:(e,t)=>{let{payload:n}=t;return{...e,zoomLevel:n,zoomSetting:Te.FIXED}},setScrollOffset:(e,t)=>{let{payload:n}=t;return{...e,scrollOffset:n}},setWorkspaceSize:(e,t)=>{let{payload:n}=t;return{...e,workspaceSize:n}}};const Xi=function(){const[e,t]=(0,u.useReduction)(qi,Ki),{zoomSetting:n,zoomLevel:r,workspaceSize:a,scrollOffset:o}=e,l=(0,u.useMemo)((()=>function(e,t,n){let r;const a=e.width/e.availableHeight;switch(t){case Te.FILL:r=a>J.FULLBLEED_RATIO?e.width-x.SCROLLBAR_WIDTH-$i:(e.availableHeight-x.SCROLLBAR_WIDTH)*J.FULLBLEED_RATIO-$i;break;case Te.FIT:{const t=e.width-144;r=a>J.FULLBLEED_RATIO?Math.min(t,(e.availableHeight-$i)*J.FULLBLEED_RATIO):t;break}default:if(isNaN(n))break;r=n*J.PAGE_WIDTH}r=Math.max(0,r);const o=Ie*Math.floor(r/Ie),l=o/J.PAGE_RATIO,i=o/J.FULLBLEED_RATIO,s=o>=e.width-$i-24,c=l>=e.availableHeight-$i-24,d=s||c,u=!d&&o<e.width-200,p=d?$i:12;return{pageWidth:o,pageHeight:l,hasHorizontalOverflow:s,hasVerticalOverflow:c,hasPageNavigation:u,pagePadding:p,viewportWidth:d?e.width:o+p,viewportHeight:d?e.availableHeight:i+p}}(a,n,r)),[a,n,r]),{pageWidth:i}=l,s=(0,u.useMemo)((()=>{const e=Math.ceil(i/Ie*Ie);switch(n){case Te.FILL:case Te.FIT:return e/J.PAGE_WIDTH;default:return r}}),[r,i,n]);return{state:{...l,zoomSetting:n,zoomLevel:s,workspaceWidth:a.width,workspaceHeight:a.height,scrollLeft:o.left,scrollTop:o.top},actions:t}},Qi=[Se.OPENING,Se.CLOSING],Ji={openCarousel:e=>e===Se.CLOSED?Se.OPENING:e,closeCarousel:e=>e===Se.OPEN?Se.CLOSING:e,completeTransition:e=>({[Se.OPENING]:Se.OPEN,[Se.CLOSING]:Se.CLOSED}[e]||e)};const es=function(){const[e,t]=(0,u.useReduction)(Se.OPEN,Ji),n=Qi.includes(e),{openCarousel:r,closeCarousel:a,completeTransition:o}=t;return(0,u.useEffect)((()=>{if(!n)return;const e=setTimeout(o,Ce);return()=>clearTimeout(e)}),[n,o]),{state:{carouselState:e,isCarouselInTransition:n},actions:{openCarousel:r,closeCarousel:a}}};const ts=function LayoutProvider(e){let{children:t}=e;const n=Xi(),r=es(),a={state:{...n.state,...r.state},actions:{...n.actions,...r.actions}};return c.createElement(Wi.Provider,{value:a},t)};const utils_nativeCopyPasteExpected=function(){const{activeElement:e}=document,{tagName:t,type:n,contentEditable:r}=e;if("true"===r||"textarea"===t.toLowerCase()||"input"===t.toLowerCase()&&["text","number","search","email","tel","url"].includes(n))return!0;const a=window.getSelection(),o=a.rangeCount?a.getRangeAt(0):null;return Boolean(o&&!o.collapsed)};const ns=function(e,t){(0,u.useEffect)((()=>{const n=t=>{const{clipboardData:n}=t;utils_nativeCopyPasteExpected()||n?.types?.length||e(t)},r=e=>{utils_nativeCopyPasteExpected()||t(e)};return document.addEventListener("copy",n),document.addEventListener("cut",n),document.addEventListener("paste",r),()=>{document.removeEventListener("copy",n),document.removeEventListener("cut",n),document.removeEventListener("paste",r)}}),[e,t])},rs="_DOUBLEDASH_";const as=function(){const{updateElementsByResourceId:e}=xa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId})));return{updateElementDimensions:(0,u.useCallback)((t=>{let{id:n,resource:r}=t;e({id:n,properties:e=>e.resource.width!==r.width||e.resource.height!==r.height?{resource:r,type:r.type,width:r.width,height:r.height,x:J.PAGE_WIDTH/2-r.width/2,y:J.PAGE_HEIGHT/2-r.height/2}:{type:r.type,resource:r}})}),[e])}};const os=function(){const e=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];setTimeout((()=>{const t=window.document;e&&t.activeElement&&t.activeElement!==t.body&&t.activeElement.blur();const n=new window.FocusEvent("focusout");t.dispatchEvent(n)}))}),[]);return e};const ls=function(){const{addElement:e}=xa((e=>{let{actions:t}=e;return{addElement:t.addElement}})),{setZoomSetting:t}=Vi((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),n=os();return(0,u.useCallback)(((r,a)=>{t(Te.FIT);const o=function(e,t){return(0,Hn.createNewElement)(e,Mi(e,t))}(r,a),{id:l,resource:i}=o;return e({element:o}),"video"===r&&i?.src&&!i.isPlaceholder&&setTimeout((()=>{const e=document.getElementById(`video-${l}`);e&&e.play().catch((()=>{}))})),n(),o}),[e,n,t])};const is=function(){const{uploadMedia:e,postProcessingResource:t}=vi((e=>{let{actions:{uploadMedia:t,postProcessingResource:n}}=e;return{uploadMedia:t,postProcessingResource:n}})),n=ls(),{updateElementDimensions:r}=as(),{deleteElementsByResourceId:a}=xa((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),o=(0,u.useCallback)((e=>{let{resource:t}=e;n(t.type,{resource:t})}),[n]),l=(0,u.useCallback)((e=>{let{id:t,resource:n}=e;r({id:t,resource:n})}),[r]),i=(0,u.useCallback)((e=>{let{id:n,resource:a}=e;r({id:n,resource:a}),t(a)}),[r,t]),s=(0,u.useCallback)((e=>{let{id:t}=e;a({id:t})}),[a]);return(0,u.useCallback)((t=>{e(t,{onUploadStart:o,onUploadProgress:l,onUploadError:s,onUploadSuccess:i})}),[e,o,l,s,i])},ss=186,cs=145,ds=120,us=200,ps=70,ms=56,fs=40,gs={locked:!0,topLeft:2,topRight:2,bottomRight:2,bottomLeft:2},hs={locked:!0,hasHiddenPadding:!1,horizontal:0,vertical:0},Es="left",bs={content:(0,d._x)("Fill in some text","text preset content","web-stories"),fontSize:(0,Mr.dataFontEm)(1.33),lineHeight:1.2,x:fs,y:(J.PAGE_HEIGHT-(0,Mr.dataFontEm)(1.33))/2,font:Hn.TEXT_ELEMENT_DEFAULT_FONT,width:us,borderRadius:gs,backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.NONE,padding:hs,textAlign:Es},ys=[{title:(0,d._x)("Title 1","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Re}">${(0,d._x)("Title 1","text preset content","web-stories")}</span>`,fontSize:(0,Mr.dataFontEm)(2.667),lineHeight:1.19,x:fs,y:(J.PAGE_HEIGHT-(0,Mr.dataFontEm)(2.667))/2,font:Hn.TEXT_ELEMENT_DEFAULT_FONT,width:ss,borderRadius:gs,backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.NONE,padding:hs,textAlign:Es}},{title:(0,d._x)("Title 2","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Re}">${(0,d._x)("Title 2","text preset content","web-stories")}</span>`,fontSize:(0,Mr.dataFontEm)(2),lineHeight:1.2,x:fs,y:(J.PAGE_HEIGHT-(0,Mr.dataFontEm)(2))/2,font:Hn.TEXT_ELEMENT_DEFAULT_FONT,width:cs,borderRadius:gs,backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.NONE,padding:hs,textAlign:Es}},{title:(0,d._x)("Title 3","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Re}">${(0,d._x)("Title 3","text preset content","web-stories")}</span>`,fontSize:(0,Mr.dataFontEm)(1.6),lineHeight:1.2,x:fs,y:(J.PAGE_HEIGHT-(0,Mr.dataFontEm)(1.6))/2,font:Hn.TEXT_ELEMENT_DEFAULT_FONT,width:ds,borderRadius:gs,backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.NONE,padding:hs,textAlign:Es}},{title:(0,d._x)("Paragraph","text preset title","web-stories"),element:bs},{title:(0,d._x)("Caption","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Pe}">${(0,d._x)("Caption","text preset content","web-stories")}</span>`,fontSize:(0,Mr.dataFontEm)(1),lineHeight:1.2,x:fs,y:(J.PAGE_HEIGHT-(0,Mr.dataFontEm)(1))/2,font:Hn.TEXT_ELEMENT_DEFAULT_FONT,width:ps,borderRadius:gs,backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.NONE,padding:hs,textAlign:Es}},{title:(0,d._x)("Label","text preset title","web-stories").toUpperCase(),element:{content:(0,d._x)("Label","text preset content","web-stories").toUpperCase(),fontSize:(0,Mr.dataFontEm)(.888),lineHeight:1.2,x:fs,y:(J.PAGE_HEIGHT-(0,Mr.dataFontEm)(.888))/2,font:Hn.TEXT_ELEMENT_DEFAULT_FONT,width:ms,borderRadius:gs,backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.NONE,padding:hs,textAlign:Es}}];const _s=function(){const{currentPage:e,addElements:t,updateCurrentPageProperties:n,deleteElementById:r,combineElements:a,addAnimations:o}=xa((e=>{let{state:{currentPage:t},actions:{addElements:n,deleteSelectedElements:r,updateCurrentPageProperties:a,deleteElementById:o,combineElements:l,addAnimations:i}}=e;return{currentPage:t,addElements:n,deleteSelectedElements:r,updateCurrentPageProperties:a,deleteElementById:o,combineElements:l,addAnimations:i}})),l=(0,u.useBatchingCallback)((function(l){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===l.length)return!1;const s=l.find((e=>{let{isBackground:t}=e;return t}));let c=i;if(s){const t=e.elements[0];s.isDefaultBackground?(t.isDefaultBackground||r({elementId:t.id}),n({properties:{backgroundColor:s.backgroundColor}})):(c=i.map((e=>e.targets.includes(s.id)?{...e,targets:[t.id]}:e)),a({firstElement:s,secondId:t.id,shouldRetainAnimations:!1}))}const d=l.filter((e=>{let{isBackground:t}=e;return!t}));return d.length&&t({elements:d}),o({animations:c}),!0}),[t,e,n,a,r,o]);return l};const vs=function(){const e=_s(),{currentPage:t,selectedElements:n,deleteSelectedElements:r,selectedElementAnimations:a}=xa((e=>{let{state:{currentPage:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a}}=e;return{currentPage:t,selectedElements:n,deleteSelectedElements:a,selectedElementAnimations:r}})),o=is(),l=ls(),i=(0,Ir.usePasteTextContent)(l,bs),s=(0,u.useCallback)((e=>{const{type:o}=e;0!==n.length&&(!function(e,t,n,r){if(!t.length||!r)return;const{clipboardData:a}=r,o={sentinel:"story-elements",items:t.map((t=>({...t,...t.isDefaultBackground?{backgroundColor:e.backgroundColor}:null,basedOn:t.id,id:void 0}))),animations:n},l=JSON.stringify(o).replace(/--/g,rs),i=t.map((e=>{const{type:t}=e,{TextContent:n}=(0,Hn.getDefinitionForType)(t);return n?n(e):t})).join("\n"),s=t.map((e=>{const{type:t,x:n,y:r,rotationAngle:a}=e,{Output:o}=(0,Hn.getDefinitionForType)(t);return(0,u.renderToStaticMarkup)(c.createElement(o,{element:e,box:{width:100,height:100,x:n,y:r,rotationAngle:a}}))})).join("\n");a.setData("text/plain",i),a.setData("text/html",`\x3c!-- ${l} --\x3e${s}`)}(t,n,a,e),"cut"===o&&r(),e.preventDefault())}),[t,r,n,a]),d=(0,u.useBatchingCallback)((n=>{const{elements:r,animations:a}=function(e,t){let n={animations:[],elements:[]};for(let r=e.firstChild;r;r=r.nextSibling){if(8!==r.nodeType||-1!==r.nodeValue?.indexOf("Fragment"))continue;const e=JSON.parse(r.nodeValue.replace(new RegExp(rs,"g"),"--"));if("story-elements"!==e.sentinel)continue;const a=e.items.reduce(((n,r)=>{let{elements:a,animations:o}=n;const{element:l,elementAnimations:i}=(0,Hn.duplicateElement)({element:{...r,id:r.basedOn},animations:e.animations,existingElements:t.elements});return{elements:[...a,l],animations:[...o,...i]}}),{animations:[],elements:[]});return n={animations:[...n.animations,...a.animations],elements:[...n.elements,...a.elements]},n}return n}(n,t);return e(r,a)}),[e,t]),p=(0,u.useCallback)((e=>{const{clipboardData:t}=e;try{const n=!t.files?.length&&(t.getData("text/html")||t.getData("text/plain"));if(n){const t=document.createElement("template");t.innerHTML=n.replace(/<meta[^>]+>/g,"").replace(/<\/?html>/g,"").replace(/<\/?body>/g,"");let r=d(t.content);r||(r=i(t.innerHTML)),r&&e.preventDefault()}const{items:r}=t,a=[];for(let e=0;e<r.length;e++){const t=r[e].getAsFile();t&&a.push(t)}a.length>0&&o(a)}catch(e){}}),[d,i,o]);ns(s,p)};function ws(e,t){let{editingElement:n,editingElementState:r={}}=t;return{...e,editingElement:n,editingElementState:r}}const Ts=function(){const[e,t]=(0,u.useReducer)(ws,{editingElement:null,editingElementState:{}}),[n,r]=(0,u.useState)({}),a=(0,u.useCallback)((()=>{t({editingElement:null})}),[]),o=(0,u.useCallback)((e=>{t({editingElement:e})}),[]),l=(0,u.useCallback)(((e,n)=>{t({editingElement:e,editingElementState:n})}),[]),i=(0,u.useCallback)(((e,t)=>r((n=>({...n,[e]:t})))),[r]),s=(0,u.useRef)(null);s.current=n;const c=(0,u.useCallback)((e=>s.current[e]),[]),{editingElement:d,editingElementState:p}=e;return(0,u.useMemo)((()=>({nodesById:n,editingElement:d,editingElementState:p,setEditingElementWithState:l,setEditingElementWithoutState:o,clearEditing:a,getNodeForElement:c,setNodeForElement:i})),[n,d,p,l,o,a,c,i])};var Ss=n(70333);function Cs(e,t,n,r,a){const{topLeftPoint:o,topRightPoint:l,bottomRightPoint:i,bottomLeftPoint:s}=(0,Ss.getCorners)(e,t,n,r,a);return new(ji().Polygon)(new(ji().Vector),[new(ji().Vector)(o.x,o.y),new(ji().Vector)(s.x,s.y),new(ji().Vector)(i.x,i.y),new(ji().Vector)(l.x,l.y)])}const Is=(0,u.createContext)({actions:{},state:{}}),xs="canvasContainer",As="pageContainer";const ks=function CanvasProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),[a,o]=(0,u.useState)(null),l=(0,u.useRef)(null),[i,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(null),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(null),[E,b]=(0,u.useState)(null),[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(null),[T,S]=(0,u.useState)(null),[C,I]=(0,u.useState)(null),[x,A]=(0,u.useState)(null),k=(0,u.useMemo)((()=>new window.IntersectionObserver((e=>{for(const t of e){if(!t.target.dataset.rectObservationKey)return;r((e=>({...e,[t.target.dataset.rectObservationKey]:t.boundingClientRect})))}}))),[]);(0,u.useEffect)((()=>()=>k.disconnect()),[k]);const O=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{nodesById:N,editingElement:P,editingElementState:R,setEditingElementWithState:M,setEditingElementWithoutState:L,clearEditing:D,getNodeForElement:B,setNodeForElement:F}=Ts(),{elements:H,backgroundElementId:U,selectedElementIds:z,toggleElementInSelection:G,setSelectedElementsById:j}=xa((e=>{let{state:{currentPage:t,selectedElementIds:n},actions:{toggleElementInSelection:r,setSelectedElementsById:a}}=e;const o=t?.elements||[];return{elements:o,backgroundElementId:o[0]?.id,selectedElementIds:n,toggleElementInSelection:r,setSelectedElementsById:a}})),Y=(0,u.useCallback)(((e,t)=>{P&&P!==e&&D(),l.current===e&&"focus"===t.type||(l.current=e,t.shiftKey?G({elementId:e}):j({elementIds:[e]}),t.currentTarget.focus({preventScroll:!0}),U!==e&&t.stopPropagation(),"mousedown"===t.type&&(o(t),t.target.ownerDocument.addEventListener("mouseup",(()=>window.setTimeout(o,0,null)),{once:!0,capture:!0})))}),[P,U,D,G,j]),Z=(0,u.useCallback)((e=>{let{x:t,y:n,width:r,height:a}=e;const o=Cs(0,t,n,r,a),l=H.filter((e=>{let{isBackground:t}=e;return!t})).map((e=>{let{id:t,rotationAngle:n,x:r,y:a,width:l,height:i}=e;const s=Cs(n,r,a,l,i);return ji().testPolygonPolygon(o,s)?t:null})).filter((e=>e));j({elementIds:l})}),[H,j]);(0,u.useEffect)((()=>{!P||1===z.length&&z[0]===P||D(),l.current&&!z.includes(l.current)&&(l.current=null)}),[P,z,D]),vs();const[W,V]=(0,u.useState)(null),$=(0,u.useMemo)((()=>({state:{pageContainer:d,canvasContainer:i,fullbleedContainer:m,nodesById:N,editingElement:P,editingElementState:R,isEditing:Boolean(P),lastSelectionEvent:a,displayLinkGuidelines:y,pageAttachmentContainer:E,designSpaceGuideline:g,isEyedropperActive:C,eyedropperCallback:x,eyedropperImg:v,eyedropperPixelData:T,boundingBoxes:n,clientRectObserver:k,onMoveableMount:W},actions:{setPageContainer:p,setFullbleedContainer:f,getNodeForElement:B,setNodeForElement:F,setEditingElement:L,setEditingElementWithState:M,clearEditing:D,handleSelectElement:Y,selectIntersection:Z,setDisplayLinkGuidelines:_,setPageAttachmentContainer:b,setCanvasContainer:s,setDesignSpaceGuideline:h,setIsEyedropperActive:I,setEyedropperCallback:A,setEyedropperImg:w,setEyedropperPixelData:S,setMoveableMount:V}})),[d,i,m,N,P,R,a,y,E,g,C,x,v,T,n,k,B,F,L,M,D,Y,Z,W,V]);return c.createElement(Is.Provider,{value:$},c.createElement(Zi,{pageSize:O},t))};const Os=function(e){return(0,u.useContextSelector)(Is,e??u.identity)};function Ns(e){const t=(0,u.useContextSelector)(Is,(e=>{let{state:t}=e;return t.clientRectObserver})),n=(0,u.useRef)(null);return(0,u.useCallback)((r=>{n.current&&t.unobserve?.(n.current),r&&(r.dataset.rectObservationKey=e,t.observe(r)),n.current=r}),[t,e])}function Ps(e){return(0,u.useContextSelector)(Is,(t=>{let{state:n}=t;return n.boundingBoxes?.[e]}))}var Rs=n(80475),Ms=n(40981);const Ls="addBackgroundMedia",Ds="cropSelectedElements",Bs="cropElementsWithShapes",Fs="safeZone",Hs="previewStory",Us="addLinks",zs="enableSwipe",Gs="done",js={[Ls]:{title:(0,d.__)("Add background media","web-stories"),figureSrc:"images/help-center/add_bg_module_1",description:[(0,d.__)("Double click any image or video to enter edit mode. To scale, use the slider. To change the focal point, drag the image or video.","web-stories")]},[Ds]:{title:(0,d.__)("Crop selected element","web-stories"),figureSrc:"images/help-center/media_edit_mode_module_2",description:[(0,d.__)("Double click any image or video element to enter edit mode. Then, use the slider to scale the element or move its focal point by dragging it.","web-stories")]},[Bs]:{title:(0,d.__)("Crop elements using shapes","web-stories"),figureSrc:"images/help-center/media_bg_shape_module_3",description:[(0,d.__)("Select a shape from the Shape menu to create a frame.","web-stories")]},[Fs]:{title:(0,d.__)("Stay within the safe zone","web-stories"),figureSrc:"images/help-center/safe_zone_module_4",description:[(0,d.__)("Elements work best when you keep them within the safe zone. Outside of the safe zone, elements like links and buttons may get cropped out or not function properly.","web-stories")]},[Hs]:{title:(0,d.__)("Preview your Web Story","web-stories"),figureSrc:"images/help-center/preview_module_5",description:[(0,d.__)("Use Preview Mode to view your Story before publishing.","web-stories"),(0,d.__)("Make sure buttons, links, logos, and text aren’t too close to the edge of your screen and that no Story element overlaps with the navigation bar.","web-stories")]},[Us]:{title:(0,d.__)("Add links to story elements","web-stories"),figureSrc:"images/help-center/add_link_module_6",description:[(0,d.__)('Go to the Design tab. Scroll down to <strong>Link</strong> and enter a URL. To remove a link, select the "X" <screenreader> (clear)</screenreader> button next to the URL box.',"web-stories")]},[zs]:{title:(0,d.__)("Enable swipe-up option","web-stories"),figureSrc:"images/help-center/page_attachment_module_7",description:[(0,d.__)("Go to the Design tab. Navigate to <strong>Page Attachment</strong> and enter a web address and a call to action to describe the link.","web-stories")]}},Ys=[Gs,{title:(0,d.__)("Done!","web-stories"),description:[(0,d.__)("You’re caught up with quick tips. We’ll notify you when we add new tips, but feel free to come back whenever you need help.","web-stories")]}],Zs=500,Ws=1,Vs=2,$s="help_center_companion",qs=Ms.FOCUSABLE_SELECTORS.map((e=>`#${$s} ${e}`)).join(", "),Ks=(0,u.createContext)({state:{},actions:{}}),Xs=(e,t)=>t.navigationIndex<0;const Qs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(t,n)=>e.reduce(((e,r)=>({...n,...e,...r(t,e)})),n)},Js=Qs([(e,t)=>{const n=!e.isOpen&&t.isOpen,r=!e.isOpeningToTip&&t.isOpeningToTip;return{navigationIndex:n&&!r?-1:t.navigationIndex}},(e,t)=>{if(!((e,t)=>e.navigationIndex<0&&t.navigationIndex>=0)(e,t))return{};const n=t.tipKeys.slice(0,t.navigationIndex).filter((e=>!t.readTips[e]));return{navigationFlow:[...t.tipKeys,...n,Ys[0]]}},(e,t)=>({hasBottomNavigation:!Xs(0,t)}),(e,t)=>({isLeftToRightTransition:!Xs(0,t)&&t.navigationIndex-e.navigationIndex>0}),(e,t)=>({isPrevDisabled:t.navigationIndex<=0,isNextDisabled:t.navigationIndex>=t.navigationFlow?.length-1}),(e,t)=>{const n=!Xs(0,t)&&((e,t)=>(t.navigationFlow||[]).filter((e=>t.tipKeys.includes(e))))(0,t)?.[t.navigationIndex];return{readTips:n?{...t.readTips,[n]:!0}:t.readTips}},function(e,t){return{unreadTipsCount:t.tipKeys.filter((e=>!t.readTips[e]))?.length||0}},function(e,t){if(((e,t)=>!e.isHydrated&&t.isHydrated)(e,t)){return e.unreadTipsCount<t.unreadTipsCount?{isOpen:!0}:{}}return{}},function(e,t){return{isOpeningToTip:t.isOpeningToTip&&!e.isOpeningToTip}}]),ec=(e,t)=>{let{state:n,actions:r}=e;const a={...n,...t(n)};return{state:Js(n,a),actions:r}},tc=Qs([function(e){return Boolean(e?.unreadTipsCount)&&void 0!==e?.isOpen?{isOpen:e?.isOpen}:{}},function(e){return e?.unreadTipsCount?{unreadTipsCount:e?.unreadTipsCount}:{}}]),nc=wo.getItemByKey(vo.HELP_CENTER),rc=e=>({isOpen:!1,isOpeningToTip:!1,navigationIndex:-1,navigationFlow:Object.keys({...js,...e.additionalTips}),isLeftToRightTransition:!0,hasBottomNavigation:!1,isPrevDisabled:!0,isNextDisabled:!1,readTips:{},readError:!1,unreadTipsCount:nc?.unreadTipsCount??0,isHydrated:!1,tips:{...js,...e.additionalTips},tipKeys:Object.keys({...js,...e.additionalTips})});const ac=function HelpCenterProvider(e){let{children:t}=e;const{additionalTips:n={}}=H(),{actions:{updateCurrentUser:r}}=Z(),a=Boolean(r),[o,l]=(0,u.useReducer)(ec,{state:tc(nc,rc({additionalTips:n})),actions:{goToNext:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,Rs.clamp)(t+1,{MIN:0,MAX:n.length-1})}},goToPrev:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,Rs.clamp)(t-1,{MIN:0,MAX:n.length-1})}},goToMenu:()=>()=>({navigationIndex:-1}),goToTip:e=>t=>{let{navigationFlow:n}=t;return{navigationIndex:n.findIndex((t=>t===e))}},openToUnreadTip:e=>t=>{let{navigationFlow:n,readTips:r}=t;return r[e]?{}:{isOpen:!0,isOpeningToTip:!0,navigationIndex:n.findIndex((t=>t===e))}},toggle:()=>e=>{let{isOpen:t}=e;return(0,O.trackEvent)("help_center_toggled",{status:t?"closed":"open"}),{isOpen:!t}},close:()=>e=>{let{isOpen:t}=e;return t&&(0,O.trackEvent)("help_center_toggled",{status:"closed"}),{isOpen:!1}},hydrateReadTipsSuccess:e=>t=>({readTips:{...e?.readTips??{},...t.readTips},isHydrated:!0}),persistingReadTipsError:()=>()=>({readError:!0})}}),{currentUser:i,updateCurrentUser:s}=Na((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,updateCurrentUser:n.updateCurrentUser}})),d=(0,u.useMemo)((()=>Object.entries(o.actions).reduce(((e,t)=>{let[n,r]=t;return e[n]=function(){return l(r(...arguments))},e}),{})),[o.actions]),{isHydrated:p,unreadTipsCount:m}=o.state;(0,u.useEffect)((()=>{if(p){const e=wo.getItemByKey(vo.HELP_CENTER);wo.setItemByKey(vo.HELP_CENTER,{...e,unreadTipsCount:m})}}),[p,m]);const{isOpen:f}=o.state;(0,u.useEffect)((()=>{const e=wo.getItemByKey(vo.HELP_CENTER);wo.setItemByKey(vo.HELP_CENTER,{...e,isOpen:f})}),[f]),(0,u.useEffect)((()=>{!p&&i?.onboarding&&d.hydrateReadTipsSuccess({readTips:i.onboarding})}),[d,i,p]);const g=(h=o.state.readTips,Object.keys(h||{}).join(" "));var h;const E=(0,u.useRef)(!1);(0,u.useEffect)((()=>{var e;(g||p)&&a&&(E.current?s({onboarding:(e=g,e.split(" ").sort(((e,t)=>e.localeCompare(t))).reduce(((e,t)=>({...e,[t]:!0})),{}))}).catch(d.persistingReadTipsError):E.current=!0)}),[d,s,a,g,p]);const[b,y]=(0,u.useState)(o.state);(0,u.useEffect)((()=>y(o.state)),[o.state]);const _=!b.isOpen&&o.state.isOpen?o.state.navigationIndex:b.navigationIndex;(0,u.useEffect)((()=>{if(_>-1&&o.state.navigationFlow.length>=_){const e=o.state.navigationFlow[_];(0,O.trackEvent)("help_center_read_tip",{name:e,unread_count:o.state.unreadTipsCount}),o.state.unreadTipsCount===o.state.navigationFlow.length&&(0,O.trackEvent)("tutorial_begin"),"done"===e&&(0,O.trackEvent)("tutorial_complete")}}),[_]);const v=(0,u.useMemo)((()=>({state:{...o.state,navigationIndex:_},actions:d})),[d,o.state,_]);return c.createElement(Ks.Provider,{value:v},t)};function oc(e){return(0,u.useContextSelector)(Ks,e??u.identity)}const lc={SAFE_ZONE:"safeZone"};const ic=(0,u.createContext)({});const sc=function(e){return(0,u.useContextSelector)(ic,e??u.identity)};const cc=function(){const e=xa((e=>{let{state:{pages:t=[]}}=e;return t.reduce(((e,t)=>(e.push(...t.elements.filter((e=>{let{type:t,isExternal:n}=e;return["image","video","gif"].includes(t)&&!n})).map((e=>{let{resource:t}=e;return t.id}))),e)),[])})),{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}=vi((e=>{let{state:{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}=e;return{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}));return(0,u.useMemo)((()=>Boolean(e?.some((e=>t(e)||n(e))))),[e,t,n])};const dc=function AutoSaveHandler(){const{autoSaveInterval:e}=H(),{state:{hasNewChanges:t}}=mr(),{status:n,saveStory:r}=xa((e=>{let{state:{story:{status:t}},actions:{saveStory:n}}=e;return{status:t,saveStory:n}})),a=cc(),o="draft"===n||!n,l=(0,u.useRef)(r);return(0,u.useEffect)((()=>{l.current=r}),[r]),(0,u.useEffect)((()=>{if(!o||!t||!e||a)return;const n=setTimeout((()=>l.current()),1e3*e);return()=>clearTimeout(n)}),[e,o,t,a]),null},uc=(0,u.createContext)({actions:{},state:{}});const pc=function(e){return(0,u.useContextSelector)(uc,e??u.identity)},mc=window.requestIdleCallback||function(e,t){const n=(t=t||{}).timeout||1,r=performance.now();return setTimeout((function(){e({get didTimeout(){return!t.timeout&&performance.now()-r-1>n},timeRemaining:function(){return Math.max(0,performance.now()-r+1)}})}),1)},fc=window.cancelIdleCallback||function(e){clearTimeout(e)};const gc=function(){const e=(0,u.useRef)([]),t=(0,u.useRef)(!1),n=(0,u.useRef)([null,null]),r=(0,u.useCallback)((()=>{if(t.current=!0,!e.current.length)return void(t.current=!1);const[a,o]=e.current.shift(),l=mc((async()=>{await o(),n.current=[null,null],r()}));n.current=[a,l]}),[]),a=(0,u.useCallback)((t=>{e.current=e.current.filter((e=>{let[n]=e;return n!==t}));const[a,o]=n.current;t===a&&(fc(o),n.current=[null,null],r())}),[r]);return(0,u.useCallback)((n=>{let[o,l]=n;return a(o),e.current.push([o,l]),t.current||r(),()=>{a(o)}}),[r,a])};var hc=n(6114);const Ec=Ea().shape({width:Ea().number,height:Ea().number,containerHeight:Ea().number});Hn.StoryPropTypes.story=Ea().shape({storyId:Ea().number,title:Ea().string.isRequired,status:Ea().string.isRequired,author:Ea().shape({id:Ea().oneOfType([Ea().number,Ea().string]),name:Ea().string.isRequired}),slug:Ea().string.isRequired,date:Ea().string.isRequired,modified:Ea().string.isRequired,excerpt:Ea().string.isRequired,featuredMedia:Ea().shape({id:Ea().number.isRequired,url:Ea().string.isRequired,width:Ea().number.isRequired,height:Ea().number.isRequired}),password:Ea().string.isRequired,currentStoryStyles:Ea().object,autoAdvance:Ea().bool,defaultPageDuration:Ea().number,backgroundAudio:Ea().shape({resource:Hn.BackgroundAudioPropType})}),Hn.StoryPropTypes.size=Ea().exact({width:Ea().number.isRequired,height:Ea().number.isRequired});Ea().shape(Cn.AnimationProps);function bc(){return bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}const yc=p.default.div.attrs((e=>{let{previewMode:t,x:n,y:r,width:a,height:o,rotationAngle:l}=e;return t?{style:{position:"absolute",zIndex:1,left:`${n}px`,top:`${r}px`,width:`${a}px`,height:`${o}px`,transform:`rotate(${l}deg)`}}:{}})).withConfig({displayName:"displayElement__Wrapper",componentId:"sc-1uos4dq-0"})([""," "," "," contain:layout;transition:opacity 0.15s cubic-bezier(0,0,0.54,1);",""],(e=>{let{previewMode:t}=e;return!t&&Pn.elementWithPosition}),(e=>{let{previewMode:t}=e;return!t&&Pn.elementWithSize}),(e=>{let{previewMode:t}=e;return!t&&Pn.elementWithRotation}),(e=>{let{isBackground:t,theme:n}=e;return t&&(0,p.css)(["border-radius:",";overflow:hidden;"],n.borders.radius.small)})),_c=p.default.div.withConfig({displayName:"displayElement__BackgroundOverlay",componentId:"sc-1uos4dq-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;"]),vc=p.default.div.withConfig({displayName:"displayElement__ReplacementContainer",componentId:"sc-1uos4dq-2"})(["transition:opacity 0.25s cubic-bezier(0,0,0.54,1);pointer-events:none;opacity:",";height:100%;"],(e=>{let{hasReplacement:t}=e;return t?1:0}));function AnimationWrapper(e){let{children:t,id:n,isAnimatable:r}=e;return r?c.createElement(Cn.StoryAnimation.WAAPIWrapper,{target:n},t):t}const wc=(0,u.memo)((function DisplayElement(e){let{element:t,previewMode:n,isAnimatable:r=!1}=e;const{getBox:a,dataToEditorX:o}=(0,hc.default)((e=>({getBox:e.actions.getBox,dataToEditorX:e.actions.dataToEditorX}))),{getProxiedUrl:l}=ko(),{actions:{maybeEnqueueFontStyle:i}}=ho(),[s,d]=(0,u.useState)(null),p=Boolean(s),{id:m,opacity:f,type:g,isBackground:h,overlay:E,border:b={},flip:y}=t,{isCurrentResourceProcessing:_,isCurrentResourceUploading:v}=vi((e=>{let{state:t}=e;return Hn.ELEMENT_TYPES.IMAGE===g?{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}:{}})),w=p?{...t,type:s.resource.type,resource:s.resource,scale:s.scale,focalX:s.focalX,focalY:s.focalY,flip:h?s.flip:y,overlay:h?s.overlay:E}:null,{Display:T}=(0,Hn.getDefinitionForType)(g),{Display:S}=(0,Hn.getDefinitionForType)(s?.resource.type)||{},I=(0,u.useRef)(null),x=a(t);(0,C.useTransformHandler)(m,(e=>{const t=I.current;if(null===e)t.style.transform="",t.style.width="",t.style.height="";else{const{translate:n,rotate:r,resize:a,dropTargets:o}=e;t.style.transform=`translate(${n?.[0]}px, ${n?.[1]}px) rotate(${r}deg)`,a&&0!==a[0]&&0!==a[1]&&(t.style.width=`${a[0]}px`,t.style.height=`${a[1]}px`),void 0!==o?.hover&&(t.style.opacity=o.hover?0:1),void 0!==o?.replacement&&d(o.replacement||null)}}));const A=(0,u.useRef)(null);(0,Pn.useColorTransformHandler)({id:m,targetRef:A,resetOnNullTransform:!1});const k=(0,Nn.getResponsiveBorder)(b,n,o);return c.createElement(yc,bc({ref:I,"data-element-id":m,isBackground:t.isBackground,previewMode:n},x),c.createElement(AnimationWrapper,{id:m,isAnimatable:r},c.createElement(Nn.DisplayWithMask,{element:t,fill:!0,box:x,style:{opacity:void 0!==f?f/100:null,...(0,Nn.shouldDisplayBorder)(t)?(0,Nn.getBorderPositionCSS)({...k,width:`${x.width}px`,height:`${x.height}px`}):null},previewMode:n,responsiveBorder:k},c.createElement(T,{element:t,previewMode:n,box:x,getProxiedUrl:l,isCurrentResourceProcessing:_,isCurrentResourceUploading:v,maybeEnqueueFontStyle:i})),!n&&c.createElement(vc,{hasReplacement:p},w&&c.createElement(Nn.DisplayWithMask,{element:w,fill:!0,box:x,style:{opacity:f?f/100:null},previewMode:n},c.createElement(S,{element:w,box:x,getProxiedUrl:l,isCurrentResourceProcessing:_,isCurrentResourceUploading:v,maybeEnqueueFontStyle:i}))),h&&E&&!p&&c.createElement(_c,{ref:A,style:(0,Nr.default)(E)})))})),Tc=p.default.div.withConfig({displayName:"storyPageToNode__Page",componentId:"sc-rgshjs-0"})(["display:block;position:relative;padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;"],(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t})),Sc=p.default.div.withConfig({displayName:"storyPageToNode__PreviewWrapper",componentId:"sc-rgshjs-1"})(["height:100%;position:relative;overflow:hidden;background-color:",";border-radius:4px;",""],(e=>{let{theme:t}=e;return t.colors.fg.white}),(e=>{let{background:t}=e;return(0,Nr.default)(t)})),Cc=p.default.div.withConfig({displayName:"storyPageToNode__FullHeight",componentId:"sc-rgshjs-2"})(["position:absolute;top:","px;bottom:","px;right:0;left:0;"],(e=>{let{yOffset:t}=e;return t}),(e=>{let{yOffset:t}=e;return t})),Ic=(0,u.forwardRef)((function PageWithDependencies(e,t){let{page:n,width:r,height:a,renderFullHeightThumb:o=!1,containerHeight:l}=e;return c.createElement(p.ThemeProvider,{theme:g.theme},c.createElement(go,null,c.createElement(C.TransformProvider,null,c.createElement(Zi,{pageSize:{width:r,height:a}},c.createElement(Tc,{ref:t,height:o?l:a,width:r},c.createElement(Sc,{background:n.backgroundColor},c.createElement(Cc,{yOffset:o?(l-a)/2:0},n.elements.map((e=>c.createElement(wc,{key:e.id,previewMode:!0,element:e}))))))))))}));const xc=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{renderFullHeightThumb:r=!1}=n,a=t*(1/J.PAGE_RATIO),o=t*(1/J.FULLBLEED_RATIO),l=document.createElement("div");l.style.cssText=`\n     contain: strict;\n     position: absolute;\n     top: 0;\n     left: 0;\n     width: ${t}px;\n     height: ${o}px;\n     opacity: 0;\n     transform: translate(-100%, -100%);\n     pointer-events: none;\n   `;const i=await new Promise((n=>{(0,u.render)(c.createElement(Ic,{ref:e=>{e&&n(e)},page:e,width:t,height:a,containerHeight:o,renderFullHeightThumb:r}),l)}));document.body.appendChild(l);const s=()=>{(0,u.unmountComponentAtNode)(l),document.body.removeChild(l)};return[i,s]};const Ac=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[l,i]=await xc(e,r),s=await o.toJpeg(l,{...a,width:r,height:r*(1/J.PAGE_RATIO),canvasHeight:r*(1/J.PAGE_RATIO),canvasWidth:r});return i(),s};const kc=function PageDataUrlProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),a=gc(),o=(0,u.useCallback)((e=>{const t=e.id,n=a([t,async()=>{const t=await Ac(e,{});r((n=>({...n,[e.id]:t})))}]);return()=>{n()}}),[a]),l=(0,u.useMemo)((()=>({state:{dataUrls:n},actions:{queuePageImageGeneration:o}})),[o,n]);return c.createElement(uc.Provider,{value:l},t)};const Oc=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[l,i]=await xc(e,r,{renderFullHeightThumb:!0}),s=await o.toCanvas(l,{...a,fontEmbedCss:""});return i(),s};var Nc=n(88862);function Pc(e){const{r:t,g:n,b:r,a=1}=e;return Nc.relativeLuminance({r:t/255,g:n/255,b:r/255,a})}function Rc(e){const t=Nc.str2rgba(e);return Nc.relativeLuminance(t)}function Mc(e,t,n){const r=Nc.contrast(e,t);return{ratio:r,WCAG_AA:Nc.aa(r,n)}}function Lc(e,t,n){return Mc(Pc({r:e[0],g:e[1],b:e[2]}),Pc({r:t[0],g:t[1],b:t[2]}),n)}const Dc=(0,u.createContext)({actions:{},state:{}});const Bc=function(e,t){const n=e.getContext("2d"),r=(e.width/J.FULLBLEED_RATIO-e.width/J.PAGE_RATIO)/2,a=(0,Mr.getBox)({...t,height:t.height?t.height:(0,Rn.calculateTextHeight)(t,t.width)},e.width,e.height-2*r),{x:o,y:l,width:i,height:s}=a,c=l+r;return n.getImageData(o,c,i,s).data},Fc={},Hc={setPageCanvas:(e,t)=>{const{pageId:n,canvas:r}=t.payload;return{...e,[n]:r}},clearPageCanvas:(e,t)=>{const{pageId:n}=t.payload;return un(e,[n])}};const Uc=function(){return(0,u.useReduction)(Fc,Hc)};const zc=function(){const[e,t]=(0,u.useState)(null),n=(0,u.useRef)(e);n.current=e;const r=(0,u.useCallback)((e=>e.backgroundColor===n.current?.backgroundColor&&(0,u.shallowEqual)(e.elements,n.current?.elements)?n.current.canvas:null),[]),a=(0,u.useCallback)((e=>{let{page:n,canvas:r}=e;t({elements:n.elements,backgroundColor:n.backgroundColor,canvas:r})}),[]);return{setSnapshot:a,getSnapshotCanvas:r}};function PageCanvasCacheValidator(e){let{pageId:t,clearPageCanvasCache:n}=e;const r=xa((e=>{let{state:n}=e;return un(n.pages.find((e=>{let{id:n}=e;return n===t})),["animations"])}));return(0,u.useEffect)((()=>{n({pageId:r.id})}),[r,n]),(0,u.useEffect)((()=>()=>n({pageId:t})),[n,t]),null}PageCanvasCacheValidator.propTypes={pageId:Ea().oneOfType([Ea().string,Ea().number]),clearPageCanvasCache:Ea().func};const Gc=(0,u.memo)(PageCanvasCacheValidator);const jc=function(e,t){return{...e,elements:e.elements.filter((e=>{let{id:n}=e;return!t.includes(n)}))}};const Yc=function PageCanvasProvider(e){let{children:t}=e;const n=gc(),[r,a]=Uc(),{getSnapshotCanvas:o,setSnapshot:l}=zc(),i=xa((e=>{let{state:t}=e;return t.pages.map((e=>{let{id:t}=e;return t}))})),{currentPage:s,singleElementSelection:d}=xa((e=>{let{state:t}=e;return{singleElementSelection:1===t.selectedElementIds?.length?t.selectedElementIds:He,currentPage:t.currentPage}})),p={currentPageValue:s,pageCanvasMapValue:r,singleElementSelectionValue:d},m=(0,u.useRef)(p);m.current=p;const f=(0,u.useCallback)((e=>{let[t,r]=e;const o=n([t,async()=>{const e=await Oc(r,{});a.setPageCanvas({pageId:r.id,canvas:e})}]);return o}),[n,a]),g=(0,u.useCallback)((()=>{const{currentPageValue:e,pageCanvasMapValue:t}=m.current;t[e.id]||f([e.id,e])}),[f]),h=(0,u.useCallback)((async(e,t)=>{const n=jc(e,t);let r=o(n);return r||(r=await Oc(n,{}),l({page:n,canvas:r})),r}),[l,o]),E=(0,u.useCallback)((async e=>{const{pageCanvasMapValue:t}=m.current;let n=t[e.id];return n||(n=await Oc(e,{}),a.setPageCanvas({pageId:e.id,canvas:n})),n}),[a]),b=(0,u.useCallback)((async e=>{const{currentPageValue:t,singleElementSelectionValue:n}=m.current;let r;r=n.includes(e.id)?await h(t,n):await E(t);const{fontSize:a}=e,o=function(e,t){const n=[255,255,255,255],r=[0,0,0,255],a=[],o={r:255,g:255,b:255,a:1},l={r:0,g:0,b:0,a:1};for(let t=0;t<e.length;t+=4)a.push([e[t],e[t+1],e[t+2],e[t+3]]);const i=a.map((e=>Lc(r,e,t)));if(!i.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:l};const s=a.map((e=>Lc(n,e,t)));if(!s.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:o};const c=i.reduce(((e,t)=>e+t.ratio),0)<s.reduce(((e,t)=>e+t.ratio),0);return c?{color:l,backgroundColor:{...o,a:.7}}:{color:o,backgroundColor:{...l,a:.7}}}(Bc(r,e),a);return o}),[h,E]);return c.createElement(Dc.Provider,{value:{state:{pageCanvasMap:r},actions:{calculateAccessibleTextColors:b,generateDeferredPageCanvas:f,generateDeferredCurrentPageCanvas:g}}},i.map((e=>c.createElement(Gc,{key:e,pageId:e,clearPageCanvasCache:a.clearPageCanvas}))),t)};const Zc=function(){return(0,u.useContextSelector)(Dc,(e=>{let{actions:t}=e;return t.calculateAccessibleTextColors}))};const Wc=function(e){return(0,u.useContextSelector)(Dc,e??u.identity)},Vc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGElEQVQYV2NkYGD4////fwZGEMnIyMgAAEvqB/6wfXLSAAAAAElFTkSuQmCC",$c=p.default.div.withConfig({displayName:"devTools__Container",componentId:"sc-1mo3vwv-0"})(["position:fixed;z-index:2147483646;bottom:0;left:0;display:flex;flex-direction:column;width:35%;height:50%;border:6px solid ",";background:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),qc=p.default.textarea.withConfig({displayName:"devTools__Textarea",componentId:"sc-1mo3vwv-1"})(["flex:1;border:0;background:",";color:",";white-space:nowrap;overflow:auto;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Kc=p.default.div.withConfig({displayName:"devTools__Options",componentId:"sc-1mo3vwv-2"})(["display:flex;justify-content:space-between;padding:6px;"]),Xc=p.default.label.withConfig({displayName:"devTools__Label",componentId:"sc-1mo3vwv-3"})(["margin-right:6px;"]),Qc=p.default.button.withConfig({displayName:"devTools__Button",componentId:"sc-1mo3vwv-4"})(["margin-left:6px;"]),Jc=e=>{const t=[];return[{...e,pages:e.pages.map((e=>({...e,elements:e.elements.map((e=>{const n={...e};return"resource"in e&&(n.resource={...e.resource},"video"===e.type&&(n.resource.mimeType="video/mp4",n.resource.src="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAPEbW9vdgAAAGxtdmhkAAAAANrF/AXaxfwFAAAD6AAAB9AAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE///////wAAAzh0cmFrAAAAXHRraGQAAAAB2sX8BdrF/AUAAAABAAAAAAAAB9AAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAABQAAAAUAAAAAAKwbWRpYQAAACBtZGhkAAAAANrF/AXaxfwFAAAD6AAAB9BVxAAAAAAAIWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAAAAAAACZ21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAq3N0c2QAAAAAAAAAAQAAAJthdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAABQAFABIAAAASAAAAAAAAAABDkpWVC9BVkMgQ29kaW5nAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAM2F2Y0MBTUAK/+EAG2dNQArsxLzzzUBAQZAAAAMAEAAAAwFI8SJZoAEABWjpeyyAAAAAEmNvbHJuY2xjAAEAAQAGAAAAGHN0dHMAAAAAAAAAAQAAABQAAABkAAAAZHN0c3oAAAAAAAAAAAAAABQAAAC1AAAADAAAAAwAAAAMAAAADAAAAGcAAAAOAAAADQAAAAwAAADEAAAADwAAAA4AAAAMAAAAmgAAAA8AAAAMAAAADAAAABEAAAAOAAAADAAAABxzdHNjAAAAAAAAAAEAAAABAAAACgAAAAEAAAAgY282NAAAAAAAAAACAAAAAAAAA/QAAAAAAAAGKwAAAKhjdHRzAAAAAAAAABMAAAABAAAAyAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAfQAAAABAAAAyAAAAAEAAAAAAAAAAQAAAGQAAAABAAAB9AAAAAEAAADIAAAAAQAAAAAAAAABAAAAZAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAZAAAAACAAAAZAAAABRzdHNzAAAAAAAAAAEAAAABAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAH0AAAAMgAAQAAAAAAAW1kYXQAAAAAAAADXAAAALFliIQAIf8tERhKDUPN//6tPIlfMgqs2j4bf1chdW+++2VwQdh75gd9Y8UGeNAnhlaisT01Zs49a/0nV0aO/GLhqiGwvWR/s1K9W3zBx2od2cS1bT/kb2rz7FeHrWTqTLX6Gx65Y6i33pdJ/uLJd1nt76ybxnGFuPrIHacdB39MBmZsd4t/m7wPBzhrJIjUCiCUcSaxJPxvEH+6DID5TqxsXtv0RS9+hTuYECGa+YWdx4EAAAAIQZokbEMfi4AAAAAIQZ5COIc/0YEAAAAIAZ5hNEEH1YAAAAAIAZ5jakEH1YEAAABjQZpoSahBaJlMCM/eVhjnGE9A+AdJ7SwN5vlKUC/otPa/5jefanvcx5sQZ4c8/3tiMqvDgQF8rydFoFe3gcpkTP4xG9DP5oXTv1DTSsVi1O/u9fkq6BMYR61X6/n148wbBk3hAAAACkGehi5RMJfxO6sAAAAJAZ6lKRDn87czAAAACAGep25Cn8WAAAAAwEGarDUILakymAT/lvijvmpe6mLGpu6rJNoev4/97f/3/AViMdt7WMTLeGSxGKwsecwmz+Z5NTf4Lgky4aLbYBjw9pUtNg4bov9E4yT+OadpewkQxiWZZozDDf98P4PN72xr+rkQJcODW8z2LOkQVijjHcWSmTAvF7/ANFm8TO5l9vC/tz7FvEis+ba+dTueI87l9hdLXQfWqKN+J9j1fj5cguj08byzEmWnKbLlqG1uTZmu0LDedc3Ugo76bySHIAAAAAtBnspklERc3+sNqQAAAAoBnukpEZ/3fsMPAAAACAGe625N/6+AAAAAlkGa8DUILakymARfBGYe5snAbMic1iEEu9W/yugK09WdqQ1/7ftt/lUz4i6orQg+4cIz2nHYVKTXCJJbyOrz/tGL+TWtNtUBVK2kbTsfCYF8ddhk+qL5Jr82IUEUALXNsKpx1hhGIJnvqqlGTOyyOpmwbHhNUa2TaBkzzVzuaVnuHnaL3sjfLR0XEc/T6ntUXHacPLf94QAAAAtBnw5klERd//FEowAAAAgBny1pFf+ngQAAAAgBny9uf+yhJAAAAA1BmzM1CC2pMpgE/xwwAAAACkGfUWSURFz/kYEAAAAIAZ9ybkv/mIA=",n.resource.poster=Vc,t.push(n.id)),"image"===e.type&&(n.resource.mimeType="image/png",n.resource.src=Vc)),n}))})))},t]},ed=e=>{if(!e.length)return e;const t=e.match(/\/([^/?#]+)[^/]*$/);return t.length>1?`__WEB_STORIES_TEMPLATE_BASE_URL__/images/templates/%%templateName%%/${t[1]}`:e};const td=function DevTools(){const[e,t]=(0,u.useState)(!1),[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(!1),{showSnackbar:s}=(0,Er.useSnackbar)(),d=(0,u.useRef)(),{reducerState:p,restore:m}=xa((e=>{let{internal:t}=e;return{reducerState:t.reducerState,restore:t.restore}})),{pages:f,current:g,selection:h,story:{globalStoryStyles:E}}=p,b={current:g,selection:h,story:{globalStoryStyles:E},version:tr.DATA_VERSION,pages:f},y=a?Jc(b)[0]:l?(_=b,{..._,current:null,selection:[],story:{},pages:_.pages.map((e=>({...e,elements:e.elements.map((e=>{const t={...e};return"resource"in e&&(t.resource={...e.resource},"video"===e.type&&(t.resource.id=0,t.resource.posterId=0,t.resource.src=ed(t.resource.src),t.resource.poster=ed(t.resource.poster)),"image"===e.type&&(t.resource.id=0,t.resource.sizes=[],t.resource.src=ed(t.resource.src))),t})),pageTemplateType:e?.pageTemplateType??""})))}):b;var _;const v=()=>t((e=>!e));(0,nr.useGlobalKeyDownEffect)({key:"mod+shift+alt+j",editable:!0},v);const w=JSON.stringify(y,null,2),T=n?window.btoa(w):w,[S,C]=(0,u.useState)(T);return(0,u.useEffect)((()=>C(T)),[T]),e?c.createElement($c,null,c.createElement(Kc,null,c.createElement("div",null,c.createElement(Xc,{title:"For easier sharing thru various channels"},c.createElement("input",{type:"checkbox",checked:n,onChange:()=>r((e=>!e))}),"Base64"),c.createElement(Xc,{title:"Replace resources with dummy resources"},c.createElement("input",{type:"checkbox",checked:a,onChange:()=>o((e=>!e))}),"Dummy resources"),c.createElement(Xc,{title:"Export as Template"},c.createElement("input",{type:"checkbox",checked:l,onChange:()=>i((e=>!e))}),"Template")),c.createElement("div",null,c.createElement(Qc,{title:"Load data from input",onClick:()=>{let e=S;try{e=window.atob(e)}catch(e){}const t=JSON.parse(e),n={...t,story:{...p.story,...t.story},capabilities:p.capabilities},[r,o]=a?Jc(n):[n,[]];m(r),o.length>0&&o.forEach((e=>{const t=document.getElementById(`video-${e}`);t&&t.load()})),s({message:"Story restored from input",timeout:1200})}},"Load"),c.createElement(Qc,{title:"Copy data to clipboard",onClick:()=>{d.current.select(),document.execCommand("copy"),d.current.setSelectionRange(0,0),s({message:"Copied to clipboard",timeout:1200})}},"Copy"),c.createElement(Qc,{title:"Close DevTools",onClick:v},"X"))),c.createElement(qc,{ref:d,className:"mousetrap",value:S,onChange:e=>C(e.target.value)})):null},nd=(0,p.createGlobalStyle)([".react-calendar__tile--now.react-calendar__month-view__days__day:focus{background-color:#eeeec1;}"]),rd="useskeyboard",ad=(0,p.createGlobalStyle)(["body:not(",") *:focus{outline:none !important;}"],".useskeyboard"),od=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Digit1","Digit2","Digit3"];const ld=()=>{const[e,t]=(0,u.useState)(!1),n=n=>{!e&&od.includes(n.code)&&t(!0)},r=()=>{e&&t(!1)};return(0,u.useEffect)((()=>(document.addEventListener("keydown",n,!0),document.addEventListener("mousedown",r,!0),function(){document.removeEventListener("keydown",n,!0),document.removeEventListener("mousedown",r,!0)}))),(0,u.useEffect)((()=>{document.body.classList.toggle(rd,e)}),[e]),c.createElement(ad,null)},id=()=>({locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},allowedMimeTypes:{audio:["audio/mpeg","audio/aac","audio/wav","audio/ogg"],image:["image/png","image/jpeg","image/jpg","image/gif","image/webp"],caption:["text/vtt"],vector:["image/svg+xml"],video:["video/mp4","video/webm"]},isRTL:!1,storyId:1,cdnURL:"https://wp.stories.google/static/main/",maxUpload:314572800,capabilities:{hasUploadMediaAction:!1,canManageSettings:!1},metadata:{publisher:""},canViewDefaultTemplates:!0,showMedia3p:!0,encodeMarkup:!0,ffmpegCoreUrl:"https://wp.stories.google/static/main/js/@ffmpeg/core@0.10.0/dist/ffmpeg-core.js",apiCallbacks:{},MediaUpload:()=>null,styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const sd=function StoryEditor(e){let{config:t,initialEdits:n,children:r}=e;const a=(0,v.default)(id(),t),{storyId:o,isRTL:l,flags:i}=a;return c.createElement(S.FlagsProvider,{features:i},c.createElement(p.StyleSheetManager,{stylisPlugins:l?[_.default]:[]},c.createElement(p.ThemeProvider,{theme:k},c.createElement(D,null,c.createElement(F,{config:a},c.createElement(Y,null,c.createElement(so,null,c.createElement(pr,{size:50},c.createElement(w.default,null,c.createElement(Ia,{storyId:o,initialEdits:n},c.createElement(xi,null,c.createElement(Oa,null,c.createElement(go,null,c.createElement(yi,null,c.createElement(dc,null),c.createElement(C.TransformProvider,null,c.createElement(Ui,null,c.createElement(ac,null,c.createElement(Yc,null,c.createElement(kc,null,c.createElement(A,null),c.createElement(td,null),c.createElement(I.DefaultMoveableGlobalStyle,null),c.createElement(I.CropMoveableGlobalStyle,null),c.createElement(T.ModalGlobalStyle,null),c.createElement(nd,null),c.createElement(ld,null),r)))))))))))))))))))};const cd=(0,u.memo)((function PreviewPageElements(e){let{page:t}=e;return t.elements.map((e=>c.createElement(wc,{previewMode:!0,key:e.id,page:t,element:e,isAnimatable:!0})))})),dd=p.default.div.withConfig({displayName:"previewPage__FullBleedPreviewWrapper",componentId:"sc-1r5t7dq-0"})(["height:",";width:100%;overflow:hidden;position:relative;display:flex;align-items:center;background-color:white;",";"],(e=>{let{pageSize:t}=e;return`${t.containerHeight}px`}),(e=>{let{background:t}=e;return(0,Nr.default)(t)})),ud=p.default.div.withConfig({displayName:"previewPage__PreviewSafeZone",componentId:"sc-1r5t7dq-1"})(["width:100%;height:",";overflow:visible;position:absolute;margin:0;"],(e=>{let{pageSize:t}=e;return`${t.height}px`}));function PreviewPageAnimationController(e){let{animationState:t}=e;const n=(0,Cn.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(t){case Cn.STORY_ANIMATION_STATE.PLAYING:return n.play(),()=>{};case Cn.STORY_ANIMATION_STATE.RESET:return n.reset(),()=>{};case Cn.STORY_ANIMATION_STATE.SCRUBBING:case Cn.STORY_ANIMATION_STATE.PAUSED:return n.pause(),()=>{};default:return()=>{}}}),[t,n]),(0,u.useEffect)((()=>()=>n.reset()),[n]),null}const pd=(0,u.memo)((0,u.forwardRef)((function PreviewPageDisplay(e,t){let{page:n,pageSize:r}=e;return c.createElement(dd,{ref:t,pageSize:r,background:n.backgroundColor},c.createElement(ud,{pageSize:r},c.createElement(cd,{page:n})))})));(0,u.forwardRef)((function PreviewPage(e,t){let{page:n,pageSize:r,animationState:a=Cn.STORY_ANIMATION_STATE.RESET,onAnimationComplete:o}=e;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(Cn.StoryAnimation.Provider,{animations:n.animations,elements:n.elements,onWAAPIFinish:o},c.createElement(pd,{ref:t,page:n,pageSize:r}),c.createElement(PreviewPageAnimationController,{animationState:a})))}));PreviewPageAnimationController.propTypes={animationState:Ea().oneOf(Object.values(Cn.STORY_ANIMATION_STATE))};var md;function fd(){return fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fd.apply(this,arguments)}const SvgArrowDownLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",fd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,md||(md=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.001 19.467V12.5a.5.5 0 0 1 1 0v5.041C10.149 14.209 13.641 12 17.465 12c2.815 0 5.384 1.183 7.384 3.13a.5.5 0 0 1-.698.716C22.314 14.057 19.988 13 17.465 13c-3.756 0-7.244 2.39-9.162 6h6.37a.5.5 0 0 1 0 1H7.511a.498.498 0 0 1-.51-.533Z",fill:"currentColor"})))},gd=(0,c.memo)(SvgArrowDownLeftCurved);var hd;function Ed(){return Ed=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ed.apply(this,arguments)}const SvgArrowDownRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ed({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hd||(hd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.849 15.846C9.686 14.057 12.012 13 14.534 13c3.757 0 7.245 2.39 9.163 6h-6.37a.5.5 0 1 0 0 1h7.162a.498.498 0 0 0 .51-.523V12.5a.5.5 0 0 0-1 0v5.042C21.853 14.209 18.36 12 14.536 12c-2.815 0-5.384 1.183-7.384 3.13a.5.5 0 1 0 .698.716Z",fill:"currentColor"})))},bd=(0,c.memo)(SvgArrowDownRightCurved);var yd,_d=n(27856),vd=n(73715);function wd(){return wd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wd.apply(this,arguments)}function Tooltip(e){let{placement:t=_d.PLACEMENT.BOTTOM,...n}=e;const{isRTL:r,styleConstants:{leftOffset:a}={}}=H(),o=r?_d.RTL_PLACEMENT[t]:t;return c.createElement(vd.BaseTooltip,wd({placement:o,isRTL:r,leftOffset:a},n))}function Td(){return Td=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Td.apply(this,arguments)}function HistoryButton(e){let{title:t,shortcut:n,children:r,...a}=e;return c.createElement(Tooltip,{title:t,shortcut:n,hasTail:!0},c.createElement(m.Button,Td({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL},a),r))}function Redo(){const{state:{canRedo:e},actions:{redo:t}}=mr(),{isRTL:n}=H(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Redo","web-stories"),shortcut:"shift+mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Redo Changes","web-stories")},n?c.createElement(gd,null):c.createElement(bd,null))}function Undo(){const{state:{canUndo:e},actions:{undo:t}}=mr(),{isRTL:n}=H(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Undo","web-stories"),shortcut:"mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Undo Changes","web-stories")},n?c.createElement(bd,null):c.createElement(gd,null))}function Sd(){return Sd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sd.apply(this,arguments)}const SvgEye=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Sd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,yd||(yd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.023 16.229C9.948 12.71 12.996 11 16 11c3.004 0 6.052 1.711 7.977 5.229a.23.23 0 0 1-.007.214C21.878 19.503 18.923 21 16 21s-5.877-1.497-7.97-4.557l-.412.283.412-.283a.23.23 0 0 1-.007-.215Zm16.831-.48C22.774 11.947 19.41 10 16 10c-3.41 0-6.775 1.948-8.854 5.748l.439.24-.439-.24c-.213.39-.193.892.059 1.26C9.465 20.314 12.717 22 16 22c3.283 0 6.535-1.686 8.795-4.992.252-.368.272-.87.059-1.26ZM14 16a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z",fill:"currentColor"})))},Cd=(0,c.memo)(SvgEye);const Id=function PreviewErrorDialog(e){let{isOpen:t,onClose:n,onRetry:r}=e;return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Open preview","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:r,primaryText:(0,d.__)("Try again","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("The preview window failed to open.","web-stories")))},xd="story-preview";const Ad=function PreviewButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,previewLink:r,status:a,autoSave:o,saveStory:l}=xa((e=>{let{state:{meta:{isSaving:t},story:{status:n,previewLink:r}},actions:{autoSave:a,saveStory:o}}=e;return{isSaving:t,status:n,previewLink:r,autoSave:a,saveStory:o}})),i=cc(),[s,p]=(0,u.useState)(null),g="draft"===a||!a,h=e=>{const t=new URL(e);return t.hash="#development=1",t.toString()},E=(0,u.useCallback)((()=>{let e;(0,O.trackEvent)("preview_story");try{if(e=window.open("about:blank",xd),e){e.document.write("<!DOCTYPE html><html><head>"),e.document.write("<title>"),e.document.write((0,br.escapeHTML)((0,d.__)("Generating the preview…","web-stories"))),e.document.write("</title>"),e.document.write("</head><body>"),e.document.write((0,br.escapeHTML)((0,d.__)("Please wait. Generating the preview…","web-stories")));const t=h(r);e.document.write(`<script>\n            setTimeout(function() {\n              location.replace(${JSON.stringify(t)});\n            }, 5000);\n          <\/script>`)}}catch(e){}(g?l:o)().then((t=>{if(e&&!e.closed&&e.location.href){const n=h(t?.previewLink??r);e.location.replace(n)}})).catch((()=>p(r)))}),[o,g,r,l]),b=(0,u.useCallback)((e=>{p(null);const t=h(s);window.open(t,xd+Math.random()),e.preventDefault()}),[s]),y=(0,u.useCallback)((()=>p(null)),[]),_=(0,d.__)("Preview","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:_,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:E,disabled:n||t||i,"aria-label":_},c.createElement(Cd,null))),c.createElement(Id,{isOpen:Boolean(s),onClose:y,onRetry:b}))};var kd=n(29042),Od=n(49599),Nd=n(42699),Pd=n(70722),Rd=n(68057),Md=n(60427),Ld=n(96764),Dd=n(63415);const Bd=function(e){const t=(0,Rd.getSettings)(),{timeFormat:n}=t;return(0,Md.default)(e,n)};const Fd=function(){const e=(0,Rd.getSettings)(),{timeFormat:t}=e;return!t||/a(?!\\)/.test(t.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""))},Hd=(0,u.createContext)({state:{},actions:{}}),Ud=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(),[s,d]=(0,u.useState)(!1),p=(0,u.useCallback)((e=>{i(e)}),[i]),m=(0,u.useCallback)((()=>{(0,O.trackEvent)("checklist_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),f=(0,u.useCallback)((()=>{(0,O.trackEvent)("checklist_toggled",{status:"closed"}),r(!1)}),[]),g=(0,u.useCallback)((()=>{(0,O.trackEvent)("checklist_toggled",{status:"open"}),r(!0),o(!0)}),[]),h=(0,u.useCallback)((()=>o(!1)),[]),E=(0,u.useMemo)((()=>({state:{checklistFocused:a,isOpen:n,isChecklistMounted:s,openPanel:l},actions:{toggle:m,close:f,open:g,resetChecklistFocused:h,setIsChecklistMounted:d,setOpenPanel:p}})),[a,f,l,n,g,h,m,p,d,s]);return c.createElement(Hd.Provider,{value:E},t)};function zd(e){return(0,u.useContextSelector)(Hd,e??u.identity)}var Gd=n(36798),jd=n(86376);const Yd=70,Zd=Math.floor(1),Wd=640,Vd=853,$d=96,qd="checklist_companion",Kd=(0,d.__)("Checklist","web-stories"),Xd={ACCESSIBILITY:"accessibility",DESIGN:"design",PRIORITY:"priority"},Qd={[Xd.ACCESSIBILITY]:(0,d.__)("Accessibility","web-stories"),[Xd.DESIGN]:(0,d.__)("Design","web-stories"),[Xd.PRIORITY]:(0,d.__)("Priority","web-stories")},Jd={fontSizeTooSmall:{title:(0,Ze.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Increase font size to %s or above","web-stories"),12),footer:(0,Ze.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Ensure legibility by selecting text size %d or greater","web-stories"),12)},imagesMissingAltText:{title:(0,d.__)("Add assistive text to images","web-stories"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users.","web-stories")},linkTappableRegionTooBig:{title:(0,d.__)("Reduce link size","web-stories"),footer:(0,d.__)("Elements with links must not cover most of the page. Decrease the size of elements with links.","web-stories")},linkTappableRegionTooSmall:{title:(0,Ze.default)(
/* translators: %s: minimum tappable region size width x minimum tappable region size height. */
(0,d.__)("Increase tap area size to at least %s","web-stories"),"48x48px"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users","web-stories")},lowContrast:{title:(0,d.__)("Increase contrast between text and background color","web-stories"),footer:(0,d.__)("Ensure legibility of text and ease of reading by increasing color contrast","web-stories"),textPanel:(0,d.__)("This color or font size combination may be hard for some people to read.","web-stories"),backgroundPanel:(0,d.__)("This background color may make some text hard to read.","web-stories"),warningIcon:(0,d.__)("Low Warning","web-stories")},videoMissingCaptions:{title:(0,d.__)("Add video captions","web-stories"),footer:(0,d.__)("Keep the audience engaged even when they can't listen to the audio","web-stories")},videoMissingTitle:{title:(0,d.__)("Add video description","web-stories"),footer:(0,d.__)("Improves indexability and accessibility (for videos without captions)","web-stories")}},eu={storyTooShort:{title:(0,Ze.default)(
/* translators: %d: maximum number of pages. */
(0,d._n)("Make Web Story at least %d page","Make Web Story at least %d pages",4,"web-stories"),4),footer:(0,Ze.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},storyTooLong:{title:(0,Ze.default)(
/* translators: %d: minimum number of pages. */
(0,d._n)("Make Web Story fewer than %d page","Make Web Story fewer than %d pages",30,"web-stories"),30),footer:(0,Ze.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},tooLittlePageText:{title:(0,d.__)("Add more text to page","web-stories"),footer:(0,Ze.default)(
/* translators: %d: minimum number of story characters. */
(0,d._n)("Include at least %d character","Include at least %d characters",100,"web-stories"),100)},tooMuchPageText:{title:(0,d.__)("Reduce text amount on page","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,Ze.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Include no more than %d character","Include no more than %d characters",200,"web-stories"),200)),c.createElement("li",null,(0,d.__)("Use a page attachment breaking up the text into multiple screens; or","web-stories")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: maximum percentage of characters, depending on number of pages. */
(0,d.__)("Keep the total number of text-heavy pages under %s of total number of story pages","web-stories"),"10%")))},tooManyLinksOnPage:{title:(0,Ze.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid including more than %s links per page","web-stories"),3),footer:(0,Ze.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid having more than %s links on one page","web-stories"),3)},imageResolutionTooLow:{title:(0,d.__)("Increase image resolution","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use larger resolution (2x or 3x) images for best appearance on screens with high pixel density","web-stories")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: minimum image size width x minimum image size height. */
(0,d.__)("For full-screen images, use a resolution of at least %s","web-stories"),"828x1792px")))},videoFrameRateTooLow:{title:(0,Ze.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d.__)("Increase video frame rate to at least %d fps","web-stories"),24),footer:(0,Ze.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d._n)("Ensure your video has a minimum of %d frame per second","Ensure your video has a minimum of %d frames per second",24,"web-stories"),24)},videoResolutionTooLow:{title:(0,d.__)("Increase video resolution","web-stories"),footer:(0,Ze.default)(
/* translators: 1: minimum video resolution. 2: minimum video width x minimum video height in pixels. */
(0,d.__)("Consider using a minimum resolution of %1$s (%2$s) to represent portrait videos","web-stories"),"480p","852x480px")},videoTooLong:{title:(0,Ze.default)(
/* translators: %d: maximum video length in minutes. */
(0,d._n)("Split videos into segments of %d minute or less","Split videos into segments of %d minutes or less",Zd,"web-stories"),Zd),footer:(0,d.__)("Shorter videos help readers navigate stories","web-stories")}},tu={storyMissingDescription:{title:(0,d.__)("Add Web Story description","web-stories"),footer:(0,d.__)("Incorporate a brief description for better user experience","web-stories")},storyMissingTitle:{title:(0,d.__)("Add Web Story title","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,Ze.default)(
/* translators: %d: maximum story title length in words. */
(0,d._n)("Keep under %d word","Keep under %d words",10,"web-stories"),10)),c.createElement("li",null,(0,Ze.default)(
/* translators: %d: maximum story title length in characters. */
(0,d._n)("Don't exceed %d character","Don't exceed %d characters",Yd,"web-stories"),Yd)))},storyMissingPoster:{title:(0,d.__)("Add poster image","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use as a representation of the story","web-stories")),c.createElement("li",null,(0,d.__)("Avoid images with embedded text","web-stories")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoMissingPoster:{title:(0,d.__)("Add poster image to every video","web-stories"),footer:(0,d.__)("Ensure a better experience by displaying a poster while users wait for the video to load","web-stories")},storyTitleTooLong:{title:(0,Ze.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Shorten title to fewer than %d character","Shorten title to fewer than %d characters",Yd,"web-stories"),Yd),footer:(0,Ze.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Limit story title to %d character or less","Limit story title to %d characters or less",Yd,"web-stories"),Yd)},logoTooSmall:{title:(0,Ze.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Increase size of publisher logo to at least %s","web-stories"),"96x96px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,Ze.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},noPublisherLogo:{title:(0,d.__)("Add a publisher logo to your story","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,Ze.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},storyPosterSize:{title:(0,Ze.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Correct poster image aspect ratio to %s","web-stories"),"640x853px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,Ze.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,Ze.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoNotOptimized:{title:(0,d.__)("Optimize videos","web-stories"),footer:(0,Ze.default)(
/* translators: %s: video resolution (720p) */
(0,d.__)("Videos larger than %s can cause slower loading and higher bandwidth costs.","web-stories"),"720p")},storyMissingPublisherName:{title:(0,d.__)("Add Site Title","web-stories")},ampValidation:{title:(0,d.__)("Compatibility","web-stories"),footer:c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{href:"https://wp.stories.google/docs/faq/",rel:"noreferrer",target:"_blank",onClick:e=>(0,O.trackClick)(e,"click_checklist_amp_test"),size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your story contains errors that can affect eligibility to appear on Google. Please see <a>our FAQ</a> for more information.","web-stories"))}},nu="unavailable",ru="recommended",au="all",ou={[nu]:[],[ru]:[Xd.ACCESSIBILITY,Xd.DESIGN],[au]:Object.values(Xd)},lu={[nu]:null,[ru]:Xd.DESIGN,[au]:Xd.PRIORITY},iu="story is no longer empty",su="publish button is pressed",cu="story 'recommended' section enabled",du="story 'high priority' section enabled",uu="story is published, regardless of recommendations",pu={[nu]:{[iu]:ru,[su]:au,[uu]:au,[cu]:ru},[ru]:{[du]:au,[su]:au,[uu]:au},[au]:{}},mu=(e,t)=>pu[e][t]||e,fu=(0,u.createContext)({state:{},actions:{}});function ChecklistCheckpointProvider(e){let{children:t}=e;const[n,r]=(0,u.useReducer)(mu,nu),[a,o]=(0,u.useState)(),[l,i]=(0,u.useState)(),s=a>0,d=xa((e=>{let{state:{story:t}}=e;return t.status}));(0,u.useEffect)((()=>{"publish"===d&&r(uu)}),[d]),Ca(ba.onSecondPageAdded,(0,u.useCallback)((()=>{r(cu)}),[])),Ca(ba.onFifthPageAdded,(0,u.useCallback)((()=>{r(du)}),[])),Ca(ba.onInitialElementAdded,(0,u.useCallback)((()=>{r(iu)}),[]));const p=(0,u.useCallback)((e=>{o(e)}),[]),m=(0,u.useCallback)((()=>r(su)),[]),f=(0,u.useCallback)((()=>{i(!0)}),[]),g=(0,u.useCallback)((()=>{i(!1)}),[]),h=(0,u.useMemo)((()=>({state:{checkpoint:n,hasHighPriorityIssues:s,reviewChecklistRequested:l},actions:{updateHighPriorityCount:p,handleResetReviewChecklist:g,handleReviewChecklist:f,showPriorityIssues:m}})),[n,f,m,g,l,s,p]);return c.createElement(fu.Provider,{value:h},t)}function gu(e){return(0,u.useContextSelector)(fu,e??u.identity)}const hu=(0,u.createContext)(null),Eu=(0,u.createContext)(null),bu={[Xd.PRIORITY]:{},[Xd.DESIGN]:{},[Xd.ACCESSIBILITY]:{}};function ChecklistCountProvider(e){let{hasChecklist:t,children:n}=e;const r=(0,u.useState)({...bu,hasChecklist:t});return c.createElement(hu.Provider,{value:r},n)}function ChecklistCategoryProvider(e){let{children:t,category:n}=e;const r=(0,u.useContext)(hu)?.[1];if(!r)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");const a=(0,u.useCallback)((e=>r((t=>({...t,[n]:{...t[n],...e}})))),[n,r]);return c.createElement(Eu.Provider,{value:a},t)}function yu(e,t){const n=(0,u.useContext)(Eu);if(!n)throw new Error("Cannot use `useRegisterCheck` outside of `ChecklistCategoryProvider`");(0,u.useEffect)((()=>n({[e]:t})),[e,n,t])}function _u(e){const t=(0,u.useContext)(hu)?.[0];if(!t)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");return Object.values(t[e]||{}).filter((e=>e)).length}Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const vu=[_.default],wu=[];const Tu=function DirectionAware(e){let{children:t}=e;const{isRTL:n}=H();return c.createElement(p.StyleSheetManager,{stylisPlugins:n?vu:wu},t)};var Su=n(12666);function Cu(){return Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu.apply(this,arguments)}const Iu="entering",xu="entered",Au="exiting",ku="default",Ou={default:{entering:Iu},entering:{entered:xu},entered:{exiting:Au},exiting:{exited:"exited"},exited:{entering:Iu}},Nu=(e,t)=>Ou[e]?.[t]||e,Pu=(0,u.forwardRef)(((e,t)=>{let{state:n,children:r}=e;const[a,o]=(0,u.useReducer)(Nu,n===xu?n:ku),[l,i]=(0,u.useState)(n);(0,u.useEffect)((()=>{const e=requestAnimationFrame((()=>i(n)));return()=>cancelAnimationFrame(e)}),[n]),(0,u.useEffect)((()=>{o(l)}),[l]);const s=[Iu,xu].includes(a)&&"exiting"===n,c=[Au].includes(a)&&[Iu,xu].includes(n)||s;return(0,u.cloneElement)(r(c?n:a),{ref:t})}));function ScheduledTransition(e){let{children:t,...n}=e;const r=(0,u.useRef)();return c.createElement(Su.default,Cu({nodeRef:r},n),(e=>c.createElement(Pu,{ref:r,state:e},(e=>t(e)))))}const Ru=p.default.div.withConfig({displayName:"navigationWrapper__NavigationWrapper",componentId:"sc-1qotgfl-0"})(["position:absolute;",";bottom:0;max-height:calc(100vh - ","px);width:","px;color:",";background-color:",";border:1px solid ",";border-radius:",";overflow:hidden;",""],(e=>{let{alignRight:t=!1}=e;return t?"right: 0":"left: 0"}),161,310,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isOpen:t}=e;return!t&&(0,p.css)(["&,*{height:0;visibility:hidden;}"])}));Ru.propTypes={alignRight:Ea().bool,isOpen:Ea().bool};const Mu=Ru;var Lu=n(19901),Du=n(18969);var Bu=n(35199),Fu=n(33625);const Hu=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),Uu=(0,p.css)([":focus-within{",";}"],(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),zu=p.default.div.withConfig({displayName:"components__NavBar",componentId:"sc-1m7fu09-0"})(["display:flex;justify-content:space-between;align-items:center;width:100%;height:","px;background-color:",";",""],48,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),Bu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]}))),Gu=(0,p.default)(m.Button).withConfig({displayName:"components__NavButton",componentId:"sc-1m7fu09-1"})([""," ",";svg{width:32px;}* + *{margin-left:12px;}"],Bu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),Hu),ju=p.default.div.withConfig({displayName:"topNavigation__TopNavButtons",componentId:"sc-rirhnw-0"})(["padding-right:15px;"]),Yu=(0,p.default)(Lu.Headline).attrs({as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"topNavigation__Label",componentId:"sc-rirhnw-1"})(["padding-left:24px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular})),Zu=(0,u.forwardRef)((function TopNavigation(e,t){let{onClose:n,label:r,popupId:a}=e;return c.createElement(zu,null,c.createElement(Yu,null,r),c.createElement(ju,null,c.createElement(Gu,{ref:t,"aria-label":(0,d.__)("Close","web-stories"),onClick:()=>{!function(e){document.querySelector(`[aria-owns=${e}]`)?.focus()}(a),n()},type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE},c.createElement(Du.default,null))))})),Wu=(0,p.css)(["opacity:1;transform:none;"]),Vu=e=>(0,p.css)(["opacity:0;transform:translateX(","px);"],"left"===e?-20:20),$u={entering:Wu,entered:Wu,exiting:Vu,exited:Vu},qu=p.default.div.withConfig({displayName:"secondaryPopup__Controller",componentId:"sc-b3cg46-0"})(["position:absolute;top:-12px;",":0px;opacity:0;transform:translateX(-20px);transition:opacity ","ms ",",transform ","ms ",";",""],(e=>{let{placement:t}=e;return t}),300,$e.BEZIER.default,300,$e.BEZIER.default,(e=>{let{state:t}=e;return $u[t]}));const Ku=function Popup(e){let{isOpen:t,popupId:n,children:r,ariaLabel:a,shouldKeepMounted:o,placement:l="left",onEnter:i=Mt,onExited:s=Mt}=e;return c.createElement(ScheduledTransition,{in:t,timeout:300,mountOnEnter:!o,unmountOnExit:!o,onEnter:i,onExited:s},(e=>c.createElement(qu,{id:n,role:"dialog","aria-label":a,state:e,placement:l},r)))};var Xu=n(76517);const Qu={NORMAL:"normal",DANGER:"danger"};var Ju=n(19722);const ep=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"styles__Tablist",componentId:"sc-oyok4o-0"})(["background:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));ep.propTypes={"aria-label":Ea().string.isRequired};const tp=(0,p.default)(Lu.Headline).attrs({as:"h3",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"styles__PanelText",componentId:"sc-oyok4o-1"})(["transition:background-color 300ms ease-in;"]),np=p.default.div.withConfig({displayName:"styles__TabButtonWrapper",componentId:"sc-oyok4o-2"})(["position:relative;height:60px;width:100%;padding:5px 4px;&,:hover,:focus-within,.","{background-color:",";}"],Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),rp=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.PLAIN}).withConfig({displayName:"styles__TabButton",componentId:"sc-oyok4o-3"})(["position:absolute;display:flex;justify-content:space-between;width:calc(100% - 8px);height:calc(100% - 10px);padding:16px;border-radius:0;&,:hover,:focus,.","{background-color:",";}",";","{opacity:0.8;}",";"],Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),tp,(e=>{let{status:t}=e;return t===Qu.DANGER&&(0,p.css)(["&,","{color:",";}","{background-color:",";}"],tp,(e=>{let{theme:t}=e;return t.colors.fg.negative}),ip,(e=>{let{theme:t}=e;return t.colors.fg.negative}))})),ap=p.default.div.withConfig({displayName:"styles__PanelWrapper",componentId:"sc-oyok4o-4"})(["width:100%;background:",";&:not(:first-child) > ","{box-shadow:0px -1px 0 0 ",";margin-top:1px;}",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),rp,(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{isExpanded:t,theme:n}=e;return t&&(0,p.css)(["& ",",& ","{:not(:last-child){box-shadow:none;}",";","{opacity:1;}&,:hover,:focus{background-color:",";}svg{transform:rotate(0);}}","{height:560px;","{visibility:visible;}}"],rp,np,Fu.focusableOutlineCSS,tp,n.colors.bg.primary,sp,cp)})),op=p.default.div.withConfig({displayName:"styles__ButtonText",componentId:"sc-oyok4o-5"})(["display:flex;align-items:center;justify-content:center;margin-left:-12px;"]),lp=p.default.div.withConfig({displayName:"styles__IconContainer",componentId:"sc-oyok4o-6"})(["height:32px;width:32px;color:",";svg{transform:rotate(-90deg);transition:transform 300ms ease-in-out;}"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),ip=p.default.div.withConfig({displayName:"styles__Badge",componentId:"sc-oyok4o-7"})(["display:flex;align-items:center;justify-content:center;height:20px;width:20px;border-radius:",";background-color:",";","{color:",";line-height:20px;}"],(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),tp,(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),sp=p.default.div.withConfig({displayName:"styles__ScrollableContent",componentId:"sc-oyok4o-8"})(["height:0;max-height:",";overflow-y:",";transition:height 300ms ease-in;"],(e=>{let{maxHeight:t}=e;return t?`calc(${t})`:"none"}),(e=>{let{maxHeight:t}=e;return t?"scroll":"hidden"})),cp=p.default.div.withConfig({displayName:"styles__TabPanel",componentId:"sc-oyok4o-9"})(["padding:0;visibility:hidden;overflow:hidden;background:",";transition:all 300ms ease-in;margin:0 0 16px 16px;",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),x.scrollbarCSS),dp=e=>{let{badgeCount:t=0,children:n,className:r,id:a,isExpanded:o,onClick:l,maxHeight:i,status:s=Qu.NORMAL,title:p}=e;const m=(0,u.useMemo)(ue.default,[]),f=a||m;return c.createElement(ap,{className:r,isExpanded:o},c.createElement(np,null,c.createElement(rp,{"aria-controls":f,"aria-selected":o,onClick:l,role:"tab",status:s},c.createElement(op,null,c.createElement(lp,null,c.createElement(Xu.default,null)),c.createElement(tp,{id:`${p}-${f}`,"aria-label":(0,Ze.default)(
/* translators: 1: number of issues. 2: type of issue, for example "High Priority". */
(0,d._n)("%1$d %2$s issue","%1$d %2$s issues",t,"web-stories"),t,p)},p)),c.createElement(ip,null,c.createElement(tp,{"aria-hidden":!0},t)))),c.createElement(sp,{"aria-hidden":!o,maxHeight:i},c.createElement(cp,{id:f,"aria-labelledby":`${p}-${f}`,role:"tabpanel"},n)))};var up,pp;function mp(){return mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mp.apply(this,arguments)}const SvgCheckbox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",mp({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,up||(up=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.897 18.146a.5.5 0 0 1 .707.708l-4.493 4.493-.007.007a.498.498 0 0 1-.708 0l-.006-.007-2.494-2.493a.5.5 0 0 1 .708-.708l2.146 2.147 4.147-4.147z",fill:"currentColor"})),pp||(pp=c.createElement("path",{d:"M20.333 15.5v-5.083C20.333 9.634 19.7 9 18.917 9h-6.5C11.634 9 11 9.634 11 10.417v11.166c0 .783.634 1.417 1.417 1.417H14.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},fp=(0,c.memo)(SvgCheckbox);function gp(){return gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gp.apply(this,arguments)}const hp=(0,p.default)(m.Button).withConfig({displayName:"toggleButton__Button",componentId:"sc-1de7s10-0"})(["height:36px;width:","px;display:inline-block;border:1px solid ",";padding:2px 0;color:",";"," ",""],(e=>{let{isSquare:t}=e;return t?36:58}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isOpen:t,theme:n}=e;return t&&(0,p.css)(["border-color:",";background-color:",";"],n.colors.bg.secondary,n.colors.bg.secondary)}),(e=>{let{hasText:t,theme:n}=e;return t&&(0,p.css)(["padding:2px 0 2px 8px;width:auto;",";span{padding-left:6px;}"],Bu.expandPresetStyles({preset:{...n.typography.presets.paragraph[$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}))}));hp.propTypes={hasText:Ea().bool,isOpen:Ea().bool};const Ep=p.default.div.withConfig({displayName:"toggleButton__Wrapper",componentId:"sc-1de7s10-1"})(["width:100%;height:100%;display:flex;justify-content:space-around;align-items:center;"]),bp=(0,p.default)(Ve.Text).attrs({as:"span"}).withConfig({displayName:"toggleButton__NotificationCount",componentId:"sc-1de7s10-2"})(["margin:-2px 0 -2px;padding-right:6px;line-height:20px;color:",";"],(e=>{let{theme:t}=e;return t.colors.violet[20]})),yp=(0,u.forwardRef)(((e,t)=>{let{copy:n,isOpen:r=!1,notificationCount:a=0,MainIcon:o,label:l,shortcut:i,popupZIndexOverride:s,...d}=e;const u=a>0;return c.createElement(Tooltip,{hasTail:!0,title:l,placement:_d.PLACEMENT.TOP,shortcut:i,popupZIndexOverride:s},c.createElement(hp,gp({ref:t,"aria-haspopup":!0,"aria-pressed":r,"aria-expanded":r,hasText:Boolean(n),isOpen:r,isSquare:!u,type:f.BUTTON_TYPES.TERTIARY,variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.MEDIUM},d),c.createElement(Ep,null,o&&c.createElement(o,null),n,u&&c.createElement(bp,null,a))))}));yp.displayName="ToggleButton";const _p=(0,p.default)(fp).withConfig({displayName:"toggle__MainIcon",componentId:"sc-1kcse2p-0"})(["height:32px;width:auto;display:block;"]),vp=(0,p.default)(yp).withConfig({displayName:"toggle__StyledToggleButton",componentId:"sc-1kcse2p-1"})(["display:block;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));function Toggle(e){let{isOpen:t=!1,popupId:n="",onClick:r=Mt}=e;const a=_u(Xd.PRIORITY),{checkpoint:o}=gu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),l=(0,u.useMemo)((()=>o===au?a:0),[o,a]);return c.createElement(vp,{"aria-owns":n,onClick:r,isOpen:t,MainIcon:_p,label:(0,d.__)("Checklist","web-stories"),"aria-label":l>0?(0,Ze.default)(
/* translators: %s:  number of unaddressed issues. */
(0,d._n)("Checklist: %s unaddressed issue","Checklist: %s unaddressed issues",l,"web-stories"),l):(0,d.__)("Checklist","web-stories"),notificationCount:l})}const wp=(0,p.default)(dp).withConfig({displayName:"styles__StyledTablistPanel",componentId:"sc-1rujego-0"})(["height:",";visibility:",";button{display:",";}"],(e=>{let{badgeCount:t}=e;return 0===t?0:"auto"}),(e=>{let{badgeCount:t}=e;return 0===t?"hidden":"visible"}),(e=>{let{badgeCount:t}=e;return 0===t?"none":"auto"})),Tp=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styles__PanelText",componentId:"sc-1rujego-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function Sp(){return zd((e=>{let{state:t}=e;return t.isChecklistMounted}))}function DesignPanel(e){let{badgeCount:t=0,isOpen:n,maxHeight:r,onClick:a,title:o,children:l}=e;return Sp()?c.createElement(wp,{badgeCount:t,isExpanded:Boolean(t)&&n,onClick:a,maxHeight:r,title:o},c.createElement(Tp,null,(0,d.__)("Follow best practices for Web Stories.","web-stories")),l):l}function DesignChecks(e){return c.createElement(ChecklistCategoryProvider,{category:Xd.DESIGN},c.createElement(DesignPanel,e,e.children))}function AccessibilityPanel(e){let{children:t,badgeCount:n,isOpen:r,onClick:a,maxHeight:o,title:l}=e;return Sp()?c.createElement(wp,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,title:l},c.createElement(Tp,null,(0,d.__)("Make your Web Story accessible.","web-stories")),t):t}function AccessibilityChecks(e){return c.createElement(ChecklistCategoryProvider,{category:Xd.ACCESSIBILITY},c.createElement(AccessibilityPanel,e,e.children))}function PriorityPanel(e){let{children:t,badgeCount:n=0,isOpen:r,onClick:a,maxHeight:o,title:l}=e;return Sp()?c.createElement(wp,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,status:Qu.DANGER,title:l},c.createElement(Tp,null,(0,d.__)("Make this Web Story easier to discover.","web-stories")),t):t}function PriorityChecks(e){const t=_u(Xd.PRIORITY),{updateHighPriorityCount:n}=gu((e=>{let{actions:{updateHighPriorityCount:t}}=e;return{updateHighPriorityCount:t}}));return(0,u.useEffect)((()=>{n(t)}),[n,t]),c.createElement(ChecklistCategoryProvider,{category:Xd.PRIORITY},c.createElement(PriorityPanel,e,e.children))}var Cp,Ip;function xp(){return xp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(this,arguments)}const SvgCheckmarkCircle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",xp({viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cp||(Cp=c.createElement("path",{d:"M29 54.146c13.888 0 25.147-11.259 25.147-25.147C54.147 15.11 42.888 3.852 29 3.852c-13.888 0-25.147 11.258-25.147 25.147 0 13.888 11.259 25.147 25.147 25.147z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),Ip||(Ip=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.198 18.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037z",fill:"currentColor"})))},Ap=(0,c.memo)(SvgCheckmarkCircle),kp=p.default.div.withConfig({displayName:"emptyContent__Wrapper",componentId:"sc-83zuqv-0"})(["display:grid;grid-template-rows:113px 64px;width:308px;margin:0 auto 32px;& > *{display:flex;align-self:center;justify-self:center;color:",";}p{width:226px;text-align:center;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Op=p.default.div.withConfig({displayName:"emptyContent__IconContainer",componentId:"sc-83zuqv-1"})(["height:50px;width:50px;"]),EmptyContent=()=>c.createElement(kp,null,c.createElement(Op,null,c.createElement(Ap,null)),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("You are all set for now. Return to this checklist as you build your Web Story for tips on how to improve it.","web-stories"))),Np=()=>{const e=_u(Xd.ACCESSIBILITY),t=_u(Xd.DESIGN),n=_u(Xd.PRIORITY),{checkpoint:r}=gu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}}));return e+t+n===0||r===nu?c.createElement(EmptyContent,null):null},Pp=p.default.div.withConfig({displayName:"checklist__Wrapper",componentId:"sc-ai4sw8-0"})(["z-index:",";"],3),Rp=(0,p.default)(Mu).withConfig({displayName:"checklist__StyledNavigationWrapper",componentId:"sc-ai4sw8-1"})([""]),Mp=(0,u.forwardRef)((function ThroughputPopup(e,t){let{isOpen:n,children:r,close:a}=e;const o=(0,u.useRef)(),{checklistFocused:l,isChecklistMounted:i,resetChecklistFocused:s,setIsChecklistMounted:p}=zd((e=>{let{state:{isChecklistMounted:t,checklistFocused:n},actions:{setIsChecklistMounted:r,resetChecklistFocused:a}}=e;return{checklistFocused:n,isChecklistMounted:t,resetChecklistFocused:a,setIsChecklistMounted:r}}));return(0,u.useEffect)((()=>{l&&o.current&&o.current.focus(),s()}),[l,s]),c.createElement(Ku,{popupId:qd,isOpen:n,ariaLabel:Kd,shouldKeepMounted:!0,onEnter:()=>p(!0),onExited:()=>p(!1)},i?c.createElement(Rp,{ref:t,isOpen:n},c.createElement(Zu,{ref:o,onClose:a,label:Kd,popupId:qd}),c.createElement(ep,{id:"pre-publish-checklist","data-isexpanded":n,"aria-label":(0,d.__)("Potential Story issues by category","web-stories")},r),c.createElement(Np,null)):r)}));function Checklist(e){let{items:t={}}=e;const{close:n,openPanel:r,toggle:a,isOpen:o,isChecklistMounted:l,setOpenPanel:i}=zd((e=>{let{actions:{close:t,toggle:n,setOpenPanel:r},state:{isOpen:a,isChecklistMounted:o,openPanel:l}}=e;return{close:t,toggle:n,isOpen:a,isChecklistMounted:o,openPanel:l,setOpenPanel:r}})),s=_u(Xd.PRIORITY),d=_u(Xd.DESIGN),p=_u(Xd.ACCESSIBILITY),{checkpoint:m}=gu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),f=(0,u.useRef)(),g=(0,u.useCallback)((e=>()=>i((t=>t===e?null:e))),[i]);(0,u.useEffect)((()=>{if(l){const e=f.current?.querySelector(Ms.FOCUSABLE_SELECTORS.join(", "));e?.focus()}}),[l]),(0,u.useEffect)((()=>{m&&i(lu[m])}),[m,i]);const h=ou[m],E=h.includes(Xd.PRIORITY)?s:0,b=h.includes(Xd.DESIGN)?d:0,y=h.includes(Xd.ACCESSIBILITY)?p:0,_=(e=>{if(e)return`100vh - ${48+60*e+92+69}px`})([E,b,y].filter((e=>Boolean(e))).length),{Priority:v,Design:w,Accessibility:T}=t;return c.createElement(Tu,null,c.createElement(Pp,{role:"region","aria-label":Kd},c.createElement(Mp,{ref:f,close:n,isOpen:o},v&&c.createElement(PriorityChecks,{badgeCount:E,isOpen:o&&r===Xd.PRIORITY,onClick:g(Xd.PRIORITY),maxHeight:_,title:Qd[Xd.PRIORITY]},c.createElement(v,null)),w&&c.createElement(DesignChecks,{badgeCount:b,isOpen:o&&r===Xd.DESIGN,onClick:g(Xd.DESIGN),maxHeight:_,title:Qd[Xd.DESIGN]},c.createElement(w,null)),T&&c.createElement(AccessibilityChecks,{badgeCount:y,isOpen:o&&r===Xd.ACCESSIBILITY,onClick:g(Xd.ACCESSIBILITY),maxHeight:_,title:Qd[Xd.ACCESSIBILITY]},c.createElement(T,null))),c.createElement(Toggle,{isOpen:o,onClick:a,popupId:qd})))}const Lp=(0,p.keyframes)(["50%{background-color:",";}"],(0,We.rgba)(g.theme.colors.standard.white,.3)),Dp=(0,p.css)(["background-color:",";animation:"," 0.3s ease-in-out 2;"],(0,We.rgba)(g.theme.colors.standard.white,0),Lp),Bp=(0,p.css)(["",";"],Fu.focusCSS),Fp=(0,u.createContext)({});const Hp=function(e){return(0,u.useContextSelector)(Fp,e??u.identity)};var Up=n(60811);const zp="selection",Gp="link",jp="animation",{LINK:Yp,ANIMATION:Zp,...Wp}=Up.default,Vp={[zp]:Object.values(Wp),[Gp]:[Yp],[jp]:[Zp]},$p="insert",qp="design",Kp="document";function Xp(e,t){return!!e?.dataTransfer?.types&&(Array.isArray(e.dataTransfer.types)?e.dataTransfer.types.includes(t):e.dataTransfer.types.contains(t))}const Qp=(0,u.createContext)({}),Jp=p.default.div.withConfig({displayName:"dropTarget__DropTargetComponent",componentId:"sc-12rok6t-0"})(["position:relative;width:100%;height:100%;"]),em=p.default.div.withConfig({displayName:"dropTarget__Content",componentId:"sc-12rok6t-1"})(["position:relative;width:100%;height:100%;"]),tm=p.default.div.withConfig({displayName:"dropTarget__Glasspane",componentId:"sc-12rok6t-2"})(["position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;"]);function nm(e){e.preventDefault(),e.stopPropagation()}function UploadDropTarget(e){let{disabled:t,label:n,labelledBy:r,onDrop:a,children:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{const{dataTransfer:n}=e;(function(e){return Xp(e,"Files")})(e)&&(nm(e),t?n.effectAllowed="none":(n.effectAllowed="copy",i(!0)))}),[t]),d=(0,u.useCallback)((e=>{nm(e),i(!1)}),[]),p=(0,u.useCallback)((e=>{nm(e),i(!1),!t&&a&&a([...e.dataTransfer.files])}),[t,a]);return c.createElement(Jp,{onDragEnter:s,onDrop:p,onDragOver:nm},l&&c.createElement(tm,{onDragEnter:s,onDragLeave:d,onDragOver:nm,onDrop:p,"aria-label":n,"aria-labelledby":r}),c.createElement(Qp.Provider,{value:{isDragging:l}},c.createElement(em,null,o)))}UploadDropTarget.defaultProps={disabled:!1,label:null,labelledBy:null,onDrop:null};const rm=UploadDropTarget;var am;function om(){return om=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},om.apply(this,arguments)}const SvgArrowCloud=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",om({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,am||(am=c.createElement("path",{d:"m13.5 16 3-3m0 0 3 3m-3-3v7m-6-7-.59.131A4.994 4.994 0 0 0 6 18.006v0A4.994 4.994 0 0 0 10.994 23h12.048A3.958 3.958 0 0 0 27 19.042v0a3.958 3.958 0 0 0-3.52-3.933L22.5 15c0-1-1-6-6-6-3.5 0-5.5 2.5-6 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},lm=(0,c.memo)(SvgArrowCloud);const im=function(e){return(0,u.useContextSelector)(Qp,e??u.identity)};function sm(){return sm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sm.apply(this,arguments)}const cm=p.default.div.withConfig({displayName:"overlay__Overlay",componentId:"sc-u0s4sf-0"})(["position:absolute;z-index:999;top:0;left:0;width:100%;height:100%;background-color:",";"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.bg.primary,.6)}));const dm=(0,u.forwardRef)((function UploadDropTargetOverlayWithRef(e,t){const{isDragging:n}=im((e=>({isDragging:e.isDragging})));return n?c.createElement(cm,sm({ref:t},e)):null})),um=(0,p.default)(dm).withConfig({displayName:"message__Container",componentId:"sc-1cdb29v-0"})(["display:flex;align-items:center;justify-content:center;"]),pm=p.default.div.withConfig({displayName:"message__Box",componentId:"sc-1cdb29v-1"})(["width:100%;max-width:240px;padding:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;"]),mm=(0,p.default)(Ve.Text).withConfig({displayName:"message__Text",componentId:"sc-1cdb29v-2"})(["color:",";margin-bottom:14px;margin-top:0px;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),fm=(0,p.default)(lm).withConfig({displayName:"message__Icon",componentId:"sc-1cdb29v-3"})(["height:52px;width:52px;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white}));const gm=(0,u.memo)((function UploadDropTargetMessage(e){let{message:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o}}=H(),l=(0,u.useMemo)((()=>[...r,...a,...o]),[r,o,a]),i=(0,u.useMemo)((()=>l.map((e=>Ot(e))).flat()),[l]);let s=(0,d.__)("No file types are currently supported.","web-stories");return i.length&&(s=(0,Ze.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can upload %s.","web-stories"),(0,It.default)(i))),c.createElement(um,n,c.createElement(pm,null,c.createElement(fm,null),c.createElement(mm,{isBold:!0,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},t),c.createElement(mm,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s)))})),hm={},Em=["click","pointerdown","pointerup"],bm="event";let ym;const _m=function(e){let{node:t,eventData:n,eventType:r="click"}=e;const a="undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes(bm);!ym&&a&&(ym=new PerformanceObserver((e=>{for(const t of e.getEntries())Em.includes(t.name)&&hm[t.startTime]?.category&&!hm[t.startTime]?.isReported&&(hm[t.startTime].isReported=!0,(0,O.trackTiming)(hm[t.startTime].category,t.duration,hm[t.startTime].label,t.name))})),ym.observe({entryTypes:[bm]}));const{label:o,category:l}=n;(0,u.useEffect)((()=>{if(!t||!a)return;const e=t,n=e=>{hm[e.timeStamp]={category:l,time:e.timeStamp},o&&(hm[e.timeStamp].label=o)};return e.addEventListener(r,n),()=>{e.removeEventListener(r,n)}}),[l,o,t,r,a])};function vm(){return vm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vm.apply(this,arguments)}const wm=p.default.ul.attrs({role:"tablist","aria-orientation":"horizontal"}).withConfig({displayName:"tabview__Tabs",componentId:"sc-10d408-0"})(["display:flex;flex-direction:row;align-items:stretch;width:100%;max-width:100%;justify-content:space-between;margin:0;padding:0;list-style:none;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.secondary})),Tm=p.default.li.attrs((e=>{let{isActive:t}=e;return{tabIndex:t?0:-1,role:"tab","aria-selected":t}})).withConfig({displayName:"tabview__TabElement",componentId:"sc-10d408-1"})(["cursor:pointer;border:none;background:none;padding:0 4px;margin:","px 12px 9px;height:","px;display:flex;align-items:center;justify-content:center;position:relative;transition:color 0.2s ease;color:",";border-radius:",";",";:hover{color:",";}"," svg{display:block;width:32px;height:32px;margin:0 -4px;transform-origin:center center;transition:transform 0.3s ease,color 0.2s ease;color:",";border-radius:",";pointer-events:none;}svg.alert{width:","px;margin-left:4px;color:",";}span,svg:not(.alert){",";}&:hover span,&:hover svg:not(.alert),&:active span,&:active svg:not(.alert){color:",";}&.",",&[data-focus-visible-added]{svg:not(.alert){background-color:",";}}"],10,32,(e=>{let{theme:t,isActive:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-10px;left:4px;right:4px;}"],n.colors.border.selection)}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),28,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&`color: ${n.colors.fg.primary}`}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover})),Sm=(0,p.default)(Lu.Headline).attrs({as:"p",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"tabview__TabText",componentId:"sc-10d408-2"})(["color:inherit;"]),tabview_noop=()=>{};const Cm=(0,u.forwardRef)((function UnreffedTab(e,t){let{children:n,tooltip:r=null,placement:a,refId:o,tabRefs:l,...i}=e;const{id:s}=i,d=s.includes("library")?we.LIBRARY_PANEL_CLICK:we.DESIGN_PANEL_CLICK;_m({node:l?.[o]?.current,eventData:{...d,label:`${o}_tab`}});const u=c.createElement(Tm,vm({ref:t},i),n);return null!==r?c.createElement(Tooltip,{title:r,placement:a,isDelayed:!0},u):u}));const Im=function TabView(e){let{getTabId:t=(e=>e),getAriaControlsId:n,onTabChange:r=tabview_noop,onTabRefUpdated:a=tabview_noop,tabs:o=[],label:l="",shortcut:i="",tab:s,tabRefs:d,...p}=e;const{isRTL:m}=H(),f=(0,u.useRef)(),g=(0,u.useRef)(),h=(0,u.useRef)({}),E=(0,u.useCallback)((e=>{d?.[e]?.current?d[e].current?.focus():h?.current[e]&&h.current[e]?.focus(),g.current=e}),[d]),b=(0,u.useCallback)((e=>{E(e),r(e)}),[E,r]);(0,nr.useGlobalKeyDownEffect)({key:i,editable:!0},(()=>b(s)),[b,s]);const y=(0,u.useCallback)((e=>{const t=o[(e+o.length)%o.length];E(t.id)}),[o,E]),_=(0,u.useCallback)((e=>{const t=m?-e:e,n=o.findIndex((e=>{let{id:t}=e;return t===g.current}));y(n+t)}),[m,o,y]);return(0,nr.useKeyDownEffect)(f,"left",(()=>_(-1)),[_]),(0,nr.useKeyDownEffect)(f,"right",(()=>_(1)),[_]),(0,nr.useKeyDownEffect)(f,["up","down"],(()=>{}),[]),(0,nr.useKeyDownEffect)(f,"home",(()=>y(0)),[y]),(0,nr.useKeyDownEffect)(f,"end",(()=>y(-1)),[y]),(0,nr.useKeyDownEffect)(f,{key:["enter","space"],allowDefault:!0},(e=>{"tab"===e.target.getAttribute("role")&&(b(g.current),e.preventDefault())}),[b],{}),c.createElement(wm,vm({"aria-label":l,ref:f},p),o.map((e=>{let{id:r,title:o,icon:l,...i}=e;return c.createElement(Cm,vm({key:r,ref:e=>{d?.[r]?d[r].current=e:h.current[r]=e,a(e,r)},id:t(r),isActive:s===r,"aria-controls":n?n(r):null,"aria-selected":s===r,onClick:()=>b(r),onFocus:()=>{g.current=s},refId:r,tabRefs:d},i),Boolean(o)&&c.createElement(Sm,null,o),Boolean(l)&&c.createElement(l,{isActive:r===s}))})))},xm=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const Am=function(e){return(0,u.useContextSelector)(xm,e??u.identity)},km=e=>`sidebar-tab-${e}`,Om=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"sidebarContent__SidebarPane",componentId:"sc-1f2hu7i-0"})(["height:100%;overflow:overlay;"]),Nm=p.default.section.withConfig({displayName:"sidebarContent__SidebarPanes",componentId:"sc-1f2hu7i-1"})(["height:100%;"]);const Pm=function Sidebar(){const{tab:e,tabs:t}=Am((e=>{let{state:{tab:t},data:{tabs:n}}=e;return{tab:t,tabs:n}}));return c.createElement(Nm,null,t.map((t=>{let{id:n,Pane:r}=t;return c.createElement(Om,{"aria-labelledby":n,id:km(n),key:n,hidden:n!==e},n===e&&c.createElement(r,null))})))},Rm=p.default.section.attrs({"aria-label":(0,d.__)("Sidebar","web-stories")}).withConfig({displayName:"sidebarLayout__Layout",componentId:"sc-hpe4no-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Mm=p.default.div.withConfig({displayName:"sidebarLayout__SidebarContainer",componentId:"sc-hpe4no-1"})(["height:100%;padding:0;overflow:auto;"]),Lm=(0,p.default)(Im).withConfig({displayName:"sidebarLayout__UnjustifiedTabView",componentId:"sc-hpe4no-2"})(["justify-content:center;"]);const Dm=function SidebarLayout(){const{tab:e,tabRefs:t,setSidebarContentNode:n,setTab:r,sidebar:a,tabs:o}=Am((e=>{let{state:{tab:t,tabRefs:n},actions:{setSidebarContentNode:r,setTab:a},refs:{sidebar:o},data:{tabs:l}}=e;return{tab:t,tabRefs:n,setSidebarContentNode:r,setTab:a,sidebar:o,tabs:l}})),{resetHighlight:l}=Hp((e=>({resetHighlight:e.onFocusOut}))),i=(0,u.useCallback)((e=>{r(e),l(),(0,O.trackEvent)("inspector_tab_change",{name:e})}),[r,l]);return(0,nr.useEscapeToBlurEffect)(a),c.createElement(Rm,{ref:a},c.createElement(Lm,{label:(0,d.__)("Sidebar Selection","web-stories"),tabs:o,tab:e,tabRefs:t,onTabChange:i,getAriaControlsId:km,shortcut:"mod+option+3"}),c.createElement(Mm,{ref:n},c.createElement(Pm,null)))};const Bm=function(){return c.createElement(rm,{disabled:!0},c.createElement(Dm,null))},Fm="media",Hm="media3p",Um="text",zm="shapes",Gm="elements",jm="pageTemplates",Ym="shopping",Zm={STORY_TITLE:"STORY_TITLE",STYLE_PANE:"STYLE_PANE",ANIMATION:"ANIMATION",ASSISTIVE_TEXT:"ASSISTIVE_TEXT",CAPTIONS:"CAPTIONS",EXCERPT:"EXCERPT",LINK:"LINK",PAGE_BACKGROUND:"PAGE_BACKGROUND",POSTER:"POSTER",PUBLISHER_LOGO:"PUBLISHER_LOGO",VIDEO_A11Y_POSTER:"VIDEO_A11Y_POSTER",STYLE:"STYLE",FONT:"FONT",TEXT_COLOR:"TEXT_COLOR",MEDIA:"MEDIA",MEDIA3P:"MEDIA3P",TEXT_SET:"TEXT",PAGE_TEMPLATES:"PAGE_TEMPLATES"},Wm={[Zm.STORY_TITLE]:{focus:!0},[Zm.STYLE_PANE]:{focus:!0,tab:qp,section:zp},[Zm.POSTER]:{focus:!0,tab:Kp},[Zm.PUBLISHER_LOGO]:{focus:!0,tab:Kp},[Zm.EXCERPT]:{focus:!0,tab:Kp},[Zm.CAPTIONS]:{focus:!0,tab:qp,section:zp},[Zm.ASSISTIVE_TEXT]:{focus:!0,tab:qp,section:zp},[Zm.PAGE_BACKGROUND]:{focus:!0,tab:qp,section:zp},[Zm.ANIMATION]:{focus:!0,tab:qp,section:jp},[Zm.FONT]:{focus:!0,tab:qp,section:zp},[Zm.LINK]:{focus:!0,tab:qp,section:Gp},[Zm.VIDEO_A11Y_POSTER]:{focus:!0,tab:qp,section:zp},[Zm.STYLE]:{focus:!0,tab:qp,section:zp},[Zm.TEXT_COLOR]:{focus:!0,tab:qp,section:zp},[Zm.MEDIA]:{focus:!0,tab:$p,section:Fm},[Zm.MEDIA3P]:{focus:!0,tab:$p,section:Hm},[Zm.TEXT_SET]:{focus:!0,tab:$p,section:Um},[Zm.PAGE_TEMPLATES]:{focus:!0,tab:$p,section:jm}},Vm=Zm;const $m=function HighlightsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{setSelectedElementsById:a,setCurrentPage:o}=xa((e=>{let{actions:t}=e;return{setSelectedElementsById:t.setSelectedElementsById,setCurrentPage:t.setCurrentPage}})),l=(0,u.useCallback)((e=>{let{elementId:t,elements:n,pageId:r}=e;r&&o({pageId:r}),Array.isArray(n)?a({elementIds:n.map((e=>{let{id:t}=e;return t}))}):t&&a({elementIds:[t]})}),[o,a]),i=(0,u.useCallback)((e=>{let{elements:t,elementId:n,pageId:a,highlight:o}=e;if((t||n||a)&&l({elements:t,elementId:n,pageId:a}),o){const{tab:e,section:t,...n}=Wm[o];r({[o]:{...n,showEffect:!0},tab:e,section:t})}}),[l]),s=(0,u.useCallback)((()=>r({})),[r]),d=(0,u.useCallback)((e=>r((t=>({[e]:{...t[e],showEffect:!1}})))),[]),p=(0,u.useMemo)((()=>({setHighlights:i,onFocusOut:s,cancelEffect:d,...n})),[d,s,i,n]);return c.createElement(Fp.Provider,{value:p},t)},qm={ADD_ANIMATION:{trackingEventName:"add_animation",text:(0,d.__)("Add animation","web-stories")},ADD_LINK:{trackingEventName:"add_link",text:(0,d.__)("Add link","web-stories")},ADD_CAPTIONS:{trackingEventName:"add_captions",text:(0,d.__)("Add captions","web-stories")},AUTO_STYLE_TEXT:{trackingEventName:"auto_style_text",text:(0,d.__)("Adaptive text colors","web-stories")},CHANGE_BACKGROUND_COLOR:{trackingEventName:"change_background_color",text:(0,d.__)("Change background color","web-stories")},CHANGE_TEXT_COLOR:{trackingEventName:"change_text_color",text:(0,d.__)("Change color","web-stories")},CHANGE_COLOR:{trackingEventName:"change_color",text:(0,d.__)("Change color","web-stories")},RESET_ELEMENT:{trackingEventName:"reset_element",text:(0,d.__)("Reset element","web-stories")},CHANGE_FONT:{trackingEventName:"change_font",text:(0,d.__)("Edit text","web-stories")},INSERT_BACKGROUND_MEDIA:{trackingEventName:"insert_background_media",text:(0,d.__)("Insert background media","web-stories")},INSERT_TEXT:{trackingEventName:"insert_text",text:(0,d.__)("Insert text","web-stories")},REPLACE_BACKGROUND_MEDIA:{trackingEventName:"replace_background_media",text:(0,d.__)("Replace background","web-stories")},REPLACE_MEDIA:{trackingEventName:"replace_media",text:(0,d.__)("Replace media","web-stories")},TRIM_VIDEO:{trackingEventName:"trim_video",text:(0,d.__)("Trim video","web-stories")}},Km="animation",Xm="overlay",Qm="styles",Jm={locked:!0,topLeft:2,topRight:2,bottomLeft:2,bottomRight:2},ef=0;var tf,nf;function rf(){return rf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rf.apply(this,arguments)}const SvgAlignBottom=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",rf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tf||(tf=c.createElement("path",{d:"M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),nf||(nf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 10.5A1.5 1.5 0 0 0 14 12v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 17v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},af=(0,c.memo)(SvgAlignBottom);var of,lf;function sf(){return sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sf.apply(this,arguments)}const SvgAlignCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,of||(of=c.createElement("path",{d:"M16 8.5v3M16 20.5v3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),lf||(lf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},cf=(0,c.memo)(SvgAlignCenter);var df,uf;function pf(){return pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pf.apply(this,arguments)}const SvgAlignLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",pf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,df||(df=c.createElement("path",{d:"M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),uf||(uf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 15 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 20 14h-5Z",fill:"currentColor"})))},mf=(0,c.memo)(SvgAlignLeft);var ff,gf;function hf(){return hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hf.apply(this,arguments)}const SvgAlignMiddle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ff||(ff=c.createElement("path",{d:"M8.5 16h3M20.5 16h3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),gf||(gf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Ef=(0,c.memo)(SvgAlignMiddle);var bf,yf;function _f(){return _f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_f.apply(this,arguments)}const SvgAlignRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",_f({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,bf||(bf=c.createElement("path",{d:"M21 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),yf||(yf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 12 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 17 14h-5Z",fill:"currentColor"})))},vf=(0,c.memo)(SvgAlignRight);var wf;function Tf(){return Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tf.apply(this,arguments)}const SvgAlignTextCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Tf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wf||(wf=c.createElement("path",{d:"M9.5 11.5h15M13 16h8m-9 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Sf=(0,c.memo)(SvgAlignTextCenter);var Cf;function If(){return If=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},If.apply(this,arguments)}const SvgAlignTextJustified=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",If({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cf||(Cf=c.createElement("path",{d:"M8.5 11.5h15M8.5 16h15m-15 4.5h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},xf=(0,c.memo)(SvgAlignTextJustified);var Af;function kf(){return kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kf.apply(this,arguments)}const SvgAlignTextLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Af||(Af=c.createElement("path",{d:"M9.5 11.5h15M9.5 16h8m-8 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Of=(0,c.memo)(SvgAlignTextLeft);var Nf;function Pf(){return Pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pf.apply(this,arguments)}const SvgAlignTextRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Pf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Nf||(Nf=c.createElement("path",{d:"M24.5 20.5h-10m10-4.5h-8m8-4.5h-15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Rf=(0,c.memo)(SvgAlignTextRight);var Mf,Lf;function Df(){return Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Df.apply(this,arguments)}const SvgAlignTop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Df({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Mf||(Mf=c.createElement("path",{d:"M8.5 11h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Lf||(Lf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 13.5A1.5 1.5 0 0 0 14 15v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 20v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Bf=(0,c.memo)(SvgAlignTop);var Ff;function Hf(){return Hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hf.apply(this,arguments)}const SvgAngle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ff||(Ff=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 10a.5.5 0 0 0-1 0v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 0-1h-4.8a6.801 6.801 0 0 0-6.7-6.698V10Zm0 5.802V21.5h5.7a5.8 5.8 0 0 0-5.7-5.698Z",fill:"currentColor"})))},Uf=(0,c.memo)(SvgAngle);var zf,Gf=n(65132);function jf(){return jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jf.apply(this,arguments)}const SvgArrowLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zf||(zf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.422 10.856a.5.5 0 0 0-.702-.712l-5.571 5.5a.5.5 0 0 0 0 .712l5.57 5.5a.5.5 0 0 0 .703-.711L10.718 16.5H22.5a.5.5 0 1 0 0-1H10.718l4.704-4.644Z",fill:"currentColor"})))},Yf=(0,c.memo)(SvgArrowLeft);var Zf;function Wf(){return Wf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wf.apply(this,arguments)}const SvgArrowLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Wf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Zf||(Zf=c.createElement("path",{d:"M15.07 22.5 9.5 17m0 0 5.57-5.5M9.5 17h7a6 6 0 0 0 6-6V9.5",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Vf=(0,c.memo)(SvgArrowLeftCurved);var $f,qf=n(2039);function Kf(){return Kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kf.apply(this,arguments)}const SvgArrowOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Kf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$f||($f=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v13A1.5 1.5 0 0 0 9.5 24h13a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 22.5 8h-13ZM9 9.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-13Zm3.12 6.323a.5.5 0 0 1 .055-.705l3.499-3a.5.5 0 0 1 .651 0l3.5 3a.5.5 0 1 1-.651.76l-2.675-2.294V19.5a.5.5 0 1 1-1 0v-5.915l-2.674 2.292a.5.5 0 0 1-.704-.054Z",fill:"currentColor"})))},Xf=(0,c.memo)(SvgArrowOutline);var Qf;function Jf(){return Jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jf.apply(this,arguments)}const SvgArrowRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Qf||(Qf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.28 10.144a.5.5 0 0 0-.702.712l4.704 4.644H9.5a.5.5 0 0 0 0 1h11.782l-4.704 4.645a.5.5 0 0 0 .702.711l5.571-5.5a.5.5 0 0 0 0-.712l-5.57-5.5Z",fill:"currentColor"})))},eg=(0,c.memo)(SvgArrowRight);var tg;function ng(){return ng=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ng.apply(this,arguments)}const SvgArrowRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ng({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tg||(tg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.281 9.144a.5.5 0 0 0-.703.712l4.704 4.644H15.5A6.5 6.5 0 0 0 9 21v1.5a.5.5 0 1 0 1 0V21a5.5 5.5 0 0 1 5.5-5.5h5.783l-4.705 4.645a.5.5 0 0 0 .703.711l5.57-5.5a.5.5 0 0 0 0-.711l-5.57-5.5Z",fill:"currentColor"})))},rg=(0,c.memo)(SvgArrowRightCurved);var ag,og=n(80908);function lg(){return lg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lg.apply(this,arguments)}const SvgArrowUp=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",lg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ag||(ag=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.145 15.422a.5.5 0 1 0 .712-.702l-5.5-5.571a.5.5 0 0 0-.712 0l-5.5 5.57a.5.5 0 0 0 .711.703l4.645-4.704V22.5a.5.5 0 1 0 1 0V10.718l4.644 4.704Z",fill:"currentColor"})))},ig=(0,c.memo)(SvgArrowUp);var sg;function cg(){return cg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cg.apply(this,arguments)}const SvgArrowsLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",cg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,sg||(sg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.354 8.854a.5.5 0 0 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L5.707 12.5H17.5a.5.5 0 1 0 0-1H5.707l2.647-2.646ZM23.646 16.854a.5.5 0 1 1 .707-.707l3.5 3.5a.5.5 0 0 1 0 .707l-3.5 3.5a.5.5 0 0 1-.707-.708l2.647-2.646H14.5a.5.5 0 1 1 0-1h11.793l-2.647-2.646Z",fill:"currentColor"})))},dg=(0,c.memo)(SvgArrowsLeftright);var ug;function pg(){return pg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pg.apply(this,arguments)}const SvgBorder=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",pg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ug||(ug=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 19.929a1.074 1.074 0 0 1-.299.742l-.04-.01.01.04a1.074 1.074 0 0 1-.742.299h-.94v-.536h.94a.538.538 0 0 0 .128-.015l.315-.077.077-.315a.538.538 0 0 0 .015-.128v-.94H21v.94Zm0-3.558h-.536v1.877H21v-1.877Zm0-2.62h-.536v1.878H21v-1.877ZM16.37 11v.536h1.878V11h-1.877Zm-1.62.536h.88V11H12.07a1.074 1.074 0 0 0-1.04.815c-.02.082-.031.168-.031.256v7.858a1.074 1.074 0 0 0 .815 1.04c.082.02.168.031.256.031h3.559v-.536h-.88v-8.928ZM18.248 21v-.536h-1.877V21h1.877Zm.742-10h.939a1.074 1.074 0 0 1 .742.299l-.01.04.04-.01a1.074 1.074 0 0 1 .299.742v.94h-.536v-.94a.538.538 0 0 0-.015-.128l-.077-.315-.315-.077a.538.538 0 0 0-.128-.015h-.94V11Z",fill:"currentColor"})))},mg=(0,c.memo)(SvgBorder);var fg;function gg(){return gg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(this,arguments)}const SvgBorderBox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,fg||(fg=c.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M10 10h12v12H10z"})))},hg=(0,c.memo)(SvgBorderBox);var Eg;function bg(){return bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bg.apply(this,arguments)}const SvgBox1=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",bg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Eg||(Eg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 10.5A1.5 1.5 0 0 1 12.5 9h6.25a1.5 1.5 0 0 1 1.5 1.5v11a1.5 1.5 0 0 1-1.5 1.5H12.5a1.5 1.5 0 0 1-1.5-1.5v-11Zm1.5-.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h6.25a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5H12.5Z",fill:"currentColor"})))},yg=(0,c.memo)(SvgBox1);var _g,vg=n(98477);function wg(){return wg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wg.apply(this,arguments)}const SvgBox4Alternate=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_g||(_g=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v6A1.5 1.5 0 0 0 9.5 17h4a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 13.5 8h-4ZM9 9.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-6Zm.5 9.5A1.5 1.5 0 0 0 8 20.5v2A1.5 1.5 0 0 0 9.5 24h4a1.5 1.5 0 0 0 1.5-1.5v-2a1.5 1.5 0 0 0-1.5-1.5h-4ZM9 20.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-2Zm8-11A1.5 1.5 0 0 1 18.5 8h4A1.5 1.5 0 0 1 24 9.5v3a1.5 1.5 0 0 1-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-3Zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-4Zm0 7a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-4Zm-.5 1.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-5Z",fill:"currentColor"})))},Tg=(0,c.memo)(SvgBox4Alternate);var Sg,Cg;function Ig(){return Ig=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ig.apply(this,arguments)}const SvgBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ig({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sg||(Sg=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016ZM15.353 7.868l7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),Cg||(Cg=c.createElement("path",{d:"m15.337 21.286 3.53-3.53-9.878-1.403 4.934 4.933a1 1 0 0 0 1.414 0Z",fill:"currentColor"})))},xg=(0,c.memo)(SvgBucket);var Ag,kg;function Og(){return Og=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}const SvgCamera=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Og({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ag||(Ag=c.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),kg||(kg=c.createElement("path",{d:"M15 8v8H5V8h10m1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1z"})))},Ng=(0,c.memo)(SvgCamera);var Pg,Rg;function Mg(){return Mg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mg.apply(this,arguments)}const SvgCaptions=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Mg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Pg||(Pg=c.createElement("path",{d:"M7 22V8a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4.586a1 1 0 0 0-.707.293l-2 2a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 0-.707-.293H8a1 1 0 0 1-1-1Z",stroke:"currentColor"})),Rg||(Rg=c.createElement("path",{d:"M14.953 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.644 1.243-2.644 2.776 0 1.532 1.184 2.775 2.644 2.775.822 0 1.556-.394 2.041-1.012M21.445 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.643 1.243-2.643 2.776 0 1.532 1.183 2.775 2.643 2.775.823 0 1.557-.394 2.042-1.012",stroke:"currentColor",strokeLinecap:"round"})))},Lg=(0,c.memo)(SvgCaptions);var Dg;function Bg(){return Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bg.apply(this,arguments)}const SvgChecklist=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Bg({viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dg||(Dg=c.createElement("path",{d:"M22.5 7h-9v2h9V7zm0 8h-9v2h9v-2zM6.04 11 2.5 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 11zm0 8L2.5 15.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 19z",fill:"currentColor"})))},Fg=(0,c.memo)(SvgChecklist);var Hg,Ug=n(30648),zg=n(61887),Gg=n(34761);function jg(){return jg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jg.apply(this,arguments)}const SvgChevronRightSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Hg||(Hg=c.createElement("path",{d:"m14 12 3 4-3 4",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Yg=(0,c.memo)(SvgChevronRightSmall);var Zg,Wg=n(99832);function Vg(){return Vg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vg.apply(this,arguments)}const SvgChevronUpSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Vg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Zg||(Zg=c.createElement("path",{d:"m12 17 4-3 4 3",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},$g=(0,c.memo)(SvgChevronUpSmall);var qg,Kg;function Xg(){return Xg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xg.apply(this,arguments)}const SvgCircleSpeed=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,qg||(qg=c.createElement("path",{d:"M21 20a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),Kg||(Kg=c.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M7.5 13.5h7M9.5 15.5h5M11.5 17.5h3"})))},Qg=(0,c.memo)(SvgCircleSpeed);var Jg,eh,th;function nh(){return nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}const SvgColorBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Jg||(Jg=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016Z",fill:"currentColor",stroke:"currentColor"})),eh||(eh=c.createElement("path",{d:"m15.353 7.868 7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),th||(th=c.createElement("path",{d:"M13.232 13.662a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM15.616 11.08a.124.124 0 0 0-.232 0l-.332.899a.123.123 0 0 1-.073.073l-.898.332a.124.124 0 0 0 0 .232l.898.332c.034.013.06.04.073.073l.332.898c.04.108.192.108.232 0l.332-.898a.123.123 0 0 1 .073-.073l.898-.332a.124.124 0 0 0 0-.232l-.898-.332a.123.123 0 0 1-.073-.073l-.332-.898Z",fill:"currentColor"})))},rh=(0,c.memo)(SvgColorBucket);var ah;function oh(){return oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oh.apply(this,arguments)}const SvgColorDrop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",oh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ah||(ah=c.createElement("path",{d:"M20.245 12.706 16 8.316l-4.245 4.39A6.346 6.346 0 0 0 10 17.087c0 1.554.585 3.193 1.755 4.404A5.89 5.89 0 0 0 16 23.317a5.89 5.89 0 0 0 4.245-1.826C21.415 20.28 22 18.641 22 17.087c0-1.554-.585-3.17-1.755-4.381Zm-9.166 4.66c.007-1.553.56-2.999 1.415-3.877L16 9.831l3.64 3.784c.855.87 1.341 2.198 1.349 3.752h-9.91Z",fill:"currentColor"})))},lh=(0,c.memo)(SvgColorDrop);var ih;function sh(){return sh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sh.apply(this,arguments)}const SvgCorner=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ih||(ih=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 10a.5.5 0 0 1 .5.5v6a5.5 5.5 0 0 0 5.5 5.5h6a.5.5 0 0 1 0 1h-6A6.5 6.5 0 0 1 9 16.5v-6a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},ch=(0,c.memo)(SvgCorner);var dh,uh,ph=n(94320),mh=n(74698);function fh(){return fh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fh.apply(this,arguments)}const SvgDistributeHorizontal=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",fh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dh||(dh=c.createElement("path",{d:"M21 8.5v15M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),uh||(uh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},gh=(0,c.memo)(SvgDistributeHorizontal);var hh,Eh;function bh(){return bh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bh.apply(this,arguments)}const SvgDistributeVertical=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",bh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hh||(hh=c.createElement("path",{d:"M8.5 11h15M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Eh||(Eh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},yh=(0,c.memo)(SvgDistributeVertical);var _h;function vh(){return vh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(this,arguments)}const SvgDots=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_h||(_h=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"currentColor"})))},wh=(0,c.memo)(SvgDots);var Th;function Sh(){return Sh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sh.apply(this,arguments)}const SvgDotsFillSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Sh({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Th||(Th=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",fill:"currentColor"})))},Ch=(0,c.memo)(SvgDotsFillSmall);var Ih,xh,Ah;function kh(){return kh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kh.apply(this,arguments)}const SvgEraser=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kh({viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ih||(Ih=c.createElement("path",{stroke:"currentColor",strokeWidth:2.471,strokeLinecap:"round",d:"M36.763 57.764H63.94"})),xh||(xh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.514 51.392 61.08 32.827c.173-.173.29-.392.338-.631l1.261-6.306a1.235 1.235 0 0 0-1.454-1.454l-6.305 1.261c-.24.048-.459.166-.631.338L35.723 44.6l6.791 6.792zm-8.269 6.521a3.706 3.706 0 0 0 5.242 0l23.34-23.34a3.706 3.706 0 0 0 1.013-1.893l1.26-6.306c.52-2.593-1.767-4.879-4.36-4.36l-6.306 1.26a3.706 3.706 0 0 0-1.894 1.014L29.2 47.628a3.706 3.706 0 0 0 0 5.241l5.045 5.044z",fill:"currentColor"})),Ah||(Ah=c.createElement("path",{d:"M23.747 34.363a.612.612 0 0 0-1.147 0L20.96 38.8a.612.612 0 0 1-.362.362l-4.436 1.641a.612.612 0 0 0 0 1.148l4.436 1.641c.168.062.3.194.362.361L22.6 48.39a.612.612 0 0 0 1.147 0l1.642-4.437a.612.612 0 0 1 .361-.36l4.437-1.642a.612.612 0 0 0 0-1.148l-4.437-1.641a.611.611 0 0 1-.361-.362l-1.641-4.436zm7.221-10.016a.408.408 0 0 0-.765 0l-1.094 2.958a.408.408 0 0 1-.24.24L25.91 28.64a.408.408 0 0 0 0 .765l2.957 1.094c.112.042.2.13.241.241l1.094 2.958a.408.408 0 0 0 .765 0l1.095-2.958c.041-.111.129-.2.24-.24l2.958-1.095a.408.408 0 0 0 0-.765l-2.957-1.094a.408.408 0 0 1-.241-.241l-1.095-2.958z",fill:"currentColor"})))},Oh=(0,c.memo)(SvgEraser);var Nh,Ph=n(48068);function Rh(){return Rh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rh.apply(this,arguments)}const SvgExclamationTriangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Rh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Nh||(Nh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.968 8.032c.508-.863 1.795-.863 2.304 0l8.506 14.436c.528.895-.183 1.917-1.152 1.917H7.614c-.97 0-1.68-1.022-1.153-1.917l8.507-14.436Zm1.152.353a.328.328 0 0 0-.29.155L7.322 22.975a.24.24 0 0 0 .003.26c.051.083.15.15.288.15h17.012a.328.328 0 0 0 .288-.15.24.24 0 0 0 .003-.26L16.41 8.54a.327.327 0 0 0-.29-.155Zm-.117 4.333a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 1 .5-.5Zm0 8.502a1.218 1.218 0 1 0 0-2.435 1.218 1.218 0 0 0 0 2.435Z",fill:"currentColor"})))},Mh=(0,c.memo)(SvgExclamationTriangle);var Lh,Dh;function Bh(){return Bh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}const SvgFloppyDisk=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Bh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Lh||(Lh=c.createElement("path",{d:"M12.76 20.8c-.359 0-.649-.358-.649-.8v-3.2c0-.442.29-.8.648-.8h6.482c.358 0 .648.358.648.8V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),Dh||(Dh=c.createElement("path",{d:"M21.6 24H10.4c-.371 0-.727-.169-.99-.469-.262-.3-.41-.707-.41-1.131V9.6c0-.424.148-.831.41-1.131.263-.3.619-.469.99-.469h8.646a1 1 0 0 1 .753.341l2.954 3.376a1 1 0 0 1 .247.659V22.4c0 .424-.148.831-.41 1.131-.263.3-.619.469-.99.469ZM18.333 11.2v1.6",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Fh=(0,c.memo)(SvgFloppyDisk);var Hh,Uh;function zh(){return zh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zh.apply(this,arguments)}const SvgGearWithGauge=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Hh||(Hh=c.createElement("rect",{width:32,height:32,rx:16,fill:"currentColor",fillOpacity:.64})),Uh||(Uh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.564 15.406a5.122 5.122 0 0 1 0 1.192c-.053.446.132.9.522 1.122l.408.231a1 1 0 0 1 .368 1.377l-.513.873a1 1 0 0 1-1.355.363l-.45-.254c-.382-.217-.858-.15-1.214.108-.336.244-.7.452-1.087.618-.412.177-.716.563-.716 1.012v.452a1 1 0 0 1-1 1h-1.054a1 1 0 0 1-1-1v-.453c0-.449-.304-.835-.717-1.012a5.601 5.601 0 0 1-1.085-.616c-.357-.26-.833-.327-1.216-.11l-.448.254a1 1 0 0 1-1.355-.363l-.514-.873a1 1 0 0 1 .369-1.377l.404-.23c.392-.222.576-.678.524-1.126a5.129 5.129 0 0 1 0-1.188c.052-.448-.132-.904-.524-1.127l-.404-.229a1 1 0 0 1-.369-1.376l.514-.874a1 1 0 0 1 1.355-.363l.447.254c.384.217.86.15 1.216-.11a5.62 5.62 0 0 1 1.086-.617c.413-.177.716-.562.716-1.011V9.5a1 1 0 0 1 1-1h1.054a1 1 0 0 1 1 1v.453c0 .449.304.835.717 1.012.387.166.75.373 1.085.616.357.26.833.327 1.217.11l.446-.254a1 1 0 0 1 1.356.363l.513.874a1 1 0 0 1-.368 1.376l-.404.23c-.393.222-.577.678-.524 1.126zM12.5 16a3.5 3.5 0 0 1 7 0 .5.5 0 0 0 1 0 4.5 4.5 0 1 0-9 0 .5.5 0 0 0 1 0zm5.601-1.46a.5.5 0 0 0-.707-.707l-1.188 1.188a1 1 0 1 0 .745.669l1.15-1.15z",fill:"currentColor"})))},Gh=(0,c.memo)(SvgGearWithGauge);var jh,Yh,Zh,Wh,Vh,$h,qh,Kh,Xh,Qh,Jh;function eE(){return eE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eE.apply(this,arguments)}const SvgKeyboard=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",eE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jh||(jh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 11.5A1.5 1.5 0 0 1 8.5 10h15a1.5 1.5 0 0 1 1.5 1.5v8.91a1.5 1.5 0 0 1-1.5 1.5h-15a1.5 1.5 0 0 1-1.5-1.5V11.5Zm1.5-.5a.5.5 0 0 0-.5.5v8.91a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5V11.5a.5.5 0 0 0-.5-.5h-15Z",fill:"currentColor"})),Yh||(Yh=c.createElement("rect",{x:12,y:18.5,width:7.3,height:1,rx:.5,fill:"currentColor"})),Zh||(Zh=c.createElement("circle",{cx:10.25,cy:13.75,r:.75,fill:"currentColor"})),Wh||(Wh=c.createElement("circle",{cx:12.75,cy:13.75,r:.75,fill:"currentColor"})),Vh||(Vh=c.createElement("circle",{cx:15.75,cy:13.75,r:.75,fill:"currentColor"})),$h||($h=c.createElement("circle",{cx:18.75,cy:13.75,r:.75,fill:"currentColor"})),qh||(qh=c.createElement("circle",{cx:21.75,cy:13.75,r:.75,fill:"currentColor"})),Kh||(Kh=c.createElement("circle",{cx:11.75,cy:15.85,r:.75,fill:"currentColor"})),Xh||(Xh=c.createElement("circle",{cx:14.25,cy:15.85,r:.75,fill:"currentColor"})),Qh||(Qh=c.createElement("circle",{cx:17.25,cy:15.85,r:.75,fill:"currentColor"})),Jh||(Jh=c.createElement("circle",{cx:20.25,cy:15.85,r:.75,fill:"currentColor"})))},tE=(0,c.memo)(SvgKeyboard);var nE,rE=n(73035);function aE(){return aE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aE.apply(this,arguments)}const SvgLetterAHeight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",aE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,nE||(nE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5 9.5a.5.5 0 1 0 0-1h-15a.5.5 0 0 0 0 1h15Zm-8.205 2.993a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.058 0l-.295.84-1.028 2.883h2.715ZM24 23a.5.5 0 0 1-.5.5h-15a.5.5 0 0 1 0-1h15a.5.5 0 0 1 .5.5Z",fill:"currentColor"})))},oE=(0,c.memo)(SvgLetterAHeight);var lE;function iE(){return iE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iE.apply(this,arguments)}const SvgLetterAWidth=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lE||(lE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8.5a.5.5 0 0 0-1 0v15a.5.5 0 0 0 1 0v-15ZM23 8a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-1 0v-15A.5.5 0 0 1 23 8Zm-7.705 4.493a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.029-.02.03.03 0 0 0-.029.02l-.295.84-1.028 2.883h2.715Z",fill:"currentColor"})))},sE=(0,c.memo)(SvgLetterAWidth);var cE;function dE(){return dE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dE.apply(this,arguments)}const SvgLetterBBold=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",dE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cE||(cE=c.createElement("path",{d:"M11 11a2 2 0 0 1 2-2h3.316c.751 0 1.443.163 2.075.489.646.326 1.16.775 1.542 1.349.382.574.573 1.206.573 1.897 0 .69-.178 1.29-.534 1.799a3.25 3.25 0 0 1-1.363 1.153v.118a3.58 3.58 0 0 1 1.72 1.231c.447.574.671 1.245.671 2.014 0 .77-.204 1.454-.613 2.053a4.042 4.042 0 0 1-1.62 1.408 5.004 5.004 0 0 1-2.214.489H13a2 2 0 0 1-2-2V11Zm5.217 3.866c.633 0 1.14-.196 1.522-.587.395-.39.593-.84.593-1.349 0-.508-.191-.951-.573-1.33-.369-.39-.857-.586-1.463-.586h-2.583a.5.5 0 0 0-.5.5v2.852a.5.5 0 0 0 .5.5h2.504Zm.336 6.1c.672 0 1.206-.208 1.601-.625.409-.417.613-.9.613-1.447 0-.56-.211-1.043-.633-1.447-.408-.417-.961-.626-1.66-.626h-2.76a.5.5 0 0 0-.5.5v3.145a.5.5 0 0 0 .5.5h2.84Z",fill:"currentColor"})))},uE=(0,c.memo)(SvgLetterBBold);var pE;function mE(){return mE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mE.apply(this,arguments)}const SvgLetterIItalic=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",mE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,pE||(pE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 9h-2.489a.5.5 0 0 0-.023 0H15.5a.5.5 0 0 0 0 1h1.823l-3.692 12H11.5a.5.5 0 0 0 0 1h5a.5.5 0 1 0 0-1h-1.823l3.692-12H20.5a.5.5 0 1 0 0-1Z",fill:"currentColor"})))},fE=(0,c.memo)(SvgLetterIItalic);var gE;function hE(){return hE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hE.apply(this,arguments)}const SvgLetterIOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gE||(gE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 23a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 1a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm.5 2a.5.5 0 0 0-1 0v4a.5.5 0 0 0 1 0v-4Z",fill:"currentColor"})))},EE=(0,c.memo)(SvgLetterIOutline);var bE,yE;function _E(){return _E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_E.apply(this,arguments)}const SvgLetterMOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",_E({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,bE||(bE=c.createElement("path",{d:"m19.526 12.955-.003.002a.73.73 0 0 0-.198.21L16 18.047l-3.325-4.88-.002-.002a.753.753 0 0 0-.209-.209.408.408 0 0 0-.221-.072.337.337 0 0 0-.266.128.427.427 0 0 0-.093.279v5.332a.95.95 0 0 0 .045.307v.001a.26.26 0 0 0 .123.144c.056.03.12.04.185.04.06 0 .12-.011.174-.042a.277.277 0 0 0 .115-.136.782.782 0 0 0 .059-.314v-4.414l3.049 4.393c.091.137.212.233.366.233.148 0 .268-.098.364-.23l.001-.002 3.05-4.394v4.414c0 .115.017.22.053.311l.002.007a.29.29 0 0 0 .12.132c.052.03.112.043.173.043.065 0 .129-.011.184-.041a.26.26 0 0 0 .123-.144v-.001a.95.95 0 0 0 .046-.307v-5.332c0-.105-.031-.2-.099-.279a.321.321 0 0 0-.26-.128.444.444 0 0 0-.231.071Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.231})),yE||(yE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 9.5A1.5 1.5 0 0 1 9.5 8h13A1.5 1.5 0 0 1 24 9.5v13a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 8 22.5v-13ZM9.5 9a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-13Z",fill:"currentColor"})))},vE=(0,c.memo)(SvgLetterMOutline);var wE;function TE(){return TE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TE.apply(this,arguments)}const SvgLetterSStrikethrough=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",TE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wE||(wE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.503 10.826c.694-.547 1.622-.826 2.603-.826.968 0 1.87.237 2.563.769.704.54 1.142 1.35 1.228 2.39a.5.5 0 1 1-.996.082c-.065-.787-.382-1.327-.841-1.68-.47-.36-1.139-.561-1.954-.561-.801 0-1.499.229-1.985.611a1.95 1.95 0 0 0-.766 1.589c0 .6.265 1.006.613 1.3h-1.284a2.614 2.614 0 0 1-.329-1.3c0-1.003.444-1.82 1.148-2.374Zm5.075 6.674h1.183c.15.332.239.72.239 1.173 0 1.016-.402 1.87-1.138 2.46-.724.578-1.726.867-2.886.867-1.174 0-2.117-.322-2.8-.91-.682-.588-1.057-1.401-1.172-2.292a.5.5 0 0 1 .992-.128c.089.693.37 1.263.833 1.662.463.399 1.157.668 2.147.668 1.005 0 1.764-.251 2.261-.649.485-.387.763-.946.763-1.678 0-.523-.17-.894-.422-1.173Zm-9.078-2a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},SE=(0,c.memo)(SvgLetterSStrikethrough);var CE,IE=n(33291);function xE(){return xE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xE.apply(this,arguments)}const SvgLetterTArrow=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",xE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,CE||(CE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.854 10.146a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L21 11.707v8.586l-2.146-2.147a.5.5 0 0 0-.708.708l3 3a.5.5 0 0 0 .351.146h.006a.498.498 0 0 0 .344-.14l.007-.007 3-3a.5.5 0 0 0-.708-.707L22 20.293v-8.586l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3ZM8 10a.5.5 0 0 0 0 1h3.5v10.5a.5.5 0 0 0 1 0V11H16a.5.5 0 0 0 0-1H8Z",fill:"currentColor"})))},AE=(0,c.memo)(SvgLetterTArrow);var kE;function OE(){return OE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(this,arguments)}const SvgLetterTPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",OE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,kE||(kE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11.5a.5.5 0 0 0-.5.5v.711a.5.5 0 1 1-1 0V12A1.5 1.5 0 0 1 8 10.5h7a1.5 1.5 0 0 1 1.5 1.5v.711a.5.5 0 1 1-1 0V12a.5.5 0 0 0-.5-.5h-3v10h1.3a.5.5 0 0 1 0 1H9.7a.5.5 0 0 1 0-1H11v-10H8Zm9.5 4.5a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},NE=(0,c.memo)(SvgLetterTPlus);var PE;function RE(){return RE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RE.apply(this,arguments)}const SvgLetterTUppercase=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",RE({viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,PE||(PE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.94 10a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 1 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Zm15.12 0a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 0 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Z",fill:"currentColor"})))},ME=(0,c.memo)(SvgLetterTUppercase);var LE;function DE(){return DE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(this,arguments)}const SvgLetterTLargeLetterTSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",DE({viewBox:"0 0 79 79",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,LE||(LE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.677 24.838c0-.679.55-1.229 1.228-1.229H30.19v31.942h-5.16a1.229 1.229 0 1 0 0 2.457h12.777a1.228 1.228 0 1 0 0-2.457h-5.16V23.609h12.286c.678 0 1.228.55 1.228 1.229v2.894a1.229 1.229 0 0 0 2.457 0v-2.894a3.686 3.686 0 0 0-3.685-3.686H17.905a3.686 3.686 0 0 0-3.685 3.686v2.894a1.229 1.229 0 0 0 2.457 0v-2.894zm30.713 17.2c0-.68.55-1.23 1.228-1.23h4.914v14.743h-4.177a1.228 1.228 0 1 0 0 2.457h5.406v-1.229 1.229h5.405a1.228 1.228 0 1 0 0-2.457H55.99V40.809h4.914c.679 0 1.229.55 1.229 1.228v1.229a1.229 1.229 0 0 0 2.457 0v-1.229a3.686 3.686 0 0 0-3.686-3.685H48.618a3.686 3.686 0 0 0-3.685 3.685v1.229a1.228 1.228 0 1 0 2.457 0v-1.229z",fill:"currentColor"})))},BE=(0,c.memo)(SvgLetterTLargeLetterTSmall);var FE;function HE(){return HE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HE.apply(this,arguments)}const SvgLetterUUnderline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",HE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,FE||(FE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.5a.5.5 0 0 0-1 0V15a4 4 0 0 0 8 0V9.5a.5.5 0 0 0-1 0V15a3 3 0 1 1-6 0V9.5ZM9.5 23a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},UE=(0,c.memo)(SvgLetterUUnderline);var zE;function GE(){return GE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GE.apply(this,arguments)}const SvgLink=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",GE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zE||(zE=c.createElement("path",{d:"M12.364 15.343a.5.5 0 0 0-.707-.707l.707.707Zm3.535-.707a.5.5 0 0 0-.707.707l.707-.707Zm-.353 4.596-3.536 3.536.707.707 3.536-3.536-.707-.707Zm-7.071 0 1.768-1.767-.707-.708-1.768 1.768.707.707Zm1.768-1.767 2.121-2.122-.707-.707-2.121 2.121.707.707Zm6.01-2.475-.354-.354-.707.707.354.354.707-.707Zm-4.243 7.778a2.5 2.5 0 0 1-3.535 0l-.707.707a3.5 3.5 0 0 0 4.95 0l-.708-.707Zm4.243-2.829a3.5 3.5 0 0 0 0-4.95l-.707.708a2.5 2.5 0 0 1 0 3.535l.707.707Zm-7.778 2.829a2.5 2.5 0 0 1 0-3.536l-.707-.707a3.5 3.5 0 0 0 0 4.95l.707-.707ZM18.02 16.757a.5.5 0 1 0 .708.707l-.707-.707Zm-3.535.707a.5.5 0 1 0 .707-.707l-.707.707Zm.354-4.596 3.535-3.535-.707-.707-3.535 3.535.707.707Zm7.07 0-1.767 1.768.707.707 1.768-1.768-.707-.707Zm-1.767 1.768-2.121 2.121.707.707 2.121-2.12-.707-.708Zm-6.01 2.475.353.354.707-.708-.353-.353-.707.707Zm4.242-7.778a2.5 2.5 0 0 1 3.536 0l.707-.707a3.5 3.5 0 0 0-4.95 0l.707.707Zm-4.242 2.828a3.5 3.5 0 0 0 0 4.95l.707-.707a2.5 2.5 0 0 1 0-3.536l-.707-.707Zm7.778-2.828a2.5 2.5 0 0 1 0 3.535l.707.707a3.5 3.5 0 0 0 0-4.95l-.707.708Z",fill:"currentColor"})))},jE=(0,c.memo)(SvgLink);var YE,ZE=n(37233);function WE(){return WE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WE.apply(this,arguments)}const SvgLockOpen=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",WE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,YE||(YE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.816 8.415a3.023 3.023 0 0 0-4.161 1.129l-.255.447a.5.5 0 1 0 .87.494l.254-.447a2.023 2.023 0 0 1 2.786-.76 2.101 2.101 0 0 1 .75 2.844L16.964 14H11.5a1.5 1.5 0 0 0-1.5 1.5v7a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5v-7a1.5 1.5 0 0 0-1.5-1.5h-2.379l.805-1.376.002-.005c.836-1.47.343-3.351-1.112-4.204ZM11.5 15a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-9Zm4.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})))},VE=(0,c.memo)(SvgLockOpen);var $E,qE,KE=n(42914);function XE(){return XE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XE.apply(this,arguments)}const SvgMedia=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",XE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$E||($E=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 13.451H13.004v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.176L25 22.712v-9.26zm0 11.441c.066 0 .13-.006.191-.018h.031a.5.5 0 0 0 .398-.197.998.998 0 0 0 .38-.785v-10.44a1 1 0 0 0-1-1H13.004a1 1 0 0 0-1 1v10.44a1 1 0 0 0 1 1H25zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11z",fill:"currentColor"})),qE||(qE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.004 6.11a1 1 0 0 0-1 1v9.038a1 1 0 0 0 1 1h3v-5.697a1 1 0 0 1 1-1h9V7.11a1 1 0 0 0-1-1h-12zm1.524 1.785H7.047v1.48h1.48v-1.48zm8.886 0h1.48v1.48h-1.48v-1.48zm-8.886 2.96H7.047v1.481h1.48v-1.48zm0 2.961H7.047v1.481h1.48v-1.48z",fill:"currentColor"})))},QE=(0,c.memo)(SvgMedia);var JE,eb,tb;function nb(){return nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nb.apply(this,arguments)}const SvgMirrorLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,JE||(JE=c.createElement("path",{d:"M16 8.5v15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),eb||(eb=c.createElement("path",{d:"m12.5 16-4-3.5v7l4-3.5Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),tb||(tb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.17 12.124a.5.5 0 0 1 .83.376v7a.5.5 0 0 1-.83.376l-4-3.5a.5.5 0 0 1 0-.752l4-3.5Z",fill:"currentColor"})))},rb=(0,c.memo)(SvgMirrorLeftright);var ab,ob,lb;function ib(){return ib=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ib.apply(this,arguments)}const SvgMirrorUpdown=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ib({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ab||(ab=c.createElement("path",{d:"M23.75 15.75h-15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),ob||(ob=c.createElement("path",{d:"m16.25 12.25 3.5-4h-7l3.5 4Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),lb||(lb=c.createElement("path",{d:"M20.126 22.92a.5.5 0 0 1-.376.83h-7a.5.5 0 0 1-.376-.83l3.5-4a.5.5 0 0 1 .752 0l3.5 4Z",fill:"currentColor"})))},sb=(0,c.memo)(SvgMirrorUpdown);var cb,db,ub,pb,mb;function fb(){return fb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fb.apply(this,arguments)}const SvgMuted=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",fb({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cb||(cb=c.createElement("mask",{id:"a",fill:"currentColor"},c.createElement("path",{fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"}),c.createElement("path",{d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"}),c.createElement("path",{d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"}))),db||(db=c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"})),ub||(ub=c.createElement("path",{fill:"currentColor",d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"})),pb||(pb=c.createElement("path",{fill:"currentColor",d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"})),mb||(mb=c.createElement("path",{fill:"currentColor",d:"m6.7 8.5-.6.8.6-.8ZM26.1 23l-.6.8.6-.8Zm-.6.8.6-.8-.6.8ZM6.1 9.3l-.6.8.6-.8Zm5.6 2.9.6-.8-.7-.6-.6.6.7.8Zm-.5.5v1h.4l.3-.3-.7-.7Zm0 6.7.7-.7-.3-.3h-.4v1Zm4.4 4.5-.7.7.7-.7Zm1.3-7.8h1v-.5l-.4-.3-.6.8Zm-1-.7.6-.8-1.6-1.2v2h1Zm0 7.4-.7.7 1.7 1.7v-2.4h-1Zm-4-4.1-.8.7.7-.7Zm-5.1-.3h-1v1h1v-1Zm0-4.7v-1h-1v1h1Zm5.7-1 .7.8.8-.8-1-.7-.5.8Zm3.4-3.4h1V6.9l-1.7 1.7.7.7Zm0 4.8h-1v.5l.4.3.6-.8Zm-2.7-2-.6.7.7.6.6-.6-.7-.8Zm-.8-.7-.7-.7-.8.9.9.6.6-.8Zm3.2-3.2-.7-.7.7.7Zm1.3 6.7-.6.8 1.6 1.2v-2h-1Zm3.7 4 .6-.9-.6-.4-.7.5.7.7Zm-.7.4.5.8-.5-.8Zm.4 1 .4.8-.4-.9Zm1-.8.8.7.9-.8-1-.7-.6.8Zm0-1.4-.8-.6-.6.8.8.6.6-.8Zm.8.6-.6.8.8.6.6-.8-.8-.6Zm-2.2-6-.4.9.4-1Zm.4-1 .4-.9-.4 1Zm1.2 10.7-.5-.8.5.8Zm1.9-1.4.6-.8-.7-.6-.6.7.7.7ZM22 23.3l.4 1-.4-1Zm2.2-1.7.8.6.7-.8-.9-.6-.6.8Zm-.2-1.4-.8-.6-.5.8.7.6.6-.8Zm.8.6-.6.8.9.6.5-.9-.8-.5ZM21.5 9.7l.5-1-.5 1Zm.5-1-.5 1 .5-1Zm-14.7-1c-.6-.5-1.6-.4-2 .3l1.5 1.2c-.1.2-.4.2-.7 0l1.2-1.5Zm19.4 14.5L7.3 7.7 6.1 9.3l19.4 14.5 1.2-1.6Zm.3 2c.5-.6.4-1.5-.3-2l-1.2 1.6a.5.5 0 0 1 0-.7l1.5 1.2Zm-2 .4c.6.5 1.5.3 2-.3L25.4 23c.2-.2.5-.3.7-.1L25 24.6ZM5.4 10.1 25 24.6l1.2-1.6L6.7 8.5 5.5 10ZM5.2 8c-.4.6-.3 1.6.3 2l1.2-1.5c.3.1.3.5.1.7L5.2 8Zm5.8 3.4-.5.5 1.4 1.5.5-.5-1.4-1.5Zm.2.3H6.6v2h4.6v-2Zm-4.6 0c-1 0-1.8.8-1.8 1.8h2s0 .2-.2.2v-2Zm-1.8 1.8v5.1h2v-5.1h-2Zm0 5.1c0 1 .8 1.8 1.8 1.8v-2l.2.2h-2Zm1.8 1.8h4.6v-2H6.6v2Zm3.9-.2 4.4 4.4 1.4-1.4-4.4-4.5-1.4 1.5Zm4.4 4.4c1.1 1.1 3 .3 3-1.3h-2a.2.2 0 0 1 .2-.2h.2l-1.4 1.5Zm3-1.3v-7.2h-2v7.2h2Zm-.4-8-1-.7-1.2 1.6 1 .7 1.2-1.6Zm-2.6 0v7.5h2v-7.4h-2Zm1.8 6.8L12.5 18l-1.4 1.4 4.1 4.1 1.5-1.4ZM12.5 18c-.3-.4-.8-.6-1.3-.6v2l1.3-1.4Zm-1.3-.6H6.8v2h4.4v-2Zm-3.4 1v-4.7h-2v4.7h2Zm-1-3.7h4.4v-2H6.8v2Zm4.4 0c.5 0 1-.2 1.3-.6l-1.4-1.4h.1v2Zm1.3-.6.7-.6-1.4-1.4-.7.6 1.4 1.4Zm.6-2.1-.8-.6L11 13l.8.6L13 12Zm1.8-2.7V14h2V9.3h-2Zm-1 3.5 2.8-2.8-1.5-1.4-2.7 2.7 1.4 1.5Zm-2.1-.6.8.6 1.2-1.6-.8-.6-1.2 1.6Zm3-4.7-3.1 3.2 1.4 1.4L16.3 9l-1.4-1.4ZM18 8.8c0-1.6-1.9-2.4-3-1.3L16.3 9a.2.2 0 0 1-.2 0H16v-.1h2Zm0 6v-6h-2v6h2Zm-2.6.1 1 .8 1.2-1.6-1-.8-1.2 1.6Zm4.6 3.2-.4.3.9 1.7.8-.5-1.3-1.5Zm-.4.3c-.5.2-.9.7-.9 1.4h2c0 .2-.1.3-.2.3l-1-1.7Zm-.9 1.4c0 1 1 1.8 2 1.3l-.8-1.8h.6l.2.5h-2Zm2 1.3c.6-.2 1-.5 1.5-.9l-1.4-1.5-.9.6.9 1.8Zm1.4-2.4-.8-.7-1.2 1.6.8.7 1.2-1.6Zm-1.3.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm.3-3c0 .6-.2 1.2-.5 1.6l1.6 1.2c.5-.8.9-1.7.9-2.7h-2Zm-1.5-2.3c.9.4 1.5 1.3 1.5 2.4h2c0-1.9-1-3.4-2.6-4.2l-1 1.8Zm-.9-1.4c0 .6.4 1.1.9 1.4l.9-1.8.2.4h-2Zm2-1.4c-1-.5-2 .4-2 1.4h2c0 .1 0 .3-.2.4h-.6l.9-1.8ZM24 16c0-2.3-1.4-4.3-3.3-5.2l-.9 1.8c1.3.6 2.2 1.9 2.2 3.4h2Zm-1.1 3.3c.7-1 1-2 1-3.3h-2c0 .8-.2 1.5-.6 2.1l1.6 1.2Zm-.9 4c.8-.4 1.5-1 2.1-1.7l-1.4-1.3c-.5.5-1 1-1.7 1.3l1 1.7Zm.2-.4c0 .2 0 .3-.2.4l-1-1.7c-.4.2-.8.7-.8 1.3h2Zm-.7-.4h.5c.2 0 .2.2.2.4h-2c0 1 1.2 1.9 2.2 1.3l-1-1.7Zm2-1.6a10 10 0 0 1-2 1.6l1 1.7c.9-.5 1.7-1.2 2.5-2L23.5 21Zm1.3-.1-.8-.6-1.2 1.6.8.6 1.2-1.6Zm-1.4.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm1.4-.3c1-1.3 1.5-3 1.5-4.6h-2a6 6 0 0 1-1.1 3.5l1.6 1.1Zm1.5-4.6c0-3.2-1.7-5.9-4.3-7.3l-1 1.7c2 1.1 3.3 3.2 3.3 5.6h2ZM22 8.8l.2.4h-2c0 .6.4 1 .8 1.3l1-1.7Zm.2.4c0 .2 0 .3-.2.4h-.5l1-1.7c-1.1-.6-2.3.2-2.3 1.3h2Zm-.7.4a7.3 7.3 0 0 1 3.8 6.5h2c0-3.6-2-6.7-4.9-8.2l-1 1.7Zm3.8 6.5c0 1.5-.5 3-1.3 4.1l1.6 1.1c1-1.5 1.7-3.3 1.7-5.2h-2Z",mask:"url(#a)"})))},gb=(0,c.memo)(SvgMuted);var hb;function Eb(){return Eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eb.apply(this,arguments)}const SvgPageMargin=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Eb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hb||(hb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9h8a1 1 0 0 1 1 1v1.5H11V10a1 1 0 0 1 1-1Zm-1 3.5v7h10v-7H11Zm10 8H11V22a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.5ZM10 10a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V10Z",fill:"currentColor"})))},bb=(0,c.memo)(SvgPageMargin);var yb;function _b(){return _b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_b.apply(this,arguments)}const SvgPagePlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",_b({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,yb||(yb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7.5a.5.5 0 0 0 0 1h7a1.5 1.5 0 0 1 1.5 1.5v9a.5.5 0 0 0 1 0v-9A2.5 2.5 0 0 0 21 7.5h-7Zm-4 3A1.5 1.5 0 0 0 8.5 12v11a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5V12a1.5 1.5 0 0 0-1.5-1.5h-9ZM9.5 12a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V12Zm2.5 5a.5.5 0 0 0 0 1h2v2a.5.5 0 0 0 1 0v-2h2a.5.5 0 0 0 0-1h-2v-2a.5.5 0 0 0-1 0v2h-2Z",fill:"currentColor"})))},vb=(0,c.memo)(SvgPagePlus);var wb,Tb,Sb,Cb;function Ib(){return Ib=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ib.apply(this,arguments)}const SvgPageSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ib({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wb||(wb=c.createElement("rect",{x:12,y:14,width:8,height:12,rx:1,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Tb||(Tb=c.createElement("path",{d:"M15 11V8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Sb||(Sb=c.createElement("path",{d:"M14 23h4M14 21h2",stroke:"currentColor",strokeLinecap:"round"})),Cb||(Cb=c.createElement("path",{d:"M20.571 6 18 8.539m0 0 2.571 2.538M18 8.54h3.23A2.77 2.77 0 0 1 24 11.308V12",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},xb=(0,c.memo)(SvgPageSwap);var Ab,kb,Ob;function Nb(){return Nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nb.apply(this,arguments)}const SvgPatternLinear=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Nb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ab||(Ab=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),kb||(kb=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),Ob||(Ob=c.createElement("defs",null,c.createElement("linearGradient",{id:"a",x1:16,y1:4,x2:16,y2:35.8,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.52}),c.createElement("stop",{offset:.802,stopColor:"currentColor",stopOpacity:0})))))},Pb=(0,c.memo)(SvgPatternLinear);var Rb,Mb,Lb;function Db(){return Db=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Db.apply(this,arguments)}const SvgPatternRadial=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Db({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Rb||(Rb=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),Mb||(Mb=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),Lb||(Lb=c.createElement("defs",null,c.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(90 0 16) scale(23.4)"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.64}),c.createElement("stop",{offset:.573,stopColor:"currentColor",stopOpacity:0})))))},Bb=(0,c.memo)(SvgPatternRadial);var Fb;function Hb(){return Hb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hb.apply(this,arguments)}const SvgPatternSolid=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Fb||(Fb=c.createElement("circle",{cx:16,cy:16,r:11.5,fill:"currentColor",stroke:"currentColor"})))},Ub=(0,c.memo)(SvgPatternSolid);var zb,Gb=n(25252);function jb(){return jb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jb.apply(this,arguments)}const SvgPercent=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zb||(zb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.785 9.089a.5.5 0 0 1 .126.696l-9 13a.5.5 0 1 1-.822-.57l9-13a.5.5 0 0 1 .696-.126ZM12 14.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm10 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor"})))},Yb=(0,c.memo)(SvgPercent);var Zb;function Wb(){return Wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wb.apply(this,arguments)}const SvgPicture=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Wb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Zb||(Zb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 9H8v14h.72l2.843-4.617a1.5 1.5 0 0 1 2.286-.323l.818.743a.5.5 0 0 0 .757-.1l2.519-3.939a1.5 1.5 0 0 1 2.623.175L24 22.315V9Zm-.784 14H9.895l2.52-4.093a.5.5 0 0 1 .762-.108l.817.744a1.5 1.5 0 0 0 2.273-.302l2.518-3.938a.5.5 0 0 1 .875.058L23.216 23ZM8 24h16a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1Zm2.5-11a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm1.5-2.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Z",fill:"currentColor"})))},Vb=(0,c.memo)(SvgPicture);var $b,qb,Kb;function Xb(){return Xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xb.apply(this,arguments)}const SvgPictureSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$b||($b=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.996 15H14v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.175l2.176 4.674V15Zm0 11.441c.066 0 .13-.006.192-.018h.03a.5.5 0 0 0 .399-.197.998.998 0 0 0 .38-.785V15a1 1 0 0 0-1-1H14a1 1 0 0 0-1 1v10.441a1 1 0 0 0 1 1h11.996Zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414Zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0Zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11Z",fill:"currentColor"})),qb||(qb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 9h10v1.727h1V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h1.77v-1H7V9Z",fill:"currentColor"})),Kb||(Kb=c.createElement("path",{d:"M22.571 6 20 8.539m0 0 2.571 2.538M20 8.54h3.23A2.77 2.77 0 0 1 26 11.308V12M8.429 26 11 23.462m0 0-2.571-2.54M11 23.463H7.77A2.77 2.77 0 0 1 5 20.692V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Qb=(0,c.memo)(SvgPictureSwap);var Jb;function ey(){return ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(this,arguments)}const SvgPipette=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ey({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Jb||(Jb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.247 8.753a2.571 2.571 0 0 0-3.636 0l-2.075 2.075-1.682-1.682a.5.5 0 1 0-.707.708l7 7a.5.5 0 0 0 .707-.708l-1.682-1.682 2.075-2.075a2.571 2.571 0 0 0 0-3.636Zm-2.783 5.004 2.076-2.075a1.571 1.571 0 1 0-2.222-2.222l-2.075 2.076 2.221 2.221Zm-5.05-.61a.5.5 0 0 1 0 .707L9.566 19.7a1.932 1.932 0 1 0 2.733 2.733l5.848-5.848a.5.5 0 1 1 .707.707l-5.848 5.848a2.932 2.932 0 1 1-4.147-4.147l5.848-5.848a.5.5 0 0 1 .707 0Z",fill:"currentColor"})))},ty=(0,c.memo)(SvgPipette);var ny;function ry(){return ry=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ry.apply(this,arguments)}const SvgPlay=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ry({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ny||(ny=c.createElement("path",{d:"M23.426 15.032a1.103 1.103 0 0 1 0 1.936l-11.826 6.4c-.724.392-1.6-.138-1.6-.967V9.599c0-.83.876-1.36 1.6-.967l11.826 6.4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},ay=(0,c.memo)(SvgPlay);var oy,ly=n(39980);function iy(){return iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iy.apply(this,arguments)}const SvgPlusFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iy({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,oy||(oy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4Z",fill:"currentColor"})))},sy=(0,c.memo)(SvgPlusFilledSmall);var cy;function dy(){return dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dy.apply(this,arguments)}const SvgPlayOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",dy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cy||(cy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-1.215 11.38 4.276-2.575c.585-.353.585-1.257 0-1.61l-4.276-2.575c-.575-.346-1.285.098-1.285.804v5.152c0 .706.71 1.15 1.285.804Z",fill:"currentColor"})))},uy=(0,c.memo)(SvgPlayOutline);var py;function my(){return my=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},my.apply(this,arguments)}const SvgPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",my({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,py||(py=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5 9a.5.5 0 0 0-1 0v6.498h-7a.5.5 0 0 0 0 1h7v7.498a.5.5 0 1 0 1 0v-7.498h6.996a.5.5 0 1 0 0-1H16.5V9Z",fill:"currentColor"})))},fy=(0,c.memo)(SvgPlus);var gy;function hy(){return hy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hy.apply(this,arguments)}const SvgPlusFilled=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gy||(gy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 24a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},Ey=(0,c.memo)(SvgPlusFilled);var by;function yy(){return yy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yy.apply(this,arguments)}const SvgPlusOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,by||(by=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm4 0a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},_y=(0,c.memo)(SvgPlusOutline);var vy,wy;function Ty(){return Ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ty.apply(this,arguments)}const SvgQuestionMarkOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ty({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vy||(vy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z",fill:"currentColor"})),wy||(wy=c.createElement("path",{d:"M15.438 17.268c0-.406.079-.744.235-1.012.156-.268.436-.59.84-.963.329-.293.563-.541.703-.744.148-.212.222-.464.222-.756 0-.39-.127-.704-.382-.94-.256-.243-.61-.365-1.062-.365-.412 0-.74.118-.988.354-.239.227-.42.512-.543.853l-.963-.402c.173-.472.465-.886.877-1.244.42-.366.958-.549 1.617-.549.494 0 .93.102 1.308.305.38.195.671.467.877.817.214.35.321.74.321 1.17 0 .448-.115.83-.346 1.147-.222.309-.51.622-.864.939-.271.244-.469.476-.592.695-.124.22-.186.476-.186.768v.513h-1.074v-.586Zm.543 3.232a.801.801 0 0 1-.567-.22.78.78 0 0 1-.223-.56c0-.212.074-.39.223-.537a.779.779 0 0 1 .568-.232c.213 0 .395.078.543.232a.707.707 0 0 1 .234.537.76.76 0 0 1-.234.56.744.744 0 0 1-.543.22Z",fill:"currentColor"})))},Sy=(0,c.memo)(SvgQuestionMarkOutline);var Cy,Iy,xy,Ay,ky,Oy;function Ny(){return Ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ny.apply(this,arguments)}const SvgScissors=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ny({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cy||(Cy=c.createElement("circle",{cx:11.536,cy:11.535,r:2.5,transform:"rotate(-45 11.536 11.535)",stroke:"currentColor"})),Iy||(Iy=c.createElement("circle",{r:2.5,transform:"scale(1 -1) rotate(-45 -19.02 -24.192)",stroke:"currentColor"})),xy||(xy=c.createElement("path",{d:"m18.646 18.424-.353-.354.707-.707.354.354-.708.707Zm4.708 3.293a.5.5 0 0 1-.708.707l.708-.707Zm-4-4 4 4-.708.707-4-4 .708-.707Z",fill:"currentColor"})),Ay||(Ay=c.createElement("path",{d:"m14 13.07 1 1",stroke:"currentColor",strokeLinecap:"square"})),ky||(ky=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})),Oy||(Oy=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})))},Py=(0,c.memo)(SvgScissors);var Ry;function My(){return My=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},My.apply(this,arguments)}const SvgShapes=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",My({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ry||(Ry=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 11.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM16 8a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm3.867 9.134a1.329 1.329 0 0 1 2.265 0l2.665 4.313c.548.886-.076 2.053-1.132 2.053h-5.33c-1.056 0-1.68-1.167-1.132-2.053l2.665-4.313Zm1.415.525a.329.329 0 0 0-.564 0l-2.665 4.313a.344.344 0 0 0 .282.528h5.33c.253 0 .428-.29.282-.528l-2.665-4.313Zm-10.846-.617 3.408 1.968c.149.086.2.276.114.426l-1.968 3.408a.312.312 0 0 1-.426.114L8.156 20.99a.312.312 0 0 1-.114-.426l1.968-3.408c.086-.149.277-.2.426-.114Zm-1.292-.386a1.312 1.312 0 0 1 1.792-.48l3.408 1.968c.627.362.842 1.164.48 1.792l-1.968 3.408a1.312 1.312 0 0 1-1.792.48l-3.408-1.968a1.312 1.312 0 0 1-.48-1.792l1.968-3.408Z",fill:"currentColor"})))},Ly=(0,c.memo)(SvgShapes);var Dy,By;function Fy(){return Fy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fy.apply(this,arguments)}const SvgSparkles=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Fy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dy||(Dy=c.createElement("path",{d:"m19 10.44 1.342 3.627a1 1 0 0 0 .59.591L24.56 16l-3.626 1.342a1 1 0 0 0-.591.59L19 21.56l-1.342-3.626a1 1 0 0 0-.59-.591L13.44 16l3.626-1.342a1 1 0 0 0 .591-.59L19 10.44Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"bevel"})),By||(By=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m11 9.96-.432 1.169a.743.743 0 0 1-.439.439L8.961 12l1.168.432a.743.743 0 0 1 .439.439L11 14.039l.432-1.168a.743.743 0 0 1 .439-.439L13.039 12l-1.168-.432a.743.743 0 0 1-.439-.439L11 9.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM10 17.96l-.432 1.169a.743.743 0 0 1-.439.439L7.961 20l1.168.432a.743.743 0 0 1 .439.439L10 22.039l.432-1.168a.743.743 0 0 1 .439-.439L12.039 20l-1.168-.432a.743.743 0 0 1-.439-.439L10 17.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795Z",fill:"currentColor"})))},Hy=(0,c.memo)(SvgSparkles);var Uy,zy=n(69682);function Gy(){return Gy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gy.apply(this,arguments)}const SvgStopOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Gy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Uy||(Uy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-2 5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",fill:"currentColor"})))},jy=(0,c.memo)(SvgStopOutline);var Yy,Zy=n(2779);function Wy(){return Wy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wy.apply(this,arguments)}const SvgTailedRectangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Wy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yy||(Yy=c.createElement("path",{d:"M6.5 7.095c0-.854.743-1.595 1.722-1.595h15.556c.98 0 1.722.741 1.722 1.595v15.81c0 .854-.743 1.595-1.722 1.595H19.8c-.92 0-1.856.356-2.367 1.211l-.894 1.499c-.23.387-.847.387-1.078 0l-.895-1.499c-.488-.819-1.397-1.311-2.366-1.311H8.222c-.98 0-1.722-.742-1.722-1.595V7.095Z",stroke:"currentColor"})))},Vy=(0,c.memo)(SvgTailedRectangle);var $y;function qy(){return qy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qy.apply(this,arguments)}const SvgTimeline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$y||($y=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 10.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm3.95-.5a2.5 2.5 0 1 0 0 1H15a.5.5 0 0 1 .5.5v2.05a2.5 2.5 0 0 0 0 4.9v2.05A1.5 1.5 0 0 0 17 22h2.05a2.5 2.5 0 1 0 0-1H17a.5.5 0 0 1-.5-.5v-2.05a2.5 2.5 0 0 0 0-4.9V11.5A1.5 1.5 0 0 0 15 10h-2.05ZM20 21.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0ZM17.5 16a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",fill:"currentColor"})))},Ky=(0,c.memo)(SvgTimeline);var Xy,Qy=n(96921);function Jy(){return Jy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(this,arguments)}const SvgTrashFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jy({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xy||(Xy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.501 4a.5.5 0 0 0-.5.5v.3h2.001v-.3a.5.5 0 0 0-.5-.5h-1Zm-1 1.8H3.5a.5.5 0 0 1 0-1h2.501v-.3a1.5 1.5 0 0 1 1.5-1.5h1.001a1.5 1.5 0 0 1 1.5 1.5v.3h2.502a.5.5 0 0 1 0 1H6.5Zm-1.3 1.301a.5.5 0 1 0-1 0v4.202c0 .94.76 1.7 1.7 1.7h4.202a1.7 1.7 0 0 0 1.7-1.7V7.101a.5.5 0 1 0-1 0v4.202a.7.7 0 0 1-.7.7H5.9a.7.7 0 0 1-.7-.7V7.101Zm2.1.3a.5.5 0 1 0-1 0v3.002a.5.5 0 1 0 1 0V7.402Zm1.901-.5a.5.5 0 0 1 .5.5v3.002a.5.5 0 1 1-1 0V7.402a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},e_=(0,c.memo)(SvgTrashFilledSmall);var t_;function n_(){return n_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n_.apply(this,arguments)}const SvgTurningLine=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",n_({viewBox:"0 0 23 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,t_||(t_=c.createElement("path",{d:"M.5 9h21a1 1 0 0 0 1-1V1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},r_=(0,c.memo)(SvgTurningLine);var a_;function o_(){return o_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o_.apply(this,arguments)}const SvgUnion=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",o_({viewBox:"0 0 29 19",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,a_||(a_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.921 0h5.08a.5.5 0 0 1 0 1h-5.08a1.5 1.5 0 0 0-1.139.523l-5.401 6.303-1 1.165 4.159 4.677 2.514 2.829a1.5 1.5 0 0 0 1.121.503H28.5a.5.5 0 0 1 0 1h-5.325a2.5 2.5 0 0 1-1.868-.839l-2.515-2.829-4.067-4.575-4.345 5.069-2.401 2.801a2.5 2.5 0 0 1-1.898.873H1a.5.5 0 1 1 0-1h5.08a1.5 1.5 0 0 0 1.14-.524l2.401-2.801 4.434-5.172-1.48-1.664-5.624-5.876A1.5 1.5 0 0 0 5.867 1H.5a.5.5 0 1 1 0-1h5.367a2.5 2.5 0 0 1 1.806.771l5.632 5.883a.621.621 0 0 1 .012.014l1.394 1.569.91-1.062L21.023.872A2.5 2.5 0 0 1 22.921 0Z",fill:"currentColor"})))},l_=(0,c.memo)(SvgUnion);var i_=n(11923),s_=n(33485);const c_=function(e,t,n){const r="function"==typeof t?t(e):t;if(!r)return{};let a=Object.keys(r);return a=a.filter((e=>r[e]!==_e)),n&&(a=a.filter((e=>""!==r[e]))),0===a.length?{}:Object.fromEntries(a.map((e=>[e,r[e]])))};function d_(e){return e?.padding?.hasHiddenPadding?e.padding:{...e.padding??{},hasHiddenPadding:!0,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)+Me[n],t)),{})}}function u_(e){return e?.padding?.hasHiddenPadding?{...e.padding??{},hasHiddenPadding:!1,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)-Me[n],t)),{})}:e.padding}function p_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return e?.padding?.hasHiddenPadding?Me[t]:0}const m_=function(e,t){const n=(0,Ir.getHTMLFormatters)(),{setColor:r}=n,a=Zc();return async()=>{const n=await a(e),{color:o,backgroundColor:l}=n;if(l||o){const n=l?{backgroundColor:{color:l},backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:d_(e)}:null,a=o?r(e.content,{color:o}):e.content;t({...n,content:a})}}};function f_(e){return e?.type===Hn.ELEMENT_TYPES.TEXT&&e?.borderRadius?e.borderRadius.locked&&e.borderRadius.topLeft===Jm.topLeft:!e?.borderRadius||e.borderRadius===ef}const g_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const n=[];return e?.overlay&&n.push(Xm),t?.length&&n.push(Km),(e?.opacity<100||!f_(e)||e?.border)&&n.push(Qm),n};function h_(){return h_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h_.apply(this,arguments)}const E_=(0,Ze.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,nr.prettifyShortcut)("mod+z")),{Bucket:b_,ColorBucket:y_,CircleSpeed:__,Eraser:v_,LetterTPlus:w_,Link:T_,Media:S_,PictureSwap:C_,Captions:I_}=l,MediaPicker=e=>{let{render:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o},MediaUpload:l}=H(),{selectedElements:i,updateElementsById:s}=xa((e=>{let{state:{selectedElements:t},actions:{updateElementsById:n}}=e;return{selectedElements:t,updateElementsById:n}})),{resetWithFetch:p,postProcessingResource:m,optimizeVideo:f,optimizeGif:g,canTranscodeResource:h}=vi((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:E}=Da(),{showSnackbar:b}=(0,Er.useSnackbar)();let y=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]);const _=(0,u.useMemo)((()=>y.map((e=>Ot(e))).flat()),[y]);E&&(y=y.concat(Pa));const v=Pa.filter((e=>!o.includes(e)));let w=(0,d.__)("No file types are currently supported.","web-stories");_.length&&(w=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,It.default)(_)));const T=(0,u.useCallback)(((e,t)=>{s_.default.set(e.id,{url:t,type:"cached"}),s({elementIds:[i?.[0]?.id],properties:{type:e.type,resource:e}})}),[i,s]),S=(0,u.useCallback)((e=>{try{E&&h(e)&&(v.includes(e.mimeType)&&f({resource:e}),"image/gif"===e.mimeType&&g({resource:e})),T(e,e.sizes?.medium?.sourceUrl||e.src),m(e)}catch(e){b({message:e.message,dismissable:!0})}}),[E,h,T,m,v,f,g,b]);return c.createElement(l,h_({title:(0,d.__)("Replace media","web-stories"),buttonInsertText:(0,d.__)("Replace media","web-stories"),onSelect:S,onClose:p,type:y,onSelectErrorMessage:w,render:e=>t({onClick:e})},n))},x_=()=>{const{capabilities:{hasUploadMediaAction:e},isRTL:t}=H(),n=(0,u.useContextSelector)(_a,Sa),{backgroundElement:r,selectedElementAnimations:a,selectedElements:o,updateElementsById:l}=xa((e=>{let{state:{currentPage:t,selectedElementAnimations:n,selectedElements:r},actions:{updateElementsById:a}}=e;return{backgroundElement:t?.elements.find((e=>e.isBackground)),selectedElementAnimations:n,selectedElements:r,updateElementsById:a}})),{undo:i}=mr((e=>{let{actions:{undo:t}}=e;return{undo:t}})),s=(0,Er.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),{setHighlights:c}=Hp((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),p=(0,u.useRef)(i);p.current=i;const m=o?.[0],f=(0,u.useCallback)((e=>{e.stopPropagation()}),[]),g=(0,u.useCallback)(((e,t,n)=>{const r={};n.includes(Xm)&&(r.overlay=null),n.includes(Km)&&l({elementIds:[t],properties:e=>c_(e,{animation:{...a?.[0],delete:!0}},!0)}),n.includes(Qm)&&(r.opacity=100,r.border=null,r.borderRadius=null),e===Hn.ELEMENT_TYPES.TEXT&&(r.borderRadius=Jm),l({elementIds:[t],properties:e=>c_(e,r,!0)})}),[a,l]),h=(0,u.useCallback)((e=>{let{elementId:t,resetProperties:n,elementType:r}=e;g(r,t,n),s({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Element properties have been reset","web-stories"),onAction:()=>{p.current(),(0,O.trackEvent)("quick_action",{name:`undo_${qm.RESET_ELEMENT.trackingEventName}`,element:r,isBackground:!0})},actionHelpText:E_})}),[g,s]),E=(0,u.useCallback)((e=>t=>n=>{n.preventDefault(),c({elementId:t||m?.id,highlight:e})}),[c,m]),b=(0,u.useMemo)((()=>{const e=(o?.[0]?.resource?.id?.toString()||"").startsWith("media/");return E(e?Vm.MEDIA3P:Vm.MEDIA)}),[E,o]),{handleFocusAnimationPanel:y,handleFocusLinkPanel:_,handleFocusPageBackground:v,handleFocusTextSetsPanel:w,handleFocusCaptionsPanel:T}=(0,u.useMemo)((()=>({handleFocusAnimationPanel:E(Vm.ANIMATION),handleFocusLinkPanel:E(Vm.LINK),handleFocusPageBackground:E(Vm.PAGE_BACKGROUND),handleFocusTextSetsPanel:E(Vm.TEXT_SET),handleFocusCaptionsPanel:E(Vm.CAPTIONS)})),[E]),S=ls(),C=(0,u.useMemo)((()=>({tooltipPlacement:t?_d.PLACEMENT.LEFT:_d.PLACEMENT.RIGHT,onMouseDown:f})),[f,t]),I=(0,u.useMemo)((()=>[{Icon:b_,label:qm.CHANGE_BACKGROUND_COLOR.text,onClick:e=>{v(r?.id)(e),(0,O.trackEvent)("quick_action",{name:qm.CHANGE_BACKGROUND_COLOR.trackingEventName,element:"none"})},...C},{Icon:S_,label:qm.INSERT_BACKGROUND_MEDIA.text,onClick:e=>{b()(e),(0,O.trackEvent)("quick_action",{name:qm.INSERT_BACKGROUND_MEDIA.trackingEventName,element:"none"})},separator:"top",...C},{Icon:w_,label:qm.INSERT_TEXT.text,onClick:e=>{w()(e),S("text",bs),(0,O.trackEvent)("quick_action",{name:qm.INSERT_TEXT.trackingEventName,element:"none"})},...C}]),[C,r,b,v,w,S]),x=(0,u.useMemo)((()=>g_(m,a)),[m,a]),A=x.length>0,k=(0,u.useMemo)((()=>{const e=[{Icon:__,label:qm.ADD_ANIMATION.text,onClick:e=>{y()(e),(0,O.trackEvent)("quick_action",{name:qm.ADD_ANIMATION.trackingEventName,element:m?.type})},...C},{Icon:T_,label:qm.ADD_LINK.text,onClick:e=>{_()(e),(0,O.trackEvent)("quick_action",{name:qm.ADD_LINK.trackingEventName,element:m?.type})},...C}],t={Icon:v_,label:qm.RESET_ELEMENT.text,onClick:()=>{h({elementId:m?.id,resetProperties:x,elementType:m?.type}),(0,O.trackEvent)("quick_action",{name:qm.RESET_ELEMENT.trackingEventName,element:m?.type})},separator:"top",...C};return A?[...e,t]:e}),[y,m?.id,m?.type,C,_,A,h,x]),N=(0,u.useMemo)((()=>{const t=[];return e&&t.push({Icon:C_,label:qm.REPLACE_MEDIA.text,onClick:()=>{n(ba.onReplaceForegroundMedia),(0,O.trackEvent)("quick_action",{name:qm.REPLACE_MEDIA.trackingEventName,element:m?.type})},wrapWithMediaPicker:!0,...C}),[...t,...k]}),[C,k,e,n,m?.type]),P=k,R=m_(m,(e=>l({elementIds:[m?.id],properties:e}))),M=(0,u.useMemo)((()=>[{Icon:y_,label:qm.AUTO_STYLE_TEXT.text,onClick:()=>{R(),(0,O.trackEvent)("quick_action",{name:qm.AUTO_STYLE_TEXT.trackingEventName,element:m?.type})},...C},...k]),[R,k,C,m?.type]),L=(0,u.useMemo)((()=>{const[e,t]=A?[N.slice(0,N.length-1),N.slice(-1)]:[N,[]];return[...e,{Icon:I_,label:qm.ADD_CAPTIONS.text,onClick:e=>{T()(e),(0,O.trackEvent)("quick_action",{name:qm.ADD_CAPTIONS.trackingEventName,element:m?.type})},...C},...t]}),[C,N,T,m?.type,A]),D=(0,u.useMemo)((()=>{const t=[{Icon:__,label:qm.ADD_ANIMATION.text,onClick:e=>{y()(e),(0,O.trackEvent)("quick_action",{name:qm.ADD_ANIMATION.trackingEventName,element:m?.type,isBackground:!0})},...C}];e&&t.unshift({Icon:C_,label:qm.REPLACE_BACKGROUND_MEDIA.text,onClick:()=>{n(ba.onReplaceBackgroundMedia),(0,O.trackEvent)("quick_action",{name:qm.REPLACE_BACKGROUND_MEDIA.trackingEventName,element:m?.type,isBackground:!0})},wrapWithMediaPicker:!0,...C});const r={Icon:v_,label:qm.RESET_ELEMENT.text,onClick:()=>{h({elementId:m?.id,resetProperties:x,elementType:Hn.ELEMENT_TYPES.IMAGE}),(0,O.trackEvent)("quick_action",{name:qm.RESET_ELEMENT.trackingEventName,element:m?.type,isBackground:!0})},separator:"top",...C};return A?[...t,r]:t}),[C,n,h,y,e,x,m,A]);if(o.length>1)return[];const B=Boolean(r&&r?.resource),F=0===o.length,U=o?.[0]?.isBackground;if(F||U&&!B)return I;if(U&&B){return"video"===m.type?[...D]:D}switch(o?.[0]?.type){case Hn.ELEMENT_TYPES.IMAGE:case Hn.ELEMENT_TYPES.GIF:return N;case Hn.ELEMENT_TYPES.SHAPE:return P;case Hn.ELEMENT_TYPES.TEXT:return M;case Hn.ELEMENT_TYPES.VIDEO:return L;case Hn.ELEMENT_TYPES.STICKER:return k;default:return[]}},A_={OUTLINE:Bp,FLASH:Dp};var k_=n(86954);const O_=52,N_=78,P_=32,R_=36,M_="VIDEO",L_="IMAGE",D_="TEXT",B_="SHAPE",F_="PAGE",H_="thumbnail-scrim",U_="thumbnail-show-hover-focus",z_=(0,d.__)("Loading","web-stories");var G_=n(37723),j_=n(22437);function Y_(){return Y_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y_.apply(this,arguments)}const Z_="loading-indicator",W_=p.default.span.withConfig({displayName:"loadingBar__AriaOnlyAlert",componentId:"sc-x990cz-0"})(j_.visuallyHidden),V_=(0,p.keyframes)(["0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}"]),$_=p.default.div.withConfig({displayName:"loadingBar__UploadingIndicator",componentId:"sc-x990cz-1"})(["height:4px;background:",";background-size:400% 400%;position:absolute;bottom:0px;border-radius:",";animation:"," 4s ease infinite;&.","{&.appear{width:0;}&.appear-done{width:100%;transition:1s ease-out;transition-property:width;}}"],(e=>{let{theme:t}=e;return t.colors.gradient.loading}),(e=>{let{theme:t}=e;return`0px 0px ${t.borders.radius.small} ${t.borders.radius.small}`}),V_,Z_),LoadingBar=e=>{let{loadingMessage:t,...n}=e;const r=(0,u.useRef)();return c.createElement(c.Fragment,null,t&&c.createElement(W_,{role:"status"},t),c.createElement(G_.default,{nodeRef:r,in:!0,appear:!0,timeout:0,className:Z_},c.createElement($_,Y_({ref:r},n))))},q_=p.default.button.withConfig({displayName:"styles__Container",componentId:"sc-jiqsnn-0"})((e=>{let{theme:t,$isError:n,$isOverflow:r}=e;return(0,p.css)(["position:relative;display:flex;align-items:center;justify-content:center;width:","px;height:","px;padding:0;outline:none;border:none;border-radius:",";background-color:",";cursor:pointer;.","{display:none;}&:hover{.","{display:flex;}}"," &:focus,&:focus-within{.","{display:flex;}.","{background-color:",";border:1px solid ",";}}"],O_,N_,t.borders.radius.small,r?t.colors.interactiveBg.secondaryNormal:"transparent",U_,U_,n&&(0,p.css)([".","{border:1px solid ",";background-color:",";}&:hover .","{background-color:",";}"],H_,t.colors.border.negativeNormal,t.colors.opacity.black24,H_,t.colors.opacity.black24),U_,H_,t.colors.opacity.black64,t.colors.border[n?"negativeNormal":"focus"])}));q_.propTypes={$isError:Ea().bool};const K_=p.default.div.withConfig({displayName:"styles__Background",componentId:"sc-jiqsnn-1"})((e=>{let{theme:t,$isShape:n,$isPage:r}=e;return(0,p.css)(["width:100%;height:100%;display:flex;border-radius:",";& > img,& > video{width:100%;height:100%;object-fit:cover;border-radius:",";}& > div{display:flex;height:100%;margin:0 auto;align-items:center;justify-content:center;align-self:center;color:",";}"," ",""],t.borders.radius.small,t.borders.radius.small,t.colors.fg.primary,n&&(0,p.css)(["& > div{width:","px;height:","px;& > div{width:100%;height:100%;}}"],R_,R_),r&&(0,p.css)([".pagePreviewOverrides{border-color:none;&::after{content:none;border:none;}}& > div > div{width:100%;}"]))}));K_.propTypes={$isPage:Ea().bool,$isShape:Ea().bool};const X_=p.default.div.withConfig({displayName:"styles__NestedIconContainer",componentId:"sc-jiqsnn-2"})((e=>{let{theme:t,$isError:n}=e;return(0,p.css)(["display:flex;position:absolute;top:0;width:100%;height:100%;align-items:center;justify-content:center;z-index:5;& > div{margin:auto;width:","px;}svg{width:100%;height:auto;","}"],P_,n&&(0,p.css)(["color:",";"],t.colors.fg.negative))}));X_.propTypes={$isError:Ea().bool};const Q_=p.default.div.withConfig({displayName:"styles__Scrim",componentId:"sc-jiqsnn-3"})((e=>{let{theme:t,$showDefaultBackground:n}=e;return(0,p.css)(["position:absolute;box-sizing:border-box;top:0;width:100%;height:100%;border:1px solid transparent;border-radius:",";z-index:2;",";&:hover{background-color:",";}"],t.borders.radius.small,n&&(0,p.css)(["background-color:",";"],t.colors.opacity.black24),t.colors.opacity.black64)}));function J_(){return J_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J_.apply(this,arguments)}Q_.propTypes={$showDefaultBackground:Ea().bool};const ev=[B_,D_],tv=e=>{let{displayBackground:t,isError:n,onClick:r,type:a,isLoading:o,loadingMessage:l=z_,children:i,...s}=e;return c.createElement(q_,J_({as:r?"button":"div",onClick:r,$isError:n},s),o&&c.createElement(LoadingBar,{loadingMessage:l}),!n&&!o&&i&&c.createElement(X_,{className:U_},i),n&&c.createElement(X_,{$isError:n},c.createElement(Ph.default,null)),c.createElement(Q_,{$showDefaultBackground:ev.indexOf(a)>-1,className:H_}),c.createElement(K_,{$isShape:a===B_,$isPage:a===F_},t))};function nv(){return nv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(this,arguments)}const rv=e=>{let{overflowCount:t,...n}=e;return c.createElement(q_,nv({$isOverflow:!0,as:"div"},n),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,Ze.default)(
/* translators: %s: number of thumbnails in overflow */
(0,d.__)("+ %s","web-stories"),t)))},LayerThumbnail=e=>{let{page:t}=e;const{LayerIcon:n}=(0,Hn.getDefinitionForType)(t?.type),{getProxiedUrl:r}=ko(),{isDefaultBackground:a}=t,o={element:t,getProxiedUrl:r,currentPageBackgroundColor:xa((e=>{let{state:t}=e;return!a||t.currentPage?.backgroundColor}))};return"video"===t?.type&&(o.showVideoPreviewAsBackup=!0),c.createElement(n,o)},av={SINGLE_ISSUE:"single_issue",MULTIPLE_ISSUE:"multiple_issue"},ov={SINGLE_WITH_THUMBNAIL:"single_with_thumbnail",SINGLE:"single",DEFAULT:"single",MULTIPLE_WITH_THUMBNAIL:"multiple_with_thumbnail",MULTIPLE_WITH_THUMBNAIL_WITH_CTA:"multiple_with_thumbnail_with_cta",MULTIPLE_WITH_THUMBNAIL_OVERFLOW:" multiple_with_thumbnail_overflow"},lv={[ov.SINGLE]:"'title title title title' 'cta cta cta thumbnail' 'footer footer footer footer'",[ov.SINGLE_WITH_THUMBNAIL]:"'title title title thumbnail' 'cta cta cta thumbnail' 'footer footer footer footer'",[ov.MULTIPLE_WITH_THUMBNAIL]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'",[ov.MULTIPLE_WITH_THUMBNAIL_WITH_CTA]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[ov.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[ov.MULTIPLE_WITH_THUMBNAIL_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'"},{focusableOutlineCSS:iv}=k_,sv=p.default.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1nhlyv8-0"})(["width:","px;display:flex;border-radius:4px;background:",";margin:8px 0;"],272,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),cv=p.default.div.withConfig({displayName:"styles__Container",componentId:"sc-1nhlyv8-1"})(["width:240px;display:grid;margin:16px;grid-gap:8px;grid-template-columns:52px 52px 52px 52px;",""],(e=>{let{gridVariant:t}=e;return(0,p.css)(["grid-template-areas:",";"],lv[t])}));cv.propTypes={gridVariant:Ea().oneOf(Object.values(ov))};const dv=p.default.div.withConfig({displayName:"styles__Title",componentId:"sc-1nhlyv8-2"})(["grid-area:title;&:is(button){display:flex;outline:none;margin:0;padding:0;background-color:transparent;border:none;text-align:left;cursor:pointer;border-radius:",";",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return iv(t.colors.border.focus,t.colors.bg.secondary)})),uv=p.default.div.withConfig({displayName:"styles__Cta",componentId:"sc-1nhlyv8-3"})(["grid-area:cta;margin:0;"]),pv=((0,p.default)(Ve.Text).attrs({forwardedAs:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styles__CheckboxCtaLabel",componentId:"sc-1nhlyv8-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.linkNormal})),p.default.div.withConfig({displayName:"styles__CheckboxCtaContainer",componentId:"sc-1nhlyv8-5"})(["display:flex;align-items:center;margin:14px 0 6px;label{margin:0 8px;}"]),(0,p.default)(rv).withConfig({displayName:"styles__StyledOverflowThumbnail",componentId:"sc-1nhlyv8-6"})(["width:52px;cursor:pointer;"])),mv=p.default.div.withConfig({displayName:"styles__Footer",componentId:"sc-1nhlyv8-7"})(["grid-area:footer;padding-top:8px;border-top:1px solid ",";& > *{color:",";}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),fv=p.default.div.withConfig({displayName:"styles__CardListWrapper",componentId:"sc-1nhlyv8-8"})(["margin-left:16px;li{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),gv=(0,p.default)(Gh).withConfig({displayName:"styles__StyledVideoOptimizationIcon",componentId:"sc-1nhlyv8-9"})(["rect{color:",";}path{color:",";}"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function hv(e){return""===(e.featuredMedia?.url?.trim()||"")}function Ev(e){let t=0;return e.elements.forEach((e=>{"text"===e.type&&(t+=(0,br.stripHTML)(e.content).length)})),t}function bv(e,t){return(e||[]).filter(t)}function yv(e,t){return(e||[]).flatMap((e=>(e?.elements||[]).map((t=>({...t,pageId:e.id}))))).filter(t)}let _v;function vv(){return vv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vv.apply(this,arguments)}const wv=p.default.button.withConfig({displayName:"pagepreview__Page",componentId:"sc-f0c590-0"})(["display:block;position:relative;cursor:",";padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;&::after{content:'';display:block;position:absolute;left:-4px;right:-4px;top:-4px;bottom:-4px;pointer-events:none;border-style:solid;border-width:1px;border-radius:8px;border-color:",";}",""],(e=>{let{isInteractive:t}=e;return t?"pointer":"default"}),(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t}),(e=>{let{isActive:t,isInteractive:n,theme:r}=e;return n&&t?r.colors.border.defaultActive:"transparent"}),(e=>{let{isInteractive:t,isActive:n,theme:r}=e;return t&&(0,p.css)(["&:focus::after{border-color:",";}"],(0,We.rgba)(r.colors.border.selection,n?1:.7))})),Tv=p.default.div.withConfig({displayName:"pagepreview__PreviewWrapper",componentId:"sc-f0c590-1"})(["height:100%;position:relative;overflow:hidden;background-color:white;border-radius:4px;",""],(e=>{let{background:t}=e;return(0,Nr.default)(t)})),Sv=p.default.img.withConfig({displayName:"pagepreview__Image",componentId:"sc-f0c590-2"})(["position:absolute;width:100%;left:0;top:50%;transform:translateY(-50%);"]);const Cv=function PagePreview(e){let{page:t,label:n,...r}=e;const{backgroundColor:a}=t,{width:o,height:l,isActive:i}=r,{pageCanvas:s,generateDeferredPageCanvas:d}=Wc((e=>{let{state:n,actions:r}=e;return{pageCanvas:n.pageCanvasMap[t.id],generateDeferredPageCanvas:r.generateDeferredPageCanvas}})),[p,m]=(0,u.useState)(),f=(0,u.useCallback)((e=>e&&m(e)),[]);(0,u.useEffect)((()=>{i||s||d([t.id,t])}),[t,s,i,d]);const g=(0,u.useMemo)((()=>s?s.toDataURL("image/png"):null),[s]);return _m({node:p,eventData:we.PAGE_PREVIEW_CLICK}),c.createElement(Zi,{pageSize:{width:o,height:l}},c.createElement(C.TransformProvider,null,c.createElement(wv,vv({ref:f,"aria-label":n},r),c.createElement(Tv,{background:a},g?c.createElement(Sv,{src:g,alt:n,decoding:"async"}):t.elements.map((e=>c.createElement(wc,{key:e.id,previewMode:!0,element:e})))))))},ThumbnailPagePreview=e=>{let{page:t}=e;return c.createElement(Cv,{page:t,width:O_,height:N_,as:"div",help:"checklist",isActive:!0,className:"pagePreviewOverrides"})};function Iv(){return Iv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iv.apply(this,arguments)}const xv=p.default.div.withConfig({displayName:"thumbnailWrapper__Wrapper",componentId:"sc-3oy0ss-0"})(["grid-area:thumbnail;transition:height ease-in-out 300ms;",""],(e=>{let{$isMultiple:t}=e;return t&&(0,p.css)(["display:grid;grid-gap:8px;grid-template-columns:repeat(4,52px);grid-template-rows:auto;"])})),Av=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"thumbnailWrapper__StyledButton",componentId:"sc-3oy0ss-1"})(["grid-column:span 4;justify-content:center;height:32px;width:100%;margin:4px 0;",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.tertiary)})),kv=p.default.div.withConfig({displayName:"thumbnailWrapper__IconContainer",componentId:"sc-3oy0ss-2"})(["height:18px;width:20px;svg{transform:",";transition:transform ease-in-out 300ms;}"],(e=>{let{$isExpanded:t}=e;return t&&"rotate(-180deg)"})),Ov=e=>{let{children:t,isExpanded:n,...r}=e;return c.createElement(Av,Iv({"aria-pressed":n},r),t||n?(0,d.__)("Collapse","web-stories"):(0,d.__)("Expand","web-stories"),c.createElement(kv,{$isExpanded:n},c.createElement(Gg.default,null)))},Nv=e=>{let{children:t,...n}=e;const[r,a]=(0,u.useState)(!1),o=Array.isArray(t)?t.length:1,l=o>0&&o>4,i=r||o<=1?t:(s=t).length>4?s.slice(0,3):s;var s;const d=()=>a((e=>!e));return c.createElement(xv,Iv({$isMultiple:o>1},n),i,l&&c.createElement(c.Fragment,null,!r&&c.createElement(pv,{overflowCount:o-3,onClick:d}),c.createElement(Ov,{isExpanded:r,onClick:d})))};function Pv(){return Pv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pv.apply(this,arguments)}const Rv=e=>{let{cardType:t=av.SINGLE_ISSUE,className:n,title:r,titleProps:a,footer:o,cta:l,thumbnails:i}=e,s=0;i&&(s=Array.isArray(i)?i.length:1);const d=(e=>{let{cardType:t,thumbnailCount:n,hasCta:r}=e;return t===av.SINGLE_ISSUE?n>0?ov.SINGLE_WITH_THUMBNAIL:ov.SINGLE:t===av.MULTIPLE_ISSUE&&n?r?n<=4?ov.MULTIPLE_WITH_THUMBNAIL_WITH_CTA:ov.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW:n<=4?ov.MULTIPLE_WITH_THUMBNAIL:ov.MULTIPLE_WITH_THUMBNAIL_OVERFLOW:ov.DEFAULT})({cardType:t,thumbnailCount:s,hasCta:Boolean(l)});return c.createElement(sv,{className:n},c.createElement(cv,{gridVariant:d},c.createElement(dv,Pv({as:a?.onClick?"button":"div"},a),c.createElement(Lu.Headline,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL,as:"h2"},r)),c.createElement(Nv,null,i),c.createElement(uv,null,l),c.createElement(mv,null,o)))};function Mv(){return Mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mv.apply(this,arguments)}const DefaultFooterText=e=>{let{children:t,...n}=e;return c.createElement(Ve.Text,Mv({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},n),t)};const Lv=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),r=(0,u.useMemo)((()=>n.height>0&&yv(t,(e=>function(e,t){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&e.width*e.height/(t.width*t.height)*100>80}(e,n)))),[t,n]),a=Hp((e=>{let{setHighlights:t}=e;return t})),o=(0,u.useCallback)(((e,t)=>a({elementId:e,pageId:t})),[a]),l=r.length>0;yu("ElementLinkTappableRegionTooBig",l);const{title:i,footer:s}=Jd.linkTappableRegionTooBig,p=(r||[]).map((e=>c.createElement(tv,{key:e.id,onClick:()=>o(e.id,e.pageId),type:D_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")})));return l&&e&&c.createElement(Rv,{title:i,cardType:r.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:p})};function Dv(e){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&(e.width<48||e.height<48)}const Bv=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,Dv)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),o=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:D_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")}))),l=n.length>0;yu("ElementLinkTappableRegionTooSmall",l);const{title:i,footer:s}=Jd.linkTappableRegionTooSmall;return l&&e&&c.createElement(Rv,{title:i,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:o})};function Fv(e){return["gif","image"].includes(e.type)&&!e.alt?.length&&!e.resource?.alt?.length}const Hv=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,Fv)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Vm.ASSISTIVE_TEXT})),[r]),{footer:o,title:l}=Jd.imagesMissingAltText,i=n.length>0;yu("ImageElementMissingAlt",i);const s=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:L_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})));return i&&e&&c.createElement(Rv,{title:l,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};var Uv=n(3605);const zv=p.default.ul.withConfig({displayName:"list__List",componentId:"sc-15nukup-0"})((e=>{let{size:t=$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,theme:n}=e;return(0,p.css)(["list-style-type:disc;list-style-position:outside;margin:0;padding:0;li{",";",";padding:0;margin:0;}"],Uv.defaultTypographyStyle,Bu.expandPresetStyles({preset:n.typography.presets.paragraph[t],theme:n}))}));function Gv(e){if(!["image","gif"].includes(e.type))return!1;const t=(e.scale||100)/100;return e.resource?.height<e.height*t*2||e.resource?.width<e.width*t*2}zv.propTypes={size:Ea().oneOf($e.THEME_CONSTANTS.TYPOGRAPHY.TEXT_SIZES)};const jv=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,Gv)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e})),[r]),{footer:o,title:l}=eu.imageResolutionTooLow,i=n.length>0;yu("ImageElementResolution",i);const s=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:L_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending image","web-stories")})));return i&&e&&c.createElement(Rv,{title:l,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};var Yv=n(7868),Zv=n(4251);function Wv(e,t){return e>=.3333333333333333*t}function Vv(e,t,n){const{pageSize:r}=n,a=(0,Mr.getBox)(e,r?.width,r?.height),o=(0,Ss.default)([a]),l=o.width*o.height,i=[...t].map(((e,t)=>{const a=(0,Mr.getBox)(e,r?.width,r?.height),l=(0,Ss.default)([a]),i=function(e,t){const n=Math.min(e.endX,t.endX)-Math.max(e.startX,t.startX),r=Math.min(e.endY,t.endY)-Math.max(e.startY,t.startY);return n>=0&&r>=0?n*r:0}(o,l);return{element:e.isBackground||e.isDefaultBackground?{...e,backgroundColor:n?.backgroundColor}:e,area:i,index:t}})).reverse();let s=l;const c=[];for(const e of i){if(!Wv(s,l))break;Wv(e.area,l)&&c.push(e.element),s-=e.area}return c}function $v(e){let{background:t,text:n,page:r}=e;const{pageSize:a}=r,o=(a?.width/J.FULLBLEED_RATIO-a?.width/J.PAGE_RATIO)/2,l=(0,Mr.getBox)(n,a?.width,a?.height),i=(0,Ss.default)([l]),{resource:s,scale:c,focalX:d,focalY:u}=t,p=(0,Mr.getBox)(t,a?.width,a?.height),{width:m,height:f}=p,g=(0,Yv.default)(s,m,f,c,d,u);return async function(e){let{bgImage:t,bgBox:n,overlapBox:r}=e;function a(e){return new Promise(((a,o)=>{try{const o=document.createElement("canvas");o.width=t.width,o.height=t.height;const l=o.getContext("2d");if(t.rotationAngle){const e=t.offsetX+n.width/2,r=t.offsetY+n.height/2;l.translate(e,r),l.rotate(t.rotationAngle*qv),l.translate(-e,-r)}let i=0,s=0;const{flip:c}=t;(c.vertical||c.horizontal)&&(i=c.horizontal?-1*t.width:0,s=c.vertical?-1*t.height:0,l.scale(c.horizontal?-1:1,c.vertical?-1:1)),l.drawImage(e,i,s,t.width,t.height);a(l.getImageData(r.x,r.y,r.width,r.height))}catch(e){o(e)}}))}const o=await(0,q.default)({src:t.src,width:t.width,height:t.height}),l=await a(o),i=document.createElement("canvas");i.width=r.width,i.height=r.height;i.getContext("2d").putImageData(l,0,0);const s=await Ao(i.toDataURL(),i.width,i.height),{color:{r:c,g:d,b:u}}=(0,Zv.default)(s);return{r:c,g:d,b:u}}({bgImage:{offsetX:g.offsetX,offsetY:g.offsetY,src:t.resource.src,width:g.width,height:g.height,rotationAngle:t.isBackground?void 0:t.rotationAngle,flip:t.flip},bgBox:p,overlapBox:{x:t.isBackground?g.offsetX+Math.abs(i.startX):g.offsetX+Math.abs(i.startX)-p.x,y:t.isBackground?g.offsetY+Math.abs(i.startY+o):g.offsetY+Math.abs(i.startY+o)-(p.y+o),width:i.width,height:i.height}}).catch((()=>{}))}const qv=Math.PI/180;function Kv(e){const t=function(e){return _v||(_v=document.createElement("div")),_v.innerHTML=e,Array.prototype.slice.call(_v.getElementsByTagName("span"))}(e.content),n=t.map((e=>e.style?.color)).filter(Boolean),r=0===n.length&&0!==t.length,a=0!==e.content.length&&0===t.length;return(r||a)&&n.push("rgb(0, 0, 0)"),n}function Xv(e){let{background:t}=e;return t?.backgroundColor?.color}function Qv(e){switch(e.type){case"image":return $v;case"shape":return Xv;default:return()=>{}}}async function Jv(e,t){const n=[];(e||[]).forEach((e=>{const r=async function(e){const t=[];e.elements.forEach(((n,r)=>{if("text"===n.type&&"NONE"===n.backgroundTextMode){const a=Kv(n),o=e.elements.slice(0,r),l=Vv(n,o,e);for(const r of l){const o=Qv(r)({background:r,text:n,page:e}),l=e=>e&&{backgroundColor:e,textStyleColors:a,fontSize:n.fontSize,id:n.id,isBackgroundElement:r.isBackground},i=o instanceof Promise?o.then(l):l(o);t.push(i)}}}));const n=await Promise.all(t);return n.map((e=>function(){let{backgroundColor:e,textStyleColors:t,fontSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!t||!e)&&t.some((t=>!!t&&!Mc(Rc(t),Pc(e),n).WCAG_AA))}(e)&&{id:e.id,isBackground:e.isBackgroundElement})).filter((e=>{let{id:t}=e;return t}))}({...e,pageSize:t});r instanceof Promise?n.push(r.then((t=>({result:t,page:e})))):n.push(r)}));return(await Promise.all(n)).filter((e=>e.result.some((e=>{let{id:t}=e;return t})))).map((e=>e))}const ew=()=>{const e=Sp(),[t,n]=(0,u.useState)([]),r=xa((e=>{let{state:t}=e;return t?.pages})),a=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}}));(0,u.useEffect)((()=>{let e=!1;return Jv(r,a).then((t=>{if(e)return;const r=t.map((e=>{let{page:t}=e;return t}));n(r)})).catch((()=>{})),()=>{e=!0}}),[r,a]);const o=Hp((e=>{let{setHighlights:t}=e;return t})),l=(0,u.useCallback)((e=>o({pageId:e})),[o]),i=t.length>0;yu("PageBackgroundTextLowContrast",i);const{title:s,footer:p}=Jd.lowContrast;return i&&e?c.createElement(Rv,{title:s,cardType:t.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,p),thumbnails:t.map((e=>c.createElement(tv,{key:e.id,onClick:()=>l(e.id),type:F_,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})))}):null};function tw(e){return Ev(e)<100}const nw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>bv(t,tw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:l}=eu.tooLittlePageText,i=n.length>0;yu("PageTooLittleText",i);const s=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a(e.id),type:F_,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e?c.createElement(Rv,{title:l,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s}):null};function rw(e){return e.elements.filter((e=>Boolean(e.link?.url?.length))).length>3}const aw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>bv(t,rw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:l}=eu.tooManyLinksOnPage,i=n.length>0;yu("PageTooManyLinks",i);const s=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a(e.id),type:F_,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e&&c.createElement(Rv,{title:l,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function ow(e){return Ev(e)>200}const lw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>bv(t,ow)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>{let{pageId:t,elements:n}=e;return r({pageId:t,elements:n})}),[r]),{footer:o,title:l}=eu.tooMuchPageText,i=n.length>0;yu("PageTooMuchText",i);const s=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a({pageId:e.id,elements:e.elements.filter((e=>{let{type:t}=e;return"text"===t}))}),type:F_,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e&&c.createElement(Rv,{title:l,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};const iw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.PUBLISHER_LOGO})),[n]),a=function(e){return!e?.id}(t);yu("PublisherLogoMissing",a);const{footer:o,title:l}=tu.noPublisherLogo;return a&&e&&c.createElement(Rv,{title:l,titleProps:{onClick:r},footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const sw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.PUBLISHER_LOGO})),[n]),a=function(e){return Boolean(e?.id)&&(e?.height<$d||e?.width<$d)}(t);yu("PublisherLogoSize",a);const{footer:o,title:l}=tu.logoTooSmall;return a&&e&&c.createElement(Rv,{title:l,titleProps:{onClick:r},footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const cw=()=>{const e=(0,u.useRef)(),{isSaving:t,link:n,status:r}=xa((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving,link:t.story.link,status:t.story.status}})),[a,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{let a=!0;return t||async function(e){let{link:t,status:n}=e;if(!t||!["publish","future"].includes(n))return!1;try{const e=await fetch(t),n=await e.text();await window.amp.validator.init();const r=window.amp.validator.validateString(n),{status:a,errors:o}=r;return"FAIL"===a&&o.filter((e=>{let{severity:t}=e;return"ERROR"===t})).filter((e=>{let{code:t,params:n}=e;return!("MISSING_URL"===t&&n?.[0].startsWith("poster")||"MISSING_URL"===t&&n?.[0].startsWith("publisher-logo")||"INVALID_URL_PROTOCOL"===t&&n?.[0].startsWith("src"))})).length>0}catch{return!1}}({link:n,status:r}).then((t=>{a&&(o(t),t&&!e?.current&&(e.current=!0))})),()=>{a=!1}}),[n,r,t]),(0,u.useEffect)((()=>{a&&e?.current&&(0,O.trackEvent)("amp_validation_errors_found")}),[a]),yu("StoryHasAmpErrors",a);const{footer:l,title:i}=tu.ampValidation;return a&&c.createElement(Rv,{title:i,footer:c.createElement(DefaultFooterText,null,l)})};const dw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.excerpt})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.EXCERPT})),[n]),{title:a,footer:o}=tu.storyMissingDescription,l=function(e){return!e?.length}(t);return yu("StoryMissingExcerpt",l),l&&e?c.createElement(Rv,{title:a,titleProps:{onClick:r},footer:c.createElement(DefaultFooterText,null,o)}):null};const uw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.title})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.STORY_TITLE})),[n]),a=function(e){return"string"!=typeof e||""===e?.trim()}(t);yu("StoryMissingTitle",a);const{footer:o,title:l}=tu.storyMissingTitle;return a&&e?c.createElement(Rv,{title:l,titleProps:{onClick:r},footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))}):null};const pw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages?.length})),{hasTooFewPages:n,hasTooManyPages:r}=(0,u.useMemo)((()=>function(e){return{hasTooFewPages:e<4,hasTooManyPages:e>30}}(t)),[t]),{storyTooShort:a,storyTooLong:o}=eu,l=n&&a||r&&o||{},i=n||r;return yu("StoryPagesCount",i),i&&e&&c.createElement(Rv,{title:l.title,footer:c.createElement(DefaultFooterText,null,l.title)})};function StoryPosterAttached(){const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.POSTER})),[n]),a=(0,u.useMemo)((()=>function(e){return"string"!=typeof e?.url||hv({featuredMedia:e})}(t)),[t]);yu("StoryPosterAttached",a);const{title:o,footer:l}=tu.storyMissingPoster;return a&&e?c.createElement(Rv,{title:o,titleProps:{onClick:r},footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},l))}):null}const mw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.POSTER})),[n]),{footer:a,title:o}=tu.storyPosterSize,l=(0,u.useMemo)((()=>function(e){return!hv({featuredMedia:e})&&(e?.height<Vd||e?.width<Wd||!(Math.abs(e.width/e.height-3/4)<=.001))}(t)),[t]);return yu("StoryPosterSize",l),l&&e&&c.createElement(Rv,{title:o,titleProps:{onClick:r},footer:c.createElement(fv,null,c.createElement(zv,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},a))})};const fw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.story?.title})),n=Hp((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Vm.STORY_TITLE})),[n]),a=function(e){return e?.length>Yd}(t);yu("StoryTitleLength",a);const{title:o,footer:l}=tu.storyTitleTooLong;return a&&e&&c.createElement(Rv,{title:o,footer:c.createElement(DefaultFooterText,null,l),titleProps:{onClick:r}})};function gw(e){return"text"===e.type&&e.fontSize&&e.fontSize<12}const hw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,gw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:l}=Jd.fontSizeTooSmall,i=n.length>0;yu("TextElementFontSizeTooSmall",i);const s=n.map((e=>c.createElement(tv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:D_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending text element","web-stories")})));return i&&e&&c.createElement(Rv,{title:l,cardType:n.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function Ew(){return Ew=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(this,arguments)}const bw=function(e){let{elements:t,footer:n,onThumbnailClick:r,...a}=e;return c.createElement(Rv,Ew({},a,{cardType:t.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,n),thumbnails:t.map((e=>c.createElement(tv,{key:e.id,onClick:()=>r(e.id,e.pageId),type:M_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})))}))};function yw(e){return"video"===e.type&&!e?.resource?.isMuted&&!e.tracks?.length}const _w=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,yw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Vm.CAPTIONS})),[r]),{footer:o,title:l}=Jd.videoMissingCaptions,i=n.length>0;return yu("VideoElementMissingCaptions",i),i&&e&&c.createElement(bw,{title:l,elements:n,footer:o,onThumbnailClick:a})};function vw(e){return"video"===e.type&&!e.alt?.length&&!e.resource?.alt?.length}const ww=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,vw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Vm.ASSISTIVE_TEXT})),[r]),{footer:o,title:l}=Jd.videoMissingTitle,i=n.length>0;return yu("VideoElementMissingDescription",i),i&&e&&c.createElement(bw,{title:l,elements:n,footer:o,onThumbnailClick:a})};function Tw(e){return"video"===e.type&&!e.resource?.poster&&!e.poster}const Sw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,Tw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Vm.VIDEO_A11Y_POSTER})),[r]),{footer:o,title:l}=tu.videoMissingPoster,i=n.length>0;return yu("VideoElementMissingPoster",i),i&&e&&c.createElement(bw,{title:l,elements:n,footer:o,onThumbnailClick:a})};function Cw(e){if("video"!==e.type)return!1;return e.resource?.height<=480&&e.resource?.width<=852}const Iw=()=>{const e=Sp(),t=xa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>yv(t,Cw)),[t]),r=Hp((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:l}=eu.videoResolutionTooLow,i=n.length>0;return yu("VideoElementResolution",i),i&&e&&c.createElement(bw,{title:l,elements:n,footer:o,onThumbnailClick:a})},xw=(0,p.default)(m.Button).withConfig({displayName:"videoOptimization__OptimizeButton",componentId:"sc-1dz2s9g-0"})(["margin-top:4px;"]);function Aw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{resource:t}=e;if(!t)return!1;const{isOptimized:n,height:r=0,width:a=0}=t;if("video"!==e.type||n)return!1;const o=r*a,l=o>ye*be;return l}const kw={},Ow="cancelled",Nw="uploaded",Pw="uploading";function Rw(e,t){switch(t.type){case Ow:return{...e,[t.element.resource.id]:Ow};case Nw:return{...e,[t.element.resource.id]:Nw};case Pw:return{...e,[t.element.resource.id]:Pw};default:throw new Error}}const BulkVideoOptimization=()=>{const e=Sp(),[t,n]=(0,u.useReducer)(Rw,kw),r=xa((e=>{let{state:t}=e;return t?.pages})),{optimizeVideo:a,isNewResourceTranscoding:o,isCurrentResourceTranscoding:l,canTranscodeResource:i}=vi((e=>{let{actions:{optimizeVideo:t},state:{isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}}=e;return{optimizeVideo:t,isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}})),s=(0,u.useMemo)((()=>yv(r,Aw)),[r]).filter(((e,t,n)=>n.findIndex((t=>t.resource.id===e.resource.id))===t)),p=Hp((e=>{let{setHighlights:t}=e;return t})),m=(0,u.useCallback)((async e=>{if(i(e.resource)&&t[e.resource.id]!==Pw){n({type:Pw,element:e});try{await a({resource:e.resource})}catch(t){return void n({type:Ow,element:e})}n({type:Nw,element:e})}}),[i,a,t]),g=(0,u.useCallback)((()=>{const e=s.filter((e=>{let{resource:t}=e;return!o(t?.id)&&!l(t?.id)}));return new Promise((t=>{e.map((e=>async()=>{await m(e)})).reduce(((e,t)=>e.then(t)),Promise.resolve()).then(t)}))}),[o,l,m,s]),h=(0,u.useCallback)((async()=>{await g()}),[g]),E=(0,u.useCallback)((e=>async()=>{p({pageId:e.pageId,elementId:e.id}),await m(e)}),[m,p]),{footer:b,title:y}=tu.videoNotOptimized,_=(0,u.useMemo)((()=>Object.values(t).filter((e=>e===Pw))),[t]),v=(0,u.useMemo)((()=>_.length>0||s.some((e=>o(e.resource.id)||l(e.resource.id)))),[_,s,o,l]),w=s.length>0;yu("VideoOptimization",w);let T=1===s.length?(0,d.__)("Optimize video","web-stories"):(0,d.__)("Optimize all videos","web-stories");if(v){const e=_.length+s.filter((e=>o(e.resource.id)||l(e.resource.id))).length;T=(0,Ze.default)(
/* translators: 1: number of videos currently transcoding. 2: total number of videos in list. */
(0,d._n)("Optimizing %1$d of %2$d","Optimizing %1$d of %2$d",e,"web-stories"),e,s.length)}return w&&e&&c.createElement(Rv,{cta:c.createElement(xw,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:h,disabled:v},T),title:y,cardType:s.length>1?av.MULTIPLE_ISSUE:av.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,b),thumbnails:s.map((e=>c.createElement(tv,{key:e.resource.id,onClick:E(e),isLoading:o(e.resource.id)||l(e.resource.id),type:M_,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories"),isError:t[e.resource.id]===Ow},c.createElement(Tooltip,{title:t[e.resource.id]===Pw||o(e.resource.id)||l(e.resource.id)?(0,d.__)("Video optimization in progress","web-stories"):(0,d.__)("Optimize","web-stories")},c.createElement(gv,null)))))})},Mw=()=>{const{isTranscodingEnabled:e}=Da();return e?c.createElement(BulkVideoOptimization,null):null},Lw=e=>{let{checkpoint:t,...n}=e;return t===au?c.createElement(Ph.default,n):null},Dw="excerpt",Bw="title",Fw="44px";function Hw(){return Hw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hw.apply(this,arguments)}const Uw=(0,p.default)(m.Button).withConfig({displayName:"buttonWithChecklistWarning__Button",componentId:"sc-jm08jq-0"})(["padding:4px 6px;height:32px;svg{width:24px;height:auto;}"]),zw=(0,u.forwardRef)((function InnerButton(e,t){let{text:n,checkpoint:r,hasHighPriorityIssues:a=!1,onClick:o,...l}=e;return c.createElement(Uw,Hw({ref:t,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:e=>{e.currentTarget.blur(),o?.(e)}},l),n,a&&c.createElement(Lw,{checkpoint:r}))})),Gw=(0,u.forwardRef)((function ButtonWithChecklistWarning(e,t){let{disabled:n,hasFutureDate:r,...a}=e;const o=cc(),{isSaving:l,canPublish:i,status:s}=xa((e=>{let{state:t}=e;return{isSaving:t.meta?.isSaving,status:t.story.status,canPublish:Boolean(t?.capabilities?.publish)}})),{checkpoint:p,hasHighPriorityIssues:m}=gu((e=>{let{state:{checkpoint:t,hasHighPriorityIssues:n}}=e;return{checkpoint:t,hasHighPriorityIssues:n}})),f={[au]:m?(0,d.__)("Make updates before publishing to improve discoverability and performance on search engines","web-stories"):"",[ru]:(0,d.__)("Review checklist to improve performance before publishing","web-stories"),[nu]:""},g=(0,d.__)("Saving is disabled due to media currently being uploaded.","web-stories"),h=(0,d.__)("Submit your work for review, and an Editor will be able to approve it for you.","web-stories");let E=o?g:f[p];i||(E=h);const b=(0,u.useMemo)((()=>r&&"private"!==s?(0,d.__)("Schedule","web-stories"):(0,d.__)("Publish","web-stories")),[r,s]),y=i?b:(0,d.__)("Submit for review","web-stories");return c.createElement(Tooltip,{title:E,popupZIndexOverride:10,hasTail:!0,placement:_d.PLACEMENT.BOTTOM_END},c.createElement(zw,Hw({ref:t,text:y,disabled:n||l||o,checkpoint:p,hasHighPriorityIssues:m},a)))})),jw=p.default.header.withConfig({displayName:"header___Header",componentId:"sc-yxsju1-0"})(["width:100%;height:",";display:flex;align-items:center;margin-bottom:",";background-color:",";border-top-left-radius:",";border-top-right-radius:",";"],Fw,"1px",(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.borders.radius.medium})),Yw=(0,p.default)(m.Button).withConfig({displayName:"header__CloseButton",componentId:"sc-yxsju1-1"})(["margin:6px auto 5px 6px;"]),Zw=p.default.div.withConfig({displayName:"header__PublishButtonWrapper",componentId:"sc-yxsju1-2"})(["margin:6px 6px 5px auto;"]),Ww=e=>{let{onClose:t,onPublish:n,publishButtonDisabled:r,hasFutureDate:a}=e;return c.createElement(jw,null,c.createElement(Yw,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(Du.default,null)),c.createElement(Lu.Headline,{as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Story Details","web-stories")),c.createElement(Zw,null,c.createElement(Gw,{onClick:n,disabled:r,hasFutureDate:a})))};function Vw(){return Vw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vw.apply(this,arguments)}const $w=p.default.div.withConfig({displayName:"textArea__Container",componentId:"sc-sryd46-0"})(["position:relative;width:100%;min-width:100px;"]),qw=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"textArea__CounterText",componentId:"sc-sryd46-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Kw=(0,p.default)(Ve.Text).withConfig({displayName:"textArea__Label",componentId:"sc-sryd46-2"})(["margin-bottom:12px;"]),Xw=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"textArea__Hint",componentId:"sc-sryd46-3"})(["margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),Qw=p.default.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-sryd46-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),(0,Fu.focusCSS)(r.colors.border.focus),a)})),Jw=p.default.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-sryd46-5"})((e=>{let{theme:t}=e;return(0,p.css)(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],t.colors.fg.primary,x.scrollbarCSS,Bu.expandPresetStyles({preset:t.typography.presets.paragraph[$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t}),t.colors.fg.disable,t.colors.border.disable,t.colors.fg.primary,t.colors.fg.tertiary)})),eT=p.default.div.withConfig({displayName:"textArea__Counter",componentId:"sc-sryd46-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),tT=(0,u.forwardRef)(((e,t)=>{let{className:n,disabled:r,hasError:a,hint:o,id:l,label:i,onBlur:s,onFocus:d,value:p,showCount:m=!1,maxLength:f,isIndeterminate:g=!1,containerStyleOverride:h="",...E}=e;const b=(0,u.useMemo)((()=>l||(0,ue.default)()),[l]),y=m&&f>0,[_,v]=(0,u.useState)(!1),[w,T]=(0,u.useState)(!1);let S=p;return g&&(S=""),c.createElement($w,{className:n},i&&c.createElement(Kw,{htmlFor:b,forwardedAs:"label",disabled:r},i),c.createElement(Qw,{focused:_,hasError:a,styleOverride:h},c.createElement(Jw,Vw({id:b,disabled:r,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&_&&!w&&(e.select(),T(!0))},onFocus:e=>{d?.(e),v(!0),T(!1)},onBlur:e=>{s?.(e),v(!1)},value:S,maxLength:f},E)),y&&c.createElement(eT,null,c.createElement(qw,null,`${p.length}/${f}`))),o&&c.createElement(Xw,{hasError:a},o))}));tT.displayName="TextArea";const nT=e=>{let{currentSlug:t,currentTitle:n,storyId:r,updateStory:a}=e;if(!t||Number(t)===r){a({properties:{slug:encodeURIComponent(mo(n))||r}})}};const rT=function(e){if(!e)return null;switch(e.type){case"radial":return(0,d.__)("Radial","web-stories");case"linear":return(0,d.__)("Linear","web-stories");default:{const{color:{r:t,g:n,b:r}}=e;return function(e,t,n){const r=e=>e.toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`.toUpperCase()}(t,n,r)}}},aT=e=>{let{onChange:t}=e;const{fullbleedContainer:r,eyedropperPixelData:a,setEyedropperCallback:o,setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}=Os((e=>{let{state:{fullbleedContainer:t,eyedropperPixelData:n},actions:{setEyedropperCallback:r,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:l}}=e;return{fullbleedContainer:t,setEyedropperCallback:r,eyedropperPixelData:n,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:l}})),{zoomSetting:c,setZoomSetting:d}=Vi((e=>{let{state:{zoomSetting:t},actions:{setZoomSetting:n}}=e;return{zoomSetting:t,setZoomSetting:n}})),p=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return async()=>{if(!e&&c!==Te.FIT)return;e&&l(!0);a&&e||(e&&d(Te.FIT),await new Promise((e=>{setTimeout((()=>{n.e(3182).then(n.bind(n,87559)).then((t=>{t.toCanvas(r,{preferredFontFormat:"woff2",pixelRatio:1}).then((t=>{const n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;s(n),i(t.toDataURL()),e()})).catch((()=>{e()}))}))}))}))),o((()=>e=>{t(e),l(!1),i(null),s(null)}))}}),[r,t,a,c,l,o,i,s,d]);return{initEyedropper:p}};const oT=function(e,t){if(!e)return null;const{type:n}=e;if(!n||"solid"===n){const{color:{r:n,g:r,b:a}}=e;return{color:{r:n,g:r,b:a,a:t}}}return{...e,alpha:t}};const lT=function(e){if(!e.type||"solid"===e.type){const{color:t}=e;return{color:{...t,a:1}}}return t=e,n=["alpha"],Object.keys(t).filter((e=>!n.includes(e))).reduce(((e,n)=>({...e,[n]:t[n]})),{});var t,n};const iT=function(e){const t=(e||"").toUpperCase().trim().replace(/^#/,"");return/[^0-9a-f]/i.test(t)?null:6===t.length?t:1===t.length?t.repeat(6):2===t.length?t.repeat(3):3===t.length?t.replace(/./g,"$&$&"):4===t.length?`${t.substring(0,2).repeat(2)}${t.substring(2)}`:null};var sT=n(6215);function cT(){return cT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cT.apply(this,arguments)}const dT=p.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),uT=(0,p.default)(Ve.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),pT=(0,p.default)(Ve.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),mT=(0,p.default)(Ve.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),fT=p.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),t&&(0,p.css)(["","{color:",";}"],mT,r.colors.fg.primary),(0,Fu.focusCSS)(r.colors.border.focus),a)})),gT=p.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:n}=e;return(0,p.css)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&(0,p.css)(["padding-right:8px;"]),n.colors.fg.primary,Bu.expandPresetStyles({preset:{...n.typography.presets.paragraph[$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}),n.colors.fg.tertiary,n.colors.fg.disable,n.colors.border.disable,mT,n.colors.fg.disable,n.colors.fg.primary)})),hT=(0,u.forwardRef)(((e,t)=>{let{inputClassName:n,className:r,disabled:a,hasError:o,hint:l,id:i,label:s,onBlur:d,onFocus:p,hasFocus:m=!1,suffix:f,unit:g="",value:h="",isIndeterminate:E=!1,containerStyleOverride:b="",...y}=e;const _=(0,u.useMemo)((()=>i||(0,ue.default)()),[i]),[v,w]=(0,u.useState)(m),[T,S]=(0,u.useState)(!1);let C=h;g&&h.length&&(C=`${h}${v?"":`${g}`}`),E&&(C="");const I=Boolean(f);return c.createElement(dT,{className:r},s&&c.createElement(uT,{htmlFor:_,forwardedAs:"label",disabled:a},s),c.createElement(fT,{focused:v,hasError:o,styleOverride:b},c.createElement(gT,cT({id:_,disabled:a,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&v&&!T&&(e.select(),S(!0))},onFocus:e=>{p?.(e),w(!0),S(!1)},onBlur:e=>{d?.(e),w(!1)},value:C,hasSuffix:I,className:n},y)),I&&c.createElement(mT,{hasLabel:Boolean(s),forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>w(!0)},f)),l&&c.createElement(pT,{hasError:o},l))}));sT.default,Ea().string,Ea().bool,Ea().bool,Ea().string,Ea().string,sT.default,Ea().func,Ea().func.isRequired,Ea().func,Ea().node,Ea().string,Ea().string,Ea().bool,Ea().oneOfType([Ea().object,Ea().array]);function ET(){return ET=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ET.apply(this,arguments)}hT.displayName="Input";const bT=(0,u.forwardRef)((function Hex(e,t){let{value:n,placeholder:r,onChange:a,...o}=e;const[l,i]=(0,u.useState)(""),s=(0,u.useRef)(null),d=(0,u.useRef)(!1),p=rT(n);(0,u.useEffect)((()=>i(p)),[p]);const m=(0,u.useCallback)((e=>{const t=e.target.value.trim().replace(/^#/,"");i(t)}),[]),f=(0,u.useCallback)((()=>{const e=iT(l)??p;if(i(e),e!==p){const{red:t,green:r,blue:o}=(0,We.parseToRgb)(`#${e}`),l=n.color.a;a({color:{r:t,g:r,b:o,a:l}})}}),[l,p,a,n]),g=(0,u.useCallback)((()=>{f()}),[f]),h=(0,u.useCallback)((()=>{d.current||f(),d.current=!1}),[f]),E=(0,u.useCallback)((()=>{i(p),d.current=!0;(t?.current?t:s).current.blur()}),[p,t]);return(0,nr.useKeyDownEffect)(s,{key:["escape"],editable:!0},E,[E]),(0,nr.useKeyDownEffect)(s,{key:["enter"],editable:!0},g,[g]),c.createElement(hT,ET({ref:t||s,value:l||"",onChange:m,onBlur:h,placeholder:r},o))}));function yT(e){return void 0!==e.a&&e.a<1}const _T=function(e){const{color:t,alpha:n,stops:r}=e;if(t)return Boolean(yT(t));if("number"==typeof n&&n<1)return!0;for(const e of r||[])if(yT(e.color))return!0;return!1};const vT=function(e){return Boolean(e?.type)&&"solid"!==e.type};var wT=n(19362);function TT(){return TT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TT.apply(this,arguments)}const ST=24,CT=p.default.div.withConfig({displayName:"swatch__Transparent",componentId:"sc-180wh7-0"})(["width:100%;height:100%;position:absolute;border-radius:100%;",""],wT.transparentBg),IT=p.default.button.withConfig({displayName:"swatch__SwatchButton",componentId:"sc-180wh7-1"})(["cursor:pointer;background-color:transparent;border-color:transparent;padding:0;border-width:0;display:block;width:","px;height:","px;border-radius:100%;overflow:hidden;position:relative;"," ",";::after{content:'';position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;border-radius:50%;border:1px solid ",";}"],ST,ST,(e=>{let{disabled:t}=e;return t&&(0,p.css)(["opacity:0.4;cursor:default;pointer-events:none;"])}),(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.divider.primary})),xT=(0,p.default)(IT).attrs({as:"div",type:""}).withConfig({displayName:"swatch__SwatchPreview",componentId:"sc-180wh7-2"})([""]),AT=p.default.div.withConfig({displayName:"swatch__SwatchItem",componentId:"sc-180wh7-3"})(["transform:rotate(","deg);display:block;width:100%;height:100%;font-size:13px;position:relative;svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));color:",";transform:rotate(","deg);}"],(e=>{let{displaySplit:t}=e;return t?-45:0}),ST,ST,12,12,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{displaySplit:t}=e;return t?45:0})),kT=p.default.div.withConfig({displayName:"swatch__OpaqueColorWrapper",componentId:"sc-180wh7-4"})(["height:","px;width:50%;overflow:hidden;position:absolute;left:0;top:0;"],ST),OT=p.default.div.withConfig({displayName:"swatch__OpaqueColor",componentId:"sc-180wh7-5"})(["height:","px;width:","px;position:absolute;top:0;left:0;",""],ST,ST,(e=>{let{pattern:t}=e;return(0,Nr.default)(t)}));function Swatch(e){let{pattern:t,children:n,isPreview:r=!1,isDisabled:a=!1,isIndeterminate:o=!1,className:l="",...i}=e;if(!t)return null;const s=_T(t),d=vT(t),u=s?lT(t):t,p=!d&&s&&!o,m=r?xT:IT;return c.createElement(m,TT({disabled:a,className:l},i),s&&c.createElement(CT,null),c.createElement(AT,{style:(0,Nr.default)(t),displaySplit:p},p&&c.createElement(kT,null,c.createElement(OT,{style:(0,Nr.default)(u)})),n))}var NT=n(19683),PT=n(13578);const RT=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.DEFAULT}).withConfig({displayName:"focusTrapButton___FocusTrapButton",componentId:"sc-1426fzg-0"})(["background-color:transparent;display:flex;align-items:center;justify-content:flex-start;outline:none;margin:0;padding:0;min-width:inherit;",""],(e=>{let{styleOverride:t}=e;return(0,p.css)(["",""],t)}));RT.propTypes={styleOverride:Ea().array};const MT=(e,t)=>{"Tab"===e.key?(e.preventDefault(),t.current.focus()):e.stopPropagation()},LT=(0,u.forwardRef)((function FocusTrapButton(e,t){let{inputRef:n,inputLabel:r,children:a,styleOverride:o}=e;return c.createElement(RT,{id:(0,ue.default)(),tabIndex:-1,ref:t,onClick:e=>{e.stopPropagation(),n.current.focus()},onBlur:e=>{e.preventDefault(),e.stopPropagation()},onKeyDown:e=>{e.preventDefault(),"Enter"===e.key&&n.current.focus()},"aria-label":(0,Ze.default)(
/* translators: %s: input label that is accessible by pressing Enter */
(0,d.__)("Press Enter to edit %s","web-stories"),r),styleOverride:o},a)}));const DT=function(e){let{ref:t}=e;const n=e=>{const n=(r=t.current)?[...r.querySelectorAll('a[href], button, textarea, input[type]:not([type="hidden"]), select')].filter((e=>!e.hasAttribute("disabled")&&"-1"!==e.getAttribute("tabindex"))):[];var r;const a=n[0],o=n[n.length-1];e.shiftKey||document.activeElement!==o?e.shiftKey&&document.activeElement===a&&(o.focus(),e.preventDefault()):(a.focus(),e.preventDefault())};(0,nr.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},n),(0,nr.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0},n)};var BT=n(80852),FT=n(42096);function HT(){return HT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HT.apply(this,arguments)}const UT=function(){let{r:e=0,g:t=0,b:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`rgb(${e},${t},${n})`},zT=e=>{let{r:t,g:n,b:r,a}=e;const o=e=>255*(1-a)+a*e;return`rgb(${o(t)}, ${o(n)}, ${o(r)})`},GT=16,jT=p.default.div.attrs((e=>{let{currentColor:t={},withAlpha:n}=e;return{style:{background:n?zT(t):UT(t)}}})).withConfig({displayName:"pointer__PointerElement",componentId:"sc-1444lan-0"})(["width:","px;height:","px;transform:translate( "," );background:transparent;border:","px solid ",";border-radius:100%;position:relative;&:before{content:'';display:block;width:","px;height:","px;position:absolute;top:-","px;left:-","px;}"],GT,GT,(e=>{let{offsetX:t=0,offsetY:n=0,isRTL:r}=e;return`${(r?-1:1)*t}px, ${n}px`}),2,(e=>{let{theme:t}=e;return t.colors.fg.primary}),32,32,10,10);const YT=function Pointer(e){const{isRTL:t}=H();return c.createElement(jT,HT({},e,{isRTL:t}))},ZT=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.EditableInput}))))),WT=p.default.button.withConfig({displayName:"editablePreview__Preview",componentId:"sc-cdmcf1-0"})(["margin:0;padding:5px 7px;border:1px solid ",";border-radius:4px;background:transparent;color:",";width:100%;",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),Hu),VT=p.default.div.withConfig({displayName:"editablePreview__Wrapper",componentId:"sc-cdmcf1-1"})(["input{",";}"],Hu);function EditablePreview(e){let{label:t,value:n,width:r,format:a,onChange:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((()=>i(!0)),[]),d=(0,u.useCallback)((()=>i(!1)),[]),p=(0,u.useRef)(null),m=(0,u.useRef)(),f=(0,u.useMemo)((()=>({input:{textAlign:"center",textTransform:"lowercase",width:"100%",padding:"6px 12px",border:"1px solid #5E6668",color:"#E4E5E6",borderRadius:"4px",background:"transparent",lineHeight:"18px"},wrap:{lineHeight:0,maxWidth:`${r}px`}})),[r]);(0,nr.useKeyDownEffect)(p,{key:"esc",editable:!0},d,[l]);if((0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{l&&m.current&&(m.current.input.focus(),m.current.input.select(),m.current.input.setAttribute("aria-label",t))}));return()=>clearTimeout(e)}),[l,t]),!l)return c.createElement(WT,{"aria-label":t,onClick:s,onFocus:s},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},a(n)));const g="transparent"===n?"000000":n;return c.createElement(VT,{ref:p,tabIndex:-1,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||d()}},c.createElement(u.Suspense,{fallback:null},c.createElement(ZT,{value:g,ref:m,onChange:o,onChangeComplete:d,style:f})))}EditablePreview.defaultProps={label:"",value:""};const $T=EditablePreview,qT=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Saturation}))))),KT=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Hue}))))),XT=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Alpha}))))),QT=p.default.div.withConfig({displayName:"currentColorPicker__BodyFallback",componentId:"sc-eqs4bc-0"})(["height:","px;display:flex;align-items:center;justify-content:center;"],240),JT=p.default.div.withConfig({displayName:"currentColorPicker__SaturationWrapper",componentId:"sc-eqs4bc-1"})(["position:relative;margin:0 16px;flex:0 1 ","px;"],116),eS=(0,p.css)(["margin:0 16px;border:1px solid ",";flex:0 0 ","px;position:relative;border-radius:","px;background-clip:padding-box;"],(e=>{let{theme:t}=e;return t.colors.shadow.active}),20,50),tS=p.default.div.withConfig({displayName:"currentColorPicker__HueWrapper",componentId:"sc-eqs4bc-2"})(["",""],eS),nS=p.default.div.withConfig({displayName:"currentColorPicker__AlphaWrapper",componentId:"sc-eqs4bc-3"})([""," div:first-child div:first-child div:first-child{background-image:conic-gradient( "," 0.25turn,transparent 0turn 0.5turn,"," 0turn 0.75turn,transparent 0turn 1turn ) !important;background-size:8px 8px !important;}"],eS,(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),rS=p.default.div.withConfig({displayName:"currentColorPicker__Footer",componentId:"sc-eqs4bc-4"})(["height:","px;line-height:19px;position:relative;margin:0 16px;display:flex;justify-content:space-between;"],36),aS=p.default.div.withConfig({displayName:"currentColorPicker__HexValue",componentId:"sc-eqs4bc-5"})(["width:","px;"],74),oS=p.default.div.withConfig({displayName:"currentColorPicker__Opacity",componentId:"sc-eqs4bc-6"})(["width:","px;"],52);function CurrentColorPicker(e){let{rgb:t,hsl:n,hsv:r,hex:a,onChange:o,showOpacity:l,hasEyedropper:i}=e;const s=String(Math.round(100*t.a)),p="#"===a[0]?a.substr(1):a,g=(0,u.useCallback)((e=>("transparent"===e&&(e="000000"),`#${e}`)),[]),h=(0,u.useCallback)((e=>`${e}%`),[]),E=(0,u.useCallback)((e=>o({hex:e})),[o]),b=(0,u.useCallback)((e=>o({...t,a:isNaN(e)?1:parseInt(e)/100})),[t,o]),{initEyedropper:y}=aT({onChange:o});return c.createElement(c.Fragment,null,c.createElement(u.Suspense,{fallback:null},c.createElement(JT,null,c.createElement(qT,{radius:"8px",pointer:()=>c.createElement(YT,{offsetX:-8,offsetY:-8,currentColor:t}),hsl:n,hsv:r,onChange:o})),c.createElement(tS,null,c.createElement(KT,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(YT,{offsetX:-8,offsetY:1,currentColor:t}),hsl:n,onChange:o})),l&&c.createElement(nS,null,c.createElement(XT,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(YT,{offsetX:-8,offsetY:1,currentColor:t,withAlpha:!0}),rgb:t,hsl:n,onChange:o}))),c.createElement(rS,null,i&&c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:y(),onPointerEnter:y(!1)},c.createElement(ty,null)),c.createElement(aS,null,c.createElement($T,{label:(0,d.__)("Edit hex value","web-stories"),value:p,onChange:E,width:80,format:g})),l&&c.createElement(oS,null,c.createElement($T,{label:(0,d.__)("Edit opacity","web-stories"),value:s,width:52,format:h,onChange:b}))))}CurrentColorPicker.defaultProps={showOpacity:!0};const lS=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function DynamicFetcher(e){const r=(0,u.useRef)(!1),[a,o]=(0,u.useState)(null);return(0,u.useEffect)((()=>(r.current=!0,n.e(341).then(n.bind(n,66286)).then((e=>{let{CustomPicker:n}=e;r.current&&o({component:n(...t)})})),()=>{r.current=!1})),[]),a?c.createElement(a.component,e):c.createElement(QT,null,c.createElement(FT.default,null))}return DynamicFetcher}(CurrentColorPicker),iS=112,sS=12,cS="solid",dS="linear",uS="radial",pS="DELETE_COLOR_PRESET_DIALOG_DISMISSED",mS=e=>(0,Zv.default)(`#${e}`),fS=[mS("00000000"),mS("000000"),mS("454545"),mS("B6B6B6"),mS("EEEEEE"),mS("FFFFFF"),mS("003BAD"),mS("0044C9"),mS("0354F2"),mS("1263FF"),mS("347EFF"),mS("6D9FFF"),mS("4B1283"),mS("5A189A"),mS("7B2CBF"),mS("9D4EDD"),mS("C77DFF"),mS("E0AAFF"),mS("E03568"),mS("FF477E"),mS("FF5C8A"),mS("FF7096"),mS("FF85A1"),mS("FF99AC"),mS("590D22"),mS("800F2F"),mS("A4133C"),mS("C9184A"),mS("FF4D6D"),mS("FF758F"),mS("DBCA09"),mS("FFD900"),mS("FFE747"),mS("FFEE70"),mS("FFF599"),mS("FFFFB7"),mS("E06E04"),mS("EA7D00"),mS("FF9500"),mS("FFA811"),mS("FFBC35"),mS("FFCC4A"),mS("607047"),mS("79895D"),mS("839568"),mS("A5B98B"),mS("C1D3AA"),mS("D4E4C0"),mS("603809"),mS("603808"),mS("6F4518"),mS("8B5E34"),mS("A47148"),mS("BC8A5F")],gS=p.default.button.attrs((e=>{let{position:t}=e;return{style:{right:t*iS-6+"px"}}})).withConfig({displayName:"gradientStop__Stop",componentId:"sc-1kqiqwc-0"})(["position:absolute;top:-","px;background:transparent;border:0;padding:0;&:focus{outline:none;}"],24),hS=(0,p.css)(["position:absolute;left:0;top:0;width:100%;height:100%;"]),ES=p.default.div.withConfig({displayName:"gradientStop__Background",componentId:"sc-1kqiqwc-1"})([""," ",""],hS,(e=>{let{color:t}=e;return(0,Nr.default)(t)})),bS=p.default.div.withConfig({displayName:"gradientStop__Transparent",componentId:"sc-1kqiqwc-2"})([""," width:100%;height:100%;position:absolute;top:0;"],wT.transparentBg),yS=p.default.div.withConfig({displayName:"gradientStop__StopPointer",componentId:"sc-1kqiqwc-3"})(["transform:translate(",",0);width:","px;height:","px;border-radius:2px;overflow:hidden;"],(e=>{let{offset:t}=e;return`${t}px`}),14,14),_S=p.default.div.withConfig({displayName:"gradientStop__IconWrapper",componentId:"sc-1kqiqwc-4"})(["position:absolute;left:-","px;top:-8px;color:",";svg{width:32px;height:32px;}"],10,(e=>{let{theme:t,isSelected:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}));const vS=(0,u.forwardRef)((function GradientStopWithRef(e,t){let{position:n,index:r,isSelected:a,color:o,onSelect:l}=e;return c.createElement(gS,{ref:t,key:r,isSelected:a,position:n,onFocus:()=>l(r),onClick:()=>l(r),"aria-label":(0,Ze.default)(
/* translators: %d: stop percentage */
(0,d.__)("Gradient stop at %d%%","web-stories"),Math.round(100-100*n))},c.createElement(_S,{isSelected:a},c.createElement(Vy,null)),c.createElement(yS,{offset:-1},c.createElement(bS,null),c.createElement(ES,{color:o})))}));vS.propTypes={position:Ea().number.isRequired,index:Ea().number.isRequired,isSelected:Ea().bool.isRequired,color:Ea().object.isRequired,onSelect:Ea().func.isRequired};const wS=vS;const TS=function(e,t){(0,nr.useKeyDownEffect)(e,"left",(()=>t(.01)),[t]),(0,nr.useKeyDownEffect)(e,"right",(()=>t(-.01)),[t])};const SS=function(e,t,n,r){(0,nr.useKeyDownEffect)(e,"enter",(()=>{return t((e=function(e,t){const n=t===e.length-1;if(n&&e[t].position<1)return 1;if(0===t&&e[0].position>0)return 0;const r=n?e[t-1]:e[t],a=n?e[t]:e[t+1];return r.position+(a.position-r.position)/2}(n,r),a=4,Number(e.toFixed(a))));var e,a}),[t,n,r])};const CS=function(e,t){(0,nr.useKeyDownEffect)(e,"delete",(()=>{e.current.focus(),t()}),[t,e])};const IS=function(e,t,n){const r=t.length,a=(0,u.useMemo)((()=>Array.from({length:r}).map(u.createRef)),[r]);return(0,u.useLayoutEffect)((()=>{e.current.contains(document.activeElement)&&a[n].current.focus()}),[n,a,r,e]),a};function xS(e){return e.pageX||e.clientX}const AS=function(e,t){const[n,r]=(0,u.useState)(null);return(0,u.useLayoutEffect)((()=>{const n=e.current,a=n.getBoundingClientRect().left,o=e=>{if(e.target!==n)return;const o=(xS(e)-a+7)/iS;t(1.0625-o),r(null)},l=e=>{e.target===n?r(xS(e)-a):r(null)},i=e=>{e.target===n&&r(null)};return n.addEventListener("pointermove",l),n.addEventListener("pointerleave",i),n.addEventListener("pointerdown",o),()=>{n.removeEventListener("pointermove",l),n.removeEventListener("pointerleave",i),n.removeEventListener("pointerdown",o)}}),[e,t]),n};const kS=function(e,t){const n=(0,u.useRef)(null);(0,u.useLayoutEffect)((()=>{const r=e.current,a=e=>{const r=xS(e)-n.current;n.current=xS(e),t(-r/iS)},o=e=>{n.current=null,function(e){e.target.releasePointerCapture&&e.target.releasePointerCapture(e.pointerId)}(e),e.target.removeEventListener("pointermove",a),e.target.removeEventListener("pointerup",o)},l=e=>{e.target!==r&&(n.current=xS(e),function(e){e.target.setPointerCapture&&e.target.setPointerCapture(e.pointerId)}(e),e.target.addEventListener("pointermove",a),e.target.addEventListener("pointerup",o))};return r.addEventListener("pointerdown",l),()=>r.removeEventListener("pointerdown",l)}),[e,t])},OS=p.default.div.withConfig({displayName:"gradientLine__Line",componentId:"sc-1k22wp0-0"})([""," width:","px;height:","px;border-radius:2px;position:relative;&:focus{outline:none;}"],wT.transparentBg,iS,sS),NS=p.default.div.attrs((e=>{let{stops:t}=e;return{style:(0,Nr.default)({type:"linear",stops:t,rotation:.25})}})).withConfig({displayName:"gradientLine__Background",componentId:"sc-1k22wp0-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;"]),PS=(0,p.default)(YT).attrs((e=>{let{x:t}=e;return{style:{left:`${t}px`},offsetX:-6}})).withConfig({displayName:"gradientLine__TempPointer",componentId:"sc-1k22wp0-2"})(["height:","px;width:","px;opacity:0.6;top:1px;pointer-events:none;"],10,10);const RS=function GradientLine(e){let{stops:t,currentStopIndex:n,onSelect:r,onAdd:a,onDelete:o,onMove:l}=e;const i=(0,u.useRef)();TS(i,l),SS(i,a,t,n),CS(i,o);const s=IS(i,t,n);kS(i,l);const p=AS(i,a);return c.createElement(OS,{ref:i,"aria-label":(0,d.__)("Gradient line","web-stories"),tabIndex:"-1"},c.createElement(NS,{stops:t}),t.map(((e,t)=>{let{position:a,color:o}=e;return c.createElement(wS,{ref:e=>s[t].current=e,key:t,index:t,isSelected:t===n,position:a,onSelect:r,color:{color:o}},c.createElement(YT,{offsetX:-6}))})),p&&c.createElement(PS,{"aria-label":(0,Ze.default)(
/* translators: %d: stop percentage */
(0,d.__)("Temporary gradient stop at %d%%","web-stories"),Math.round(p/iS*100)),x:p}))},MS=p.default.div.withConfig({displayName:"gradientPicker__Wrapper",componentId:"sc-a6h8ls-0"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 16px 0;height:60px;"]),LS=p.default.div.withConfig({displayName:"gradientPicker__Buttons",componentId:"sc-a6h8ls-1"})(["display:flex;gap:8px;"]),DS=(0,p.default)(m.Button).withConfig({displayName:"gradientPicker__SmallButton",componentId:"sc-a6h8ls-2"})(["width:24px;height:24px;padding:0;svg{width:24px;height:24px;}"]);const BS=function GradientPicker(e){let{stops:t,currentStopIndex:n,type:r,onSelect:a,onAdd:o,onDelete:l,onMove:i,onRotate:s,onReverse:u}=e;const p=(0,d.__)("Reverse gradient stops","web-stories"),m=(0,d.__)("Rotate gradient","web-stories"),g="radial"!==r;return c.createElement(MS,null,c.createElement(RS,{stops:t,currentStopIndex:n,onSelect:a,onAdd:o,onDelete:l,onMove:i}),c.createElement(LS,null,c.createElement(Tooltip,{hasTail:!0,title:p},c.createElement(DS,{"aria-label":p,onClick:u,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(dg,null))),g&&c.createElement(Tooltip,{hasTail:!0,title:m},c.createElement(DS,{onClick:s,"aria-label":m,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(rg,{id:"gradient-rotator"})))))};function FS(){return FS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FS.apply(this,arguments)}const HS=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-3jvjbz-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),US=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-3jvjbz-1"})(["display:flex;margin-left:auto;"]),zS=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-3jvjbz-2"})(["margin-left:8px;",";"],Hu);const GS=function(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{}),hasPresets:o=!1}=e;const l=(0,u.useRef)();(0,u.useEffect)((()=>{l.current?.focus()}),[]);const i={type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(HS,null,t,c.createElement(US,null,o&&c.createElement(zS,FS({},i,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit colors","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(Gb.default,null)),c.createElement(zS,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:l},c.createElement(Du.default,null))))};function jS(){return jS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jS.apply(this,arguments)}function YS(e){let{isToggled:t=!1,type:n=null,...r}=e;const a=n===f.BUTTON_TYPES.QUATERNARY?n:t?f.BUTTON_TYPES.SECONDARY:f.BUTTON_TYPES.TERTIARY;return c.createElement(m.Button,jS({},r,{type:a,"aria-pressed":t,isToggled:t}))}function LockToggle(e){let{isLocked:t=!1,...n}=e;return c.createElement(m.Button,jS({},n,{"aria-pressed":t,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE}),t?c.createElement(ZE.default,null):c.createElement(VE,null))}const ZS=p.default.div.withConfig({displayName:"patternTypePicker__Wrapper",componentId:"sc-1mq6bg0-0"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;padding:0 16px;position:relative;gap:8px;"],52);const WS=function PatternTypePicker(e){let{type:t,setToGradient:n,setToSolid:r}=e;const a=(0,u.useCallback)((()=>n("linear")),[n]),o=(0,u.useCallback)((()=>n("radial")),[n]);return c.createElement(ZS,null,c.createElement(YS,{"aria-label":(0,d.__)("Solid pattern type","web-stories"),onClick:r,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"solid"===t},c.createElement(Ub,null)),c.createElement(YS,{"aria-label":(0,d.__)("Linear gradient pattern type","web-stories"),onClick:a,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"linear"===t},c.createElement(Pb,null)),c.createElement(YS,{"aria-label":(0,d.__)("Radial gradient pattern type","web-stories"),onClick:o,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"radial"===t},c.createElement(Bb,null)))};const VS=function(e,t){const n=e.findIndex((e=>{let{position:n}=e;return n>t}));if(-1===n)return{index:e.length,color:e[e.length-1].color};if(0===n)return{index:0,color:e[0].color};const r=e[n-1],a=e[n],o=(t-r.position)/(a.position-r.position),{color:{r:l,g:i,b:s,a:c=1}}=r,{color:{r:d,g:u,b:p,a:m=1}}=a,f=(e,t)=>e+(t-e)*o,g={r:Math.round(f(l,d)),g:Math.round(f(i,u)),b:Math.round(f(s,p)),a:f(c,m)};return{index:n,color:1===g.a?{r:g.r,g:g.g,b:g.b}:g}};function $S(e){return e.map((e=>{let{color:{r:t,g:n,b:r,a},position:o}=e;return{color:(0,BT.default)(t,n,r,a).color,position:o}}))}const qS=function(e){const{regenerate:t,type:n}=e;if(!t)return null;switch(n){case cS:return function(e){let{currentColor:{r:t,g:n,b:r,a}}=e;return(0,BT.default)(t,n,r,a)}(e);case dS:return function(e){let{stops:t,rotation:n,alpha:r}=e;const a={type:dS,stops:$S(t)};return 0!==n&&(a.rotation=n),1!==r&&void 0!==r&&(a.alpha=r),a}(e);case uS:return function(e){let{stops:t,center:n,size:r,alpha:a}=e;const o={type:uS,stops:$S(t)};return!n||.5===n.x&&.5===n.y||(o.center=n),!r||1===r.w&&1===r.h||(o.size=r),1!==a&&void 0!==a&&(o.alpha=a),o}(e);default:return null}},KS={type:cS,regenerate:!1,stops:[],currentColor:{r:0,g:0,b:0,a:0},currentStopIndex:0,rotation:.5,alpha:1,center:{x:.5,y:.5},size:{w:1,h:1}},XS={load:(e,t)=>{let{payload:n}=t;const{type:r,color:a,stops:o,rotation:l,center:i,size:s,alpha:c}=n,d=r&&r!==cS&&(e.type!==r||o?.length!==e.stops?.length)?{currentColor:o[0].color,currentStopIndex:0}:{};switch(r){case dS:return{...e,...d,type:r,regenerate:!1,stops:o,alpha:isNaN(c)?e.alpha:c,rotation:isNaN(l)?0:l};case uS:return{...e,...d,type:r,regenerate:!1,stops:o,center:void 0!==i?i:e.center,size:void 0!==s?s:e.size,alpha:isNaN(c)?e.alpha:c};default:return{...e,type:cS,regenerate:!1,currentColor:a}}},setToSolid:e=>({...e,type:cS,regenerate:!0}),setToGradient:(e,t)=>{let{payload:n}=t;const r=e.stops&&e.stops.length>=2?e.stops:[{color:e.currentColor,position:0},{color:e.currentColor,position:1}];return{...e,regenerate:!0,type:n,stops:r}},addStopAt:(e,t)=>{let{payload:n}=t;if(n=Number(n.toFixed(2)),e.stops.some((e=>{let{position:t}=e;return t===n})))return e;const{index:r,color:a}=VS(e.stops,n),o=[...e.stops.slice(0,r),{color:a,position:n},...e.stops.slice(r)];return{...e,regenerate:!0,currentColor:a,currentStopIndex:r,stops:o}},moveCurrentStopBy:(e,t)=>{let{payload:n}=t;const r=e.currentStopIndex,a=e.stops[r].position,o=Math.max(0,Math.min(1,Number((a+n).toFixed(2))));if(o===a)return e;const l=[...e.stops.slice(0,r),{...e.stops[r],position:o},...e.stops.slice(r+1)];l.sort(((e,t)=>e.position-t.position));const i=l.findIndex((e=>{let{position:t}=e;return t===o}));return{...e,regenerate:!0,stops:l,currentStopIndex:i}},removeCurrentStop:e=>{if(2===e.stops.length)return e;const t=e.currentStopIndex,n=[...e.stops];n.splice(t,1);const r=t===n.length?t-1:t;return{...e,regenerate:!0,stops:n,currentColor:n[r].color,currentStopIndex:r}},updateCurrentColor:(e,t)=>{let{payload:{rgb:n}}=t;const r={...n},a={...e,regenerate:!0,currentColor:r};return e.type!==cS&&(a.stops=[...e.stops.slice(0,e.currentStopIndex),{...e.stops[e.currentStopIndex],color:r},...e.stops.slice(e.currentStopIndex+1)]),a},rotateClockwise:e=>({...e,rotation:(e.rotation+.25)%1,regenerate:!0}),selectStop:(e,t)=>{let{payload:n}=t;const r=Math.max(0,Math.min(e.stops.length-1,n)),a=e.stops[r].color;return{...e,currentStopIndex:r,currentColor:a}},reverseStops:e=>{const t=e.stops.map((e=>{let{color:t,position:n}=e;return{color:t,position:1-n}})).reverse(),n=t.length-e.currentStopIndex-1;return{...e,stops:t,currentStopIndex:n,regenerate:!0}}};const QS=function(){const[e,t]=(0,u.useReduction)(KS,XS),n=qS(e);return{state:{...e,generatedColor:n},actions:t}},JS=(0,p.default)(m.Button).withConfig({displayName:"addCustomColor__StyledButton",componentId:"sc-4t2ps2-0"})(["flex:0 0 32px;margin:0 16px 16px;"]);const eC=function AddCustomColor(e){let{color:t,onSave:n}=e;const{updateStory:r,globalStoryStyles:a}=xa((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),o=(0,u.useCallback)((()=>{r({properties:{globalStoryStyles:{...a,colors:fr([...a.colors,t].filter(Boolean))}}}),n()}),[n,t,a,r]);return c.createElement(JS,{onClick:o,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Add to Saved Colors","web-stories"))};const tC=function CustomColorPicker(e){let{color:t,allowsGradient:n,allowsOpacity:r,handleColorChange:a,handleClose:o,hideCustomPicker:l,allowsSavedColors:i,hasEyedropper:s}=e;const{state:{type:p,stops:g,currentStopIndex:h,currentColor:E,generatedColor:b},actions:{load:y,updateCurrentColor:_,reverseStops:v,selectStop:w,addStopAt:T,removeCurrentStop:S,rotateClockwise:C,moveCurrentStopBy:I,setToSolid:x,setToGradient:A}}=QS(),k=(0,u.useRef)(!0);(0,u.useEffect)((()=>()=>{k.current=!1}),[]),(0,u.useEffect)((()=>{b&&a(b)}),[a,b]),(0,u.useEffect)((()=>{y(t||(0,BT.default)(0,0,0))}),[t,y]);const O=(0,u.useCallback)((e=>{_(e),!k.current&&e?.rgb&&a({color:e.rgb})}),[_,a]);return c.createElement(c.Fragment,null,c.createElement(GS,{handleClose:o},c.createElement(m.Button,{"aria-label":(0,d.__)("Go back","web-stories"),onClick:l,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(Yf,null))),n&&c.createElement(WS,{type:p,setToGradient:A,setToSolid:x}),"solid"!==p&&c.createElement(BS,{stops:g,currentStopIndex:h,onSelect:w,onReverse:v,onAdd:T,onDelete:S,onRotate:C,onMove:I,type:p}),c.createElement(lS,{color:E,onChange:O,showOpacity:r,hasEyedropper:s}),i&&c.createElement(eC,{color:b||t,onSave:l}))},nC='[tabIndex="-1"]:not(:disabled)';function rC(e,t){let n,r=t;for(;r>0;)n=n?n?.parentElement:e.parentElement,r--;return n}function aC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"firstChild";const r=rC(e,t),a=r.parentNode[n];return a.querySelector(nC)}function oC(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function lC(e,t,n){return n>0?function(e,t,n){const r=rC(e,n);if(r){const e=r[t];return e?e.querySelector(nC):null}return null}(e,t,n):function(e,t){let n=e[t];for(;n&&n.disabled;)n=n[t];return n}(e,t)}function iC(e,t){return(e?"ArrowRight"===t||"ArrowUp"===t||"PageUp"===t:"ArrowLeft"===t||"ArrowUp"===t||"PageUp"===t)?"previousSibling":"nextSibling"}function sC(e,t,n){const r=oC(e);let a=null,o=null,l=null;for(let c=lC(e,t,n);c;c=lC(c,t,n)){const e=oC(c);if(Math.floor(e.y)===Math.floor(r.y))continue;if(a&&Math.floor(e.y)>Math.floor(o.y))break;const t=(i=r,s=e,Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2));(!l||t<l)&&(l=t,o=e,a=c)}var i,s;return a}function cC(e){let{ref:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{isRTL:a}=H(),o=(0,u.useCallback)((e=>{let{key:t,target:n}=e;const o=n,l=iC(a,t),i=e=>{if(e){const t=r>0?rC(e,r):e;o.tabIndex=-1,e.tabIndex=0,e.focus(),t.scrollIntoView("previousSibling"===l)}};if("ArrowLeft"===t||"ArrowRight"===t){const e=lC(o,l,r);e&&i(e)}else if("ArrowUp"===t||"ArrowDown"===t){const e=sC(o,l,r);if(e)o.tabIndex=-1,e.tabIndex=0,e.focus();else if("ArrowUp"===t){i(r>0?aC(o,r):o.parentNode.firstChild)}else{i(r>0?aC(o,r,"lastChild"):o.parentNode.lastChild)}}else if("Home"===t){i(r>0?aC(o,r):o.parentNode.firstChild)}else if("End"===t){i(r>0?aC(o,r,"lastChild"):o.parentNode.lastChild)}else if("PageDown"===t||"PageUp"===t){let e=o;for(let t=0;lC(e,l,r)&&t<5;e=lC(e,l,r))t++;i(e)}}),[a,r]);(0,nr.useKeyDownEffect)(t,{key:["up","down","left","right","pageup","pagedown","home","end"]},o,[t,o,...n])}var dC=n(63247),uC=n(76611);const pC=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function mC(e,t,n){const r=t.colors,a=n?"color":"background";return r.find((t=>{try{return(0,dC.default)(t,e,a)}catch(e){return!1}}))}function fC(e,t){const{color:n,backgroundColor:r,font:a,fontWeight:o,backgroundTextMode:l,textAlign:i,letterSpacing:s,lineHeight:c,isItalic:d,isUnderline:u,padding:p,fontSize:m}=e;let f={textAlign:i,letterSpacing:s/100+"em",fontWeight:o,textDecoration:u?"underline":null,fontStyle:d?"italic":null,fontFamily:(0,Mn.generateFontFamily)(a),...(0,Nr.default)(n,"color")};return t||(f={...f,fontSize:m,lineHeight:c,padding:p,backgroundTextMode:l}),l===Hn.BACKGROUND_TEXT_MODE.NONE||t&&l===Hn.BACKGROUND_TEXT_MODE.HIGHLIGHT||(f={...f,...(0,Nr.default)(r,"background")}),f}function gC(e){return e!==_e?e:null}function hC(e){const{color:t,fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=(0,Ir.getHTMLInfo)(e);return{color:t!==_e?t:(0,BT.default)(0,0,0),fontWeight:gC(n),isItalic:gC(r),isUnderline:gC(a),letterSpacing:gC(o)}}function EC(e,t,n,r){const a=Be===n?[]:e.map((e=>{let{content:t,backgroundColor:n}=e;return r?n:(0,Ir.getHTMLInfo)(t).color})).filter((e=>e!==_e)).filter((e=>e&&!mC(e,t,!0))),o=Fe===n?[]:e.map((e=>({...Bn(e,pC),...hC(e.content)}))).filter((e=>!function(e,t){const n=t.textStyles,r=(0,uC.default)(fC(e));return n.find((e=>r===(0,uC.default)(fC(e))))}(e,t)));return{colors:a,textStyles:o}}function bC(e,t){const n=e.map((e=>{let{backgroundColor:t}=e;return t||null})).filter((e=>e&&!mC(e,t,!1)));return{colors:n}}function yC(e,t){return t.length>0&&t.every((t=>{let{type:n}=t;return e===n}))}const _C=function(e){let{presetType:t,isBackgroundColor:n}=e;const{currentPage:r,currentStoryStyles:a={colors:[]},selectedElements:o,globalStoryStyles:l={colors:[],textStyles:[]},updateStory:i}=xa((e=>{let{state:{currentPage:t,selectedElements:n,story:{globalStoryStyles:r,currentStoryStyles:a}},actions:{updateStory:o}}=e;return{currentPage:t,currentStoryStyles:a,selectedElements:n,globalStoryStyles:r,updateStory:o}})),{colors:s,textStyles:c}=l,{colors:d}=a,p=yC("text",o),m=o?.[0]?.id===r?.elements?.[0]?.id,f=(0,u.useCallback)(((e,a)=>{return p?{...e,...EC(o,a,t,n)}:m?{...e,...(l=r,i=a,{colors:[l.backgroundColor].filter((e=>e&&!mC(e,i,!1)))})}:{...e,...bC(o,a)};var l,i}),[r,m,p,t,o,n]),g=(0,u.useCallback)((e=>{i({properties:{currentStoryStyles:{colors:fr([...d,...e.colors])}}})}),[d,i]),h=(0,u.useCallback)((e=>{i({properties:{globalStoryStyles:{textStyles:fr([...c,...e.textStyles]),colors:fr([...s,...e.colors])}}})}),[s,c,i]),E=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?a:l;if((e=f(e,n)).colors?.length>0||e.textStyles?.length>0)return t?g(e,n):h(e,n),e}),[f,a,l,h,g]);return{addGlobalPreset:e=>(e.stopPropagation(),E({textStyles:[],colors:[]})),addLocalPreset:e=>(e.stopPropagation(),E({colors:[]},!0))}};function vC(){return vC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vC.apply(this,arguments)}const wC=p.default.button.withConfig({displayName:"colorAdd__AddColorAction",componentId:"sc-1s3q8di-0"})(["cursor:pointer;background-color:transparent;color:",";border-color:",";border-width:1px;border-style:dashed;border-radius:50%;height:","px;width:","px;padding:0;svg{height:100%;width:100%;}:hover{border-color:",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),24,24,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),Hu);const TC=function ColorAdd(e){let{isLocal:t=!1,isGlobal:n=!1,isBackground:r=!1,...a}=e;const{addGlobalPreset:o,addLocalPreset:l}=_C({presetType:Fe,isBackgroundColor:r});if(!t&&!n)return null;const i=t?(0,d.__)("Add local color","web-stories"):(0,d.__)("Add global color","web-stories");return c.createElement(wC,vC({tabIndex:"0",onClick:t?l:o,"aria-label":i},a),c.createElement(fy,null))};function SC(){return SC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SC.apply(this,arguments)}const CC=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),IC=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"basicColorList__SwatchList",componentId:"sc-10h6tzp-0"})(["display:flex;max-width:100%;flex-wrap:wrap;gap:6px;"]),xC=(0,p.default)(Swatch).attrs((e=>{let{isSelected:t}=e;return{role:"option","aria-selected":t}})).withConfig({displayName:"basicColorList__StyledSwatch",componentId:"sc-10h6tzp-1"})(["",";",""],CC,(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["border:2px solid ",";"],n.colors.border.defaultActive)}));function AC(e){if(!e)return"";const t=(0,Nr.default)(e);return t.backgroundColor||t.backgroundImage}function ConditionalTooltip(e){let{tooltip:t,children:n}=e;return t?c.createElement(Tooltip,{title:t},n):n}const kC=function BasicColorList(e){let{color:t,colors:n,handleClick:r,allowsOpacity:a,allowsGradient:o,isLocal:l=!1,isGlobal:i=!1,isEditMode:s,changedStyle:p,...m}=e;const f=AC(t),g=(0,u.useRef)(null);cC({ref:g});const h=n.map(AC).findIndex((e=>f===e));let E=0;const b=l?(0,d.__)("local","web-stories"):(0,d.__)("global","web-stories"),y="background"===p;return c.createElement(c.Fragment,null,n.length>0&&c.createElement(IC,SC({ref:g},m),n.map(((e,t)=>{const n=!a&&_T(e),i=!o&&vT(e),u=(n||i)&&!s;let p=null;u&&!s&&(p=n?(0,d.__)("Page background colors cannot have an opacity.","web-stories"):(0,d.__)("Gradient not allowed for Text","web-stories"));const m=AC(e),g=s?(0,Ze.default)(
/* translators: First %s is the color type, second %s is the color as a string */
(0,d.__)("Delete %1$s color: %2$s","web-stories"),b,m):m,y=f===m;let _=t===E?0:-1;return h>=0?_=y?0:-1:u&&t===E&&(E++,_=-1),c.createElement(ConditionalTooltip,{key:m,tooltip:p},c.createElement(xC,{onClick:()=>r(e,l),pattern:e,isSelected:y,isDisabled:u,tabIndex:_,title:g},s&&c.createElement(Du.default,null)))})),(l||i)&&c.createElement(TC,{isLocal:l,isGlobal:i,isBackground:y})),!n.length&&(l||i)&&c.createElement(TC,{isLocal:l,isGlobal:i,isBackground:y}))};var OC=n(98415);const NC=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-bvt4vo-0"})(["margin-left:12px;"]),PC=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-bvt4vo-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const RC=function ConfirmationDialog(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(wo.getItemByKey(vo[pS])),o=`cb-${(0,ue.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This is a global color. Deleting this color will remove it from the Saved Colors across all stories and the color will no longer be available to any other users on the site.","web-stories")),c.createElement(PC,null,c.createElement(OC.Checkbox,{id:o,checked:r,onChange:()=>{wo.setItemByKey(vo[pS],!r),a(!r)}}),c.createElement(NC,{htmlFor:o},c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};const MC=function(e){let{onEmpty:t=(()=>{})}=e;const{currentStoryStyles:n,globalStoryStyles:r,updateStory:a}=xa((e=>{let{state:{story:{globalStoryStyles:t,currentStoryStyles:n}},actions:{updateStory:r}}=e;return{currentStoryStyles:n,globalStoryStyles:t,updateStory:r}})),{colors:o}=r||{},{colors:l}=n||{},i=l?.length>0,s=(0,u.useCallback)((e=>{const n=o.filter((t=>t!==e));a({properties:{globalStoryStyles:{...r||{},colors:n}}}),0!==n.length||i||t()}),[o,a,i,r,t]),c=(0,u.useCallback)((e=>{const n=l.filter((t=>t!==e));a({properties:{currentStoryStyles:{colors:n}}}),0===n.length&&0===o.length&&t()}),[o,l,a,t]);return{deleteLocalColor:c,deleteGlobalColor:s}},LC=p.default.div.withConfig({displayName:"basicColorPicker__Body",componentId:"sc-c2cm2c-0"})(["display:flex;flex-direction:column;padding:8px 16px 0;overflow:auto;",";"],x.scrollbarCSS),DC=p.default.div.withConfig({displayName:"basicColorPicker__Footer",componentId:"sc-c2cm2c-1"})(["padding:8px 16px 16px;display:flex;flex-direction:column;"]),BC=p.default.div.withConfig({displayName:"basicColorPicker__SavedColors",componentId:"sc-c2cm2c-2"})(["border-bottom:1px solid ",";padding-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),FC=p.default.div.withConfig({displayName:"basicColorPicker__DefaultColors",componentId:"sc-c2cm2c-3"})([""]),HC=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"basicColorPicker__Label",componentId:"sc-c2cm2c-4"})(["color:",";margin:12px 0 10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),UC=(0,p.default)(HC).withConfig({displayName:"basicColorPicker__DefaultText",componentId:"sc-c2cm2c-5"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),zC=(0,p.default)(m.Button).withConfig({displayName:"basicColorPicker__StyledButton",componentId:"sc-c2cm2c-6"})(["display:flex;justify-content:center;align-items:center;gap:4px;flex-basis:100%;"]),GC=(0,p.default)(Ve.Text).withConfig({displayName:"basicColorPicker__StyledText",componentId:"sc-c2cm2c-7"})(["padding:5px 10px;"]),jC=(0,p.default)(_y).withConfig({displayName:"basicColorPicker__StyledPlus",componentId:"sc-c2cm2c-8"})(["width:32px;margin:-8px 0;"]),YC=p.default.div.withConfig({displayName:"basicColorPicker__EyedropperWrapper",componentId:"sc-c2cm2c-9"})(["display:flex;"]);const ZC=function BasicColorPicker(e){let{color:t,handleColorChange:n,allowsOpacity:r,allowsGradient:a,allowsSavedColors:o,showCustomPicker:l,handleClose:i,showDialog:s,setShowDialog:p,changedStyle:g,hasEyedropper:h,allowsSavedColorDeletion:E,shouldCloseOnSelection:b}=e;const{savedColors:y,storyColors:_}=xa((e=>({savedColors:e.state.story?.globalStoryStyles?.colors||[],storyColors:e.state.story?.currentStoryStyles?.colors||[]}))),[v,w]=(0,u.useState)(!1),[T,S]=(0,u.useState)(null),C=_.length>0||y.length>0,{initEyedropper:I}=aT({onChange:e=>n({color:e})}),{deleteLocalColor:x,deleteGlobalColor:A}=MC({onEmpty:()=>w(!1)}),k=e=>{n(e),b&&i()},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!v)return void k(e);if(t)return void x(e);const n=wo.getItemByKey(vo[pS]);n?A(e):(p(!0),S(e))},N=!b||E;return c.createElement(c.Fragment,null,N&&c.createElement(GS,{handleClose:i,isEditMode:v,setIsEditMode:w,hasPresets:C&&o},c.createElement(UC,null,(0,d.__)("Color","web-stories"))),c.createElement(LC,null,h&&c.createElement(YC,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:I(),onPointerEnter:I(!1)},c.createElement(ty,null)),c.createElement(GC,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Sample color","web-stories"))),o&&c.createElement(BC,null,c.createElement(HC,{id:"colorpicker-story-colors-title"},(0,d.__)("Current story","web-stories")),c.createElement(kC,{color:t,colors:_,handleClick:O,isLocal:!0,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-story-colors-title",isEditMode:v,"data-testid":"saved-story-colors",changedStyle:g}),c.createElement(HC,{id:"colorpicker-saved-colors-title"},(0,d.__)("Saved colors","web-stories")),c.createElement(kC,{color:t,colors:y,isGlobal:!0,handleClick:O,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-saved-colors-title",isEditMode:v,changedStyle:g})),c.createElement(FC,null,c.createElement(HC,{id:"colorpicker-default-colors-title"},(0,d.__)("Default","web-stories")),c.createElement(kC,{color:t,colors:fS,handleClick:e=>{k(e),w(!1)},allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-default-colors-title",isEditMode:!1}))),c.createElement(DC,null,c.createElement(zC,{onClick:l,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Custom","web-stories"),c.createElement(jC,null))),s&&c.createElement(RC,{onClose:()=>p(!1),onPrimary:()=>{A(T),S(null),p(!1)}}))},WC=p.default.div.withConfig({displayName:"colorPicker__Container",componentId:"sc-1xsejx6-0"})(["border-radius:8px;background:",";user-select:none;display:flex;flex-direction:column;gap:12px;align-items:stretch;",";overflow:hidden;&.picker-appear{opacity:0.01;margin-top:-10px;&.picker-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{maxHeight:t}=e;return t?`\n          height: ${t}px;\n          width: ${208+x.SCROLLBAR_WIDTH}px;\n        `:"\n          width: 208px;\n        "}));const VC=function ColorPicker(e){let{onChange:t,isEyedropperActive:n=!1,color:r=null,allowsGradient:a=!1,allowsOpacity:o=!0,allowsSavedColors:l=!1,hasEyedropper:i=!0,maxHeight:s=null,onClose:p=(()=>{}),changedStyle:m="background",onDimensionChange:f=(()=>{}),allowsSavedColorDeletion:g=!0,shouldCloseOnSelection:h=!1}=e;const[E,b]=(0,u.useState)(!1),[y,_]=(0,u.useState)(vT(r)),v=(0,u.useCallback)((()=>{_(!0),f()}),[f]),w=(0,u.useCallback)((()=>{_(!1),f()}),[f]),{actions:{pushTransform:T}}=(0,C.useTransform)(),{selectedElementIds:S=[]}=xa((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),I=(0,u.useDebouncedCallback)(t,100,{leading:!0}),x=(0,u.useRef)(!0);(0,u.useEffect)((()=>()=>{x.current=!1}),[]);const A=(0,u.useCallback)((e=>{x.current?I(e):t(e),S.forEach((t=>{T(t,{color:e,style:m,staticTransformation:!0})}))}),[t,I,S,m,T]),k=(0,u.useRef)();(0,u.useFocusOut)(k,(()=>{n||E||p()}),[n,E]);const O=(0,u.useRef)(document.activeElement),N=(0,u.useCallback)((e=>{O.current&&O.current.focus(),p(e)}),[p]);(0,nr.useKeyDownEffect)(k,"esc",N),DT({ref:k});const P=y?tC:ZC;return c.createElement(G_.default,{nodeRef:k,in:!0,appear:!0,classNames:"picker",timeout:300},c.createElement(WC,{role:"dialog","aria-label":(0,d.__)("Color and gradient picker","web-stories"),ref:k,maxHeight:s},c.createElement(P,{color:r,allowsGradient:a,allowsOpacity:o,handleColorChange:A,showCustomPicker:v,hideCustomPicker:w,handleClose:N,hasEyedropper:i,allowsSavedColors:l,showDialog:E,setShowDialog:b,changedStyle:m,allowsSavedColorDeletion:g,shouldCloseOnSelection:h})))};function $C(){return $C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$C.apply(this,arguments)}const qC=p.default.div.withConfig({displayName:"colorInput__Preview",componentId:"sc-1h4cp44-0"})(["height:36px;color:",";cursor:pointer;position:relative;width:100%;padding:0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),KC=(0,p.default)(bT).withConfig({displayName:"colorInput__Input",componentId:"sc-1h4cp44-1"})(["min-width:100px;div{background-color:transparent;}input{padding-left:26px;}"]),XC=(0,p.default)(Tooltip).withConfig({displayName:"colorInput__Tooltip",componentId:"sc-1h4cp44-2"})(["width:100%;height:100%;"]),QC=(0,p.css)(["position:absolute;top:0;left:0;border-radius:50px;width:24px;height:24px;"]),JC=(0,p.css)(["overflow:hidden;border:1px solid ",";outline:none;background:transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),eI=(0,p.css)(["",";padding-right:6px;"],Uu),tI=(0,p.default)(qC).attrs({as:"button",type:"button"}).withConfig({displayName:"colorInput__ColorButton",componentId:"sc-1h4cp44-3"})(["border-radius:4px;"," display:flex;&:focus{box-shadow:0px 0px 0 2px ",",0px 0px 0 4px ",";border-color:",";}"],JC,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover})),nI=p.default.div.withConfig({displayName:"colorInput__ColorPreview",componentId:"sc-1h4cp44-4"})([""," top:6px;left:6px;padding:0;background:transparent;cursor:pointer;"],QC),rI=p.default.div.withConfig({displayName:"colorInput__TextualPreview",componentId:"sc-1h4cp44-5"})(["padding:6px 12px 6px 38px;text-align:left;flex-grow:1;height:32px;"]),aI=(0,p.default)(rI).withConfig({displayName:"colorInput__MixedLabel",componentId:"sc-1h4cp44-6"})(["align-self:center;padding:6px 6px 6px 38px;"]),oI=(0,p.default)(Swatch).withConfig({displayName:"colorInput__StyledSwatch",componentId:"sc-1h4cp44-7"})(["",";"],Hu),lI=p.default.div.withConfig({displayName:"colorInput__ChevronContainer",componentId:"sc-1h4cp44-8"})(["width:",";display:flex;justify-content:",";align-items:center;align-self:center;svg{width:24px;height:24px;}"],(e=>{let{isSmall:t}=e;return t?"28px":"58px"}),(e=>{let{isSmall:t}=e;return t?"center":"flex-end"})),iI=()=>n.e(341).then(n.bind(n,66286)),sI=(0,u.forwardRef)((function ColorInput(e,t){let{onChange:n,value:r=null,label:a=null,changedStyle:o,pickerPlacement:l=_d.PLACEMENT.RIGHT_START,isInDesignMenu:i=!1,hasInputs:s=!0,pickerProps:p,spacing:m,tooltipPlacement:f,colorFocusTrap:g=!1,...h}=e;const E=(0,u.useRef)(),b=(0,u.useRef)(),y=r===_e;r=y?"":r;const _=r?lT(r):{color:{r:0,g:0,b:0,a:0}},v=rT(r),[w,T]=(0,u.useState)(!1),S=(0,u.useRef)(null),{isEyedropperActive:C}=Os((e=>{let{state:{isEyedropperActive:t}}=e;return{isEyedropperActive:t}})),{isRTL:I,styleConstants:{topOffset:x}={}}=H(),[A,k]=(0,u.useState)(l),{refs:{sidebar:O}}=Am(),N=(0,u.useCallback)((e=>{if(l?.startsWith("top")){const{top:t}=e.current?.getBoundingClientRect()||{};t<=x&&k(l.replace("top","bottom"))}}),[l,x]),P=r?.type,R=(!P||"solid"===P)&&s,M={onClick:()=>T(!0),"aria-label":a,onPointerEnter:()=>iI(),onFocus:()=>iI(),tabIndex:h.tabIndex};(0,u.useUnmount)((()=>()=>T(!1)));const L=(0,u.useCallback)((()=>T(!1)),[]),D=(0,d.__)("Open color picker","web-stories"),B=i?eI:Uu;return c.createElement(c.Fragment,null,R?c.createElement(qC,{ref:S},g?c.createElement(LT,{ref:b,inputRef:E,inputLabel:a},c.createElement(KC,$C({ref:E,"aria-label":a,value:y?null:r,onChange:n,isIndeterminate:y,placeholder:y?ve:"",containerStyleOverride:B,id:(0,ue.default)(),onKeyDown:e=>MT(e,b),inputClassName:NT.CONTEXT_MENU_SKIP_ELEMENT},h))):c.createElement(KC,$C({ref:t,"aria-label":a,value:y?null:r,onChange:n,isIndeterminate:y,placeholder:y?ve:"",containerStyleOverride:B,id:(0,ue.default)()},h)),c.createElement(nI,null,c.createElement(XC,{title:D,hasTail:!0,placement:f},c.createElement(oI,$C({isSmall:!0,pattern:_,id:(0,ue.default)()},M))))):c.createElement(XC,{title:D,hasTail:!0,placement:f},c.createElement(tI,$C({ref:S,id:(0,ue.default)()},M),c.createElement(nI,null,c.createElement(Swatch,{isPreview:!0,role:"status",tabIndex:"-1",pattern:_,isIndeterminate:y})),s?c.createElement(rI,null,c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},v)):c.createElement(c.Fragment,null,y&&c.createElement(aI,null,c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},ve)),c.createElement(lI,{isSmall:y},c.createElement(Gg.default,null))))),c.createElement(PT.Popup,{isRTL:I,anchor:S,dock:i?null:O,isOpen:w&&!C,placement:A,spacing:m,topOffset:x,refCallback:N,resetXOffset:!0,renderContents:e=>{let{propagateDimensionChange:t}=e;return c.createElement(VC,$C({color:y?null:r,isEyedropperActive:C,onChange:n,onClose:L,changedStyle:o,onDimensionChange:t},p))}}))})),cI=sI;var dI=n(93302),uI=n.n(dI);function pI(e,t){let{allowEmpty:n,isFloat:r,min:a,max:o}=t;if(`${e}`.length>0){const t=r?parseFloat(e):parseInt(e);let n=t;return void 0!==a&&(n=Math.max(a,t)),void 0!==o&&(n=Math.min(o,t)),isNaN(n)?null:n}return n?"":null}const mI=e=>{let{allowEmpty:t,isFloat:n,max:r,min:a,onChange:o,value:l,ref:i}=e;const s=(0,u.useRef)(null),c=i||s,d=(0,u.useRef)(l),p=(0,u.useRef)(!1),[m,f]=(0,u.useState)(l),g=(0,u.useMemo)((()=>({allowEmpty:t,isFloat:n,max:r,min:a})),[t,n,r,a]),h=(0,u.useCallback)((e=>{let t=pI(d.current,g);if(!p.current){const e=pI(m,g);null!==e&&(t=e)}p.current=!1,null!==t&&(f(t),t!==d.current&&o(e,t))}),[m,o,g]),E=(0,u.useCallback)((e=>{f(e.target.value)}),[]),b=(0,u.useCallback)((e=>{const{altKey:t,key:n}=e,l=function(e,t){let{allowEmpty:n,isFloat:r,max:a,min:o}=t;if(n&&0===`${e}`.length)return!0;const l=r?parseFloat(e):parseInt(e);return!(void 0!==o&&l<o||void 0!==a&&l>a||isNaN(l))}(m,g);let i=l?pI(m,g):0;const s=uI()(g.isFloat&&t?.1:1);"ArrowUp"===n?i=void 0!==r?Math.min(r,uI()(i).plus(s)):uI()(i).plus(s):"ArrowDown"===n&&(i=void 0!==a?Math.max(a,uI()(i).minus(s)):uI()(i).minus(s)),o(e,Number(i))}),[m,r,a,o,g]),y=(0,u.useCallback)((()=>{f(d.current),p.current=!0,c&&c.current?.blur()}),[c]);return(0,u.useEffect)((()=>{d.current=l,f(l)}),[l]),{currentValue:m,inputRef:c,handleBlur:h,handleChange:E,handleEsc:y,handleKeyUpAndDown:b,isIndeterminate:d.current===m}};function fI(){return fI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fI.apply(this,arguments)}const gI=(0,u.forwardRef)((function NumericInput(e,t){let{allowEmpty:n,isFloat:r,onChange:a,max:o,min:l,value:i="",isIndeterminate:s,...d}=e;const{currentValue:u,handleBlur:p,handleChange:m,handleEsc:f,handleKeyUpAndDown:g,inputRef:h,isIndeterminate:E}=mI({allowEmpty:n,isFloat:r,onChange:a,max:o,min:l,value:i,isIndeterminate:s,ref:t});return(0,nr.useKeyDownEffect)(h,{key:["up","alt+up","down","alt+down"],editable:!0},g,[g]),(0,nr.useKeyDownEffect)(h,{key:["escape"],editable:!0},f,[f]),(0,nr.useKeyDownEffect)(h,{key:["enter"],editable:!0},p,[p]),c.createElement(hT,fI({ref:h,onBlur:p,onChange:m,value:String(u),isIndeterminate:E&&s},d))}));const hI=function(e){if(!e||e===_e)return null;if(!("solid"===e.type||!e.type)){const{alpha:t=1}=e;return 100*t}const{color:{a:t=1}}=e;return Math.round(100*t)};function EI(){return EI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EI.apply(this,arguments)}const bI=(0,p.default)(gI).withConfig({displayName:"opacityInput__Input",componentId:"sc-xy6710-0"})(["min-width:100px;div{background-color:transparent;}"]),yI=(0,p.css)(["",";width:76px;padding-right:6px;"],Uu),_I=(0,u.forwardRef)((function OpacityInput(e,t){let{value:n,onChange:r,isInDesignMenu:a,...o}=e;const[l,i]=(0,u.useState)(""),s=(0,u.useCallback)(((e,t)=>{i(t),isNaN(t)||r(t/100)}),[r]),p=(0,u.useCallback)((()=>i(hI(n))),[n]);(0,u.useEffect)((()=>p()),[p,n]);const m=a?yI:Uu;return c.createElement(bI,EI({ref:t,"aria-label":(0,d.__)("Opacity","web-stories"),onChange:s,value:l,unit:(0,d._x)("%","Percentage","web-stories"),suffix:c.createElement(lh,null),min:0,max:100,allowEmpty:!1,isFloat:!1,containerStyleOverride:m,id:(0,ue.default)()},o))})),vI=p.default.div.withConfig({displayName:"activeOpacity__Space",componentId:"sc-9gk8t7-0"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),wI=p.default.div.withConfig({displayName:"activeOpacity__OpacityWrapper",componentId:"sc-9gk8t7-1"})(["width:",";"],(e=>{let{isInDesignMenu:t}=e;return t?"calc(39% - 10px)":"calc(47% - 10px)"})),TI=e=>{let{handleOpacityChange:t,isInDesignMenu:n,opacityFocusTrap:r,tabIndex:a,value:o}=e;const l=(0,u.useRef)(),i=(0,u.useRef)();return r?c.createElement(LT,{ref:l,inputRef:i,inputLabel:(0,d.__)("Opacity","web-stories"),styleOverride:(0,p.css)(["width:",";"],n?"calc(39%)":"calc(47%)")},c.createElement(vI,null),c.createElement(wI,{isInDesignMenu:n},c.createElement(_I,{ref:i,tabIndex:a,inputClassName:NT.CONTEXT_MENU_SKIP_ELEMENT,value:o,onChange:t,isInDesignMenu:n,onKeyDown:e=>MT(e,l)}))):c.createElement(c.Fragment,null,c.createElement(vI,null),c.createElement(wI,{isInDesignMenu:n},c.createElement(_I,{tabIndex:a,value:o,onChange:t,isInDesignMenu:n})))},SI={FLOATING_MENU:{x:0,y:12},DEFAULT_SIDEBAR:{x:12,y:0}},CI=(0,p.css)(["display:flex;align-items:center;"]),II=p.default.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],CI,(e=>{let{isInDesignMenu:t}=e;return t?6:8}),(e=>{let{width:t}=e;return t?`${t}px`:"inherit"}));II.propTypes={isInDesignMenu:Ea().bool,width:Ea().number};const xI=p.default.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],CI,(e=>{let{isInDesignMenu:t}=e;return t?0:6})),AI=p.default.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-2"})(["",""],(e=>{let{hasInputs:t}=e;return t&&"width: calc(53% - 10px);"})),kI=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-3"})(["",";"],Hu),OI=(0,d.__)("Color input","web-stories"),NI=(0,u.forwardRef)((function Color(e,t){let{onChange:n,allowsGradient:r=!1,allowsOpacity:a=!0,allowsSavedColors:o=!1,value:l=null,label:i=null,containerLabelBase:s=OI,changedStyle:p=null,hasEyedropper:m=!1,pickerHasEyedropper:f=!0,maxHeight:g=null,shouldCloseOnSelection:h=!1,allowsSavedColorDeletion:E=!0,pickerPlacement:b=_d.PLACEMENT.RIGHT_START,isInDesignMenu:y=!1,hasInputs:_=!0,width:v,tabIndex:w,opacityFocusTrap:T,colorFocusTrap:S}=e;const C=(0,u.useCallback)((e=>n(oT(l,e))),[l,n]),I=(0,Ze.default)(
/* translators: 1: the input section in the editor. 2: color input label name. */
(0,d.__)("%1$s: %2$s","web-stories"),s,i),x=l!==_e&&Boolean(rT(l))&&_,{initEyedropper:A}=aT({onChange:e=>n({color:e})}),k=(0,d.__)("Pick a color from canvas","web-stories"),O=y||m?_d.PLACEMENT.BOTTOM:_d.PLACEMENT.BOTTOM_START,N=v&&l===_e;return c.createElement(II,{"aria-label":I,isInDesignMenu:y,width:!N&&v?v:null},m&&c.createElement(Tooltip,{title:k,hasTail:!0,placement:y?_d.PLACEMENT.BOTTOM:_d.PLACEMENT.BOTTOM_START},c.createElement(kI,{id:(0,ue.default)(),tabIndex:w,"aria-label":k,onClick:A(),onPointerEnter:A(!1)},c.createElement(ty,null))),c.createElement(xI,{isInDesignMenu:y},c.createElement(AI,{hasInputs:_},c.createElement(cI,{ref:t,tabIndex:w,onChange:n,value:l,label:i,changedStyle:p,pickerPlacement:b,hasInputs:_,isInDesignMenu:y,spacing:y?SI.FLOATING_MENU:SI.DEFAULT_SIDEBAR,tooltipPlacement:O,colorFocusTrap:S,pickerProps:{allowsGradient:r,allowsOpacity:a,allowsSavedColors:o,hasEyedropper:f,allowsSavedColorDeletion:E,maxHeight:g,shouldCloseOnSelection:h}})),a&&x&&c.createElement(TI,{handleOpacityChange:C,isInDesignMenu:y,opacityFocusTrap:T,tabIndex:w,value:l})))})),PI=NI;function RI(){return RI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RI.apply(this,arguments)}const MI=(0,p.css)(["width:100%;height:100%;position:absolute;top:0;left:0;border-radius:",";"],(e=>{let{theme:t}=e;return t.borders.radius.small})),LI=p.default.div.withConfig({displayName:"filterToggle__Overlay",componentId:"sc-1xtaed1-0"})(["",";"],MI),DI=p.default.div.withConfig({displayName:"filterToggle__Filter",componentId:"sc-1xtaed1-1"})(["",";",";"],MI,(e=>{let{filter:t}=e;return(0,Nr.default)(t)})),BI=p.default.button.withConfig({displayName:"filterToggle__Button",componentId:"sc-1xtaed1-2"})((e=>{let{theme:t}=e;return(0,p.css)(["border-radius:",";width:100%;height:48px;position:relative;display:flex;align-items:center;justify-content:space-around;box-sizing:border-box;padding:0;margin:0;background:transparent;border:none;cursor:pointer;",";img{width:100%;height:100%;border-radius:",";}","{",";}&:active > ","{box-shadow:0px 0px 0 2px ",",0px 0px 0 3px ",";}&:disabled{pointer-events:none;","{background-color:",";}}transition:background-color ",",color ",";"],t.borders.radius.small,Hu,t.borders.radius.small,LI,(e=>{let{isToggled:n}=e;return n&&`\n        box-shadow:\n          0px 0px 0 2px ${t.colors.bg.secondary},\n          0px 0px 0 3px ${t.colors.fg.primary}`}),LI,t.colors.bg.secondary,t.colors.fg.primary,LI,t.colors.opacity.black64,f.BUTTON_TRANSITION_TIMING,f.BUTTON_TRANSITION_TIMING)})),FI=p.default.div.withConfig({displayName:"filterToggle__Wrapper",componentId:"sc-1xtaed1-3"})(["width:60px;"]),HI=(0,p.default)(Ve.Text).attrs({forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"filterToggle__StyledText",componentId:"sc-1xtaed1-4"})(["color:",";margin-top:8px;text-align:center;width:100%;display:block;"],(e=>{let{theme:t}=e;return t.colors.border.defaultActive}));const UI=function FilterToggle(e){let{isToggled:t,filter:n=null,children:r,label:a,...o}=e;return c.createElement(FI,null,c.createElement(BI,RI({},o,{isToggled:t,"aria-pressed":t}),r,c.createElement(DI,{filter:n}),c.createElement(LI,null)),a&&c.createElement(HI,null,a))},zI={CIRCLE:"circle",RECTANGLE:"rectangle",NONE:"none"};var GI,jI,YI=n(36471);function ZI(){return ZI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZI.apply(this,arguments)}const SvgLandscape=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ZI({fill:"none",viewBox:"0 0 100 93",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,GI||(GI=c.createElement("path",{d:"M33 52 .5 93h99L75 60 58 82z",fill:"currentColor",opacity:.2})),jI||(jI=c.createElement("circle",{cx:79,cy:13,fill:"currentColor",opacity:.1,r:13})))},WI=(0,c.memo)(SvgLandscape);function VI(){return VI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VI.apply(this,arguments)}const $I=p.default.section.withConfig({displayName:"mediaInput__MediaRectangle",componentId:"sc-1aevzta-0"})(["width:100%;height:100%;background-color:",";border-radius:4px;position:relative;"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),qI=(0,p.default)($I).withConfig({displayName:"mediaInput__MediaCircle",componentId:"sc-1aevzta-1"})(["border-radius:100px;height:100%;width:100%;"]),KI=p.default.div.withConfig({displayName:"mediaInput__EmptyMediaWrapper",componentId:"sc-1aevzta-2"})([""]),XI=p.default.div.withConfig({displayName:"mediaInput__ImageWrapper",componentId:"sc-1aevzta-3"})(["border-radius:","px;overflow:hidden;height:100%;display:flex;"],(e=>{let{variant:t}=e;return t===zI.CIRCLE?100:4})),QI=p.default.div.withConfig({displayName:"mediaInput__DefaultImageWrapper",componentId:"sc-1aevzta-4"})(["padding:8px;"]),JI=(0,p.default)(WI).withConfig({displayName:"mediaInput__DefaultImage",componentId:"sc-1aevzta-5"})(["width:100%;height:100%;display:block;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),ex=p.default.img.withConfig({displayName:"mediaInput__Img",componentId:"sc-1aevzta-6"})(["width:100%;height:100%;object-fit:cover;"]),tx=(0,p.css)(["min-width:100px;margin-top:0;li{display:block;}"]),nx=(0,p.default)(m.Button).withConfig({displayName:"mediaInput__Button",componentId:"sc-1aevzta-7"})((e=>{let{showImage:t}=e;return(0,p.css)(["background-color:",";position:relative;"," &:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),t&&(0,p.css)(["position:absolute;bottom:-8px;right:-8px;"]),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}))})),rx={[zI.RECTANGLE]:$I,[zI.CIRCLE]:qI,[zI.NONE]:KI},ax=(0,p.keyframes)(["0%,20%{color:transparent;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}40%{color:white;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}60%{text-shadow:6px 0 0 ",",12px 0 0 transparent;}80%,100%{text-shadow:6px 0 0 ",",12px 0 0 ",";}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),ox=p.default.div.withConfig({displayName:"mediaInput__LoadingDots",componentId:"sc-1aevzta-8"})(["position:absolute;top:0px;left:0px;width:100%;height:100%;pointer-events:none;border-radius:50%;flex-direction:column;justify-content:center;align-items:center;display:flex;&:after{pointer-events:none;color:",";content:'.';font-weight:bold;animation:"," 1s steps(5,end) infinite;margin-left:-12px;}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),ax),lx=(0,u.forwardRef)((function Media(e,t){let{className:n,onBlur:r,alt:a=(0,d.__)("Preview image","web-stories"),value:o,ariaLabel:l=(0,d.__)("Choose an image","web-stories"),variant:i=zI.RECTANGLE,isLoading:s,menuOptions:p=[],onMenuOption:m,openMediaPicker:g,canUpload:h=!0,menuProps:E={},imgProps:b={},isRTL:y=!1,leftOffset:_=0,...v}=e;const w=p?.length>0,[T,S]=(0,u.useState)(!1),C=(0,u.useMemo)((()=>`list-${(0,ue.default)()}`),[]),I=(0,u.useMemo)((()=>`button-${(0,ue.default)()}`),[]),x=(0,u.useRef)(null),A=rx[i],k=[{group:p}];return c.createElement(A,{className:n},i!==zI.NONE&&c.createElement(XI,{variant:i},o?c.createElement(ex,{src:o,alt:a,crossOrigin:"anonymous",decoding:"async",width:b?.width||null,height:b?.height||null}):c.createElement(QI,null,c.createElement(JI,null)),s&&c.createElement(ox,null)),h&&c.createElement(vd.BaseTooltip,{title:w?null:(0,d.__)("Open media picker","web-stories"),isRTL:y,leftOffset:_},c.createElement(nx,VI({ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),x.current=e},id:I,showImage:i!==zI.NONE,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,"aria-label":l,onClick:w?()=>S(!0):g,"aria-owns":w?C:null,"aria-pressed":T,"aria-expanded":T},v),c.createElement(Gb.default,null))),c.createElement(PT.Popup,{placement:_d.PLACEMENT.BOTTOM_END,anchor:x,isOpen:T,isRTL:y},c.createElement(YI.Menu,VI({parentId:I,listId:C,hasMenuRole:!0,options:k,onMenuItemClick:(e,t)=>{m(e,t),S(!1)},onDismissMenu:()=>S(!1),menuStylesOverride:tx},E))))}));function ix(){return ix=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ix.apply(this,arguments)}const sx=(0,p.default)(lx).withConfig({displayName:"media__StyledInput",componentId:"sc-17cx4v4-0"})(["button:focus{","}"],(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),MediaInputField=e=>{let{open:t,dropdownOptions:n,onChange:r,forwardedRef:a,value:o,isRTL:l,leftOffset:i,...s}=e;const d=(0,u.useCallback)(((e,n)=>{switch(n){case"edit":t(e);break;case"remove":case"reset":r(null)}}),[r,t]);return c.createElement(sx,ix({onMenuOption:d,menuOptions:n,openMediaPicker:t,ref:a,value:o===_e?null:o,isRTL:l,leftOffset:i},s))};const cx=(0,u.forwardRef)((function(e,t){let{buttonInsertText:n=(0,d.__)("Choose an image","web-stories"),menuOptions:r=[],onChange:a,onChangeErrorText:o=(0,d.__)("Unable to use this file type, please select a valid image type.","web-stories"),title:l=(0,d.__)("Choose an image","web-stories"),type:i="image",value:s,cropParams:p,...m}=e;const{MediaUpload:f,isRTL:g,styleConstants:{leftOffset:h}={}}=H(),E=(0,u.useCallback)((e=>{const n=[{label:(0,d.__)("Edit","web-stories"),value:"edit"},{label:(0,d.__)("Remove","web-stories"),value:"remove"},{label:(0,d.__)("Reset","web-stories"),value:"reset"}],o=s===_e?[]:n.filter((e=>{let{value:t}=e;return r.includes(t)}));return c.createElement(MediaInputField,ix({open:e,onChange:a,dropdownOptions:o,forwardedRef:t,value:s,isRTL:g,leftOffset:h},m))}),[s,a,t,g,h,m,r]);return c.createElement(f,{title:l,buttonInsertText:n,onSelect:a,onSelectErrorMessage:o,type:i,cropParams:p,render:E})})),dx=cx;function ux(){return ux=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ux.apply(this,arguments)}const px=(0,p.default)(dx).withConfig({displayName:"linkIcon__StyledMedia",componentId:"sc-1078kj7-0"})(["width:54px;height:54px;"]);const mx=function LinkIcon(e){let{handleChange:t,icon:n,isLoading:r=!1,...a}=e;const{allowedMimeTypes:{image:o},capabilities:{hasUploadMediaAction:l}}=H(),i=(0,u.useMemo)((()=>o.map((e=>Ot(e))).flat()),[o]),s=(0,u.useMemo)((()=>{let e=(0,d.__)("No image file types are currently supported.","web-stories");return i.length&&(e=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as an icon.","web-stories"),(0,It.default)(i))),e}),[i]),p=l?["edit","remove"]:["remove"];return c.createElement(px,ux({value:n||"",cropParams:{width:96,height:96},onChange:t,onChangeErrorText:s,title:(0,d.__)("Select as link icon","web-stories"),ariaLabel:(0,d.__)("Edit link icon","web-stories"),buttonInsertText:(0,d.__)("Select as link icon","web-stories"),type:o,isLoading:r,variant:zI.CIRCLE,canUpload:n&&!l||l,menuOptions:n?p:[]},a))},fx=p.default.div.withConfig({displayName:"row__Row",componentId:"sc-1olml0k-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:16px;"," ",""],(e=>{let{spaceBetween:t=!0}=e;return t&&"justify-content: space-between;"}),(e=>{let{expand:t=!0}=e;return t&&"flex: 1;"}));function gx(){return gx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gx.apply(this,arguments)}const hx={MIN:2,MAX:2048},Ex=(0,u.forwardRef)((function LinkInput(e,t){let{onChange:n,onBlur:r,onFocus:a,value:o="",hint:l,hasError:i,...s}=e;const u=(o||"").trim(),p=Dr(Br(u)),m=u.length>0&&!p;return c.createElement(fx,null,c.createElement(hT,gx({ref:t,placeholder:(0,d.__)("Web address","web-stories"),onChange:e=>n(e.target.value),onBlur:()=>{if(u?.length){const e=Br(u);e!==u&&n(e)}r&&r()},onFocus:a,value:o||"",minLength:hx.MIN,maxLength:hx.MAX,hasError:m||i,hint:m?(0,d.__)("Invalid web address.","web-stories"):l,containerStyleOverride:Uu},s)))})),bx=Ex;const yx=function MediaUploadButton(e){let{onInsert:t,renderButton:n,buttonInsertText:r}=e;const{allowedMimeTypes:{image:a,vector:o,video:l},MediaUpload:i}=H(),s=(0,u.useMemo)((()=>[...a,...o,...l]),[a,o,l]),p=(0,u.useMemo)((()=>s.map((e=>Ot(e))).flat()),[s]),{canTranscodeResource:m,resetWithFetch:f,postProcessingResource:g,optimizeVideo:h,optimizeGif:E}=vi((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:b}=Da(),{showSnackbar:y}=(0,Er.useSnackbar)(),_=(0,u.useMemo)((()=>b?[...Pa,...a,...o,...l]:[...a,...o,...l]),[a,o,l,b]),v=(0,u.useMemo)((()=>Pa.filter((e=>!l.includes(e)))),[l]);let w=(0,d.__)("No file types are currently supported.","web-stories");p.length&&(w=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,It.default)(p)));const T=(0,u.useCallback)((e=>{try{b&&m(e)&&(v.includes(e.mimeType)&&h({resource:e}),"image/gif"===e.mimeType&&E({resource:e})),t(e),g(e)}catch(e){y({message:e.message,dismissible:!0})}}),[b,m,t,E,h,g,y,v]);return c.createElement(i,{onSelect:T,onSelectErrorMessage:w,onClose:f,type:_,render:n,buttonInsertText:r})};function _x(){return _x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(this,arguments)}const vx="ON",wx="OFF",Tx=p.default.h3.withConfig({displayName:"switch__VisuallyHiddenRadioGroupLabel",componentId:"sc-1kebe5q-0"})(["",";"],j_.visuallyHidden),Sx=p.default.span.withConfig({displayName:"switch__SlidingButton",componentId:"sc-1kebe5q-1"})(["position:absolute;display:block;top:0;left:0;width:50%;height:","px;border-radius:100px;transition:all 0.15s ease-out;z-index:0;",""],32,(e=>{let{hasOffset:t}=e;return t&&"left: 50%"})),Cx=p.default.div.withConfig({displayName:"switch__SwitchContainer",componentId:"sc-1kebe5q-2"})(["position:relative;height:","px;display:flex;flex-direction:row;justify-content:center;align-items:center;appearance:none;background:",";border-radius:100px;color:",";cursor:pointer;",";"],32,(e=>{let{theme:t}=e;return t.colors.divider.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{disabled:t,theme:n}=e;return t?(0,p.css)(["cursor:default;background:",";","{background-color:",";}"],n.colors.divider.tertiary,Sx,n.colors.interactiveBg.disable):(0,p.css)([":hover ","{background-color:",";}"],Sx,n.colors.interactiveBg.primaryHover)})),Ix=p.default.input.attrs({type:"radio"}).withConfig({displayName:"switch__HiddenRadioButton",componentId:"sc-1kebe5q-3"})(["position:absolute;height:0;width:0;padding:0;min-width:unset;appearance:none;border:0;box-shadow:none;margin:-1px;outline:none;overflow:hidden;opacity:0;"]),xx=(0,p.default)(Ve.Text).attrs({forwardedAs:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"switch__RadioButtonLabel",componentId:"sc-1kebe5q-4"})(["display:flex;align-items:center;justify-content:center;flex:1;height:","px;width:50%;padding:0px 6px;z-index:1;color:",";background-color:",";border-radius:100px;cursor:pointer;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;transition:all 0.15s ease-out;"," :focus-within ~ span{",";}"],32,(e=>{let{isActive:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.secondary}),(e=>{let{isActive:t,theme:n}=e;return t&&n.colors.interactiveBg.primaryNormal}),(e=>{let{disabled:t,theme:n}=e;return t&&(0,p.css)(["cursor:default;color:",";"],n.colors.fg.disable)}),Fu.focusCSS),Ax=(0,u.forwardRef)((function(e,t){let{className:n,disabled:r,groupLabel:a,id:o,offLabel:l,onChange:i,onLabel:s,value:d,...p}=e;const m=(0,u.useMemo)((()=>({group:o||(0,ue.default)(),offInput:(0,ue.default)(),onInput:(0,ue.default)()})),[o]),f=(0,u.useCallback)((e=>{i(e,e.target.value===vx)}),[i]);return c.createElement(Cx,{ref:t,className:n,role:"radiogroup","aria-labelledby":m.group,"aria-disabled":r,disabled:r},c.createElement(Tx,{id:m.group},a),c.createElement(xx,{htmlFor:m.onInput,isActive:d,disabled:r},s,c.createElement(Ix,_x({checked:d,disabled:r,id:m.onInput,onChange:f,value:vx},p))),c.createElement(xx,{htmlFor:m.offInput,isActive:!d,disabled:r},l,c.createElement(Ix,_x({checked:!d,disabled:r,id:m.offInput,onChange:f,value:wx},p))),c.createElement(Sx,{hasOffset:!d}))}));Ax.displayName="Switch";Ea().string,Ea().bool,Ea().string.isRequired,Ea().string,Ea().string.isRequired,Ea().string.isRequired,Ea().func.isRequired,Ea().string.isRequired,Ea().bool;function kx(){return kx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kx.apply(this,arguments)}Ax.defaultProps={value:!1};const Ox=(0,p.default)(Ax).withConfig({displayName:"switch__StyledSwitch",componentId:"sc-xytur2-0"})(["label:focus-within ~ span{",";}"],(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));const Nx=function(e){let{offLabel:t=(0,d.__)("Off","web-stories"),onChange:n,onLabel:r=(0,d.__)("On","web-stories"),value:a,...o}=e;const l=(0,u.useRef)(null),i=(0,u.useCallback)((e=>{n(e,!a)}),[n,a]);return(0,nr.useKeyDownEffect)(l,["space","enter","left","right","up","down"],i,[i,a]),c.createElement(Ox,kx({ref:l,offLabel:t,onChange:n,onLabel:r,value:a},o))};function Px(){return Px=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Px.apply(this,arguments)}const Rx=(0,u.forwardRef)(((e,t)=>{let{className:n,placeholder:r,value:a,disabled:o,rows:l,onChange:i,onBlur:s,...d}=e;const[p,m]=(0,u.useState)(a),f=(0,u.useCallback)((e=>{p!==a&&i(e)}),[p,i,a]);(0,u.useEffect)((()=>{m(a)}),[a]);const g=(0,u.useCallback)((e=>{f(e),s&&s(e)}),[s,f]);return c.createElement(tT,Px({placeholder:r,value:p},d,{containerStyleOverride:Uu,onChange:e=>m(e.target.value),onBlur:g,ref:t}))}));Rx.displayName="TextArea",Rx.defaultProps={showTextLimit:!0,rows:2};const Mx=Rx,Lx=(0,u.createContext)({isMultiple:!1,registerPresubmitHandler:()=>{}});const Dx=function(e){return(0,u.useContextSelector)(Lx,e??u.identity)};const Bx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=Dx((e=>e.registerPresubmitHandler));(0,u.useEffect)((()=>n(e)),[n].concat(t||[]))},Fx=p.default.div.withConfig({displayName:"timeZone__Wrapper",componentId:"sc-1n80l1r-0"})(["white-space:nowrap;"]),Hx=(0,p.default)(Ve.Text).withConfig({displayName:"timeZone__StyledText",componentId:"sc-1n80l1r-1"})(["color:",";line-height:30px;"],(e=>{let{theme:t}=e;return t.colors.fg.disable}));const Ux=function TimeZone(e){let{date:t}=e;const{timezone:n,gmtOffset:r}=(0,Rd.getSettings)(),a=(new Date).getTimezoneOffset()/60*-1;if(Number(r)===a)return null;const{timeZone:o}=(0,Ld.default)(),l=n?.length?(0,Md.default)(t,"T"):`UTC${o}`,i="UTC"===l?(0,d.__)("Coordinated Universal Time","web-stories"):n;return c.createElement(Fx,null,c.createElement(Tooltip,{hasTail:!0,title:i,placement:_d.PLACEMENT.TOP},c.createElement(Hx,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},l)))},zx=p.default.div.withConfig({displayName:"timePicker__TimeWrapper",componentId:"sc-14og2kb-0"})(["margin-bottom:1em;padding:0 20px;"]),Gx=p.default.fieldset.withConfig({displayName:"timePicker__Fieldset",componentId:"sc-14og2kb-1"})(["margin-top:0.5em;position:relative;"]),jx=p.default.legend.withConfig({displayName:"timePicker__Legend",componentId:"sc-14og2kb-2"})(["position:absolute;top:-999em;left:-999em;"]),Yx=p.default.div.withConfig({displayName:"timePicker__InputRow",componentId:"sc-14og2kb-3"})(["display:flex;"]),Zx=(0,p.css)(["min-height:30px;box-shadow:0 0 0 transparent;transition:box-shadow 0.1s linear;border-radius:4px;border:1px solid #006edc;height:28px;vertical-align:middle;background-color:",";color:#32373c;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),Wx=p.default.input.withConfig({displayName:"timePicker__NumberInput",componentId:"sc-14og2kb-4"})([""," padding:0;margin-right:4px;text-align:center;width:50%;max-width:50px;::-webkit-inner-spin-button,::-webkit-outer-spin-button{margin:0;appearance:none;}"],Zx),Vx=p.default.span.withConfig({displayName:"timePicker__TimeSeparator",componentId:"sc-14og2kb-5"})(["padding:0 3px 0 0;color:#555d66;"]),$x=p.default.button.withConfig({displayName:"timePicker__Button",componentId:"sc-14og2kb-6"})(["display:inline-flex;text-decoration:none;font-size:13px;margin:0;border:0;cursor:pointer;transition:box-shadow 0.1s linear;padding:0 10px;line-height:2;height:30px;border-radius:3px;white-space:nowrap;border-width:1px;border-style:solid;color:#006edc;border-color:#006edc;background:#f3f5f6;&:focus{outline:2px solid transparent;background:#f3f5f6;color:rgb(0,93,140);border-color:",";box-shadow:0 0 0 1px ",";text-decoration:none;}",""],(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{isToggled:t}=e;return t&&"\n  background: #edeff0;\n  border-color: #8f98a1;\n  box-shadow: inset 0 2px 5px -3px #555d66;\n  "})),qx=p.default.div.withConfig({displayName:"timePicker__InputGroup",componentId:"sc-14og2kb-7"})(["flex-basis:100%;"]),Kx=(0,p.default)($x).withConfig({displayName:"timePicker__AMButton",componentId:"sc-14og2kb-8"})(["margin-right:-1px;border-radius:3px 0 0 3px;"]),Xx=(0,p.default)($x).withConfig({displayName:"timePicker__PMButton",componentId:"sc-14og2kb-9"})(["margin-left:-1px;border-radius:0 3px 3px 0;"]);const Qx=function TimePicker(e){let{onChange:t,is12Hour:n,localData:r,setLocalData:a}=e;const o=e=>t=>{a({...r,[e]:parseInt(t.target.value)})},l=()=>n?12:23,i=()=>n?1:0,s=e=>{const{am:t}=r;return n?"AM"===t?e%12:(e%12+12)%24:e},p=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a({...r,...n,date:e}),t(e.toISOString())},m=e=>()=>{const{am:t,date:n,hours:a}=r;if(t===e)return;const o=n;"PM"===e?o.setHours((a%12+12)%24):o.setHours(a%12),p(o,{am:e})},f=(0,u.useRef)();(0,u.useEffect)((()=>{f.current.focus()}),[]);const g="AM"===r.am,h="PM"===r.am;return c.createElement(zx,null,c.createElement(Gx,null,c.createElement(jx,null,(0,d.__)("Time","web-stories")),c.createElement(Yx,null,c.createElement(qx,null,c.createElement(Wx,{ref:f,"aria-label":(0,d.__)("Hours","web-stories"),type:"number",step:1,min:i(),max:l(),value:parseInt(r.hours),onChange:o("hours"),onBlur:()=>{const{hours:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<i()||n>l())&&t.getHours()!==s(e)){const n=t;n.setHours(s(e)),p(n)}}}),c.createElement(Vx,null,":"),c.createElement(Wx,{"aria-label":(0,d.__)("Minutes","web-stories"),type:"number",min:0,max:59,value:parseInt(r.minutes),onChange:o("minutes"),onBlur:()=>{const{minutes:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<0||n>59)&&t.getMinutes()!==e){const n=t;n.setMinutes(e),p(n)}}})),n&&c.createElement(qx,null,c.createElement(Kx,{"aria-pressed":g,type:"button",isToggled:g,onClick:m("AM")},(0,d.__)("AM","web-stories")),c.createElement(Xx,{"aria-pressed":h,type:"button",isToggled:h,tabIndex:"-1",onClick:m("PM")},(0,d.__)("PM","web-stories"))),c.createElement(Ux,{date:r?.date}))))},Jx=p.default.div.withConfig({displayName:"calendarWrapper__CalendarWrapper",componentId:"sc-u1av1j-0"})(["min-height:236px;.react-calendar{width:350px;max-width:100%;background:white;border:1px solid #a0a096;font-family:Arial,Helvetica,sans-serif;line-height:1.125em;}.react-calendar--doubleView{width:700px;}.react-calendar--doubleView .react-calendar__viewContainer{display:flex;margin:-0.5em;}.react-calendar--doubleView .react-calendar__viewContainer > *{width:50%;margin:0.5em;}.react-calendar,.react-calendar *,.react-calendar *:before,.react-calendar *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;}.react-calendar button{margin:0;border:0;outline:none;}.react-calendar button:enabled:hover{cursor:pointer;}.react-calendar__navigation{display:flex;height:44px;margin-bottom:1em;}.react-calendar__navigation button{min-width:44px;background:none;}.react-calendar__navigation button:disabled{background-color:#f0f0f0;}.react-calendar__navigation button:enabled:hover,.react-calendar__navigation button:enabled:focus{background-color:#e6e6e6;}.react-calendar__month-view__weekdays{text-align:center;text-transform:uppercase;font-weight:bold;font-size:0.75em;}.react-calendar__month-view__weekdays__weekday{padding:0.5em;}.react-calendar__month-view__weekNumbers .react-calendar__tile{display:flex;align-items:center;justify-content:center;font-size:0.75em;font-weight:bold;}.react-calendar__month-view__days__day--weekend{color:#d10000;}.react-calendar__month-view__days__day--neighboringMonth{color:#757575;}.react-calendar__year-view .react-calendar__tile,.react-calendar__decade-view .react-calendar__tile,.react-calendar__century-view .react-calendar__tile{padding:2em 0.5em;}.react-calendar__tile{max-width:100%;padding:10px 6.6667px;background:none;text-align:center;line-height:16px;}.react-calendar__tile:disabled{background-color:#f0f0f0;}.react-calendar__tile:enabled:hover,.react-calendar__tile:enabled:focus{background-color:#e6e6e6;}.react-calendar__tile--now{background:#ffff76;}.react-calendar__tile--now:enabled:hover,.react-calendar__tile--now:enabled:focus{background:#ffffa9;}.react-calendar__tile--hasActive{background:#76baff;}.react-calendar__tile--hasActive:enabled:hover,.react-calendar__tile--hasActive:enabled:focus{background:#a9d4ff;}.react-calendar__tile--active{background:#006edc;color:white;}.react-calendar__tile--active:enabled:hover,.react-calendar__tile--active:enabled:focus{background:#1087ff;}.react-calendar--selectRange .react-calendar__tile--hover{background-color:#e6e6e6;}"]),eA=(0,u.lazy)((()=>n.e(2392).then(n.bind(n,73)))),tA=p.default.div.withConfig({displayName:"datePicker__FallbackCalendar",componentId:"sc-9qun1q-0"})(["height:256px;width:350px;display:flex;align-items:center;justify-content:center;"]);const nA=function DatePicker(e){let{currentDate:t,onChange:n,onViewChange:r}=e;const a=(0,u.useRef)(),o=(0,u.useMemo)((()=>new Date(t)),[t]),l=(0,u.useCallback)((e=>{e.setHours(o.getHours()),e.setMinutes(o.getMinutes()),n(e.toISOString(),!0)}),[o,n]),i=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.current){const t=[...a.current.querySelectorAll(".react-calendar__navigation button")];t[0].tabIndex="0",t.shift();for(const e of t)e.tabIndex="-1";const n=[...a.current.querySelectorAll(".react-calendar__viewContainer button")];let r=!1;for(const t of n)t.classList.contains("react-calendar__tile--now")?(t.tabIndex="0",e&&t.focus(),r=!0):t.tabIndex="-1";r||(n[0].tabIndex="0",n[0].focus())}}),[a]);return(0,u.useEffect)((()=>{const e=setTimeout((()=>{i()}));return()=>{clearTimeout(e)}}),[i]),c.createElement(u.Suspense,{fallback:c.createElement(tA,null,c.createElement(FT.default,null))},c.createElement(Jx,{ref:a},c.createElement(eA,{value:o,onChange:l,onViewChange:r,onActiveStartDateChange:()=>i(!0),nextAriaLabel:(0,d._x)("Next","This label can apply to next month, year and/or decade","web-stories"),prevAriaLabel:(0,d._x)("Previous","This label can apply to previous month, year and/or decade","web-stories"),next2AriaLabel:(0,d._x)("Jump forward","This label can apply to month, year and/or decade","web-stories"),prev2AriaLabel:(0,d._x)("Jump backwards","This label can apply to month, year and/or decade","web-stories")})))},rA=p.default.div.withConfig({displayName:"dateTime__DateTimeWrapper",componentId:"sc-15cbv9f-0"})(["border-radius:4px;box-shadow:0 3px 30px rgba(25,30,35,0.1);border:1px solid ",";background-color:",";width:100%;padding:4px;"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.black,.2)}),(e=>{let{theme:t}=e;return t.colors.standard.white})),aA=(0,p.default)(m.Button).withConfig({displayName:"dateTime__StyledButton",componentId:"sc-15cbv9f-1"})(["color:#006edc;margin:5px 0;"]);const oA=function DateTime(e){let{value:t,onChange:n,onViewChange:r,is12Hour:a=!0,forwardedRef:o,onClose:l,canReset:i=!1}=e;const s=t?new Date(t):new Date,p=s.getHours(),[m,g]=(0,u.useState)({minutes:s.getMinutes(),am:p<12?"AM":"PM",hours:a?p%12||12:p,date:s}),h=(0,u.useRef)(document.activeElement),E=(0,u.useCallback)((e=>{h.current&&h.current.focus(),l(e)}),[l]);return(0,nr.useKeyDownEffect)(o,{key:["esc"],editable:!0},E),cC({ref:o}),DT({ref:o}),c.createElement(rA,{ref:o},c.createElement(Qx,{localData:m,setLocalData:g,onChange:n,is12Hour:a}),c.createElement(nA,{currentDate:t,onChange:n,onViewChange:r}),i&&c.createElement(aA,{size:f.BUTTON_SIZES.SMALL,onClick:()=>{n(null),l()},"aria-label":(0,d.__)("Reset publish time","web-stories")},(0,d.__)("Reset","web-stories")))},lA=p.default.div.withConfig({displayName:"required__RequiredWrapper",componentId:"sc-19c61h7-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;"]),iA=(0,p.default)(Ve.Text).attrs({as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"required__StyledText",componentId:"sc-19c61h7-1"})(["color:",";font-size:12px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const sA=function Required(){return c.createElement(lA,null,c.createElement(iA,null,(0,d._x)("Required","Required form input","web-stories")))};function cA(){return cA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cA.apply(this,arguments)}const dA=24,uA=p.default.div.withConfig({displayName:"radio__Container",componentId:"sc-dphfhc-0"})(["display:flex;align-items:center;min-height:","px;padding:8px 0;"],44),pA=p.default.div.withConfig({displayName:"radio__RadioInputContainer",componentId:"sc-dphfhc-1"})(["position:relative;height:","px;width:","px;"],dA,dA),mA=p.default.div.withConfig({displayName:"radio__LabelContainer",componentId:"sc-dphfhc-2"})(["display:flex;flex-direction:column;margin:0 12px;gap:","px;"],8),fA=p.default.span.withConfig({displayName:"radio__RadioBorder",componentId:"sc-dphfhc-3"})((e=>{let{theme:t}=e;return(0,p.css)(["display:inline-block;height:","px;width:","px;border:","px solid ",";border-radius:",";pointer-events:none;transition:all 0.15s;"],dA,dA,1,t.colors.border.defaultNormal,t.borders.radius.round)})),gA=p.default.span.withConfig({displayName:"radio__InnerButton",componentId:"sc-dphfhc-4"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;display:none;:after{content:'';position:absolute;height:","px;width:","px;top:50%;left:50%;transform:translate(-50%,-50%);background-color:",";border-radius:",";}"],16,16,t.colors.fg.primary,t.borders.radius.round)})),hA=p.default.input.attrs({type:"radio"}).withConfig({displayName:"radio__HiddenInput",componentId:"sc-dphfhc-5"})(["position:absolute;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:hover ~ ","{border-color:",";}:focus{outline:none;}:focus ~ ",",&."," ~ ","{",";border-color:",";}:active ~ ","{box-shadow:0 0 0 8px ",";}:checked ~ ","{display:block;}:disabled{cursor:auto;~ ","{border-color:",";}~ ","::after{background-color:",";}}"],dA,dA,fA,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),fA,Ju.FOCUS_VISIBLE_SELECTOR,fA,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),fA,(e=>{let{theme:t}=e;return t.colors.shadow.active}),gA,fA,(e=>{let{theme:t}=e;return t.colors.border.disable}),gA,(e=>{let{theme:t}=e;return t.colors.fg.disable})),EA=(0,p.default)(Ve.Text).attrs({forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"radio__Hint",componentId:"sc-dphfhc-6"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),bA=(0,u.forwardRef)((function RadioButton(e,t){let{className:n,hint:r,id:a,label:o,...l}=e;const i=(0,u.useMemo)((()=>a||(0,ue.default)()),[a]);return c.createElement(uA,{className:n},c.createElement(pA,null,c.createElement(hA,cA({id:i,ref:t},l)),c.createElement(fA,null),c.createElement(gA,null)),c.createElement(mA,null,c.createElement(Ve.Text,{htmlFor:i,as:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),r&&c.createElement(EA,null,r)))}));const yA=function(e){const t=(0,u.useCallback)((t=>{const n=e.current;if(!n)return;const r=Array.from(n.querySelectorAll('input[type="radio"]')),a=r.indexOf(document.activeElement);if(-1===a)return;const o=a+t;o<0||o>=r.length||(r[o].focus(),r[o].click())}),[e]),n=(0,u.useCallback)((()=>t(-1)),[t]);(0,nr.useKeyDownEffect)(e,["up","left"],n,[n]);const r=(0,u.useCallback)((()=>t(1)),[t]);(0,nr.useKeyDownEffect)(e,["down","right"],r,[r])};p.default.h3.withConfig({displayName:"radioGroup__VisuallyHiddenLabel",componentId:"sc-k5v4js-0"})(["",";"],j_.visuallyHidden),(0,p.default)(bA).withConfig({displayName:"radioGroup__StyledRadio",componentId:"sc-k5v4js-1"})(["input:focus + span,input&."," + span{",";}"],Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));var _A=n(71577);function vA(){return vA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vA.apply(this,arguments)}const wA=p.default.div.withConfig({displayName:"select__Container",componentId:"sc-1pv4s6p-0"})(["position:relative;width:100%;"]),TA=(0,p.default)(_A.DropDown).withConfig({displayName:"select__StyledDropDown",componentId:"sc-1pv4s6p-1"})(["background-color:transparent;border:0;width:auto;"]),SA=(0,p.css)(["top:-14px;right:unset;width:auto;"]),CA=(0,p.css)(["border:none;width:auto;margin-right:auto;padding-left:0;",";"],Hu),IA=(0,p.css)(["margin-right:-12px;"]);const xA=function Select(e){return c.createElement(wA,null,c.createElement(TA,vA({isInline:!0,hasSearch:!1,menuStylesOverride:SA,selectButtonStylesOverride:CA,selectValueStylesOverride:IA},e)))};var AA=n(37309);const kA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((t=>{const n=e[t.id];return{...t,options:n&&n.length?kA(e,n):[]}}))},OA=e=>{const t=e.map((e=>({options:[],parent:0,...e}))),n=(r="parent",t.reduce(((e,t)=>(e[t[r]]?e[t[r]].push(t):e[t[r]]=[t],e)),{}));var r;return kA(n,n[0])},NA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{options:n,...r}=e;let a=[];if(n)for(let e=0;e<n.length;e++)a=a.concat(NA(n[e],t));const o=e.label.toLowerCase().includes(t.trim().toLowerCase()),l={...r,options:a};return o||a.length?[l]:[]},PA=(e,t)=>e.reduce(((e,n)=>e.concat(NA(n,t))),[]);function RA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.flatMap((e=>{let{options:n,...r}=e;return[{...r,$level:t},...RA(n,t+1)]}))}function MA(){return MA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MA.apply(this,arguments)}const LA=p.default.div.withConfig({displayName:"hierarchical__Container",componentId:"sc-1pgjcwl-0"})(["margin-bottom:8px;display:block;"]),DA=(0,p.default)(Ve.Text).attrs({forwardedAs:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"hierarchical__Label",componentId:"sc-1pgjcwl-1"})(["margin:0 12px;"]),BA=p.default.div.withConfig({displayName:"hierarchical__Border",componentId:"sc-1pgjcwl-2"})(["padding-top:4px;margin-top:-4px;border:1px solid ",";border-top:none;border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return`0 0 ${t.borders.radius.small} ${t.borders.radius.small}`})),FA=p.default.ul.withConfig({displayName:"hierarchical__CheckboxArea",componentId:"sc-1pgjcwl-3"})(["max-height:175px;padding:12px 12px 0 12px;overflow-y:scroll;margin-top:4px;margin-bottom:0;",";:focus-within{",";}"],x.scrollbarCSS,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),HA=p.default.li.withConfig({displayName:"hierarchical__CheckboxContainer",componentId:"sc-1pgjcwl-4"})(["display:flex;align-items:center;margin-bottom:8px;margin-left:","px;"],(e=>{let{$level:t}=e;return 20*t})),UA=(0,p.default)(Ve.Text).withConfig({displayName:"hierarchical__NoResultsText",componentId:"sc-1pgjcwl-5"})(["margin-bottom:12px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),zA=e=>`hierarchical_term_option_${e}`,Option=e=>{let{optionRefs:t={current:{}},$level:n=0,...r}=e;const{id:a,label:o,onBlur:l,onChange:i,onFocus:s,checked:d,value:u}=r,p=zA(r.id),m=`hierarchical_term_${r.label}`;return c.createElement(HA,{"aria-selected":d,role:"treeitem",$level:n},c.createElement(OC.Checkbox,{id:p,ref:e=>{t.current[a]=e},value:u,checked:d,name:m,onChange:e=>i(e,r),onBlur:l,onFocus:s,tabIndex:-1}),c.createElement(DA,{htmlFor:p},o))},GA=e=>{let{className:t,inputValue:n,onInputChange:r,label:a,noOptionsText:o,options:l,onChange:i,...s}=e;const p=(0,AA.default)("assertive"),m=(0,u.useDebouncedCallback)(p,500),f=(0,u.useRef)(null),g=(0,u.useRef)(null),[h,E]=(0,u.useState)(-1),b=(0,u.useRef)({}),y=(0,u.useCallback)((e=>{if(document.activeElement===f.current){if(!l.length)return;if(f.current.contains(e.relatedTarget))return void g.current?.focus();if(-1===h){const e=l.find((e=>e.checked))?.id;E(e||0)}else b.current[h]?.focus()}}),[h,l]),_=(0,u.useCallback)((e=>{const t=l.findIndex((e=>e.id===h));switch(e.key){case Ms.KEYS.UP:t>0&&E(l[t-1].id);break;case Ms.KEYS.DOWN:t<l.length-1&&E(l[t+1].id)}}),[l,h]),v=(0,u.useCallback)((e=>{r(e.target.value)}),[r]),w=(0,u.useCallback)(((e,t)=>{i(e,{id:t.id,checked:!t.checked})}),[i]),T=(0,u.usePrevious)(n);(0,u.useEffect)((()=>{if(T!==n){const e=l.length,t=(0,Ze.default)(
/* Translators: %d: Number of results. */
(0,d._n)("%d result found.","%d results found.","web-stories","web-stories"),e);m(t)}}),[m,l,n,T]),(0,nr.useKeyDownEffect)(f,{key:["up","down","shift+up","shift+down"]},_,[_]),(0,u.useEffect)((()=>{f.current?.contains(document.activeElement)&&b.current[h]?.focus()}),[h]);const S=Boolean(l.length)||Boolean(n.length);return c.createElement(LA,{className:t},c.createElement(hT,MA({ref:g,value:n,onChange:v,label:a,type:"search",placeholder:(0,d.__)("Search","web-stories")},s)),S&&c.createElement(BA,null,c.createElement(Tu,null,c.createElement(FA,{id:"checkbox_list",ref:f,tabIndex:0,onFocus:y,role:"tree","aria-activedescendant":-1!==h?zA(h):void 0,"aria-multiselectable":!0},l.length?l.map((e=>c.createElement(Option,MA({key:e.id},e,{onChange:w,optionRefs:b})))):c.createElement(UA,{role:"treeitem",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o)))))},jA=(0,u.createContext)({state:{},actions:{}});function YA(){return YA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YA.apply(this,arguments)}const ZA=999999999,WA=p.default.section.withConfig({displayName:"panel__Wrapper",componentId:"sc-1vyy7rt-0"})(["display:flex;flex-direction:column;position:relative;border-bottom:1px solid ",";",""],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{noBorder:t}=e;return t&&"border-bottom: none;"}));const VA=function Panel(e){let{name:t,children:n,resizable:r=!1,showDragHandle:a,showFocusStyles:o,canCollapse:l=!0,collapsedByDefault:i=!0,initialHeight:s=null,maxHeight:d=ZA,ariaLabel:p=null,ariaHidden:m=!1,isPersistable:f=!0,...g}=e;const h=0===d?ZA:d,{selectedElementIds:E}=xa((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),b=(0,u.useMemo)((()=>f?wo.getItemByKey(`${vo.PANEL}:${t}`):null),[t,f]),[y,_]=(0,u.useState)((()=>!!f&&(b?.isCollapsed??i))),[v,w]=(0,u.useState)(Math.min(b?.expandToHeight,h)||s),[T,S]=(0,u.useState)(Math.min(b?.height,h)||s),[C,I]=(0,u.useState)(!1),[x,A]=(0,u.useState)(!1),k=(0,u.useCallback)((e=>{S(Math.min(e,h))}),[h]),N=(0,u.useCallback)((e=>{w(Math.min(e,h))}),[h]),P=(0,u.useCallback)((()=>I(!0)),[]),R=(0,u.useCallback)((()=>{l&&(_(!0),A(!0),r&&k(0),(0,O.trackEvent)("panel_toggled",{name:t,status:"collapsed"}))}),[r,l,t,k]),M=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_(!1),A(!0),e&&r&&k(v),(0,O.trackEvent)("panel_toggled",{name:t,status:"expanded"})}),[r,v,t,k]);(0,u.useEffect)((()=>{f||M(!0)}),[M,f,E]),(0,u.useEffect)((()=>{r&&T<=10&&!y&&R()}),[R,T,r,y]),(0,u.useEffect)((()=>{x||b||!r||(k(s),N(s))}),[x,s,r,b,t,N,k]),(0,u.useEffect)((()=>{h<T&&k(h),h<v&&N(h)}),[v,T,h,k,N]),(0,u.useEffect)((()=>{f&&x&&wo.setItemByKey(`${vo.PANEL}:${t}`,{height:T,isCollapsed:y,expandToHeight:v})}),[t,y,T,v,x,f]);const L=(0,u.useCallback)((e=>{r&&(A(!0),k(Math.min(e(T),h)),y&&e(T)>10&&M(!1))}),[M,T,y,h,r,k,A]),D=(0,u.useCallback)((()=>{A(!1),y&&M(!0)}),[M,y]),B=`panel-${t}-${(0,ue.default)()}`,F=`panel-title-${t}-${(0,ue.default)()}`,H={state:{height:T,resizable:r,showDragHandle:a,showFocusStyles:o,isCollapsed:y,panelContentId:B,panelTitleId:F,panelTitleReadable:`panel-title-${t}`,ariaHidden:m},actions:{setHeight:L,setExpandToHeight:N,collapse:R,expand:M,resetHeight:D,confirmTitle:P}},U=jA.Provider,z=(0,u.useMemo)((()=>C?{"aria-labelledby":F}:{"aria-label":p}),[C,F,p]);return c.createElement(WA,YA({},z,{"aria-hidden":m},g),c.createElement(U,{value:H},n))};var $A=n(98240),qA=n(41044);function KA(){return KA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KA.apply(this,arguments)}const XA={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",QUATERNARY:"quaternary",POSITIVE:"positive",NEGATIVE:"negative",ACCENT:"accent"};function QA(e){return 9*(e-1)}const JA=p.default.div.withConfig({displayName:"notificationBubble__Bubble",componentId:"sc-1w06lrc-0"})([""," position:relative;height:","px;width:","px;",";"],(e=>{let{theme:t,variant:n}=e;return(0,p.css)(["color:",";background-color:",";border-radius:",";"],t.colors.fg.primary,t.colors.bg[n],t.borders.radius.round)}),24,(e=>{let{digitLen:t}=e;return 24+QA(t)}),(e=>{let{digitLen:t,$isSmall:n}=e;return n&&(0,p.css)(["height:","px;width:","px;"],20,20+QA(t))})),ek=p.default.span.withConfig({displayName:"notificationBubble__Inner",componentId:"sc-1w06lrc-1"})([""," "," ",";font-weight:",";color:",";user-select:none;"],$A.fullSizeAbsolute,qA.centerContent,(e=>{let{$isSmall:t,theme:n}=e;return Bu.expandTextPreset(((e,n)=>{let{paragraph:r}=e;return r[t?n.X_SMALL:n.SMALL]}))({theme:n})}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{$invertColor:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.primary}));const tk=function(e,t,n){const r=(0,u.useRef)(),[a,o]=(0,u.useState)(!1),l=(0,u.useCallback)((e=>{const n=r.current-e.pageY;t(n),r.current=e.pageY}),[t]),i=(0,u.useCallback)((e=>{e.target.releasePointerCapture(e.pointerId),o(!1),n()}),[n]),s=(0,u.useCallback)((e=>{e.target.setPointerCapture(e.pointerId),r.current=e.pageY,o(!0)}),[]);(0,u.useLayoutEffect)((()=>{const t=e.current;return t.addEventListener("pointerdown",s),a&&(t.addEventListener("pointermove",l),t.addEventListener("pointerup",i)),()=>{t.removeEventListener("pointerdown",s),a&&(t.removeEventListener("pointermove",l),t.removeEventListener("pointerup",i))}}),[a,i,l,s,e])};const nk=function(e,t){(0,nr.useKeyEffect)(e,"up",(()=>t(20)),[t]),(0,nr.useKeyEffect)(e,"down",(()=>t(-20)),[t])};function rk(){return rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(this,arguments)}const ak=p.default.div.withConfig({displayName:"handle__Handle",componentId:"sc-ffqbiq-0"})(["border:0;padding:0;height:","px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:row-resize;user-select:none;position:absolute;",";",";left:0;right:0;width:100%;",";"],8,(e=>{let{$position:t}=e;return"top"===t&&"top: 0"}),(e=>{let{$position:t}=e;return"bottom"===t&&"bottom: 0"}),(e=>{let{$showFocusStyles:t}=e;return t&&(0,p.css)(["border-bottom:1px solid transparent;&:focus{border-color:",";}"],(e=>{let{theme:t}=e;return t.colors.border.focus}))})),ok=p.default.div.withConfig({displayName:"handle__DragBar",componentId:"sc-ffqbiq-1"})(["position:absolute;width:35px;height:3px;top:","px;background:",";border-radius:",";cursor:inherit;"],4,(e=>{let{theme:t}=e;return t.colors.bg.quaternary}),(e=>{let{theme:t}=e;return t.borders.radius.small}));function DragHandle(e){let{height:t,minHeight:n,maxHeight:r,handleHeightChange:a,handleExpandToHeightChange:o,handleDoubleClick:l,position:i,showDragHandle:s,showFocusStyles:p=!0,...m}=e;const f=(0,u.useRef)();return tk(f,a,o),nk(f,a),c.createElement(ak,rk({ref:f,onClick:e=>e.stopPropagation(),onDoubleClick:l,tabIndex:0,$position:i,role:"slider","aria-orientation":"vertical","aria-valuenow":t,"aria-valuemin":n,"aria-valuemax":r,"aria-label":(0,d.__)("Set panel height","web-stories"),$showFocusStyles:p},m),s&&c.createElement(ok,null))}DragHandle.defaultProps={position:"top"};const lk=DragHandle;function ik(){return ik=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(this,arguments)}const sk=(0,p.default)(Lu.Headline).attrs({as:"h2"}).withConfig({displayName:"title__Header",componentId:"sc-1tphhj5-0"})(["color:",";background-color:",";"," margin:0;position:relative;display:flex;flex-direction:row;user-select:none;align-items:center;justify-content:space-between;padding:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{isSecondary:t,theme:n}=e;return t&&n.colors.interactiveBg.secondaryNormal}),(e=>{let{hasResizeHandle:t}=e;return t&&"padding-top: 0;"}),(e=>{let{isCollapsed:t}=e;return t?"14px 16px":"14px 16px 6px 16px"})),ck=p.default.span.withConfig({displayName:"title__Heading",componentId:"sc-1tphhj5-1"})(["color:",";display:flex;align-items:space-between;",";"],(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),(e=>{let{theme:t}=e;return Bu.expandPresetStyles({preset:t.typography.presets.headline[$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL],theme:t})})),dk=(0,p.default)((e=>{let{notificationCount:t,isSmall:n,variant:r=XA.ACCENT,invertTextColor:a,...o}=e;return c.createElement(JA,KA({variant:r,$isSmall:n,digitLen:t?.toString().length||1},o),c.createElement(ek,{$invertColor:a,$isSmall:n},t))})).withConfig({displayName:"title__StyledNotificationBubble",componentId:"sc-1tphhj5-2"})(["margin-left:12px;"]),uk=p.default.div.withConfig({displayName:"title__HeaderActions",componentId:"sc-1tphhj5-3"})(["display:flex;align-items:center;"]),pk=p.default.div.withConfig({displayName:"title__IconWrapper",componentId:"sc-1tphhj5-4"})(["position:relative;width:32px;height:32px;svg{position:relative;z-index:1;}"]),mk=p.default.button.withConfig({displayName:"title__Collapse",componentId:"sc-1tphhj5-5"})(["border:none;border-radius:",";background:transparent;color:",";height:32px;display:flex;padding:0 4px 0 0;align-items:center;justify-content:flex-start;cursor:pointer;margin-left:-12px;transition:",";&:hover,&.",",&[","]{color:",";}",";svg{width:32px;height:32px;",";}:hover ",":after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:16px;width:16px;border-radius:",";background:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),f.BUTTON_TRANSITION_TIMING,Ju.FOCUS_VISIBLE_SELECTOR,Ju.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.colors.fg.primary}),Hu,(e=>{let{$isCollapsed:t,theme:n}=e;return t&&(0,p.css)(["color:",";transform:rotate(-90deg);"],n.colors.fg.secondary)}),pk,(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.bg.quaternary}));function fk(e){let{children:t,isCollapsed:n,toggle:r,...a}=e;return c.createElement(mk,ik({onClick:e=>{e.stopPropagation(),r()},$isCollapsed:n},a),t)}function gk(e){let{ariaLabel:t,children:n,isPrimary:r,isSecondary:a,secondaryAction:o,isResizable:l,canCollapse:i,maxHeight:s,count:d,...p}=e;const{state:{isCollapsed:m,height:f,resizable:g,showDragHandle:h,showFocusStyles:E,panelContentId:b,panelTitleId:y,ariaHidden:_},actions:{collapse:v,expand:w,setHeight:T,setExpandToHeight:S,resetHeight:C,confirmTitle:I}}=(0,u.useContext)(jA),{state:{sidebarContentHeight:x}}=Am();(0,u.useEffect)(I,[I]);const A=s||Math.round(.7*x),k=(0,u.useCallback)((e=>g?T((t=>Math.max(0,Math.min(A,t+e)))):null),[g,T,A]),O=(0,u.useCallback)((()=>{g&&f>=10&&S(f)}),[S,f,g]),N=m?w:v,P=0===d||Boolean(d);return c.createElement(sk,ik({isPrimary:r,isSecondary:a,hasResizeHandle:l&&!m,isCollapsed:m},p),l&&c.createElement(lk,{height:f,minHeight:0,maxHeight:A,handleHeightChange:k,handleExpandToHeightChange:O,handleDoubleClick:C,tabIndex:_?-1:0,showDragHandle:h,showFocusStyles:E}),c.createElement(fk,{toggle:N,disabled:!i,tabIndex:_?-1:0,"aria-label":t,"aria-expanded":!m,"aria-controls":b,isCollapsed:m},i&&c.createElement(pk,null,c.createElement(Xu.default,null)),c.createElement(ck,{isCollapsed:m,id:y,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},n),P&&c.createElement(dk,{"data-testid":"panel-badge",notificationCount:d,variant:XA.PRIMARY,"aria-hidden":!0})),o&&c.createElement(uk,null,o))}gk.defaultProps={isPrimary:!1,isSecondary:!1,isResizable:!1,canCollapse:!0};const hk=gk;function Ek(){return Ek=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ek.apply(this,arguments)}const bk=p.default.div.withConfig({displayName:"content__Container",componentId:"sc-1juzn5p-0"})(["padding:",";overflow:auto;background-color:",";"],(e=>{let{padding:t}=e;return t||"8px 12px 8px"}),(e=>{let{isSecondary:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryNormal:"transparent"}));function yk(e){let{children:t,...n}=e;const{state:{isCollapsed:r,height:a,resizable:o,panelContentId:l}}=(0,u.useContext)(jA),i={height:o?`${a}px`:"auto"};return r?null:c.createElement(bk,Ek({style:i},n,{id:l}),t)}yk.defaultProps={isPrimary:!1};const _k=yk;function vk(){return vk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vk.apply(this,arguments)}const wk=function SimplePanel(e){let{children:t,name:n,ariaLabel:r,title:a,className:o,...l}=e;return c.createElement(VA,vk({name:n},l),c.createElement(hk,vk({ariaLabel:r??("string"==typeof a?a:"")},l),a),c.createElement(_k,{className:o},t))},Tk=(0,p.default)(Ve.Text).withConfig({displayName:"excerpt__StyledText",componentId:"sc-t9wjp4-0"})(["color:",";margin-top:-4px;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const Sk=function ExcerptPanel(e){let{nameOverride:t}=e;const{excerpt:n,updateStory:r}=xa((e=>{let{state:{story:{excerpt:t=""}},actions:{updateStory:n}}=e;return{excerpt:t,updateStory:n}})),a=(0,u.useCallback)((e=>{r({properties:{excerpt:e.target.value}})}),[r]),{highlight:o,resetHighlight:l,cancelHighlight:i}=Hp((e=>({highlight:e[Vm.EXCERPT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(Ck,{onAnimationEnd:()=>l(),name:t||"excerpt",title:(0,d.__)("Story Description","web-stories"),collapsedByDefault:!1,isPersistable:!o,$_css:o?.showEffect&&A_.FLASH},c.createElement(fx,null,c.createElement(Ik,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},value:n,onChange:a,placeholder:(0,d.__)("Write a description of the story","web-stories"),"aria-label":(0,d.__)("Story Description","web-stories"),maxLength:200,showCount:!0,rows:4,$_css2:o?.showEffect&&A_.OUTLINE})),c.createElement(fx,null,c.createElement(Tk,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"))))};var Ck=(0,p.default)(wk).withConfig({displayName:"excerpt___StyledSimplePanel",componentId:"sc-t9wjp4-1"})(["",""],(e=>e.$_css)),Ik=(0,p.default)(Mx).withConfig({displayName:"excerpt___StyledTextArea",componentId:"sc-t9wjp4-2"})(["",""],(e=>e.$_css2));const xk=p.default.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),Ak=(0,p.default)(tT).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]),kk=()=>{const e=H((e=>{let{storyId:t}=e;return t})),t=xa((e=>{let{actions:t}=e;return t.updateStory})),n=xa((e=>{let{state:{story:t}}=e;return{[Dw]:t.excerpt,[Bw]:t.title||""}})),r=xa((e=>{let{state:{story:{slug:t}}}=e;return t})),a=Am((e=>{let{data:t}=e;return t?.modalSidebarTab?.IsolatedStatusPanel})),[o,l]=(0,u.useState)(n),i=(0,u.useCallback)((n=>{nT({currentSlug:r,currentTitle:n,storyId:e,updateStory:t})}),[r,t,e]),s=(0,u.useCallback)((e=>{let{target:n}=e;const{value:r,name:a}=n;t({properties:{[a]:r}}),a===Bw&&i(r)}),[i,t]),p=e=>{let{currentTarget:t}=e;l((e=>({...e,[t.name]:t.value})))};return c.createElement(c.Fragment,null,c.createElement(xk,null,c.createElement(Lu.Headline,{as:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:Bw},(0,d.__)("Story Title","web-stories")),c.createElement(Ak,{name:Bw,id:"story-title",showCount:!0,value:o[Bw],onChange:p,onBlur:s,"aria-label":(0,d.__)("Story Title","web-stories"),placeholder:(0,d.__)("Add title","web-stories")})),c.createElement(xk,null,c.createElement(Lu.Headline,{as:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:Dw},(0,d.__)("Story Description","web-stories")),c.createElement(Ak,{name:Dw,id:"story-excerpt",showCount:!0,maxLength:200,value:o[Dw],"aria-label":(0,d.__)("Story Description","web-stories"),placeholder:(0,d.__)("Write a description of the story","web-stories"),hint:(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:p,onBlur:s})),a&&c.createElement(a,null))},Ok=p.default.div.withConfig({displayName:"storyPreview__PreviewWrapper",componentId:"sc-zk17py-0"})(["width:","px;height:","px;position:relative;margin-top:8px;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));Ok.propTypes={width:Ea().number.isRequired,height:Ea().number.isRequired};const Nk=p.default.div.withConfig({displayName:"storyPreview__PreviewContainer",componentId:"sc-zk17py-1"})(["width:","px;height:","px;position:absolute;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));Nk.propTypes={width:Ea().number.isRequired,height:Ea().number.isRequired};const Pk=p.default.img.withConfig({displayName:"storyPreview__Image",componentId:"sc-zk17py-2"})(["height:100%;width:100%;display:block;aspect-ratio:",";object-fit:cover;border-radius:",";background:",";"],J.PAGE_RATIO,(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),Rk=p.default.div.withConfig({displayName:"storyPreview__EmptyPlaceholder",componentId:"sc-zk17py-3"})(["height:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),Mk=p.default.div.withConfig({displayName:"storyPreview__Gradient",componentId:"sc-zk17py-4"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.posterOverlay})),Lk=p.default.div.withConfig({displayName:"storyPreview__ScrimWrapper",componentId:"sc-zk17py-5"})(["position:absolute;top:0;box-sizing:border-box;width:100%;height:100%;border-radius:",";background:",";padding:8px;"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.opacity.black3})),Dk=p.default.div.withConfig({displayName:"storyPreview__ScrimContainer",componentId:"sc-zk17py-6"})(["display:flex;height:100%;width:100%;flex-wrap:wrap;justify-content:space-between;"]),Bk=p.default.div.withConfig({displayName:"storyPreview__ScrimTop",componentId:"sc-zk17py-7"})(["display:grid;grid-template-columns:50% 50%;grid-template-rows:auto;grid-template-areas:'publisherLogo editButton';justify-content:inherit;width:100%;"]),Fk=p.default.img.withConfig({displayName:"storyPreview__PublisherLogo",componentId:"sc-zk17py-8"})(["grid-area:publisherLogo;height:24px;width:24px;border-radius:2px;box-shadow:0 0 8px rgba(0,0,0,0.08);"]),Hk=(0,p.default)(dx).withConfig({displayName:"storyPreview__StyledMedia",componentId:"sc-zk17py-9"})(["grid-area:editButton;display:flex;flex-direction:row-reverse;"]),Uk=p.default.div.withConfig({displayName:"storyPreview__ScrimBottom",componentId:"sc-zk17py-10"})(["width:100%;margin:auto 0 0;align-self:flex-end;"]),zk=(0,p.default)(Lu.Headline).attrs({as:"h3",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"storyPreview__Title",componentId:"sc-zk17py-11"})(["max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;padding:0;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Gk=(0,p.default)(Ve.Text).attrs({forwardAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"storyPreview__Publisher",componentId:"sc-zk17py-12"})(["display:block;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),jk=()=>{const{title:e,featuredMedia:t,publisherLogo:n,updateStory:r}=xa((e=>{let{state:{story:t},actions:n}=e;return{title:t?.title,featuredMedia:t?.featuredMedia||{},publisherLogo:t?.publisherLogo||{},updateStory:n.updateStory}})),{allowedImageMimeTypes:a,hasUploadMediaAction:o,publisher:l}=H((e=>{let{allowedMimeTypes:t,capabilities:n,metadata:r}=e;return{allowedImageMimeTypes:t?.image||He,hasUploadMediaAction:n?.hasUploadMediaAction,publisher:r?.publisher}})),i=(0,u.useMemo)((()=>a.map((e=>Ot(e))).flat()),[a]),s=Math.round(232/J.PAGE_RATIO),p=(0,u.useCallback)((e=>r({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width}}})),[r]);let m=(0,d.__)("No file types are currently supported.","web-stories");return i.length&&(m=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,It.default)(i))),c.createElement(c.Fragment,null,c.createElement(Lu.Headline,{as:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},(0,d.__)("Cover Preview","web-stories")),c.createElement(Ok,{width:232,height:s},c.createElement(Nk,{width:232,height:s},t?.url?c.createElement(Pk,{crossOrigin:"anonymous",src:t.url,width:t.width,height:t.height,alt:(0,d.__)("Preview image","web-stories"),"data-testid":"story_preview_featured_media"}):c.createElement(Rk,null),c.createElement(Mk,null),c.createElement(Lk,null,c.createElement(Dk,null,c.createElement(Bk,null,n?.url?.length>0&&c.createElement(Fk,{crossOrigin:"anonymous",width:n.width,height:n.height,src:n.url,alt:(0,d.__)("Publisher Logo","web-stories"),"data-testid":"story_preview_logo"}),o&&c.createElement(Hk,{onChange:p,title:(0,d.__)("Select as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:a,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:m,imgProps:t,canUpload:o,variant:zI.NONE,cropParams:{width:640,height:853}})),c.createElement(Uk,null,e&&c.createElement(zk,{"data-testid":"story_preview_title"},e),l&&c.createElement(Gk,{"data-testid":"story_preview_publisher"},l)))))))},Yk=e=>{let{handleReviewChecklist:t}=e;const n=_u(Xd.PRIORITY);return c.createElement(yp,{MainIcon:fp,label:(0,d.__)("Checklist","web-stories"),"aria-label":(0,d.__)("Checklist","web-stories"),popupZIndexOverride:10,onClick:t,notificationCount:n})},Zk=p.default.div.withConfig({displayName:"content__Main",componentId:"sc-1d1lm9j-0"})(["display:grid;min-width:917px;width:100%;height:calc(100% - "," - ",");grid-template-columns:30.5% 34% 35.5%;grid-template-rows:auto;grid-template-areas:'preview mainPanel sidePanel' 'footer mainPanel sidePanel';"],"1px",Fw),Wk=p.default.div.withConfig({displayName:"content___StoryPreview",componentId:"sc-1d1lm9j-1"})(["grid-area:preview;margin:20px 18px 0 32px;"]),Vk=p.default.div.withConfig({displayName:"content___MainStoryInfo",componentId:"sc-1d1lm9j-2"})(["grid-area:mainPanel;display:flex;flex-direction:column;padding:0 16px;overflow-y:scroll;gap:34px;& > section{border:none;& > h2{padding-top:0;padding-bottom:2px;& > button{height:1em;}}}"]),$k=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"content__PanelContainer",componentId:"sc-1d1lm9j-3"})(["grid-area:sidePanel;height:100%;margin-left:18px;background-color:",";border-bottom-right-radius:",";overflow-y:scroll;",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),x.scrollbarCSS),qk=p.default.div.withConfig({displayName:"content__Footer",componentId:"sc-1d1lm9j-4"})(["grid-area:footer;display:flex;align-items:flex-end;margin:0 18px 20px 32px;"]),Kk=e=>{let{handleReviewChecklist:t}=e;const{DocumentPane:n,id:r}=Am((e=>{let{data:t}=e;return t?.modalSidebarTab||{}})),a=function(){const e=(0,u.useContext)(hu)?.[0];if(!e)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist:t}=e;return t}();return c.createElement(Zk,null,c.createElement(Wk,null,c.createElement(jk,null)),c.createElement(Vk,null,c.createElement(kk,null)),n&&c.createElement($k,{"aria-label":(0,d.__)("Story Settings","web-stories"),id:r},c.createElement(n,null)),a&&c.createElement(qk,null,c.createElement(Yk,{handleReviewChecklist:t})))},Xk=p.default.div.withConfig({displayName:"publishModal__Container",componentId:"sc-16gvo2-0"})(["height:100%;color:",";background-color:",";border:",";border-radius:",";"],g.theme.colors.fg.primary,g.theme.colors.bg.primary,`1px solid ${g.theme.colors.divider.primary}`,g.theme.borders.radius.medium);const Qk=function PublishModal(e){let{isOpen:t,onPublish:n,onClose:r,publishButtonDisabled:a,hasFutureDate:o}=e;const l=gu((e=>{let{actions:t}=e;return t.handleReviewChecklist}));(0,u.useEffect)((()=>{t&&(0,O.trackEvent)("publish_modal")}),[t]);const i=(0,u.useCallback)((()=>{(0,O.trackEvent)("review_prepublish_checklist"),r({focusPublishButton:!1}),l()}),[r,l]);return c.createElement(T.Modal,{isOpen:t,onClose:r,contentLabel:(0,d.__)("Story details","web-stories"),contentStyles:{display:"block",width:"71vw",minWidth:"917px",height:"66vh",minHeight:"580px",overflow:"hidden"},overlayStyles:{backgroundColor:g.theme.colors.inverted.interactiveBg.modalScrim}},t&&c.createElement(Tu,null,c.createElement(Xk,null,c.createElement(Ww,{hasFutureDate:o,publishButtonDisabled:a,onClose:r,onPublish:n}),c.createElement(Kk,{handleReviewChecklist:i}))))};const Jk=function PublishButton(e){let{forceIsSaving:t}=e;const{date:n,storyId:r,saveStory:a,title:o,editLink:l,canPublish:i}=xa((e=>{let{state:{story:{date:t,storyId:n,title:r,editLink:a},capabilities:o},actions:{saveStory:l}}=e;return{date:t,storyId:n,saveStory:l,title:r,editLink:a,canPublish:Boolean(o?.publish)}})),s=gu((e=>{let{actions:{showPriorityIssues:t}}=e;return t})),[d,p]=(0,u.useState)(!1),m=(0,u.useRef)(),f=yr(r,l),g=(0,Nd.default)((0,kd.default)((0,Pd.toDate)(n,(0,Ld.default)()),1),(0,Pd.toDate)(new Date,(0,Ld.default)())),h=(0,u.useCallback)((()=>{let e="pending";i&&(e=g?"future":"publish"),(0,O.trackEvent)("publish_story",{status:e,title_length:o.length}),p(!1),a({status:e}),f()}),[f,a,g,o,i]),E=(0,u.useCallback)((()=>{s(),p(!0)}),[s]),b=(0,u.useCallback)((function(){let{focusPublishButton:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(!1),e&&m.current.focus()}),[]);return c.createElement(c.Fragment,null,c.createElement(Gw,{ref:m,onClick:E,disabled:t,hasFutureDate:g}),c.createElement(Qk,{isOpen:d,onPublish:h,onClose:b,hasFutureDate:g,publishButtonDisabled:t}))};const eO=function SwitchToDraftButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,saveStory:r}=xa((e=>{let{state:{meta:{isSaving:t}},actions:{saveStory:n}}=e;return{isSaving:t,saveStory:n}})),a=cc(),o=(0,u.useCallback)((()=>{r({status:"draft"})}),[r]),l=(0,d.__)("Switch to Draft","web-stories");return c.createElement(Tooltip,{title:l,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:o,disabled:n||t||a,"aria-label":l},c.createElement(xb,null)))};function PlainButton(e){let{text:t,onClick:n,disabled:r}=e;return c.createElement(Tooltip,{title:t,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:n,disabled:r,"aria-label":t},c.createElement(Fh,null)))}const tO=function UpdateButton(e){let{hasUpdates:t=!1,forceIsSaving:n=!1}=e;const{isSaving:r,status:a,date:o,saveStory:l,canPublish:i}=xa((e=>{let{state:{meta:{isSaving:t},story:{status:n,date:r},capabilities:a},actions:{saveStory:o}}=e;return{isSaving:t,status:n,date:r,saveStory:o,canPublish:Boolean(a?.publish)}})),s=r||n,u=cc(),{state:{hasNewChanges:p}}=mr();(0,nr.useGlobalKeyDownEffect)({key:["mod+s"]},(e=>{e.preventDefault(),s||u||l()}),[l,s,u]);const m=!s&&!u&&(p||t),f="draft"===a||!a;if("pending"===a)return c.createElement(PlainButton,{text:(0,d.__)("Save as pending","web-stories"),disabled:!m,onClick:()=>l()});if(f)return c.createElement(PlainButton,{text:(0,d.__)("Save draft","web-stories"),disabled:!m,onClick:()=>l()});const g=(0,Nd.default)((0,kd.default)((0,Pd.toDate)(o,(0,Ld.default)()),1),(0,Pd.toDate)(new Date,(0,Ld.default)()))&&"private"!==a?(0,d.__)("Schedule","web-stories"):(0,d.__)("Update","web-stories");return c.createElement(Gw,{text:g,onClick:()=>l(),disabled:!m,isUploading:u,canPublish:i})},nO=p.default.input.withConfig({displayName:"title__Input",componentId:"sc-jcmnyx-0"})(["color:",";margin:0;"," background:",";border:none !important;text-align:start;min-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:",";",";",""],(e=>{let{theme:t}=e;return`${t.colors.fg.primary} !important`}),Bu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{isHighlighted:t}=e;return!t&&"none !important"}),(e=>{let{theme:t}=e;return t.borders.radius.small}),Fu.focusableOutlineCSS,(e=>{let{isHighlighted:t}=e;return t&&(0,p.css)([""," ",""],A_.OUTLINE,A_.FLASH)}));const rO=function HeaderTitle(){const{title:e,slug:t,updateStory:n}=xa((e=>{let{state:{story:{title:t,slug:n}},actions:{updateStory:r}}=e;return{title:t,slug:n,updateStory:r}})),{highlight:r,resetHighlight:a,cancelHighlight:o}=Hp((e=>({highlight:e[Vm.STORY_TITLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{storyId:l}=H(),i=(0,u.useCallback)((e=>n({properties:{title:e.target.value}})),[n]),s=(0,u.useCallback)((()=>{nT({currentSlug:t,currentTitle:e,storyId:l,updateStory:n})}),[t,l,e,n]);return"string"!=typeof e?null:c.createElement(nO,{ref:e=>{e&&r?.focus&&r?.showEffect&&(e.addEventListener("keydown",o,{once:!0}),e.focus())},value:e,type:"text",onBlur:s,onChange:i,placeholder:(0,d.__)("Add title","web-stories"),"aria-label":(0,d.__)("Story title","web-stories"),isHighlighted:r?.showEffect,onAnimationEnd:()=>a()})},aO=p.default.div.withConfig({displayName:"pageAdvancement__SwitchRow",componentId:"sc-11tn322-0"})(["margin-bottom:16px;"]),oO=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"pageAdvancement__MutedText",componentId:"sc-11tn322-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),lO={MIN:1,MAX:20};const iO=function PageAdvancementPanel(e){let{nameOverride:t}=e;const{autoAdvance:n,defaultPageDuration:r,updateStory:a}=xa((e=>{let{state:{story:{autoAdvance:t=Rr,defaultPageDuration:n=Pr}},actions:{updateStory:r}}=e;return{autoAdvance:t,defaultPageDuration:n,updateStory:r}})),[o,l]=(0,u.useState)(r);(0,u.useEffect)((()=>{l(r)}),[r]);const i=(0,u.useCallback)(((e,t)=>{a({properties:{autoAdvance:t}}),(0,O.trackEvent)("change_page_advancement",{status:t?"auto":"manual",duration:o})}),[a,o]),s=(0,u.useDebouncedCallback)((e=>{const t=(0,Rs.clamp)(e,lO);e!==t&&l(t),r!==t&&(a({properties:{defaultPageDuration:t}}),(0,O.trackEvent)("change_page_advancement",{status:n?"auto":"manual",duration:t}))}),800);(0,u.useEffect)((()=>{s(o)}),[o,s]);const p=(0,u.useCallback)(((e,t)=>l(t)),[]);return c.createElement(wk,{name:t||"pageAdvancement",title:(0,d.__)("Page Advancement","web-stories"),collapsedByDefault:!1},c.createElement(fx,null,c.createElement(oO,null,(0,d.__)("Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"))),c.createElement(aO,null,c.createElement(Nx,{groupLabel:(0,d.__)("Page Advancement","web-stories"),name:"page-advancement-switch",value:n,onLabel:(0,d.__)("Auto","web-stories"),offLabel:(0,d.__)("Manual","web-stories"),onChange:i})),n&&c.createElement(fx,null,c.createElement(gI,{unit:` ${(0,d.__)("seconds","web-stories")}`,suffix:(0,d.__)("Duration","web-stories"),value:o,onChange:p,"aria-label":(0,d.__)("Default page duration in seconds","web-stories"),min:lO.MIN,max:lO.MAX,isFloat:!0,containerStyleOverride:Uu})))},sO=(e,t)=>{let{MIN:n,MAX:r}=t;return e>=n&&e<=r},cO={MIN:1,MAX:200},dO=(0,p.default)(fx).withConfig({displayName:"slug__PermalinkRow",componentId:"sc-12ylqoy-0"})(["margin-bottom:12px;input{color:",";:active,:focus,.","{color:",";}}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.fg.primary})),uO=p.default.div.withConfig({displayName:"slug__LinkContainer",componentId:"sc-12ylqoy-1"})(["margin-bottom:16px;"]);const pO=function SlugPanel(e){let{nameOverride:t}=e;const{slug:n,link:r,permalinkConfig:a,updateStory:o}=xa((e=>{let{state:{story:{slug:t="",link:n,permalinkConfig:r}},actions:{updateStory:a}}=e;return{slug:t,link:n,permalinkConfig:r,updateStory:a}})),[l,i]=(0,u.useState)(n);(0,u.useEffect)((()=>{i(n)}),[n]);const s=(0,u.useCallback)((e=>{const t=e.slice(0,cO.MAX);o({properties:{slug:mo(t)}})}),[o]),p=(0,u.useCallback)((e=>i(mo(e.target.value,!0))),[]),m=(0,u.useCallback)((e=>s(e.target.value)),[s]),f=l&&a&&sO(l.length,cO)?a.prefix+l+a.suffix:r;return c.createElement(wk,{name:t||"permalink",title:(0,d.__)("Permalink","web-stories"),collapsedByDefault:!1},a&&c.createElement(dO,null,c.createElement(hT,{value:String(l),onChange:p,onBlur:m,placeholder:(0,d.__)("Enter slug","web-stories"),"aria-label":(0,d.__)("URL slug","web-stories"),minLength:cO.MIN,maxLength:cO.MAX,containerStyleOverride:Uu})),c.createElement(uO,null,c.createElement(jd.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},f)))},mO=(0,p.default)(m.Button).withConfig({displayName:"audioPlayer__StyledButton",componentId:"sc-cot87i-0"})(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),fO=p.default.div.withConfig({displayName:"audioPlayer__Wrapper",componentId:"sc-cot87i-1"})((e=>{let{theme:t}=e;return(0,p.css)(["position:relative;min-width:40px;width:100%;height:36px;display:flex;align-items:center;justify-content:space-between;color:",";",";"],t.colors.fg.primary,Bu.expandPresetStyles({preset:{...t.typography.presets.paragraph[$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:t}))})),gO=p.default.audio.withConfig({displayName:"audioPlayer__Audio",componentId:"sc-cot87i-2"})(["display:none;"]);const hO=function AudioPlayer(e){let{title:t,src:n,mimeType:r,tracks:a=[],audioId:o,loop:l}=e;const[i,s]=(0,u.useState)(!1),p=(0,u.useRef)(),{getProxiedUrl:m}=ko(),g=(0,u.useCallback)((()=>{const e=p.current;e&&(i?e.pause():e.play().catch((()=>{})))}),[i]);(0,u.useEffect)((()=>{const e=p.current;if(!e)return;const t=()=>s(!0),n=()=>s(!1),r=()=>{e.currentTime=0,s(!1)};return e.addEventListener("play",t),e.addEventListener("pause",n),e.addEventListener("ended",r),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",n),e.removeEventListener("ended",r)}}),[p]);const h=i?(0,d.__)("Pause","web-stories"):(0,d.__)("Play","web-stories"),E=a.map((e=>{const t=m(e,e?.track);return{...e,track:t}}));return c.createElement(fO,null,c.createElement(gO,{crossOrigin:"anonymous",loop:l,ref:p,id:o},c.createElement("source",{src:n,type:r}),E&&E.map(((e,t)=>{let{srclang:n,label:r,track:a,id:o}=e;return c.createElement("track",{srcLang:n,label:r,kind:"metadata",src:a,key:o,default:0===t})}))),c.createElement("div",null,t),c.createElement(Tooltip,{hasTail:!0,title:h,popupZIndexOverride:10},c.createElement(mO,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,"aria-label":h,onClick:g},i?c.createElement(zy.default,null):c.createElement(ly.default,null))))};function EO(e){try{return"/"!==new URL(e).pathname}catch{return!1}}function bO(e,t){switch(e){case"rest_invalid_param":case"rest_invalid_url":return(0,d.__)("Invalid link.","web-stories");case"rest_invalid_ext":return(0,Ze.default)(
/* translators: %s is the description with allowed file extensions. */
(0,d.__)("Invalid link. %s","web-stories"),t);default:return(0,d.__)("Media failed to load. Please ensure the link is valid and the site allows linking from external sites.","web-stories")}}const yO=p.default.form.withConfig({displayName:"hotlinkModal__InputWrapper",componentId:"sc-bvssi1-0"})(["margin:16px 4px;width:470px;height:100px;"]);const _O=function HotlinkModal(e){let{isOpen:t,onClose:n,onSelect:r,allowedFileTypes:a=[],title:o}=e;const[l,i]=(0,u.useState)(!1),[s,p]=(0,u.useState)(""),[m,f]=(0,u.useState)(!1),g=(0,u.useRef)(null),{actions:{getHotlinkInfo:h}}=Z(),{checkResourceAccess:E}=ko(),b=m||!s||l,_=l?(0,d.__)("Inserting…","web-stories"):(0,d.__)("Insert","web-stories");let v=(0,d.__)("No file types are currently supported.","web-stories");a.length&&(v=(0,Ze.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,It.default)(a))),(0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{t&&g.current&&g.current.focus()}));return()=>clearTimeout(e)}),[t,g]);const w=(0,u.useCallback)((()=>{if(s?.length>0){const e=Br(s);p(e),EO(e)||f((0,d.__)("Invalid link.","web-stories"))}}),[s]),T=(0,u.useCallback)((e=>{m&&f(null),p(e)}),[p,m]),S=(0,u.useCallback)((async()=>{if(s)if(EO(s)){i(!0);try{const e=await h(s),t=await E(s);(0,O.trackEvent)("hotlink_file",{event_label:s,file_size:e.fileSize,file_type:e.mimeType,needs_proxy:t}),r({src:s,needsProxy:t})}catch(e){(0,O.trackError)("hotlink_file",e?.message),f(bO(e.code,v))}finally{i(!1)}}else f((0,d.__)("Invalid link.","web-stories"))}),[v,r,s,h,f,E]),C=(0,u.useCallback)((e=>{e.preventDefault(),b||S()}),[b,S]);return c.createElement(y,{onClose:()=>{n(),p(""),f(!1),i(!1)},isOpen:t,title:o,onPrimary:()=>S(),primaryText:_,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:b}},c.createElement(yO,{onSubmit:C},c.createElement(hT,{ref:g,onChange:e=>{let{target:{value:t}}=e;return T(t)},value:s,hint:m?.length?m:v,hasError:Boolean(m?.length),onBlur:w,label:(0,d.__)("URL","web-stories"),type:"url",required:!0})))},vO=p.default.div.withConfig({displayName:"captionsPanelContent__InputRow",componentId:"sc-17hyw65-0"})(["display:flex;flex-grow:1;margin-right:8px;"]),wO=(0,p.default)(fx).withConfig({displayName:"captionsPanelContent__ButtonRow",componentId:"sc-17hyw65-1"})(["gap:12px;"]),TO=(0,p.default)(hT).withConfig({displayName:"captionsPanelContent__StyledFileInput",componentId:"sc-17hyw65-2"})((e=>{let{$isIndeterminate:t,theme:n}=e;return(0,p.css)(["",";",";"],Hu,!t&&(0,p.css)(["* > input:disabled{color:",";}"],n.colors.fg.primary))})),SO=(0,p.default)(m.Button).withConfig({displayName:"captionsPanelContent__StyledButton",componentId:"sc-17hyw65-3"})(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),CO=(0,p.default)(m.Button).withConfig({displayName:"captionsPanelContent__HotlinkButton",componentId:"sc-17hyw65-4"})(["padding:12px 8px;"]);const IO=function CaptionsPanelContent(e){let{isIndeterminate:t=!1,tracks:n=[],captionText:r=(0,d.__)("Upload a file","web-stories"),handleChangeTrack:a,handleRemoveTrack:o,renderUploadButton:l,clearFileText:i=(0,d.__)("Remove file","web-stories")}=e;const{allowedMimeTypes:{caption:s=[]},capabilities:{hasUploadMediaAction:p},MediaUpload:m}=H(),[g,h]=(0,u.useState)(!1),E=(0,S.useFeature)("captionHotlinking"),b=(0,u.useMemo)((()=>s.map((e=>Ot(e))).flat()),[s]);return s?.length?c.createElement(c.Fragment,null,t&&c.createElement(fx,null,c.createElement(TO,{value:ve,disabled:!0,"aria-label":(0,d.__)("Filename","web-stories"),onChange:()=>o(),$isIndeterminate:t})),n.map((e=>{let{id:t,trackName:n}=e;return c.createElement(fx,{key:`row-filename-${t}`},c.createElement(vO,null,c.createElement(TO,{value:n,"aria-label":(0,d.__)("Filename","web-stories"),onChange:()=>o(t),disabled:!0})),c.createElement(Tooltip,{hasTail:!0,title:i},c.createElement(SO,{"aria-label":i,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:()=>o(t)},c.createElement(Qy.default,null))))})),!n.length&&!t&&c.createElement(wO,{spaceBetween:!1},p&&c.createElement(m,{onSelect:a,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:s,title:r,buttonInsertText:(0,d.__)("Select caption","web-stories"),render:l}),E&&c.createElement(c.Fragment,null,c.createElement(CO,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>h(!0)},(0,d.__)("Link to file","web-stories")),c.createElement(_O,{title:(0,d.__)("Insert external captions","web-stories"),isOpen:g,onSelect:e=>{a(e),h(!1)},onClose:()=>h(!1),allowedFileTypes:b})))):null};function xO(){return xO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xO.apply(this,arguments)}const AO=(0,p.default)(OC.Checkbox).withConfig({displayName:"loopPanelContent__StyledCheckbox",componentId:"sc-lp7bl3-0"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${Ju.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),kO=p.default.div.withConfig({displayName:"loopPanelContent__Wrapper",componentId:"sc-lp7bl3-1"})(["display:flex;gap:12px;align-items:center;"]);const OO=function LoopPanelContent(e){let{loop:t,className:n="",onChange:r,...a}=e;const o=(0,u.useInitializedValue)((()=>`cb-${(0,ue.default)()}`));return c.createElement(kO,{className:n},c.createElement(AO,xO({id:o,checked:t,onChange:r},a)),c.createElement(Ve.Text,{as:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,htmlFor:o},(0,d.__)("Loop","web-stories")))},NO=(0,p.default)(m.Button).withConfig({displayName:"backgroundAudioPanelContent__StyledButton",componentId:"sc-lth4t7-0"})(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),PO=(0,p.default)(NO).withConfig({displayName:"backgroundAudioPanelContent__UploadButton",componentId:"sc-lth4t7-1"})(["padding:12px 8px;"]);const RO=function BackgroundAudioPanelContent(e){let{backgroundAudio:t,updateBackgroundAudio:n,showCaptions:r=!1,showLoopControl:a=!1,audioId:o}=e;const{allowedMimeTypes:{audio:l},capabilities:{hasUploadMediaAction:i},MediaUpload:s}=H(),p=(0,u.useMemo)((()=>l.map((e=>Ot(e))).flat()),[l]),{resource:m,tracks:g=[],loop:h=!0}=t||{},E=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,It.default)(p)),b=(0,u.useCallback)((e=>{const t={resource:{src:e.src,id:e.id,mimeType:e.mimeType,length:e.length,lengthFormatted:e.lengthFormatted}};r&&(t.tracks=[]),a&&(t.loop=!0),n(t)}),[r,a,n]),y=(0,u.useCallback)((e=>{n({...t,tracks:e})}),[t,n]),_=(0,u.useCallback)((e=>{n({...t,loop:e.target.checked})}),[t,n]),v=(0,u.useCallback)((e=>{let t=[];if(e){const n=g.findIndex((t=>{let{id:n}=t;return n===e}));t=[...g.slice(0,n),...g.slice(n+1)]}y(t)}),[g,y]),w=(0,u.useCallback)((e=>{let{src:t="",id:n,needsProxy:r=!1}=e;const a={track:t,trackId:n,trackName:t.split("/").pop(),id:(0,ue.default)(),kind:"captions",srclang:"",label:"",needsProxy:r};y([...g,a])}),[g,y]),T=(0,u.useCallback)((e=>c.createElement(PO,{onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Upload an audio file","web-stories"))),[]),S=(0,d.__)("Upload audio captions","web-stories"),C=(0,u.useCallback)((e=>c.createElement(PO,{onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},S)),[S]);return c.createElement(c.Fragment,null,!m?.src&&i&&c.createElement(fx,{expand:!0},c.createElement(s,{onSelect:b,onSelectErrorMessage:E,type:l,title:(0,d.__)("Upload an audio file","web-stories"),buttonInsertText:(0,d.__)("Select audio file","web-stories"),render:T})),m?.src&&c.createElement(c.Fragment,null,c.createElement(fx,null,c.createElement(hO,{title:m?.src.substring(m?.src.lastIndexOf("/")+1),src:m?.src,mimeType:m?.mimeType,tracks:g,audioId:o,loop:h}),c.createElement(Tooltip,{hasTail:!0,title:(0,d.__)("Remove file","web-stories"),popupZIndexOverride:10},c.createElement(NO,{"aria-label":(0,d.__)("Remove file","web-stories"),type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:()=>n(null)},c.createElement(Qy.default,null)))),r&&c.createElement(IO,{captionText:S,tracks:g||[],handleChangeTrack:w,handleRemoveTrack:v,renderUploadButton:C}),a&&m?.length&&c.createElement(fx,{spaceBetween:!1},c.createElement(OO,{loop:h,onChange:_}))))},MO=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-1n4veap-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const LO=function BackgroundAudioPanel(e){let{nameOverride:t}=e;const{capabilities:{hasUploadMediaAction:n}}=H(),{backgroundAudio:r,updateStory:a}=xa((e=>{let{state:{story:{backgroundAudio:t}},actions:{updateStory:n}}=e;return{backgroundAudio:t,updateStory:n}})),o=(0,u.useCallback)((e=>{a({properties:{backgroundAudio:e}})}),[a]);return r||n?c.createElement(wk,{name:t||"backgroundAudio",title:(0,d.__)("Background Audio","web-stories"),collapsedByDefault:!0},c.createElement(fx,null,c.createElement(MO,null,(0,d.__)("Select an audio file that plays throughout the story.","web-stories"))),c.createElement(RO,{backgroundAudio:r,updateBackgroundAudio:o})):null},DO=(Ea().shape({capabilities:Ea().object,description:Ea().string,hierarchical:Ea().bool,labels:Ea().object,name:Ea().string.isRequired,restBase:Ea().string.isRequired,showCloud:Ea().bool,slug:Ea().string.isRequired,types:Ea().arrayOf(Ea().string),visibility:Ea().object}),(0,p.default)(Lu.Headline).attrs({as:"h3",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"shared__ContentHeading",componentId:"sc-1pfee07-0"})(["margin:4px 0 16px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular}))),BO=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.LINK}).withConfig({displayName:"shared__LinkButton",componentId:"sc-1pfee07-1"})([""," margin-bottom:16px;font-weight:500;"],Bu.expandTextPreset(((e,t)=>{let{link:n}=e,{X_SMALL:r}=t;return n[r]}))),FO=p.default.div.withConfig({displayName:"shared__SiblingBorder",componentId:"sc-1pfee07-2"})(["padding-left:16px;padding-right:16px;& + &{border-top:1px solid ",";padding-top:16px;padding-bottom:8px;}"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),HO={Heading:(0,p.default)(DO).attrs({as:"h4"}).withConfig({displayName:"shared__Heading",componentId:"sc-1pfee07-3"})(["margin-bottom:4px;"]),Wrapper:p.default.div.withConfig({displayName:"shared__Wrapper",componentId:"sc-1pfee07-4"})(["padding:18px 0px;"]),List:p.default.ul.withConfig({displayName:"shared__List",componentId:"sc-1pfee07-5"})(["all:unset;cursor:pointer;"]),ListItem:p.default.li.withConfig({displayName:"shared__ListItem",componentId:"sc-1pfee07-6"})(["all:unset;"]),Word:(0,p.default)(BO).withConfig({displayName:"shared__Word",componentId:"sc-1pfee07-7"})(["margin:0;display:revert;"])},UO="NO_PARENT_VALUE",zO=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ContentArea",componentId:"sc-17x36f5-0"})(["label,* > label{",";color:",";}"],(e=>{let{theme:t}=e;return Bu.expandPresetStyles({preset:t.typography.presets.label[$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t})}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),GO=p.default.form.withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryForm",componentId:"sc-17x36f5-1"})(["margin:24px 0 16px;"]),jO=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ButtonContainer",componentId:"sc-17x36f5-2"})(["display:flex;gap:8px;"]),YO=(0,p.default)(Ve.Text).attrs({forwardedAs:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"HierarchicalTermSelector__Label",componentId:"sc-17x36f5-3"})(["display:inline-block;margin:12px 0;"]),ZO=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.SECONDARY}).withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryButton",componentId:"sc-17x36f5-4"})(["margin-top:20px;"]);const WO=function HierarchicalTermSelector(e){let{noParentId:t=UO,taxonomy:n,canCreateTerms:r}=e;const{createTerm:a,termCache:o,terms:l,setTerms:i}=Ai((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,setTerms:a}}=e;return{createTerm:r,setTerms:a,termCache:t,terms:n}})),s=(0,u.useMemo)((()=>o?.[n.restBase]?Object.values(o[n.restBase]).map((e=>({id:e.id,parent:e.parent,value:e.id,label:e.name,checked:l[n.restBase]?.includes(e.id),slug:e.slug}))):[]),[n,o,l]),[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(""),[h,E]=(0,u.useState)(t),b=(0,u.useMemo)(ue.default,[]),[y,_]=(0,u.useState)(!1),v=(0,u.useRef)(),w=(0,u.useRef)(),[T,S]=(0,u.useState)(!1),[C,I]=(0,u.useState)(""),x=(0,u.useCallback)((e=>I(e)),[]),A=(0,AA.default)("assertive"),k=(0,u.useCallback)((()=>{g(""),E(t)}),[t]),O=(0,u.useCallback)(((e,t)=>{let{id:r,checked:a}=t;const o=s.find((e=>e.id===r));i(n,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.findIndex((e=>e===o.id));return a&&-1===t?[...e,o.id]:!a&&t>-1?[...e.slice(0,t),...e.slice(t+1)]:e}))}),[s,i,n]),N=(0,u.useCallback)((()=>{m(!p),k(),_(!p),S(p)}),[k,p]),P=(0,u.useCallback)((e=>{g(e.target.value)}),[]),R=(0,u.useMemo)((()=>s.find((e=>e.id===h))?.slug),[h,s]),M=(0,u.useCallback)((e=>{e.preventDefault();a(n,f,{id:h===t?0:h,slug:R},!0),A((0,Ze.default)(
/* Translators: %s: Taxonomy label name. */
(0,d.__)("%s added.","web-stories"),n.labels.singular_name)),m(!1),k(),S(p)}),[a,A,f,t,k,h,p,n,R]),L=(0,u.useCallback)(((e,t)=>E(t)),[]);(0,u.useEffect)((()=>{const e=v.current;if(e){const t=e=>{"Enter"===e.key&&M(e)};return e.addEventListener("keypress",t),()=>{e.removeEventListener("keypress",t)}}return null}),[M,v]),(0,u.useEffect)((()=>{T&&w.current.focus()}),[T]);const D=(0,u.useMemo)((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=OA(e);return RA(PA(n,t))}(s,C)),[s,C]),B=(0,u.useMemo)((()=>[{value:UO,label:(0,d.__)("None","web-stories")}].concat(D).map((e=>{let{$level:t,label:n,...r}=e;return{...r,label:`${Array.from({length:t},(()=>"— ")).join("")} ${n}`}}))),[D]);return c.createElement(zO,null,c.createElement(DO,null,n.labels.name),c.createElement(GA,{inputValue:C,onInputChange:x,label:n.labels.searchItems,options:D,onChange:O,noOptionsText:n.labels?.notFound}),r?c.createElement(c.Fragment,null,!p&&c.createElement(BO,{ref:w,"aria-expanded":!1,onClick:N},n.labels.addNewItem),p?c.createElement(GO,{ref:v,onSubmit:M},c.createElement(hT,{autoFocus:!0,name:n.labels.newItemName,label:n.labels.newItemName,value:f,onChange:P,hasFocus:y}),c.createElement(YO,{htmlFor:b},n.labels.parentItem),c.createElement(_A.DropDown,{id:b,ariaLabel:n.labels.parentItem,options:B,selectedValue:h,onMenuItemClick:L}),c.createElement(jO,null,c.createElement(ZO,{disabled:!f.length,type:"submit"},n.labels.addNewItem),c.createElement(ZO,{"aria-expanded":!0,onClick:N},(0,d.__)("Cancel","web-stories")))):null):null)};var VO=n(66044);function $O(e){return e.replace(/( +)/g," ").trim()}function qO(e){const t=new Map;return e.forEach((e=>{t.set(mo(e),e)})),[...t.values()]}function KO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===t.length&&e.every((e=>t.includes(e)))}const XO="updateValue",QO="submitValue",JO="removeTag",eN="resetOffset",tN="resetValue",nN="incrementOffset",rN="decrementOffset",aN="updateTags";const oN=function(e,t){switch(t.type){case XO:{const n=t.payload.split(",");if(n.length<=1)return{...e,value:t.payload};const r=n.slice(0,-1).map($O).filter((e=>e.length)),a=n[n.length-1];return function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>e.includes(t)))}(r,e.tags)?{...e,value:a}:{...e,value:a,tagBuffer:qO([...e.tags.slice(0,e.tags.length-e.offset),...r,...e.tags.slice(e.tags.length-e.offset)])}}case QO:{const n=$O(t?.payload||e.value);return""===n||e.tags.includes(n)?{...e,value:""}:{...e,value:"",tagBuffer:qO([...e.tags.slice(0,e.tags.length-e.offset),n,...e.tags.slice(e.tags.length-e.offset)])}}case JO:{const n="string"==typeof t.payload?e.tags.findIndex((e=>e===t.payload)):e.tags.length-1-e.offset;return n<0?e:{...e,tagBuffer:[...e.tags.slice(0,n),...e.tags.slice(n+1,e.tags.length)]}}case nN:return{...e,offset:(0,Rs.clamp)(e.offset+1,{MIN:0,MAX:e.tags.length})};case rN:return{...e,offset:(0,Rs.clamp)(e.offset-1,{MIN:0,MAX:e.tags.length})};case eN:return{...e,offset:0};case tN:return{...e,value:""};case aN:{const n=e.tags.map((e=>[mo(e),e])),r=t.payload.map((e=>[mo(e),e]));if(KO(n.map((e=>{let[t]=e;return t})),r.map((e=>{let[t]=e;return t}))))return e;const a=n.filter((e=>{let[t]=e;return r.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t})),o=r.filter((e=>{let[t]=e;return!n.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t}));return{...e,tags:[...a,...o],tagBuffer:null}}default:return e}},lN=p.default.button.withConfig({displayName:"tag__Dismiss",componentId:"sc-14unxs6-0"})(["all:unset;cursor:pointer;border-radius:",";",";width:22px;min-width:22px;height:22px;display:flex;justify-content:center;align-items:center;svg{height:20px;width:20px;margin:auto;}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),Fu.focusableOutlineCSS),iN=p.default.span.withConfig({displayName:"tag__Token",componentId:"sc-14unxs6-1"})([""," position:relative;display:flex;align-items:center;padding:2px;margin:2px;max-width:calc(100% - 4px);height:32px;"],(e=>{let{theme:t}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small)})),sN=(0,p.default)(Ve.Text).attrs({forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"tag__TokenText",componentId:"sc-14unxs6-2"})(["padding-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);const cN=function Tag(e){let{children:t,onDismiss:n}=e;const r=(0,u.useMemo)((()=>(0,ue.default)()),[]);return c.createElement(iN,{"data-testid":"flat-term-token"},c.createElement(sN,{id:r},t),c.createElement(Tooltip,{title:(0,d.__)("Remove Tag","web-stories"),placement:_d.PLACEMENT.BOTTOM,hasTail:!0,popupZIndexOverride:10},c.createElement(lN,{onClick:n,"aria-label":(0,d.__)("Remove Tag","web-stories"),"aria-describedby":r},c.createElement(Du.default,null))))};function dN(){return dN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dN.apply(this,arguments)}const uN=(0,ue.default)(),pN=p.default.div.withConfig({displayName:"input__Border",componentId:"sc-1nuo5lh-0"})([""," display:flex;flex-direction:column;margin-bottom:6px;"],(e=>{let{theme:t,isInputFocused:n}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small,n&&Fu.focusCSS)})),mN=p.default.div.withConfig({displayName:"input__InputWrapper",componentId:"sc-1nuo5lh-1"})(["display:flex;flex-wrap:wrap;padding:0;"]),fN=(0,p.default)(gT).attrs({type:"text"}).withConfig({displayName:"input__TextInput",componentId:"sc-1nuo5lh-2"})(["width:auto;flex-grow:1;height:32px;margin:2px 0;padding-left:4px;"]),gN=(0,p.default)(zv).withConfig({displayName:"input__SuggestionList",componentId:"sc-1nuo5lh-3"})(["max-height:120px;overflow-y:scroll;border-top:",";display:block;list-style-type:none;width:100%;padding:6px 4px 4px;margin-top:6px;li{cursor:pointer;padding:4px;width:100%;"," border-radius:",";&:hover{background-color:",";}}"],(e=>{let{theme:t}=e;return`1px solid ${t.colors.border.defaultNormal}`}),Fu.focusableOutlineCSS(),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}));const hN=function(e){let{suggestedTerms:t=[],onTagsChange:n,onInputChange:r,suggestedTermsLabel:a,tagDisplayTransformer:o,tokens:l=[],onUndo:i=VO.noop,...s}=e;const[{value:d,tags:p,offset:m,tagBuffer:f},g]=(0,u.useReducer)(oN,{value:"",tags:[...l],tagBuffer:null,offset:0}),[h,E]=(0,u.useState)(!1),[b,y]=(0,u.useState)(!1),_=(0,u.useRef)(),v=(0,u.useRef)(),w=(0,u.useRef)();(0,u.useEffect)((()=>{g({type:aN,payload:l})}),[l]);const T=(0,ue.default)(),S=t.length;(0,u.useEffect)((()=>{y(S>0)}),[S]);const C=(0,u.useRef)(n);C.current=n,(0,u.useEffect)((()=>{f&&C.current?.(f)}),[f]);const I=(0,u.useRef)(r);I.current=r,(0,u.useEffect)((()=>{I.current?.(d)}),[d]);const{handleFocus:x,handleBlur:A,handleKeyDown:k,handleChange:O,removeTag:N}=(0,u.useMemo)((()=>({handleKeyDown:e=>{""===e.target.value&&("ArrowLeft"===e.key&&g({type:nN}),"ArrowRight"===e.key&&g({type:rN}),"Backspace"===e.key&&g({type:JO}),"z"===e.key&&e.metaKey&&i(e)),"ArrowDown"===e.key&&t.length>0&&v?.current?.firstChild?.focus(),["Comma",",","Enter"].includes(e.key)&&g({type:QO})},handleChange:e=>{g({type:XO,payload:e.target.value})},removeTag:e=>()=>{g({type:JO,payload:e}),_?.current.focus()},handleFocus:()=>{E(!0)},handleBlur:()=>{g({type:eN}),E(!1)}})),[i,t]),P=f||p,R=(0,u.useCallback)(((e,t)=>{e.preventDefault(),y(!1),g({type:QO,payload:t}),_?.current.focus()}),[]),M=(0,u.useCallback)(((e,t,n)=>{const r=t+1,a=t-1;"ArrowDown"===e.key&&r<S&&v?.current?.children?.[r]?.focus(),"ArrowUp"===e.key&&(a<0?_?.current.focus():v?.current?.children?.[a]?.focus()),"Enter"===e.key&&R(e,n)}),[R,S]);return c.createElement(pN,{ref:w,isInputFocused:h},c.createElement(mN,null,[...P.slice(0,P.length-m),uN,...P.slice(P.length-m)].map((e=>e===uN?c.createElement(fN,dN({},s,{key:uN,value:d,onKeyDown:k,onChange:O,onFocus:x,onBlur:A,size:"4",ref:_,autoComplete:b?"off":"on","aria-expanded":b,"aria-autocomplete":"list","aria-owns":b?T:null,role:"combobox"})):c.createElement(cN,{key:e,onDismiss:N(e)},o(e)||e)))),b&&c.createElement(gN,{"aria-label":a,role:"listbox",ref:v,id:T,"data-testid":"suggested_terms_list"},t.map(((e,t)=>{let{name:n,id:r}=e;return c.createElement("li",{key:r,"aria-selected":d===n,role:"option",tabIndex:0,onClick:e=>R(e,n),onKeyDown:e=>M(e,t,n)},n)}))))},EN=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"description",componentId:"sc-1gy988t-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),bN=(0,p.default)(Ve.Text).attrs({forwardedAs:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"label",componentId:"sc-1y7bq6c-0"})(["display:inline-block;color:",";margin-bottom:8px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),yN={Input:hN,Description:EN,Label:bN};const _N=function FlatTermSelector(e){let{taxonomy:t,canCreateTerms:n}=e;const[r,a]=(0,u.useState)([]),{createTerm:o,termCache:l,addSearchResultsToCache:i,terms:s=[],setTerms:p,addTermToSelection:m}=Ai((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,addSearchResultsToCache:a,setTerms:o,addTermToSelection:l}}=e;return{termCache:t,createTerm:r,addSearchResultsToCache:a,terms:n,setTerms:o,addTermToSelection:l}})),{undo:f}=mr((e=>{let{actions:{undo:t}}=e;return{undo:t}})),[g,h]=(0,u.useState)([]),E=(0,AA.default)("assertive"),b=(0,u.useCallback)((e=>{const r=e.map((e=>[mo(e),e])),a=r.map((e=>{let[t]=e;return t})).map((e=>l[t.restBase]?.[e])).filter((e=>e)).map((e=>e.id));if(KO(s[t.restBase],a)||p(t,a),!n)return;const i=r.filter((e=>{let[n]=e;return!l[t.restBase]?.[n]})).map((e=>{let[,t]=e;return t}));i.forEach((e=>o(t,e,null,!0)))}),[n,s,t,l,p,o]),y=(0,u.useDebouncedCallback)((async e=>{if(0===e.length)return void h([]);if(e.length<3)return;const n=await i(t,{search:e,per_page:20});h(n);const r=n.length,a=(0,Ze.default)(
/* Translators: %d: Number of results. */
(0,d._n)("%d result found.","%d results found.","web-stories","web-stories"),r);E(a)}),300),_=(0,u.useMemo)((()=>(s[t.restBase]||[]).map((e=>Object.values(l[t.restBase]||{}).find((t=>t.id===e)))).filter((e=>void 0!==e)).map((e=>e.name))),[t,s,l]),v=(0,u.useCallback)((e=>l[t.restBase]?.[mo(e)]?.name),[t,l]);return(0,u.useEffect)((()=>{!async function(){const e=await i(t,{orderby:"count",order:"desc",hide_empty:!0});a(e)}()}),[t,i]),c.createElement(c.Fragment,null,c.createElement(DO,null,t.labels.name),c.createElement("div",{key:t.slug},c.createElement(yN.Label,{htmlFor:`${t.slug}-input`},t.labels.addNewItem),c.createElement(yN.Input,{id:`${t.slug}-input`,"aria-describedby":`${t.slug}-description`,name:t.slug,onTagsChange:b,onInputChange:y,tagDisplayTransformer:v,tokens:_,onUndo:f,suggestedTerms:g,suggestedTermsLabel:t?.labels?.itemsList}),c.createElement(yN.Description,{id:`${t.slug}-description`},t.labels.separateItemsWithCommas),r.length>0&&c.createElement(HO.Wrapper,{"data-testid":`${t.slug}-most-used`},c.createElement(HO.Heading,null,t.labels.mostUsed),c.createElement(HO.List,null,r.map(((e,n)=>c.createElement(HO.ListItem,{key:e.id},c.createElement(HO.Word,{onClick:()=>{s[t.restBase]?.includes(e.id)||m(t,e)}},e.name,n<r.length-1&&
/* translators: delimiter used in a list */
(0,d.__)(",","web-stories")),n<r.length-1&&" ")))))))};function vN(){return vN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vN.apply(this,arguments)}const wN=(0,p.default)(wk).withConfig({displayName:"taxonomies__StyledSimplePanel",componentId:"sc-171mnp-0"})(["padding-left:0;padding-right:0;"]);const TN=function TaxonomiesPanel(e){let{nameOverride:t,...n}=e;const{capabilities:r}=xa((e=>{let{state:{capabilities:t}}=e;return{capabilities:t}})),{taxonomies:a}=Ai((e=>{let{state:{taxonomies:t}}=e;return{taxonomies:t}}));if(!a?.length)return null;const o=a.filter((e=>{const t=e?.visibility?.show_ui,n=Boolean(r[`assign-${e?.restBase}`]||r[`assign-${e?.slug}`]);return t&&n}));return 0===o.length?null:c.createElement(wN,vN({name:t||"taxonomies",title:(0,d.__)("Taxonomies","web-stories")},n),o.map((e=>{const t=Boolean(r[`create-${e?.restBase}`]||r[`create-${e?.slug}`]);return c.createElement(FO,{key:e.slug},e.hierarchical?c.createElement(WO,{taxonomy:e,canCreateTerms:t}):c.createElement(_N,{taxonomy:e,canCreateTerms:t}))})))},SN=p.default.div.withConfig({displayName:"flipControls__ControlsContainer",componentId:"sc-1gcq876-0"})(["display:flex;justify-content:left;align-items:flex-start;"]),CN=p.default.div.withConfig({displayName:"flipControls__Space",componentId:"sc-1gcq876-1"})(["width:8px;"]),IN=(0,p.default)(YS).withConfig({displayName:"flipControls__StyledToggleButton",componentId:"sc-1gcq876-2"})(["",";"],Hu);const xN=function FlipControls(e){let{value:t,onChange:n}=e;const r=(0,u.useCallback)((e=>!0===t[e]),[t]);return c.createElement(SN,null,c.createElement(Tooltip,{title:(0,d.__)("Flip horizontally","web-stories")},c.createElement(IN,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,isToggled:!0===t.horizontal,onClick:()=>n({...t,horizontal:!r("horizontal")}),"aria-label":(0,d.__)("Flip horizontally","web-stories")},c.createElement(rb,null))),c.createElement(CN,null),c.createElement(Tooltip,{title:(0,d.__)("Flip vertically","web-stories")},c.createElement(IN,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,isToggled:!0===t.vertical,onClick:()=>n({...t,vertical:!r("vertical")}),"aria-label":(0,d.__)("Flip vertically","web-stories")},c.createElement(sb,null))))},AN=[{key:"sponsored",title:(0,d.__)("Sponsored","web-stories")},{key:"nofollow",title:(0,d.__)("Nofollow","web-stories")}],kN=p.default.div.withConfig({displayName:"linkRelations__CheckboxWrapper",componentId:"sc-123e3hl-0"})(["display:flex;padding:9px 0;"]),ON=p.default.label.withConfig({displayName:"linkRelations__Label",componentId:"sc-123e3hl-1"})(["margin-left:12px;"]),NN=(0,p.default)(Ve.Text).withConfig({displayName:"linkRelations__StyledText",componentId:"sc-123e3hl-2"})(["color:",";padding:8px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const PN=function LinkRelations(e){let{rel:t,onChangeRel:n}=e;const r=(0,d.__)("https://developers.google.com/search/docs/advanced/guidelines/qualify-outbound-links?hl=en","web-stories"),a=(0,u.useCallback)((e=>{const r=t.includes(e)?t.filter((t=>t!==e)):[...t,e];n(r)}),[n,t]);return c.createElement(fx,null,c.createElement("div",null,c.createElement(NN,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Qualify outbound links","web-stories")),AN.map((e=>{let{key:n,title:r}=e;return c.createElement(kN,{key:n},c.createElement(OC.Checkbox,{id:n,name:n,checked:t?.includes(n),onChange:()=>a(n)}),c.createElement(ON,{htmlFor:n},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},r)))})),c.createElement(jd.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Learn more","web-stories"))))};function RN(e,t){return void 0===e?t:e}const MN=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r="function"==typeof t?t:e=>e[t],a=RN(r(e[0]),n),o=e.every((e=>RN(r(e),n)===a));return o?a:_e};const LN=function(e,t,n){const r={},a=e.map((e=>e[t]||n));return Object.keys(n).forEach((e=>{r[e]=MN(a,e)})),r};const DN=function(e,t){return(0,u.useMemo)((()=>{const n=e.map((e=>e[t]));if(0===n.length)return null;if(1===n.length)return n[0];const r={};return n.forEach((e=>{const t=(0,uC.default)((0,Nr.default)(e));t in r||(r[t]=e)})),1===Object.keys(r).length?Object.values(r)[0]:_e}),[e,t])};const BN=function(e,t,n){const r=LN(e,t,n),a=Object.keys(n).map((e=>r[e]));return(0,u.useMemo)((()=>r),a)};var FN=n(30963);function HN(){return HN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HN.apply(this,arguments)}const UN=(0,u.forwardRef)((function FontPicker(e,t){let{zIndex:n,onChange:r,currentValue:a,highlightStylesOverride:o,showDropdownLabel:l,listStyleOverrides:i,containerStyleOverrides:s,className:p,tabIndex:m}=e;const{fonts:f=[],recentFonts:g=[],curatedFonts:h=[],customFonts:E=[],ensureMenuFontsLoaded:b,ensureCustomFontsLoaded:y,getFontsBySearch:_,getCustomFonts:v,getCuratedFonts:w}=ho((e=>{let{actions:t,state:n}=e;return{getFontsBySearch:t.getFontsBySearch,ensureMenuFontsLoaded:t.ensureMenuFontsLoaded,ensureCustomFontsLoaded:t.ensureCustomFontsLoaded,getCuratedFonts:t.getCuratedFonts,getCustomFonts:t.getCustomFonts,recentFonts:n.recentFonts,curatedFonts:n.curatedFonts,fonts:n.fonts,customFonts:n.customFonts}}));(0,u.useEffect)((()=>{v(),w()}),[v,w]);const T=(0,u.useMemo)((()=>{const e=new Map;return f.forEach((t=>{e.set(t.id,t)})),E?.forEach((t=>{e.set(t.id,t)})),e}),[f,E]),S=(0,u.useCallback)((e=>{e.length&&(b(e.filter((e=>"fonts.google.com"===T.get(e)?.service))),y(e.filter((e=>"custom"===T.get(e)?.service))))}),[T,y,b]),C=(0,u.useCallback)(((e,t)=>{let{option:n,...r}=e;return c.createElement(FN.default.Option,HN({ref:t},r,{fontFamily:"fonts.google.com"===n.service?`'${n.name}::MENU'`:n.name}),a===n.id&&c.createElement(FN.default.Selected,{"aria-label":(0,d.__)("Selected","web-stories")}),n.name)}),[a]),I=(0,u.useMemo)((()=>[...E?.length?[{label:(0,d.__)("Your fonts","web-stories"),options:E}]:[],...g?.length?[{label:(0,d.__)("Recently used","web-stories"),options:g}]:[]]),[E,g]);return c.createElement(FN.default.DropDown,{ref:t,zIndex:n,tabIndex:m,highlightStylesOverride:o,"data-testid":"font",title:(0,d.__)("Available font families","web-stories"),dropdownButtonLabel:(0,d.__)("Font family","web-stories"),options:f,primaryOptions:h,primaryLabel:(0,d.__)("Recommended","web-stories"),priorityOptionGroups:I,searchResultsLabel:(0,d.__)("Search results","web-stories"),selectedId:_e===a?"":a,placeholder:_e===a?ve:a,hasSearch:!0,getOptionsByQuery:_,onChange:r,onObserve:S,renderer:(0,u.forwardRef)(C),disabled:!f?.length,dropDownLabel:l?(0,d.__)("Font","web-stories"):null,listStyleOverrides:i,containerStyleOverrides:s,className:p})})),zN=UN;var GN=n(15242);const jN={...Hn.ELEMENT_TYPES,MULTIPLE:"multiple",NONE:"none"};var YN=n(98448);const ZN=(0,u.createContext)(null),WN={cleanup:null,focusGroups:{},cleanupCallbacks:{}},VN={addNodeToGroup:(e,t)=>{const{groupId:n,nodeTuple:r}=t.payload,a=e.focusGroups[n]||[];let o=[];const l=a.findIndex((e=>e[0]===r[0]));return o=-1===l?[...a,r]:[...a.slice(0,l),r,...a.slice(0,l+1)],{...e,focusGroups:{...e.focusGroups,[n]:o}}},removeNodeFromGroup:(e,t)=>{const{groupId:n,nodeTuple:r}=t.payload,a=(e.focusGroups[n]||[]).filter((e=>e[0]!==r[0]));return{...e,focusGroups:{...e.focusGroups,[n]:a}}},setFocusGroupCleanup:(e,t)=>{const{groupId:n,cleanup:r}=t.payload;return{...e,activeGroupKey:n,cleanupCallbacks:{...e.cleanupCallbacks,[n]:r}}}};const $N=function KeyBindings(e){let{uuid:t,node:n,focusGroup:r,exitFocusGroup:a}=e;const o=(0,u.useCallback)((e=>{e.preventDefault();const n=function(e,t){return function(n){if(!t)return;const r=t.findIndex((t=>t[0]===e));if(-1===r)return;const a=((r+n)%(o=t.length)+o)%o;var o;const[,l]=t[a];l?.focus()}}(t,r);e.shiftKey?n(-1):n(1)}),[r,t]),l=(0,u.useCallback)((e=>{e.preventDefault(),a()}),[a]);return(0,nr.useKeyDownEffect)(n,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},o,[o]),(0,nr.useKeyDownEffect)(n,{key:["esc"],allowDefault:!0,editable:!0},l,[l]),null};const qN=function EditLayerFocusManager(e){let{children:t}=e;const[n,r]=(0,u.useReduction)(WN,VN),a=(0,u.useRef)(n);a.current=n;const o=(0,u.useCallback)((e=>{let{groupId:t}=e;const n=a.current.focusGroups?.[t]?.[0];if(n){const[,e]=n;e.focus()}}),[a]),l=Object.entries(n.focusGroups),i=n.cleanupCallbacks;return c.createElement(ZN.Provider,{value:{enterFocusGroup:o,setFocusGroupCleanup:r.setFocusGroupCleanup,actions:r}},l.map((e=>{let[t,n]=e;return n.map((e=>{let[r,a]=e;return a&&c.createElement($N,{key:r,uuid:r,node:a,focusGroup:n,exitFocusGroup:i[t]})}))})),t)};const KN=function(e){const t=(0,u.useContextSelector)(ZN,(e=>e.actions)),n=(0,u.useInitializedValue)(ue.default);return(0,u.useCallback)((r=>{null!==r?t.addNodeToGroup({groupId:e,nodeTuple:[n,r]}):t.removeNodeFromGroup({groupId:e,nodeTuple:[n,r]})}),[t,e,n])};const XN=function(e){return(0,u.useContextSelector)(ZN,e??u.identity)},QN={EDIT_ELEMENT:"EDIT_ELEMENT",ELEMENT_SELECTION:"ELEMENT_SELECTION"},JN=(0,u.createContext)({state:{},actions:{}});const eP=function(e){return(0,u.useContextSelector)(JN,e??u.identity)};const tP=function FloatingMenuProvider(e){let{handleDismiss:t,children:n}=e;const r={state:{},actions:{handleDismiss:t}};return c.createElement(JN.Provider,{value:r},n)},nP={left:0,right:0,top:0,bottom:0,lockedWidth:!0,color:(0,BT.default)(0,0,0)};function rP(){return rP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rP.apply(this,arguments)}const aP=function FloatingColor(e){const{hasInputs:t,hasEyedropper:n,allowsGradient:r=!0}=e,a=function(e,t){return(e?184:60)+(t?38:0)}(t,n);return c.createElement(PI,rP({width:a,maxHeight:362,pickerPlacement:_d.PLACEMENT.TOP_START,isInDesignMenu:!0,allowsGradient:r,allowsSavedColors:!0,allowsSavedColorDeletion:!1,pickerHasEyedropper:!n,containerLabelBase:(0,d.__)("Color input (floating menu)","web-stories")},e))};var oP=n(87098);function lP(){return lP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lP.apply(this,arguments)}const iP=p.default.div.withConfig({displayName:"icon__IconWrapper",componentId:"sc-scm7dy-0"})(["width:32px;height:32px;"]);const sP=function(e){let{children:t,title:n,className:r="",...a}=e;return c.createElement(c.Fragment,null,c.createElement(oP.VisuallyHidden,null,n),c.createElement(iP,lP({className:r},a),t))};var cP=n(51537);function dP(){return dP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dP.apply(this,arguments)}const uP=(0,u.forwardRef)((function ToggleButton(e,t){let{isToggled:n,children:r,...a}=e;const o="boolean"==typeof n?{type:n?f.BUTTON_TYPES.SECONDARY:f.BUTTON_TYPES.TERTIARY,"aria-pressed":n,role:"button"}:{};return c.createElement(cP.default,dP({ref:t},o,a),r)}));function pP(){return pP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pP.apply(this,arguments)}const mP=(0,u.memo)((0,u.forwardRef)((function IconButton(e,t){let{Icon:n,...r}=e;return c.createElement(Tooltip,{placement:_d.PLACEMENT.BOTTOM,title:r.title},c.createElement(uP,pP({ref:t,tabIndex:-1},r),c.createElement(sP,{title:r.title},c.createElement(n,null))))}))),fP=mP,gP=(0,p.default)(gI).attrs({inputClassName:NT.CONTEXT_MENU_SKIP_ELEMENT}).withConfig({displayName:"input__Input",componentId:"sc-79zl03-0"})(["width:70px;flex:0 0 70px;"]);var hP=n(77568);const EP=hP.default;function bP(){return bP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bP.apply(this,arguments)}const yP=(0,p.default)(cP.default).withConfig({displayName:"text__Button",componentId:"sc-fb6dx4-0"})(["font-size:14px;padding:0 12px;font-weight:normal;letter-spacing:normal;"]),_P=(0,u.memo)((function TextButton(e){let{text:t,...n}=e;return c.createElement(yP,bP({forcePadding:!0,title:t},n,{tabIndex:-1}),t)}));const vP=function(e){return xa((t=>{let{state:{selectedElements:n}}=t;return Bn(n[0],e)}))};function wP(e,t){return Object.fromEntries(Object.keys(t).map((n=>{const r=e[n]===_e,a=void 0!==e[n]&&!function(e,t){const n=e&&"object"==typeof e&&(e.type||e.color),r=t&&"object"==typeof t&&(t.type||t.color);return n&&r?(0,dC.default)(e,t):e===t}(e[n],t[n]);return r||a?[n,_e]:[n,t[n]]})))}const TP=function(e,t){const{hasCurrentEditor:n,selectionInfo:r,selectionActions:a}=(0,Ir.useRichText)((e=>{let{state:t,actions:n}=e;return{hasCurrentEditor:t.hasCurrentEditor,selectionInfo:t.selectionInfo,selectionActions:n.selectionActions}})),{clearEditing:o}=Os((e=>{let{actions:{clearEditing:t}}=e;return{clearEditing:t}})),l=(0,u.useMemo)((()=>n?r:e.map((e=>{let{content:t}=e;return t})).map(Ir.getHTMLInfo).reduce(wP,{})),[n,r,e]),i=(0,u.useCallback)((function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t((t=>{let{content:n}=t;return{content:e(n,...r)}}),!0)}),[t]),s=(0,u.useRef)(null),c=(0,u.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.current=t}),[s]);(0,u.useEffect)((()=>{const e=s.current;e&&(i(...e),s.current=null)}),[e,s,i]);const d=(0,u.useMemo)((()=>{const e=(0,Ir.getHTMLFormatters)();return n?{handleClickBold:()=>a.toggleBoldInSelection(),handleSelectFontWeight:a.setFontWeightInSelection,handleClickItalic:a.toggleItalicInSelection,handleClickUnderline:a.toggleUnderlineInSelection,handleClickUppercase:a.toggleUppercaseInSelection,handleSetLetterSpacing:a.setLetterSpacingInSelection,handleSetColor:a.setColorInSelection,handleResetFontWeight:async t=>{await o(),c(e.setFontWeight,t)}}:{handleClickBold:t=>i(e.toggleBold,t),handleSelectFontWeight:t=>i(e.setFontWeight,t),handleClickItalic:t=>i(e.toggleItalic,t),handleClickUnderline:t=>i(e.toggleUnderline,t),handleClickUppercase:t=>i(e.toggleUppercase,t),handleSetLetterSpacing:t=>i(e.setLetterSpacing,t),handleSetColor:t=>i(e.setColor,t),handleResetFontWeight:t=>i(e.setFontWeight,t)}}),[n,a,i,o,c]),p=(0,u.useCallback)((()=>e.filter((e=>{let{type:t}=e;return"text"===t})).length>0),[e]);return(0,nr.useGlobalKeyDownEffect)({key:["mod+b","mod+u","mod+i"]},(e=>{let{key:t}=e;if(p)switch(t){case"b":d.handleClickBold();break;case"i":d.handleClickItalic();break;case"u":d.handleClickUnderline()}}),[d,p]),{textInfo:l,handlers:d}};const SP=function(e){let{currentValue:t,handler:n,eventName:r}=e;const{content:a}=vP(["content"]),o=xa((e=>e.actions.updateSelectedElements)),l=(0,u.useCallback)((e=>{(0,O.trackEvent)("floating_menu",{name:r,element:"text"}),o({properties:t=>c_(t,e,!0)})}),[o,r]),{textInfo:i,handlers:s}=TP([{content:a,type:"text"}],l);return{isToggled:i[t],toggle:()=>{(0,s[n])(!i[t])}}},CP=p.default.div.withConfig({displayName:"borderWidthAndColor__Container",componentId:"sc-1qijom4-0"})(["display:flex;align-items:center;"]),IP=p.default.div.withConfig({displayName:"borderWidthAndColor__Dash",componentId:"sc-1qijom4-1"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const xP={color:{r:0,g:0,b:0}},AP=(0,d.__)("Border width","web-stories"),kP=(0,d.__)("Border color","web-stories");const OP=function BorderWidthAndColor(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{border:n=nP,mask:r,type:a}=vP(["border","mask","type"]),o=xa((e=>{let{actions:t}=e;return t.updateSelectedElements})),l=n.left===n.right&&n.left===n.top&&n.left===n.bottom;if(!n.lockedWidth&&!l)return null;const i=(0,Nn.canSupportMultiBorder)({mask:r}),s=function(e){if(!e)return!1;const{left:t,right:n,top:r,bottom:a}=e;return Boolean(t||n||r||a)}(n);return c.createElement(CP,null,c.createElement(LT,{ref:t,inputRef:e,inputLabel:AP},c.createElement(gP,{tabIndex:-1,ref:e,suffix:c.createElement(hg,null),value:n.left||0,"aria-label":AP,onChange:(e,t)=>(e=>{(0,O.trackEvent)("floating_menu",{name:"set_border_width",element:a}),o({properties:t=>{let{border:r}=t;return{border:{locked:!0,color:n.color,...r,left:e,right:e,top:e,bottom:e}}}})})(t),onKeyDown:e=>{MT(e,t)}})),s&&c.createElement(c.Fragment,null,c.createElement(IP,null),c.createElement(aP,{tabIndex:-1,label:kP,value:n.color||xP,onChange:e=>{(0,O.trackEvent)("floating_menu",{name:"set_border_color",element:a}),o({properties:t=>{let{border:n}=t;return{border:{...n,color:e}}}})},hasInputs:!1,hasEyedropper:!1,allowsOpacity:i,allowsGradient:!1,allowsSavedColors:!1})))},NP=(0,p.css)(["position:relative;:focus-within{z-index:1;",";}"],(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),PP=(0,p.css)(["width:29px;height:29px;"]),RP=(0,p.default)(gI).withConfig({displayName:"stackableInput__StackableInput",componentId:"sc-bgp531-0"})(["svg{","}& > div{border-radius:0;margin-left:-1px;padding:2px 7px 2px 12px;",";}"],PP,NP),MP=p.default.div.withConfig({displayName:"stackableGroup__StackableContainer",componentId:"sc-ogfpu5-0"})(["display:flex;max-width:",";& > ","{border-radius:0;&:first-of-type > div{border-top-left-radius:4px;border-bottom-left-radius:4px;margin-left:0;}&:last-of-type > div{border-top-right-radius:4px;border-bottom-right-radius:4px;}}"],(e=>{let{locked:t}=e;return t?"106px":"none"}),RP);const LP=function StackableGroup(e){let{children:t,locked:n,className:r}=e;return c.createElement(MP,{locked:n,className:r},t)},DP={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},BP=p.default.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),FP=p.default.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),HP=(0,p.default)(LockToggle).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],Hu),UP=(0,p.default)(ch).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),zP=(0,p.default)(ch).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),GP=(0,p.default)(ch).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);const jP=function RadiusControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=BN(t,"borderRadius",DP),a=t.every((e=>(0,Nn.canSupportMultiBorder)(e))),o=!0===r.locked,l=(0,u.useCallback)(((e,t)=>{n("borderRadius",o?{topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}:{[e]:t},DP,!0)}),[n,o]),i=(0,u.useCallback)((e=>{const t=e?{locked:e,topLeft:r.topLeft,topRight:r.topLeft,bottomRight:r.topLeft,bottomLeft:r.topLeft}:{locked:e};n("borderRadius",t,DP,!0)}),[n,r]);if(!a)return null;const s=o?(0,d.__)("Corner Radius","web-stories"):(0,d.__)("Top left corner radius","web-stories");return c.createElement(BP,null,c.createElement(LP,{locked:o},c.createElement(RP,{suffix:c.createElement(UP,null),value:r.topLeft===_e?"":r.topLeft,"aria-label":s,onChange:(e,t)=>l("topLeft",t),placeholder:r.topLeft===_e?ve:"",isIndeterminate:r.topLeft===_e}),!o&&c.createElement(c.Fragment,null,c.createElement(RP,{suffix:c.createElement(zP,null),value:r.topRight===_e?"":r.topRight,"aria-label":(0,d.__)("Top right corner radius","web-stories"),onChange:(e,t)=>l("topRight",t),placeholder:r.topRight===_e?ve:"",isIndeterminate:r.topRight===_e}),c.createElement(RP,{value:r.bottomLeft===_e?"":r.bottomLeft,"aria-label":(0,d.__)("Bottom left corner radius","web-stories"),onChange:(e,t)=>l("bottomLeft",t),placeholder:r.bottomLeft===_e?ve:"",suffix:c.createElement(ch,null),isIndeterminate:r.bottomLeft===_e}),c.createElement(RP,{value:r.bottomRight===_e?"":r.bottomRight,"aria-label":(0,d.__)("Bottom right corner radius","web-stories"),onChange:(e,t)=>l("bottomRight",t),placeholder:r.bottomRight===_e?ve:"",suffix:c.createElement(GP,null),isIndeterminate:r.bottomRight===_e}))),c.createElement(FP,null,c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent corner radius","web-stories"),key:r.locked.toString()},c.createElement(HP,{isLocked:r.locked,onClick:()=>i(!r.locked),"aria-label":(0,d.__)("Toggle consistent corner radius","web-stories")}))))},YP=(0,d.__)("Corner Radius","web-stories");const ZP=function BorderRadius(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{borderRadius:n=DP,mask:r,type:a}=vP(["borderRadius","mask","type"]),o=xa((e=>e.actions.updateSelectedElements)),l=(0,Nn.canSupportMultiBorder)({mask:r}),i=n.topLeft===n.topRight&&n.topLeft===n.bottomLeft&&n.topLeft===n.bottomRight;return l&&(n.locked||i)?c.createElement(LT,{ref:t,inputRef:e,inputLabel:YP},c.createElement(gP,{tabIndex:-1,ref:e,suffix:c.createElement(ch,null),value:n.topLeft,"aria-label":YP,onChange:(e,t)=>(e=>{(0,O.trackEvent)("floating_menu",{name:"set_border_radius",element:a}),o({properties:{borderRadius:{locked:!0,topLeft:e,topRight:e,bottomRight:e,bottomLeft:e}}})})(t),onKeyDown:e=>{MT(e,t)}}),c.createElement(EP,null)):null};const WP=function(e){let{isMultiple:t}=e;const{type:n}=vP(["type"]),{handleDismiss:r}=eP((e=>{let{actions:{handleDismiss:t}}=e;return{handleDismiss:t}}));return c.createElement(fP,{Icon:Du.default,title:(0,d.__)("Dismiss menu","web-stories"),onClick:()=>{(0,O.trackEvent)("floating_menu",{name:"dismiss_menu",element:t?"multiple":n}),r()}})},VP={startX:0,startY:0,endX:J.PAGE_WIDTH,endY:J.PAGE_HEIGHT,width:J.PAGE_WIDTH,height:J.PAGE_HEIGHT},$P="left",qP="right",KP="top",XP="bottom";const QP=function(e){let{selectedElements:t,updateElements:n,isFloatingMenu:r}=e;const a=t.length>2,o=(0,u.useMemo)((()=>t.map((e=>{const{id:t,x:n,y:r,width:a,height:o,rotationAngle:l}=e;let i=n,s=r,c=a,d=o;if(l){const e=(0,Ss.calcRotatedObjectPositionAndSize)(l,n,r,a,o);i=e.x,s=e.y,c=e.width,d=e.height}return{id:t,x:n,y:r,width:a,height:o,frameX:i,frameY:s,frameWidth:c,frameHeight:d}}))),[t]),l=1===t.length?VP:(0,Ss.default)(t),i=e=>{(0,O.trackEvent)(r?"floating_menu":"design_panel",{name:`set_alignment_${e}`,element:"multiple"})},s=e=>{i(e),n((t=>{const{id:n}=t,r=o.find((e=>e.id===n)),{width:a=0,height:i=0,frameWidth:s=0,frameHeight:c=0}=r||{},d=e===$P||e===qP?(s-a)/2:(c-i)/2;return e===$P||e===qP?{x:e===$P?l.startX+d:l.endX-a-d}:{y:e===KP?l.startY+d:l.endY-i-d}}))};return{isDistributionEnabled:a,handleAlignLeft:()=>s($P),handleAlignCenter:()=>{i("center");const e=(l.endX+l.startX)/2;n((t=>{const{width:n}=t;return{x:e-n/2}}))},handleAlignRight:()=>s(qP),handleAlignTop:()=>s(KP),handleAlignMiddle:()=>{i("middle");const e=(l.endY+l.startY)/2;n((t=>{const{height:n}=t;return{y:e-n/2}}))},handleAlignBottom:()=>s(XP),handleHorizontalDistribution:()=>{i("horizontal_distribution");const e=[...o];e.sort(((e,t)=>(e.frameX+e.frameWidth)/2-(t.frameX+t.frameWidth)/2));const t=e.reduce(((e,t)=>e+t.frameWidth),0),r=l.width-t,a=(0,Mr.dataPixels)(r/(e.length-1)),s={};let c=0;e.forEach(((t,n)=>{const{id:r,x:o,width:l,frameWidth:i}=t;0===n||n===e.length-1?(s[r]={x:o},c=o):s[r]={x:c+(i-l)/2},c+=i+a})),n((e=>{let{id:t}=e;return s[t]}))},handleVerticalDistribution:()=>{i("vertical_distribution");const e=[...o];e.sort(((e,t)=>(e.frameY+e.frameHeight)/2-(t.frameY+t.frameHeight)/2));const t=e.reduce(((e,t)=>e+t.frameHeight),0),r=l.height-t,a=(0,Mr.dataPixels)(r/(e.length-1)),s={};let c=0;e.forEach(((t,n)=>{const{id:r,y:o,height:l,frameHeight:i}=t;0===n||n===e.length-1?(s[r]={y:o},c=o):s[r]={y:c+(i-l)/2},c+=i+a})),n((e=>{let{id:t}=e;return s[t]}))}}};const JP=function ElementAlignment(){const{selectedElements:e,updateSelectedElements:t}=xa((e=>{let{state:{selectedElements:t},actions:{updateSelectedElements:n}}=e;return{selectedElements:t,updateSelectedElements:n}})),{isDistributionEnabled:n,handleAlignLeft:r,handleAlignCenter:a,handleAlignRight:o,handleAlignTop:l,handleAlignMiddle:i,handleAlignBottom:s,handleHorizontalDistribution:u,handleVerticalDistribution:p}=QP({selectedElements:e,updateElements:e=>t({properties:e}),isFloatingMenu:!0});return c.createElement(c.Fragment,null,n&&c.createElement(c.Fragment,null,c.createElement(fP,{Icon:gh,title:(0,d.__)("Distribute horizontally","web-stories"),onClick:u}),c.createElement(fP,{Icon:yh,title:(0,d.__)("Distribute vertically","web-stories"),onClick:p}),c.createElement(EP,null)),c.createElement(fP,{Icon:mf,title:(0,d.__)("Align left","web-stories"),onClick:r}),c.createElement(fP,{Icon:cf,title:(0,d.__)("Align center","web-stories"),onClick:a}),c.createElement(fP,{Icon:vf,title:(0,d.__)("Align right","web-stories"),onClick:o}),c.createElement(fP,{Icon:Bf,title:(0,d.__)("Align top","web-stories"),onClick:l}),c.createElement(fP,{Icon:Ef,title:(0,d.__)("Align vertical center","web-stories"),onClick:i}),c.createElement(fP,{Icon:af,title:(0,d.__)("Align bottom","web-stories"),onClick:s}))};const eR=function(e){const{flip:t,type:n}=vP(["flip","type"]),r=xa((e=>e.actions.updateSelectedElements));return{[e]:t[e]||!1,toggle:()=>{(0,O.trackEvent)("floating_menu",{name:`set_flip_${e}`,element:n}),r({properties:t=>({flip:{...t.flip,[e]:!t.flip[e]||!1}})})}}};const tR=function FlipHorizontal(){const{horizontal:e,toggle:t}=eR("horizontal");return c.createElement(fP,{Icon:rb,title:(0,d.__)("Flip horizontally","web-stories"),onClick:t,isToggled:e})};const nR=function FlipVertical(){const{vertical:e,toggle:t}=eR("vertical");return c.createElement(fP,{Icon:sb,title:(0,d.__)("Flip vertically","web-stories"),onClick:t,isToggled:e})};var rR=n(32396);const aR=function(e){const{width:t,height:n,rotationAngle:r,x:a,y:o}=e,l=(0,Mr.dataPixels)((0,Rn.calculateTextHeight)(e,t)),[i,s]=(0,rR.default)(r,0,0,0,l-n);return{height:l,x:(0,Mr.dataPixels)(a+i),y:(0,Mr.dataPixels)(o+s)}},oR=400;const lR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oR,t=arguments.length>1?arguments[1]:void 0;return e=parseInt(e),isNaN(parseInt(e))?oR:t&&0!==t.length?t.reduce(((t,n)=>{t=parseInt(t),n=parseInt(n);const r=Math.abs(t-e),a=Math.abs(n-e);return r===a?t<n?t:n:a<r?n:t})):e};function iR(){return iR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iR.apply(this,arguments)}const sR=(0,u.forwardRef)((function StoryFontPicker(e,t){let{...n}=e;const{updateSelectedElements:r,selectedElements:a}=xa((e=>{let{state:t,actions:n}=e;return{updateSelectedElements:n.updateSelectedElements,selectedElements:t.selectedElements}})),o=(0,u.useCallback)(((e,t)=>{r({properties:n=>{const r=c_(n,e,t),a=aR({...n,...r});return{...r,...a}}})}),[r]),{textInfo:{fontWeight:l,isItalic:i},handlers:{handleResetFontWeight:s}}=TP(a,o),{addRecentFont:d,maybeEnqueueFontStyle:p}=ho((e=>{let{actions:t}=e;return{addRecentFont:t.addRecentFont,maybeEnqueueFontStyle:t.maybeEnqueueFontStyle}})),m=MN(a,(e=>{let{font:t}=e;return t?.family})),f=i?"italic":"normal",g=(0,u.useCallback)((async e=>{const{id:t,name:n,value:r,...i}=e;(0,O.trackEvent)("font_family_changed",{name:n}),await p(a.map((e=>{let{content:t}=e;return{font:i,fontStyle:f,fontWeight:l,content:(0,br.stripHTML)(t)}}))),d(e),o({font:i},!0);const c=lR(400,i.weights);await s(c)}),[d,f,l,p,o,a,s]);return c.createElement(zN,iR({onChange:g,currentValue:m},n,{ref:t}))})),cR=sR,dR=(0,p.default)(cR).withConfig({displayName:"fontFamily__StyledFontPicker",componentId:"sc-sk3dxe-0"})(["width:164px;"]),uR=(0,p.css)(["max-height:200px;"]),pR=(0,p.css)(["border:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const mR=function FontFamily(){return c.createElement(dR,{tabIndex:-1,listStyleOverrides:uR,containerStyleOverrides:pR})};const fR=function(e){const t=[{label:pe[400],value:"400"}];return e?.weights?e.weights.map((e=>({label:pe[e],value:e.toString()}))):t},gR={MIN:8,MAX:800},hR=p.default.div.withConfig({displayName:"font__Space",componentId:"sc-1upk4a3-0"})(["flex:0 0 10px;"]),ER=(0,p.default)(gI).withConfig({displayName:"font__StyledNumericInput",componentId:"sc-1upk4a3-1"})(["flex-basis:80px;text-align:center;"]),bR=(0,p.default)(_A.DropDown).withConfig({displayName:"font__StyledDropDown",componentId:"sc-1upk4a3-2"})(["background-color:transparent;"]);const yR=function FontControls(e){let{selectedElements:t,pushUpdate:n,highlightStylesOverride:r,fontDropdownRef:a}=e;const o=MN(t,(e=>{let{font:t}=e;return t?.family})),l=MN(t,"fontSize"),{textInfo:{fontWeight:i,isItalic:s},handlers:{handleSelectFontWeight:p}}=TP(t,n),{fonts:m=[],maybeEnqueueFontStyle:f,getFontByName:g}=ho((e=>{let{actions:{maybeEnqueueFontStyle:t,getFontByName:n},state:{fonts:r}}=e;return{maybeEnqueueFontStyle:t,getFontByName:n,fonts:r}})),h=(0,u.useMemo)((()=>fR(g(o))),[g,o]),E=s?"italic":"normal",b=(0,u.useCallback)((async(e,n)=>{await f(t.map((e=>{let{font:t,content:r}=e;return{font:t,fontStyle:E,fontWeight:parseInt(n),content:(0,br.stripHTML)(r)}}))),p(n)}),[E,p,f,t]);return Bx((e=>{let{fontSize:t}=e;return{fontSize:(0,Rs.clamp)(t,gR)}}),[]),c.createElement(c.Fragment,null,m&&c.createElement(fx,null,c.createElement(cR,{ref:a,highlightStylesOverride:r,showDropdownLabel:!0})),c.createElement(fx,null,h&&c.createElement(c.Fragment,null,c.createElement(bR,{ariaLabel:(0,d.__)("Font weight","web-stories"),placeholder:ve,options:h,selectedValue:_e===i?"":i,onMenuItemClick:b,selectButtonStylesOverride:Hu}),c.createElement(hR,null)),c.createElement(ER,{"aria-label":(0,d.__)("Font size","web-stories"),isFloat:!0,value:l,onChange:(e,t)=>n({fontSize:t},!0),min:gR.MIN,max:gR.MAX,isIndeterminate:_e===l,placeholder:_e===l?ve:null,containerStyleOverride:Uu})))},_R=(0,p.default)(gI).attrs({inputClassName:NT.CONTEXT_MENU_SKIP_ELEMENT}).withConfig({displayName:"fontSize__Input",componentId:"sc-17k2x26-0"})(["width:50px;flex:0 0 50px;"]),vR=(0,d.__)("Font size","web-stories");const wR=function FontSize(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{fontSize:n,updateSelectedElements:r}=xa((e=>{let{state:t,actions:n}=e;return{fontSize:t.selectedElements[0].fontSize,updateSelectedElements:n.updateSelectedElements}})),a=(0,u.useCallback)((e=>{(0,O.trackEvent)("floating_menu",{name:"set_font_size"}),r({properties:t=>{const n=c_(t,e,!0),r=aR({...t,...n});return{...n,...r}}})}),[r]);return c.createElement(LT,{ref:t,inputRef:e,inputLabel:vR},c.createElement(_R,{tabIndex:-1,ref:e,"aria-label":vR,isFloat:!0,value:n,onChange:(e,t)=>a({fontSize:t}),min:gR.MIN,max:gR.MAX,placeholder:n,containerStyleOverride:Uu,selectButtonStylesOverride:Hu,onKeyDown:e=>{MT(e,t)}}))},TR={MIN:0,MAX:100};function SR(e){let{opacity:t}=e;return void 0!==t?t:TR.MAX}const CR=function OpacityControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=MN(t,SR),a=(0,u.useCallback)(((e,t)=>n({opacity:t??100},!0)),[n]);return c.createElement(gI,{suffix:c.createElement(lh,null),unit:(0,d._x)("%","Percentage","web-stories"),value:r,onChange:a,min:TR.MIN,max:TR.MAX,"aria-label":(0,d.__)("Opacity in percent","web-stories"),placeholder:r===_e?ve:"",isIndeterminate:r===_e,containerStyleOverride:Uu})},IR=(0,p.default)(gI).withConfig({displayName:"layerOpacity__Input",componentId:"sc-1pptz1t-0"})(["width:82px;flex:0 0 82px;"]),xR=(0,d.__)("Opacity in percent","web-stories");const AR=function LayerOpacity(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{opacity:n,type:r}=vP(["opacity","type"]),a=xa((e=>e.actions.updateSelectedElements));return c.createElement(LT,{ref:t,inputRef:e,inputLabel:xR},c.createElement(IR,{ref:e,tabIndex:-1,suffix:c.createElement(lh,null),unit:(0,d._x)("%","Percentage","web-stories"),value:n||0,"aria-label":xR,onChange:(e,t)=>{a({properties:()=>({opacity:t??100})}),(0,O.trackEvent)("floating_menu",{name:"set_opacity",element:r})},inputClassName:NT.CONTEXT_MENU_SKIP_ELEMENT,onKeyDown:e=>{MT(e,t)},min:TR.MIN,max:TR.MAX}))},kR=(0,p.default)(OO).withConfig({displayName:"loop__StyledLoopContent",componentId:"sc-154lze5-0"})(["gap:8px;"]);const OR=function Loop(){const{loop:e}=vP(["loop"]),t=xa((e=>e.actions.updateSelectedElements));return c.createElement(kR,{tabIndex:-1,loop:e,onChange:()=>{(0,O.trackEvent)("floating_menu",{name:"set_loop"}),t({properties:e=>{let{loop:t}=e;return{loop:!t}}})}})};const NR=function More(){const e=Hp((e=>{let{setHighlights:t}=e;return t})),t=xa((e=>{let{state:t}=e;return t.selectedElements[0].type}));return c.createElement(_P,{text:(0,d._x)("More","Link to more options in design panel for selected element","web-stories"),onClick:()=>{e({highlight:Vm.STYLE_PANE}),(0,O.trackEvent)("floating_menu",{name:"click_more_button",element:t})}})},PR=(0,u.createContext)({state:{},actions:{}});const RR=function(e){return(0,u.useContextSelector)(PR,e??u.identity)};const MR=function(e){let{resource:t,elementId:n,isSingleElement:r=!0}=e;const{isTranscodingEnabled:a}=Da(),{muteExistingVideo:o,isElementTrimming:l,isNewResourceMuting:i,canTranscodeResource:s}=vi((e=>{let{state:{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r},actions:{muteExistingVideo:a}}=e;return{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r,muteExistingVideo:a}})),{isMuted:c,id:d=0}=t,p=!!r&&l(n),m=i(d),f=(0,u.useCallback)((()=>{o({resource:t})}),[t,o]),g=!s(t),h=a&&r&&(!c&&s(t)||m),{hasTrimMode:E,toggleTrimMode:b}=RR((e=>{let{state:{hasTrimMode:t},actions:{toggleTrimMode:n}}=e;return{hasTrimMode:t,toggleTrimMode:n}}));return{state:{canTrim:E,canMute:h,isTrimming:p,isMuting:m,isDisabled:g},actions:{handleMute:f,handleTrim:b}}};const LR=function Mute(){const{id:e,resource:t}=vP(["id","resource"]),{state:{canMute:n,isMuting:r,isDisabled:a},actions:{handleMute:o}}=MR({elementId:e,resource:t});if(!n)return null;const l=r?(0,d.__)("Removing audio","web-stories"):(0,d.__)("Remove audio","web-stories");return c.createElement(fP,{Icon:gb,title:l,disabled:a||r,onClick:e=>{(0,O.trackEvent)("floating_menu",{name:"set_mute"}),o(e)}})};const DR=function ShapeColor(){const{backgroundColor:e,updateSelectedElements:t}=xa((e=>{let{state:t,actions:n}=e;return{backgroundColor:t.selectedElements[0].backgroundColor,updateSelectedElements:n.updateSelectedElements}})),n=(0,u.useCallback)((e=>{(0,O.trackEvent)("floating_menu",{name:"set_shape_color",element:"shape"}),t({properties:()=>({backgroundColor:e})})}),[t]);return c.createElement(aP,{tabIndex:-1,label:(0,d.__)("Shape color","web-stories"),value:e,allowsSavedColors:!0,onChange:n,hasInputs:!0,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0,opacityFocusTrap:!0,colorFocusTrap:!0})},BR=p.default.div.withConfig({displayName:"textAlign__SubMenuContainer",componentId:"sc-1i0z5qr-0"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),FR=(0,p.default)(cP.default).withConfig({displayName:"textAlign__StyledMenuButton",componentId:"sc-1i0z5qr-1"})(["flex:0 0 60px;height:36px;border:1px solid ",";padding:2px 0;border-radius:4px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),HR=(0,p.default)(sP).withConfig({displayName:"textAlign__StyledMenuIcon",componentId:"sc-1i0z5qr-2"})(["width:auto;display:flex;overflow:hidden;svg{width:32px;}svg:last-child{margin-left:-8px;}"]),UR=[{value:"left",icon:Of,label:(0,d.__)("Align text left","web-stories")},{value:"center",icon:Sf,label:(0,d.__)("Align text center","web-stories")},{value:"right",icon:Rf,label:(0,d.__)("Align text right","web-stories")},{value:"justify",icon:xf,label:(0,d.__)("Align text justified","web-stories")}];const zR=function TextAlign(){const{textAlign:e="left"}=vP(["textAlign"]),t=xa((e=>e.actions.updateSelectedElements)),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(),o=(0,u.useRef)(),[l,i]=(0,u.useState)(0);(0,u.useEffect)((()=>i(o.current.parentNode.offsetLeft+-8)),[]);const s=e=>{e&&setTimeout((()=>e.focus()))},{icon:p,label:m}=UR.find((t=>{let{value:n}=t;return n===e}))||UR[0],f=e=>()=>{(0,O.trackEvent)("floating_menu",{name:`set_text_alignment_${e}`,element:"text"}),t({properties:{textAlign:e}})},g=()=>{r(!1),o.current.focus()},h=(0,d.__)("Change text alignment","web-stories"),E=n?"":h;return(0,nr.useKeyDownEffect)(o,"down",(()=>r(!0)),[]),c.createElement(c.Fragment,null,c.createElement(Tooltip,{placement:_d.PLACEMENT.BOTTOM,title:E},c.createElement(FR,{tabIndex:-1,ref:o,onClick:()=>r((e=>!e)),"aria-haspopup":"menu","aria-expanded":n,"aria-label":h},c.createElement(HR,{title:E},c.createElement(p,{role:"img","aria-label":m}),c.createElement(Xu.default,null)))),c.createElement(BR,{ref:a,style:{left:`${l}px`}},c.createElement(YN.default,{onDismiss:g,isOpen:n,onCloseSubMenu:g,"aria-label":(0,d.__)("Text alignment options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:o,isHorizontal:!0},UR.map((t=>{let{value:n,icon:r,label:a}=t;return c.createElement(fP,{isToggled:n===e,ref:n===e?s:null,key:n,Icon:r,title:a,onClick:f(n)})})))))};const GR=function TextColor(){const{content:e}=vP(["content"]),t=xa((e=>e.actions.updateSelectedElements)),n=(0,u.useCallback)((e=>{(0,O.trackEvent)("floating_menu",{name:"set_text_color",element:"text"}),t({properties:t=>c_(t,e,!0)})}),[t]),{textInfo:{color:r},handlers:{handleSetColor:a}}=TP([{content:e,type:"text"}],n);return c.createElement(aP,{tabIndex:-1,label:(0,d.__)("Text color","web-stories"),value:r,allowsSavedColors:!0,onChange:a,hasInputs:!1,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!1})};const jR=function ToggleBold(){const{isToggled:e,toggle:t}=SP({currentValue:"isBold",handler:"handleClickBold",eventName:"set_bold"});return c.createElement(fP,{isToggled:e,Icon:uE,title:(0,d.__)("Toggle bold","web-stories"),onClick:t,tabIndex:-1})};const YR=function ToggleItalics(){const{isToggled:e,toggle:t}=SP({currentValue:"isItalic",handler:"handleClickItalic",eventName:"set_italic"});return c.createElement(fP,{isToggled:e,Icon:fE,title:(0,d.__)("Toggle italic","web-stories"),onClick:t,tabIndex:-1})};const ZR=function ToggleUnderline(){const{isToggled:e,toggle:t}=SP({currentValue:"isUnderline",handler:"handleClickUnderline",eventName:"set_underline"});return c.createElement(fP,{isToggled:e,Icon:UE,title:(0,d.__)("Toggle underline","web-stories"),onClick:t,tabIndex:-1})};const WR=function Trim(){const{id:e,resource:t}=vP(["id","resource"]),{state:{canTrim:n,isTrimming:r,isDisabled:a},actions:{handleTrim:o}}=MR({elementId:e,resource:t});if(!n)return null;const l=r?(0,d.__)("Trimming video","web-stories"):(0,d.__)("Trim video","web-stories");return c.createElement(fP,{Icon:Py,title:l,disabled:a||r,onClick:e=>{(0,O.trackEvent)("floating_menu",{name:"set_trim"}),o(e)}})},VR=(0,u.memo)((function FloatingImageMenu(){return c.createElement(c.Fragment,null,c.createElement(AR,null),c.createElement(EP,null),c.createElement(tR,null),c.createElement(nR,null),c.createElement(EP,null),c.createElement(OP,null),c.createElement(EP,null),c.createElement(NR,null),c.createElement(EP,null),c.createElement(WP,null))})),$R=(0,u.memo)((function FloatingMultipleMenu(){return c.createElement(c.Fragment,null,c.createElement(JP,null),c.createElement(EP,null),c.createElement(WP,{isMultiple:!0}))})),qR=(0,u.memo)((function FloatingShapeMenu(){return c.createElement(c.Fragment,null,c.createElement(DR,null),c.createElement(EP,null),c.createElement(ZP,null),c.createElement(tR,null),c.createElement(nR,null),c.createElement(EP,null),c.createElement(OP,null),c.createElement(EP,null),c.createElement(NR,null),c.createElement(EP,null),c.createElement(WP,null))})),KR=(0,u.memo)((function FloatingStickerMenu(){return c.createElement(c.Fragment,null,c.createElement(AR,null),c.createElement(EP,null),c.createElement(tR,null),c.createElement(nR,null),c.createElement(EP,null),c.createElement(NR,null),c.createElement(EP,null),c.createElement(WP,null))})),XR=(0,u.memo)((function FloatingTextMenu(){return c.createElement(c.Fragment,null,c.createElement(mR,null),c.createElement(wR,null),c.createElement(zR,null),c.createElement(jR,null),c.createElement(YR,null),c.createElement(ZR,null),c.createElement(EP,null),c.createElement(GR,null),c.createElement(EP,null),c.createElement(NR,null),c.createElement(EP,null),c.createElement(WP,null))})),QR=(0,u.memo)((function FloatingVideoMenu(){return c.createElement(c.Fragment,null,c.createElement(AR,null),c.createElement(EP,null),c.createElement(tR,null),c.createElement(nR,null),c.createElement(EP,null),c.createElement(OP,null),c.createElement(EP,null),c.createElement(OR,null),c.createElement(WR,null),c.createElement(LR,null),c.createElement(EP,null),c.createElement(NR,null),c.createElement(EP,null),c.createElement(WP,null))})),JR=(0,u.memo)((function FloatingMenuSelector(e){let{selectedElementType:t}=e;switch(t){case jN.MULTIPLE:return c.createElement($R,null);case jN.GIF:case jN.IMAGE:return c.createElement(VR,null);case jN.SHAPE:return c.createElement(qR,null);case jN.STICKER:return c.createElement(KR,null);case jN.TEXT:return c.createElement(XR,null);case jN.VIDEO:return c.createElement(QR,null);default:return null}})),eM=(0,d.__)("To exit the floating menu, press Escape.","web-stories"),tM=p.default.section.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-pi2qzl-0"})(["display:flex;position:absolute;z-index:",";opacity:",";transition:140ms opacity;"],4,(e=>{let{visuallyHidden:t}=e;return t?0:1})),nM=(0,u.memo)((0,u.forwardRef)((function FloatingMenu(e,t){let{selectionIdentifier:n,selectedElementType:r,handleDismiss:a,visuallyHidden:o}=e;const l=KN(QN.EDIT_ELEMENT),i=(0,AA.default)(),s=(0,u.useCallback)((()=>{i(eM)}),[i]);return(0,u.useLayoutEffect)((()=>{const e=t.current,n=()=>{e.style.width="";const t=e.getBoundingClientRect();e.style.setProperty("--width",`${t.width.toFixed(2)}px`),e.style.setProperty("--height",`${t.height.toFixed(2)}px`),e.style.width="var(--width)"};n();const r=new MutationObserver(n),a=e.querySelector("[role=menu]");return r.observe(a,{childList:!0}),()=>r.disconnect()}),[t,n]),c.createElement(tM,{ref:t,"aria-label":(0,d.__)("Design menu","web-stories"),visuallyHidden:o},c.createElement(tP,{handleDismiss:a},c.createElement(YN.default,{isInline:!0,isHorizontal:!0,isSecondary:!0,isAlwaysVisible:!0,tabIndex:-1,ref:l,dismissOnEscape:!1,onFocus:s,"aria-label":(0,d.__)("Design options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()},popoverZIndex:4},c.createElement(JR,{selectedElementType:r}))))}))),rM=nM;const aM=function FloatingMenuLayer(){const{setMoveableMount:e,isEyedropperActive:t}=Os((e=>{let{actions:t,state:n}=e;return{setMoveableMount:t.setMoveableMount,isEyedropperActive:n.isEyedropperActive}})),{workspaceWidth:n,workspaceHeight:r}=Vi((e=>{let{state:{workspaceWidth:t,workspaceHeight:n}}=e;return{workspaceWidth:t,workspaceHeight:n}})),{selectedElementType:a,selectionIdentifier:o}=xa((e=>{let{state:{selectedElements:t}}=e;return{selectedElementType:1!==t.length||t[0].isBackground?t.length>1?jN.MULTIPLE:jN.NONE:t[0]?.type,selectionIdentifier:t.map((e=>{let{id:t}=e;return t})).join("")}})),l=(0,C.useTransform)((e=>{let{state:t}=e;return t.isAnythingTransforming})),[i,s]=(0,u.useState)(null),d=(0,u.useRef)(),p=(0,u.useRef)(),[m,f]=(0,u.useState)(!1),g=(0,u.useCallback)((()=>f(!0)),[]);(0,u.useEffect)((()=>f(!1)),[o]),(0,u.useEffect)((()=>(e((()=>s)),()=>e(null))),[e]),(0,u.useEffect)((()=>{f(!!t)}),[t]),(0,u.useEffect)((()=>{p.current={width:n,height:r}}),[n,r]);const h=function(e){switch(e){case jN.MULTIPLE:return!0;case jN.NONE:return!1;default:return(0,Hn.getDefinitionForType)(e)?.hasDesignMenu}}(a)&&!m&&i;return(0,u.useEffect)((()=>{const e=d.current;if(!e||!i)return;const t=()=>{const t=i.getRect(),{width:n,height:r}=p.current,a=t.left+t.width/2;e.style.left=`clamp(0px, ${a}px - (var(--width) / 2), ${n}px - var(--width))`;const o=t.top+t.height+10;e.style.top=`clamp(0px, ${o}px, ${r}px - var(--height))`};t();const n=new MutationObserver(t),r=document.querySelector(".moveable-control-box");return n.observe(r,{attributes:!0,subtree:!0,attributeFilter:["style"]}),()=>n.disconnect()}),[i,h]),!!h&&c.createElement(rM,{ref:d,handleDismiss:g,selectedElementType:a,selectionIdentifier:o,visuallyHidden:l})};const oM=async function(e,t,n,r){const{width:a,height:o,scale:l,focalX:i,focalY:s,flip:c}=e,{src:d,length:u}=t,p=r,m=p/o*a,f=Math.ceil(n/m),g=n/f,h=g/m*a,{width:E,height:b,offsetX:y,offsetY:_}=(0,Yv.default)(t,h,o,l,c?.horizontal?100-i:i,c?.vertical?100-s:s),v=u/(f-1),w=await ne(d);w.width=E,w.height=b,await le(w,1e-6);const T=document.createElement("canvas");T.width=n,T.height=r;const S=T.getContext("2d");let C=0,I=0;const x=async()=>{await le(w,C);const e=I*g;return(c.vertical||c.horizontal)&&(S.translate(e+g/2,p/2),S.scale(c.horizontal?-1:1,c.vertical?-1:1),S.translate(-(e+g/2),-p/2)),S.drawImage(w,y,_,h,o,e,0,g,p),S.setTransform(1,0,0,1,0,0),I+=1,I===f?Promise.resolve():(C+=v,x())};return x().then((()=>T.toDataURL()))};const lM=function(e,t,n){const[r,a]=(0,u.useState)(null);return(0,u.useEffect)((()=>{if(!e)return;const{element:r,resource:o}=t;oM(r,o,n,36).then(a)}),[e,t,n]),r};function iM(){return iM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iM.apply(this,arguments)}const sM=p.default.button.withConfig({displayName:"slider__Thumb",componentId:"sc-50zvue-0"})(["position:absolute;padding:0;"]);function cM(e){return e.pageX||e.clientX}const dM=function Slider(e){let{railWidth:t,min:n,max:r,step:a,minorStep:o=null,value:l=0,onChange:i=(()=>{}),getValueText:s=null,onPointerDown:d=(()=>{}),onNudge:p=(()=>{}),...m}=e;const f=(0,u.useRef)(),g=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f.current.focus(),d?.();const a=function(a){const o=cM(a)-cM(e);i(l+o/t*(r-n)),a.preventDefault(),a.stopPropagation()},o=function(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",o)};return document.addEventListener("pointermove",a),document.addEventListener("pointerup",o),o}),[l,r,n,i,t,d]),h=(0,u.useCallback)((e=>{i(l+e),p?.()}),[i,p,l]);(0,nr.useKeyDownEffect)(f,"left",(()=>h(-a)),[h,a]),(0,nr.useKeyDownEffect)(f,"shift+left",(()=>h(-o)),[h,o]),(0,nr.useKeyDownEffect)(f,"right",(()=>h(a)),[h,a]),(0,nr.useKeyDownEffect)(f,"shift+right",(()=>h(o)),[h,o]);const E={left:`${((l-n)/(r-n)*t).toFixed(2)}px`};return c.createElement(sM,iM({ref:f,onPointerDown:g,style:E,role:"slider","aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":l,"aria-valuetext":s?.(l)},m))};function uM(){return uM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uM.apply(this,arguments)}const pM=(0,p.default)(dM).withConfig({displayName:"currentTime__StyledSlider",componentId:"sc-tf91kz-0"})(["top:-3px;bottom:-3px;width:6px;margin-left:-3px;border-radius:6px;border-width:0;background-color:",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal}));const mM=function CurrentTime(e){const t=RR((e=>{let{state:{currentTime:t}}=e;return t}));return c.createElement(pM,uM({"aria-label":(0,d.__)("Current time","web-stories"),value:t,disabled:!0},e))},fM=p.default.aside.withConfig({displayName:"trimmerComponents__Menu",componentId:"sc-1vmlktu-0"})(["display:flex;justify-content:center;align-items:flex-start;height:","px;gap:14px;"],40),gM=p.default.div.withConfig({displayName:"trimmerComponents__RailWrapper",componentId:"sc-1vmlktu-1"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;"]),hM=p.default.div.withConfig({displayName:"trimmerComponents__Rail",componentId:"sc-1vmlktu-2"})(["position:relative;width:","px;height:","px;border-radius:4px;border:1px solid ",";background-color:",";"],(e=>{let{width:t}=e;return t}),36,(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}));function Duration(e){let{children:t}=e;return c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t)}const EM=(0,p.default)(dM).withConfig({displayName:"trimmerComponents__Handle",componentId:"sc-1vmlktu-3"})(["top:6px;bottom:6px;width:6px;margin-left:-3px;border-radius:6px;background-color:",";border:1px solid ",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);cursor:col-resize;&:focus{border-color:",";}&.focus-visible{outline:none !important;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.border.focus})),bM=p.default.svg.withConfig({displayName:"trimmerComponents__SVG",componentId:"sc-1vmlktu-4"})(["position:absolute;top:-1px;"]),yM=p.default.div.withConfig({displayName:"trimmerComponents__ButtonWrapper",componentId:"sc-1vmlktu-5"})(["flex-grow:1;flex-basis:100px;display:flex;justify-content:",";"],(e=>{let{isStart:t}=e;return t?"flex-end":"flex-start"}));function _M(e){let{width:t,isLeftAligned:n=!1}=e;const r=n?{left:"-1px"}:{right:"-1px"},a=n?`M 4 0 h ${t} a 4 4 0 0 0 -4 4 v 28 a 4 4 0 0 0 4 4 h -${t} a 4 4 0 0 1 -4 -4 v -28 a 4 4 0 0 1 4 -4 Z`:`M 0 0 h ${t} a 4 4 0 0 1 4 4 v 28 a 4 4 0 0 1 -4 4 h -${t} a 4 4 0 0 0 4 -4 v -28 a 4 4 0 0 0 -4 -4 Z`;return c.createElement(bM,{style:{width:`${t+4}px`,...r},viewBox:`0 0 ${t+4} 36`},c.createElement("path",{stroke:"transparent",fill:"black",fillOpacity:"0.5",d:a}))}function vM(){return vM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vM.apply(this,arguments)}const wM=function VideoTrimmer(){const{startOffset:e,endOffset:t,maxOffset:n,setStartOffset:r,setEndOffset:a,hasChanged:o,performTrim:l,setIsDraggingHandles:i,toggleTrimMode:s,videoData:p}=RR((e=>{let{state:{startOffset:t,endOffset:n,maxOffset:r,hasChanged:a,videoData:o},actions:{setStartOffset:l,setEndOffset:i,performTrim:s,toggleTrimMode:c,setIsDraggingHandles:d}}=e;return{startOffset:t,endOffset:n,maxOffset:r,setStartOffset:l,setEndOffset:i,hasChanged:a,performTrim:s,setIsDraggingHandles:d,toggleTrimMode:c,videoData:o}})),{workspaceWidth:g,pageWidth:h}=Vi((e=>{let{state:{workspaceWidth:t,pageWidth:n}}=e;return{workspaceWidth:t,pageWidth:n}})),E=(0,u.useDebouncedCallback)((()=>i(!1)),1e3),b=(0,u.useRef)(null);DT({ref:b});const y=(0,u.useCallback)((e=>{e&&e.focus()}),[]),_=Math.min(h,g-260),v=h&&n&&p,w=lM(v,p,_),T={ref:b,"aria-label":(0,d.__)("Video trimmer","web-stories")};if(!v)return c.createElement(fM,T);const S={min:0,max:n,step:100,minorStep:10,onPointerDown:()=>i(!0),onPointerUp:()=>i(!1),onNudge:()=>{i(!0),E()}};return c.createElement(fM,T,c.createElement(yM,{isStart:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:s,ref:y},(0,d.__)("Cancel","web-stories"))),c.createElement(gM,null,c.createElement(hM,{width:_,style:{backgroundImage:w?`url(${w})`:void 0}},c.createElement(_M,{isLeftAligned:!0,width:e/n*_}),c.createElement(_M,{width:(n-t)/n*_}),c.createElement(mM,vM({railWidth:_},S)),c.createElement(EM,vM({railWidth:_,value:e,"aria-label":(0,d.__)("Start offset","web-stories"),onChange:e=>r(e)},S)),c.createElement(EM,vM({railWidth:_,value:t,"aria-label":(0,d.__)("End offset","web-stories"),onChange:e=>a(e)},S))),c.createElement(Duration,null,ae(Math.ceil((t-e)/1e3)))),c.createElement(yM,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:l,disabled:!o},(0,d.__)("Trim","web-stories"))))};function TM(){return TM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TM.apply(this,arguments)}const SM={FLOAT_PANEL:11},CM=p.default.div.withConfig({displayName:"editElement__Wrapper",componentId:"sc-1w8k2uc-0"})([""," "," "," pointer-events:initial;"],Pn.elementWithPosition,Pn.elementWithSize,Pn.elementWithRotation),IM=(0,u.memo)((0,u.forwardRef)((function EditElement(e,t){let{element:n,editWrapper:r,onResize:a}=e;const{id:o,type:l}=n,{getBox:i}=(0,hc.default)((e=>({getBox:e.actions.getBox}))),{getProxiedUrl:s}=ko(),{isRTL:d,styleConstants:{topOffset:p}={}}=H(),{actions:{maybeEnqueueFontStyle:m}}=ho(),{updateElementById:f,deleteSelectedElements:g}=xa((e=>({updateElementById:e.actions.updateElementById,deleteSelectedElements:e.actions.deleteSelectedElements}))),{isTrimMode:h,resource:E,setVideoNode:b}=RR((e=>{let{state:{isTrimMode:t,videoData:n},actions:{setVideoNode:r}}=e;return{isTrimMode:t,setVideoNode:r,resource:n?.resource}})),[y,_]=(0,u.useState)(null),{Edit:v}=(0,Hn.getDefinitionForType)(l),w=y?{...n,...y}:n,T=i(w);return c.createElement(CM,TM({"aria-labelledby":`layer-${o}`},T,{ref:t}),c.createElement(v,{element:w,box:T,editWrapper:r,onResize:a,setLocalProperties:_,getProxiedUrl:s,isRTL:d,topOffset:p,isTrimMode:h,resource:E,setVideoNode:b,updateElementById:f,deleteSelectedElements:g,maybeEnqueueFontStyle:m,zIndexCanvas:SM}))}))),xM=IM,AM=$e.THEME_CONSTANTS.ICON_SIZE,kM=AM+8,OM=$e.THEME_CONSTANTS.ICON_SIZE+6+2,NM=2*($e.THEME_CONSTANTS.LARGE_BUTTON_SIZE+2)+OM+16+16;const PM=function(){const{carouselState:e}=Vi((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}}));return e===Se.CLOSED?52:116},RM=(0,p.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""}));const MM=function(e){let{containerRef:t}=e;const{zoomLevel:n,setZoomLevel:r}=Vi((e=>{let{state:{zoomLevel:t},actions:{setZoomLevel:n}}=e;return{zoomLevel:t,setZoomLevel:n}})),a=(0,u.useDebouncedCallback)((e=>r(e)),25);(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=e=>Math.min(3,Math.max(.25,e-e%.25)),r=r=>{const{ctrlKey:o,deltaY:l}=r,i=t.current.childNodes[0];if(o&&i.contains(r.target)&&l){a(e(l>0?n-.25:n+.25)),r.preventDefault()}},o=e=>{t.current.childNodes[0].contains(e.target)&&e.preventDefault()},l=r=>{const o=t.current.childNodes[0],{scale:l}=r;if(o.contains(r.target)&&l){a(e(l<1?n-.25:n+.25)),r.preventDefault()}};return document.addEventListener("wheel",r,{passive:!1}),document.addEventListener("gesturestart",o),document.addEventListener("gestureend",o),document.addEventListener("gesturechange",l),()=>{document.removeEventListener("wheel",r,{passive:!1}),document.removeEventListener("gesturestart",o),document.removeEventListener("gestureend",o),document.removeEventListener("gesturechange",l)}}),[t,a,n])};function LM(){return LM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LM.apply(this,arguments)}const DM=$e.THEME_CONSTANTS.LARGE_BUTTON_SIZE+8,BM=p.default.section.withConfig({displayName:"layout__LayerGrid",componentId:"sc-1n0mp4m-0"})([""," position:absolute;top:0;left:0;right:0;bottom:0;"," display:grid;grid:'h h h h h h h' ","px '. . . . . . .' minmax(16px,1fr) '. b . p . f .' var(--viewport-height-px) '. . . . . . .' 1fr 'w w w w w w w' ","px '. . . . . . .' ","px / 1fr var(--page-nav-width) var(--page-nav-gap) var(--viewport-width-px) var(--page-nav-gap) var(--page-nav-width) 1fr;height:100%;"],RM,(e=>{let{zIndex:t}=e;return"number"==typeof t?`z-index: ${t};`:""}),64,(e=>{let{footerHeight:t}=e;return t}),16),FM=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1n0mp4m-1"})([""," grid-area:",";overflow:",";position:relative;width:100%;height:100%;",";"],RM,(e=>{let{area:t}=e;return t}),(e=>{let{showOverflow:t}=e;return t?"visible":"hidden"}),(e=>{let{zIndex:t}=e;return void 0!==t?`z-index: ${t}`:null})),HM=(0,p.default)(FM).attrs({area:"p"}).withConfig({displayName:"layout__PageAreaContainer",componentId:"sc-1n0mp4m-2"})(["position:relative;display:flex;justify-content:",";align-items:",";overflow:",";",""],(e=>{let{hasHorizontalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{hasVerticalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{showOverflow:t}=e;return t?"visible":"var(--overflow-x) var(--overflow-y)"}),(e=>{let{isControlled:t,hasVerticalOverflow:n,hasHorizontalOverflow:r,showOverflow:a}=e;return t&&`\n      overflow: ${a?"visible":"hidden"};\n      width: calc(\n        100% - ${n?x.SCROLLBAR_WIDTH:0}px\n      );\n      height: calc(\n        100% - ${r?x.SCROLLBAR_WIDTH:0}px\n      );\n    `})),UM=(0,u.forwardRef)((function Layer(e,t){let{children:n,...r}=e;const a=PM();return c.createElement(BM,LM({ref:t,footerHeight:a},r),n)})),zM=p.default.div.withConfig({displayName:"layout__PaddedPage",componentId:"sc-1n0mp4m-3"})(["padding:calc(0.5 * var(--page-padding-px));"]),GM=p.default.div.withConfig({displayName:"layout__PageClip",componentId:"sc-1n0mp4m-4"})(["",""],(e=>{let{hasHorizontalOverflow:t,hasVerticalOverflow:n}=e;return(t||n)&&`\n      overflow: hidden;\n      width: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${x.SCROLLBAR_WIDTH}px)`};\n      flex-basis: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${x.SCROLLBAR_WIDTH}px)`};\n      height: ${n?"calc(var(--fullbleed-height-px) + var(--page-padding-px))":`calc(var(--viewport-height-px) - ${x.SCROLLBAR_WIDTH}px)`};\n      flex-shrink: 0;\n      flex-grow: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    `})),jM=p.default.div.withConfig({displayName:"layout__FullbleedContainer",componentId:"sc-1n0mp4m-5"})([""," overflow:visible;position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;border-radius:5px;",";",""],(e=>{let{background:t}=e;return(0,Nr.default)(t)}),(e=>{let{isControlled:t}=e;return t&&"\n      left: var(--scroll-left-px);\n      top: var(--scroll-top-px);\n    "}),(e=>{let{isBackgroundSelected:t,theme:n}=e;return t&&`\n      &:before {\n        content: '';\n        position: absolute;\n        top: -4px;\n        left: -4px;\n        right: -4px;\n        bottom: -4px;\n        border: ${n.colors.border.selection} 1px solid;\n        border-radius: ${n.borders.radius.medium};\n      }\n    `})),YM=p.default.div.withConfig({displayName:"layout__PageAreaWithoutOverflow",componentId:"sc-1n0mp4m-6"})(["overflow:",";position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;"],(e=>{let{showOverflow:t}=e;return t?"initial":"hidden"})),ZM=p.default.div.withConfig({displayName:"layout__PageAreaSafeZone",componentId:"sc-1n0mp4m-7"})(["width:var(--page-width-px);height:var(--page-height-px);overflow:visible;position:relative;"]),WM=(0,p.default)(FM).attrs({area:"h"}).withConfig({displayName:"layout__HeadArea",componentId:"sc-1n0mp4m-8"})([""]),VM=((0,p.default)(FM).attrs({area:"m"}).withConfig({displayName:"layout__MenuArea",componentId:"sc-1n0mp4m-9"})([""]),(0,p.default)(FM).withConfig({displayName:"layout__NavArea",componentId:"sc-1n0mp4m-10"})(["display:flex;align-items:center;justify-content:center;"])),$M=(0,p.default)(VM).attrs({area:"b"}).withConfig({displayName:"layout__NavPrevArea",componentId:"sc-1n0mp4m-11"})([""]),qM=(0,p.default)(VM).attrs({area:"f"}).withConfig({displayName:"layout__NavNextArea",componentId:"sc-1n0mp4m-12"})([""]),KM=p.default.div.withConfig({displayName:"layout__PageMenuArea",componentId:"sc-1n0mp4m-13"})(["grid-area:p;position:absolute;right:calc(-24px + var(--page-padding-px));top:calc(0.5 * var(--page-padding-px));min-height:calc(100% - var(--page-padding-px));"]),XM=(0,p.default)(FM).attrs({area:"w",showOverflow:!0}).withConfig({displayName:"layout__FooterArea",componentId:"sc-1n0mp4m-14"})([""]);const QM=(0,u.forwardRef)((function PageArea(e,t){let{children:n,fullbleedRef:r=null,fullBleedContainerLabel:a=(0,d.__)("Fullbleed area","web-stories"),overlay:o=[],background:l,isControlled:i=!1,className:s="",showOverflow:p=!1,isBackgroundSelected:m=!1,pageAreaRef:f=(0,u.createRef)(),withSafezone:g=!0,...h}=e;const E=(0,u.useRef)(),b=r||E,{hasVerticalOverflow:y,hasHorizontalOverflow:_,zoomSetting:v,scrollLeft:w,scrollTop:T}=Vi((e=>{let{state:{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}}=e;return{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}})),S=(0,u.useRef)();S.current={top:T,left:w},(0,u.useEffect)((()=>{i||(b.current.scrollTop=S.current.top,b.current.scrollLeft=S.current.left)}),[i,v,b]);const C=(0,u.useRef)(null);return MM({containerRef:C}),c.createElement(HM,LM({showOverflow:p,isControlled:i,hasHorizontalOverflow:_,hasVerticalOverflow:y,className:s,"data-scroll-container":!0},h),c.createElement(GM,{hasHorizontalOverflow:_,hasVerticalOverflow:y},c.createElement(zM,{ref:C},c.createElement(jM,{"aria-label":a,role:"region",ref:b,"data-testid":"fullbleed",background:l,isControlled:i,isBackgroundSelected:m},c.createElement(YM,{ref:f,showOverflow:p},g?c.createElement(ZM,{ref:t,"data-testid":"safezone"},n):n,o)))))}));var JM=n(94184),eL=n.n(JM);const tL=function(e){let{canSnap:t,otherNodes:n,snappingOffsetX:r=null,isDragging:a}=e;const o=Ps(xs),l=Ps(As),i=Os((e=>{let{state:t}=e;return t.designSpaceGuideline})),{pageWidth:s,pageHeight:c}=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),{activeDropTargetId:d,isDropTargetingDisabled:p}=zi((e=>{let{state:t}=e;return{activeDropTargetId:t.activeDropTargetId,isDropTargetingDisabled:t.isDropTargetingDisabled}})),m=function(e){const t=e(lc),{openToUnreadTip:n=Mt}=oc((e=>{let{actions:t}=e;return{openToUnreadTip:t.openToUnreadTip}})),r=(0,u.useDebouncedCallback)(n,300);return(0,u.useCallback)((()=>{t===lc.SAFE_ZONE&&r(Fs)}),[t,r])}((e=>{let{SAFE_ZONE:t}=e;return t}));t=t&&!p&&!d;const f=(0,u.useCallback)((e=>{let{elements:t}=e;const n=t.flat().some((e=>{let{center:t,element:n}=e;return n===i&&!t}));a&&n&&m()}),[a,i,m]);if(!o||!l)return{};const g=r||o.x,h=Math.ceil(l.x-g),E=Math.floor(l.y-o.y),b=t?[h,h+s/2,h+s]:[],y=(s/J.FULLBLEED_RATIO-c)/2,_={left:!0,top:!0,right:!0,bottom:!0,center:!0,middle:!0};return{snappable:t,snapGap:t,snapDirections:_,elementSnapDirections:_,isDisplaySnapDigit:!1,onSnap:f,horizontalGuidelines:t?[E-y,E,E+c/2,E+c,E+c+y]:[],verticalGuidelines:b,elementGuidelines:t?[...n,i]:[]}};const nL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.useEffect)((()=>{let t=!0;const n=()=>{t&&e.current?.updateRect?.()};n();const r=setTimeout(n);return()=>{t=!1,clearTimeout(r)}}),t)};const rL=function(e){(0,u.useEffect)((()=>{const t=()=>e.current?.updateRect();return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])};const aL=function(e,t){const{left:n,right:r,top:a,bottom:o}=e.getBoundingClientRect(),l=t.getBoundingClientRect();return n>l.right||r<l.left||o<l.top||a>l.bottom};const oL=function(){const{deleteSelectedElements:e}=xa((e=>({deleteSelectedElements:e.actions.deleteSelectedElements}))),{fullbleedContainer:t}=Os((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}}));return{handleElementOutOfCanvas:n=>!!aL(n,t)&&(e(),!0)}};const lL=function(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=Cs(0,n.x-2,n.y-2,n.width+4,n.height+4),o=Cs(0,r.x,r.y,r.width,r.height),l=new(ji().Response);return ji().testPolygonPolygon(a,o,l),l.bInA};const iL=function(e){let{selectedElement:t}=e;const[n,r]=(0,u.useState)(wo.getItemByKey(vo.BACKGROUND_IS_SET_DIALOG_DISMISSED)),{setBackgroundElement:a,isDefaultBackground:o}=xa((e=>({setBackgroundElement:e.actions.setBackgroundElement,isDefaultBackground:e.state.currentPage?.elements[0]?.isDefaultBackground}))),{fullbleedContainer:l}=Os((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}})),{showSnackbar:i}=(0,Er.useSnackbar)();return{handleFullbleedMediaAsBackground:e=>{o&&Hn.MEDIA_ELEMENT_TYPES.includes(t.type)&&lL(e,l)&&(a({elementId:t.id}),n||(i({message:(0,d.__)("Full bleed images and videos are automatically set as background. Double click to scale and position at any time.","web-stories"),dismissible:!0}),wo.setItemByKey(vo.BACKGROUND_IS_SET_DIALOG_DISMISSED,!0),r(!0)))}}};const sL=function(e){let{setIsDragging:t,resetMoveable:n,selectedElement:r,setTransformStyle:a,frame:o}=e;const{isDropSource:l,handleDrag:i,handleDrop:s,setDraggingResource:c}=zi((e=>{let{actions:{handleDrag:t,handleDrop:n,isDropSource:r,setDraggingResource:a}}=e;return{handleDrag:t,handleDrop:n,setDraggingResource:a,isDropSource:r}})),{handleElementOutOfCanvas:d}=oL(),{handleFullbleedMediaAsBackground:p}=iL({selectedElement:r}),{updateSelectedElements:m}=xa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{editorToDataX:f,editorToDataY:g}=(0,hc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n}}=e;return{editorToDataX:t,editorToDataY:n}})),h=(0,u.useBatchingCallback)((e=>{t(!1),c(null),n(e)}),[t,c,n]);return{onDrag:e=>{let{target:n,beforeTranslate:s,clientX:d,clientY:u}=e;t(!0),l(r.type)&&c(r.resource),o.translate=s,a(n,o),l(r.type)&&i(r.resource,d,u,r.id)},throttleDrag:0,onDragStart:e=>{let{set:t}=e;t(o.translate)},onDragEnd:e=>{let{target:n,isDrag:a}=e;if(!a)return!1;if(d(n))return t(!1),void c(null);const i=e=>Math.abs(e)<=1?0:e,[u,E]=o.translate;if(0!==u||0!==E){const e={x:i(r.x+f(u)),y:i(r.y+g(E))};m({properties:e}),l(r.type)&&s(r.resource,r.id)}h(n),p(n)}}},cL=[],dL=["n","s"],uL=["e","w"],pL=["nw","ne","sw","se"];function mL(e){let{vertical:t,horizontal:n,diagonal:r}=e;return[...t?dL:cL,...n?uL:cL,...r?pL:cL]}const fL=function(e){let{resetMoveable:t,selectedElement:n,setTransformStyle:r,frame:a,isEditMode:o,pushTransform:l,classNames:i,forceLockRatio:s}=e;const{updateSelectedElements:c}=xa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:d}=oL(),{handleFullbleedMediaAsBackground:p}=iL({selectedElement:n}),{editorToDataX:m,editorToDataY:f,dataToEditorY:g,dataToEditorX:h}=(0,hc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}}=e;return{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}})),{lockAspectRatio:E,type:b}=n,y="text"===b,[_,v]=(0,u.useState)(!0),w=!y&&(s||E)||y&&_,{resizeRules:T,updateForResizeEvent:S}=(0,Hn.getDefinitionForType)(b),C=h(T.minWidth),I=g(T.minHeight),x=n.width/n.height,A=n.width<=T.minWidth||n.height<=T.minHeight;return{onResize:e=>{let{target:t,direction:o,width:l,height:i,drag:s}=e,c=l,d=i,u=null;w?(c<C&&(c=C,d=c/x),d<I&&(d=I,c=I*x)):(d=Math.max(d,I),c=Math.max(c,C)),S&&(u=S(n,o,m(c,!1),f(d,!1))),u&&u.height&&(d=g(u.height)),u&&u.marginOffset&&(t.querySelector(".syncMargin").style.margin=-g(u.marginOffset)/2+"px 0"),t.style.width=`${c}px`,t.style.height=`${d}px`,a.direction=o,a.resize=[c,d],a.translate=s.beforeTranslate,a.updates=u,r(t,a)},onResizeStart:e=>{let{setOrigin:t,dragStart:r,direction:i}=e;t(["%","%"]),r&&r.set(a.translate);const s=0!==i[0]&&0!==i[1];_!==s&&y&&v(s),o&&l(n.id,a)},onResizeEnd:e=>{let{target:r}=e;if(d(r))return;const[o,l]=a.resize;if(0!==o&&0!==l){const{direction:e}=a,[t,r]=a.translate,i=m(o),s=f(l),d={width:i,height:s,x:n.x+m(t),y:n.y+f(r)};S&&Object.assign(d,S(n,e,i,s)),c({properties:d})}v(!0),t(r),p(r)},keepRatio:w,renderDirections:mL(T),className:eL()(i,{"visually-hide-handles":A})}};const utils_normalizeRotationDegrees=function(e){return(e%360+360)%360};const gL=function(e){let{selectedElement:t,isEditMode:n,pushTransform:r,frame:a,setTransformStyle:o,resetMoveable:l,throttleRotation:i}=e;const{updateSelectedElements:s}=xa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:c}=oL();return{throttleRotate:i?30:0,onRotate:e=>{let{target:t,beforeRotate:n}=e;a.rotate=utils_normalizeRotationDegrees(n),o(t,a)},onRotateEnd:e=>{let{target:t}=e;if(c(t))return;const n={rotationAngle:Math.round(a.rotate)};s({properties:n}),l(t)},onRotateStart:e=>{let{set:o}=e;n&&r(t.id,a),o(a.rotate)}}};function hL(){return hL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hL.apply(this,arguments)}const EL=(0,u.forwardRef)((function SingleSelectionMoveable(e,t){let{selectedElement:n,targetEl:r,pushEvent:a,isEditMode:o,...l}=e;const i=(0,u.useRef)(null),[s,d]=(0,u.useState)(!1),p=Os((e=>{let{state:t}=e;return t.nodesById})),m=(0,hc.default)((e=>{let{actions:t}=e;return t.getBox})),f=(0,C.useTransform)((e=>{let{actions:t}=e;return t.pushTransform})),{zoomSetting:g,scrollLeft:h,scrollTop:E}=Vi((e=>{let{state:t}=e;return{zoomSetting:t.zoomSetting,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}})),b=!n.isBackground,y=(0,u.useRef)(),_=xa((e=>{let{state:t}=e;return t.currentPage?.elements[0]?.id})),v=(0,nr.useGlobalIsKeyPressed)("shift");rL(i),(0,u.useEffect)((()=>{y.current=a}),[a]),(0,u.useEffect)((()=>{i.current&&i.current.updateRect()}),[h,E]),nL(i,[g]),(0,u.useEffect)((()=>{i.current&&(y.current&&r.contains(y.current.target)&&b&&i.current.moveable.dragStart(y.current),i.current.updateRect())}),[r,i,b]),(0,u.useEffect)((()=>{i.current&&i.current.updateRect()}));const w=m(n),T=(0,u.useMemo)((()=>({translate:[0,0],rotate:w.rotationAngle,resize:[0,0],updates:null})),[w.rotationAngle]),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;T.translate=t.translate,T.direction=t.direction,T.resize=t.resize,T.updates=t.updates,T.rotate=t.rotate,e.style.transform=`translate(${T.translate[0]}px, ${T.translate[1]}px) rotate(${T.rotate}deg)`,T.resize[0]&&(e.style.width=`${T.resize[0]}px`),T.resize[1]&&(e.style.height=`${T.resize[1]}px`),f(n.id,T)},x=(0,u.useBatchingCallback)((e=>{i.current&&(T.direction=[0,0],T.translate=[0,0],T.resize=[0,0],T.updates=null,f(n.id,null),e.style.transform="",e.style.width="",e.style.height="",i.current.updateRect())}),[T,f,n.id]),A=!o,k=s,O=eL()("default-moveable",{"hide-handles":k,"type-text":"text"===n.type}),N=sL({setIsDragging:d,resetMoveable:x,selectedElement:n,setTransformStyle:S,frame:T}),P=o?{onDrag:()=>!1,onDragEnd:()=>!1,onDragStart:()=>!1}:N,R=fL({resetMoveable:x,selectedElement:n,setTransformStyle:S,frame:T,isEditMode:o,pushTransform:f,classNames:O,forceLockRatio:v}),M=gL({selectedElement:n,isEditMode:o,pushTransform:f,frame:T,setTransformStyle:S,resetMoveable:x,throttleRotation:v}),L=Object.values(un(p,[n.id,_])),D=tL({otherNodes:L,canSnap:A&&b,isDragging:s}),B=b&&!k&&!0!==n.lockDimensions,F=b&&!k&&!1!==n.supportsRotation;return c.createElement(I.Moveable,hL({},l,{className:O,zIndex:0,ref:(0,u.useCombinedRefs)(i,t),target:r,edge:!0,draggable:b,resizable:B,rotatable:F},P,R,M,D,{origin:!1,pinchable:!0}))})),bL=(0,I.withOverlay)((0,p.default)(UM).withConfig({displayName:"editLayer__LayerWithGrayout",componentId:"sc-1j9iuj3-0"})(["background-color:",";"],(e=>{let{grayout:t,theme:n}=e;return t?n.colors.opacity.overlayDark:"transparent"}))),yL=(0,I.withOverlay)(QM);function EditLayerForElement(e){let{element:t,showOverflow:n}=e;const r=(0,u.useRef)(null),a=(0,u.useRef)(null),{editModeGrayout:o}=(0,Hn.getDefinitionForType)(t.type),{isTrimMode:l}=RR((e=>{let{state:{isTrimMode:t}}=e;return{isTrimMode:t}})),{clearEditing:i,onMoveableMount:s}=Os((e=>({clearEditing:e.actions.clearEditing,onMoveableMount:e.state.onMoveableMount}))),p=os(),[m,f]=(0,u.useState)(null);(0,nr.useKeyDownEffect)(r,{key:"esc",editable:!0},(()=>i()),[i]),(0,u.useEffect)((()=>()=>p(!1)),[p]);const g=(0,u.useRef)(null),h=(0,u.useCallback)((e=>{g.current=e,s?.(e)}),[s]),E=(0,u.useCallback)((()=>{g.current&&g.current.updateRect()}),[]),{hasEditModeMoveable:b}=(0,Hn.getDefinitionForType)(t.type);return c.createElement(bL,{ref:r,"aria-label":(0,d._x)("Edit layer","compound noun","web-stories"),"data-testid":"editLayer",grayout:o,zIndex:3,onPointerDown:e=>{e.target!==r.current&&e.target!==a.current||i()}},c.createElement(yL,{ref:a,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Edit layer)","web-stories"),isControlled:!0,showOverflow:n,overflow:n?"visible":"hidden"},c.createElement(xM,{editWrapper:b&&m,onResize:E,element:t,ref:f})),b&&m&&c.createElement(EL,{selectedElement:t,targetEl:m,isEditMode:!0,ref:h}),l&&c.createElement(XM,{showOverflow:!0},c.createElement(wM,null)))}const _L=(0,u.memo)((function EditLayer(){const{currentPage:e}=xa((e=>({currentPage:e.state.currentPage}))),{editingElement:t,showOverflow:n=!0}=Os((e=>{let{state:{editingElement:t,editingElementState:{showOverflow:n}={}}}=e;return{editingElement:t,showOverflow:n}})),r=t&&e&&e.elements.find((e=>e.id===t));return r?c.createElement(EditLayerForElement,{element:r,showOverflow:n}):null}));const vL=function(){const{pageAttachmentContainer:e}=Os((e=>({pageAttachmentContainer:e.state.pageAttachmentContainer}))),{hasLinksInAttachmentArea:t,hasInvalidLinkSelected:n,hasPageAttachment:r,hasElementsInAttachmentArea:a}=xa((t=>{let{state:n}=t;const r=e=>{let{link:t}=e;return t?.url?.length},a=n.currentPage.elements.filter(r),o=Boolean(n.currentPage?.pageAttachment?.url?.length);return{hasInvalidLinkSelected:Boolean(e&&o&&n.selectedElements.filter(r).some(Hn.isElementBelowLimit)),hasLinksInAttachmentArea:Boolean(e&&a.some((e=>(0,Hn.isElementBelowLimit)(e,!0)))),hasElementsInAttachmentArea:Boolean(e&&o&&n.selectedElements.some((e=>(0,Hn.isElementBelowLimit)(e,!1)))),hasPageAttachment:o}}));return{hasLinksInAttachmentArea:t,hasInvalidLinkSelected:n,isElementInAttachmentArea:(0,u.useCallback)((t=>!!e&&(!!r&&(0,Hn.isElementBelowLimit)(t,!1))),[e,r]),hasElementsInAttachmentArea:a}};var wL,TL;function SL(){return SL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SL.apply(this,arguments)}const SvgDefaultIcon=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",SL({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wL||(wL=c.createElement("path",{fillOpacity:.1,d:"M12 0c6.6 0 12 5.4 12 12s-5.4 12-12 12S0 18.6 0 12 5.4 0 12 0z"})),TL||(TL=c.createElement("path",{d:"M13.8 14.6c.1.1.2.3.2.5s-.1.3-.2.5L12.3 17c-.7.7-1.7 1.1-2.7 1.1-1 0-1.9-.4-2.7-1.1-.7-.7-1.1-1.7-1.1-2.7 0-1 .4-1.9 1.1-2.7l1.5-1.5c.2 0 .3-.1.5-.1s.3.1.5.2c.1.1.2.3.2.5s-.1.4-.2.5l-1.5 1.5c-.5.5-.7 1.1-.7 1.7 0 .6.3 1.3.7 1.7.5.5 1.1.7 1.7.7s1.3-.3 1.7-.7l1.5-1.5c.3-.3.7-.3 1 0zM17 7c-.7-.7-1.7-1.1-2.7-1.1-1 0-1.9.4-2.7 1.1l-1.5 1.5c0 .1-.1.3-.1.4 0 .2.1.3.2.5.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.5-.5 1.1-.7 1.7-.7.6 0 1.3.3 1.7.7.5.5.7 1.1.7 1.7 0 .6-.3 1.3-.7 1.7l-1.5 1.5c-.1.1-.2.3-.2.5s.1.3.2.5c.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.7-.7 1.1-1.7 1.1-2.7-.1-1-.5-1.9-1.2-2.6zm-7.9 7.2c0 .2.1.3.2.5.1.1.3.2.5.2s.4-.1.5-.2l4.5-4.5c.1-.1.2-.3.2-.5s-.1-.4-.2-.5c-.3-.2-.8-.2-1 .1l-4.5 4.5c-.1.1-.2.3-.2.4z"})))},CL=(0,c.memo)(SvgDefaultIcon);var IL;function xL(){return xL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xL.apply(this,arguments)}const SvgArrowBar=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",xL({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,IL||(IL=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},AL=(0,c.memo)(SvgArrowBar),kL=p.default.div.withConfig({displayName:"pageAttachment__Wrapper",componentId:"sc-1bseqmx-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),OL=p.default.div.withConfig({displayName:"pageAttachment__Guideline",componentId:"sc-1bseqmx-1"})(["mix-blend-mode:difference;position:absolute;height:1px;bottom:20%;width:100%;background-image:",";background-position:top;background-size:16px 0.5px;background-repeat:repeat-x;z-index:3;"],(e=>{let{theme:t}=e;return`linear-gradient(to right, ${t.colors.standard.black} 50%, ${t.colors.standard.white} 0%)`})),NL=(0,p.default)(AL).withConfig({displayName:"pageAttachment__ArrowBar",componentId:"sc-1bseqmx-2"})(["display:block;cursor:pointer;margin-bottom:10px;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:20px;height:8px;"]),PL=p.default.div.withConfig({displayName:"pageAttachment__OutlinkChip",componentId:"sc-1bseqmx-3"})(["height:36px;display:flex;position:relative;padding:10px 6px;margin:0 0 20px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;box-shadow:0px 4px 10px rgba(0,0,0,0.15);background:",";"],(e=>{let{bgColor:t}=e;return t})),RL=p.default.span.withConfig({displayName:"pageAttachment__TextWrapper",componentId:"sc-1bseqmx-4"})(["font-family:Roboto,sans-serif;font-size:16px;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:16px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{fgColor:t}=e;return t})),ML=p.default.div.withConfig({displayName:"pageAttachment__Tooltip",componentId:"sc-1bseqmx-5"})(["background-color:",";color:",";width:200px;padding:8px;font-size:14px;border-radius:4px;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.standard.black}),(e=>{let{theme:t}=e;return t.colors.standard.white})),LL=p.default.div.withConfig({displayName:"pageAttachment__LinkImage",componentId:"sc-1bseqmx-6"})(["height:24px;width:24px;vertical-align:middle;background-size:cover;background-repeat:no-repeat;background-position:50%;border-radius:50%;background-image:url('","') !important;"],(e=>{let{icon:t}=e;return t})),DL={x:8},BL="#FFFFFF",FL="#000000";const HL=function PageAttachment(e){let{pageAttachment:t={}}=e;const{displayLinkGuidelines:n,pageAttachmentContainer:r,setPageAttachmentContainer:a}=Os((e=>({displayLinkGuidelines:e.state.displayLinkGuidelines,pageAttachmentContainer:e.state.pageAttachmentContainer,setPageAttachmentContainer:e.actions.setPageAttachmentContainer}))),{hasInvalidLinkSelected:o}=vL(),{ctaText:l=(0,d.__)("Learn more","web-stories"),url:i,icon:s,theme:u}=t,{isRTL:p,styleConstants:{topOffset:m}={}}=H(),f=u===Le?FL:BL,g=u===Le?BL:FL;return c.createElement(c.Fragment,null,(n||o)&&c.createElement(OL,null),c.createElement(kL,{role:"presentation",ref:a},i?.length>0&&c.createElement(c.Fragment,null,c.createElement(NL,{fill:f}),c.createElement(PL,{bgColor:f},s?c.createElement(LL,{icon:s}):c.createElement(CL,{fill:g,width:24,height:24}),c.createElement(RL,{fgColor:g},l)),r&&o&&c.createElement(PT.Popup,{isRTL:p,anchor:{current:r},isOpen:!0,placement:_d.PLACEMENT.LEFT,spacing:DL,topOffset:m},c.createElement(ML,null,(0,d.__)("Links can not reside below the dashed line when a page attachment is present. Your viewers will not be able to click on the link.","web-stories"))))))};var UL;function zL(){return zL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zL.apply(this,arguments)}const GL=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zL({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,UL||(UL=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},jL=(0,c.memo)(GL),YL=p.default.div.withConfig({displayName:"shoppingPageAttachment__Wrapper",componentId:"sc-7unzl7-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),ZL=p.default.div.withConfig({displayName:"shoppingPageAttachment__ArrowWrap",componentId:"sc-7unzl7-1"})(["width:32px;height:32px;border-radius:50%;background:",";"],(e=>{let{bgColor:t}=e;return t})),WL=(0,p.default)(jL).withConfig({displayName:"shoppingPageAttachment__ArrowBar",componentId:"sc-7unzl7-2"})(["display:block;cursor:pointer;margin:12px 0 0 6px;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:20px;height:8px;"]),VL=p.default.div.withConfig({displayName:"shoppingPageAttachment__OutlinkChip",componentId:"sc-7unzl7-3"})(["height:36px;display:flex;position:relative;padding:10px 6px;margin:0 0 20px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;background:",";"],(e=>{let{bgColor:t}=e;return t})),$L=p.default.span.withConfig({displayName:"shoppingPageAttachment__TextWrapper",componentId:"sc-7unzl7-4"})(["font-family:Roboto,sans-serif;font-size:16px;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:16px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{fgColor:t}=e;return t})),qL="#FFFFFF",KL="#000000";const XL=function(e){let{theme:t}=e;const n=t===Le?qL:KL,r=t===Le?KL:qL;return c.createElement(YL,{role:"presentation"},c.createElement(c.Fragment,null,c.createElement(ZL,{bgColor:r},c.createElement(WL,{fill:n})),c.createElement(VL,null,c.createElement($L,{fgColor:r},(0,d.__)("Shop Now","web-stories")))))};const QL=function(e){const t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(e);return t?3600*(t[1]?parseInt(t[1]):0)+60*parseInt(t[2])+parseInt(t[3])+parseInt(t[4])/1e3:null},JL=p.default.span.withConfig({displayName:"cue__CueWrapper",componentId:"sc-h5j1x4-0"})(["text-align:center;height:",";"],(e=>{let{$height:t}=e;return`${t}px`})),eD=p.default.span.withConfig({displayName:"cue__CueEl",componentId:"sc-h5j1x4-1"})(["color:",";"],(e=>{let{$isFutureCue:t,theme:n}=e;return t?n.colors.fg.black:n.colors.fg.white})),tD=p.default.span.withConfig({displayName:"cue__Section",componentId:"sc-h5j1x4-2"})(["margin:0 10px 10px;padding:6px 12px;vertical-align:middle;border-radius:15px;background:rgba(11,11,11,0.6);color:rgba(255,255,255,1);display:inline-block;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;line-height:1.4;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;"]);const nD=function Cue(e){let{cue:t,videoTime:n,height:r}=e;const a=t.getCueAsHTML();return c.createElement(JL,{$height:r},c.createElement(tD,null,[...a.childNodes].map((e=>{if("timestamp"===e.target)return null;{let t=null;"timestamp"===e.previousSibling?.target&&(t=QL(e.previousSibling.data));const r=t>n;return e.nodeType===Node.TEXT_NODE?null!==t?c.createElement("span",null,c.createElement(eD,{$isFutureCue:r},e.textContent)):c.createElement(eD,null,e.textContent):null!==t?c.createElement("span",null,c.createElement(eD,{$isFutureCue:r,dangerouslySetInnerHTML:{__html:e.innerHTML}})):c.createElement(eD,{dangerouslySetInnerHTML:{__html:e.innerHTML}})}}))))},rD=p.default.div.withConfig({displayName:"trackRenderer__Track",componentId:"sc-7rx40r-0"})(["width:100%;height:100%;display:grid;align-content:end;font-size:",";"],(e=>{let{$fontSize:t}=e;return`${t}px`}));const aD=function TrackRenderer(e){let{elementId:t,trackIndex:n}=e;const{pageWidth:r,pageHeight:a}=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),o=.04*r,l=.2*a,[i,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(0),[m,f]=(0,u.useState)([]),g=(0,u.useCallback)((()=>{const e=i?.activeCues?[...i.activeCues]:[];f(e)}),[i]);return(0,u.useEffect)((()=>{g(),p(0);const e=document.getElementById(t);if(!e)return;const r=e.textTracks?.[n];return r?(r.mode="hidden",g(),s(r),e.addEventListener("timeupdate",(()=>{p(e.currentTime)})),r.addEventListener("cuechange",g),()=>{r.removeEventListener("cuechange",g)}):void 0}),[n,g,t,r,a]),m&&i?c.createElement(rD,{$fontSize:o},m.map(((e,t)=>c.createElement(nD,{key:t,cue:e,videoTime:d,height:l})))):null},oD=(0,p.default)(UM).withConfig({displayName:"mediaCaptionsLayer__CaptionsLayer",componentId:"sc-11mx67a-0"})([""]),lD=(0,p.default)(QM).withConfig({displayName:"mediaCaptionsLayer__CaptionsPageArea",componentId:"sc-11mx67a-1"})(["position:absolute;pointer-events:none;"]),iD=p.default.div.withConfig({displayName:"mediaCaptionsLayer__CaptionsCanvas",componentId:"sc-11mx67a-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]);const sD=function MediaCaptionsLayer(){const{isEditing:e}=Os((e=>{let{state:{isEditing:t}}=e;return{isEditing:t}})),{currentPageId:t,backgroundAudio:n,videoElement:r}=xa((e=>{let{state:t}=e;const{selectedElements:n,currentPage:r}=t,{backgroundAudio:a}=r;let o=null,l=null;if(1===n.length){const e=n[0],{isBackground:t,type:r,tracks:i}=e;t&&a&&a?.tracks?.length>0&&(o=a),"video"===r&&i?.length>0&&(l=e)}return{currentPageId:r?.id,backgroundAudio:o,videoElement:l}})),[a,o]=(0,u.useState)(0),[l,i]=(0,u.useState)("");return(0,u.useEffect)((()=>{if(o(0),i(""),n)return i(`page-${t}-background-audio`),void o(n?.tracks?.length);!e&&r&&(i(`video-${r.id}`),o(r.tracks.length))}),[r,n,t,e]),a?c.createElement(oD,null,c.createElement(lD,{withSafezone:!1,showOverflow:!0},c.createElement(iD,null,Array.from({length:a}).map(((e,t)=>c.createElement(aD,{key:t,elementId:l,trackIndex:t})))))):null},cD=(0,p.default)(QM).withConfig({displayName:"displayLayer__DisplayPageArea",componentId:"sc-13e1aq-0"})(["position:absolute;"]);function DisplayPage(e){let{pageElements:t,editingElement:n}=e;return t?t.map((e=>n===e.id?null:c.createElement(wc,{key:e.id,element:e,isAnimatable:!0}))):null}function DisplayPageAnimationController(e){let{resetAnimationState:t}=e;const{animationState:n,pageId:r}=xa((e=>{let{state:t}=e;return{animationState:t.animationState,pageId:t.currentPage?.id}})),a=(0,Cn.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(n){case Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED:case Cn.STORY_ANIMATION_STATE.PLAYING:return void a.play();case Cn.STORY_ANIMATION_STATE.RESET:return void a.reset();case Cn.STORY_ANIMATION_STATE.SCRUBBING:case Cn.STORY_ANIMATION_STATE.PAUSED:return void a.pause();default:return}}),[n,a]),(0,u.useEffect)((()=>t),[t,r]),null}function StoryAnimations(e){let{children:t}=e;const{isAnimationPlaying:n,currentPageAnimations:r,currentPageElements:a,selectedElements:o,updateAnimationState:l}=xa((e=>{let{state:t,actions:n}=e;return{isAnimationPlaying:t.animationState===Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED,currentPageAnimations:t.currentPage?.animations||He,currentPageElements:t.currentPage?.elements||He,selectedElements:t.selectedElements,updateAnimationState:n.updateAnimationState}})),i=(0,u.useCallback)((()=>{l({animationState:Cn.STORY_ANIMATION_STATE.RESET})}),[l]),s=(0,u.useMemo)((()=>o.map((e=>e.id))),[o]);return c.createElement(Cn.StoryAnimation.Provider,{animations:r,elements:a,onWAAPIFinish:i,selectedElementIds:n?s:He},c.createElement(DisplayPageAnimationController,{resetAnimationState:i}),t)}DisplayPageAnimationController.propTypes={resetAnimationState:Ea().func};const dD=(0,u.memo)((function DisplayLayer(){const{backgroundColor:e,isBackgroundSelected:t,pageAttachment:n,hasProducts:r}=xa((e=>{let{state:t}=e;return{hasCurrentPage:Boolean(t.currentPage),backgroundColor:t.currentPage?.backgroundColor,isBackgroundSelected:t.selectedElements?.[0]?.isBackground,pageAttachment:t.currentPage?.pageAttachment||{},hasProducts:t.currentPage.elements?.some((e=>{let{type:t,product:n}=e;return"product"===t&&n?.productId}))}})),a=xa((e=>{let{state:t}=e;return t.currentPage?.elements||He})),o=Ns(As),{editingElement:l,setPageContainer:i,setFullbleedContainer:s}=Os((e=>{let{state:{editingElement:t},actions:{setPageContainer:n,setFullbleedContainer:r}}=e;return{editingElement:t,setPageContainer:n,setFullbleedContainer:r}})),p=(0,u.useMemo)((()=>r?c.createElement(XL,{theme:n.theme}):c.createElement(HL,{pageAttachment:n})),[n,r]);return c.createElement(StoryAnimations,null,c.createElement(UM,{"data-testid":"DisplayLayer",pointerEvents:"none","aria-label":(0,d._x)("Display layer","compound noun","web-stories")},c.createElement(cD,{ref:(0,u.useCombinedRefs)(i,o),fullbleedRef:s,background:e,isBackgroundSelected:t,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Display layer)","web-stories"),overlay:p,isControlled:!0},c.createElement(DisplayPage,{pageElements:a,editingElement:l})),c.createElement(sD,null)))}));var uD=n(49640);const pD=function(e){const{selectedElementIds:t,selectedElements:n,arrangeSelection:r,deleteSelectedElements:a,duplicateElementsById:o,updateSelectedElements:l,setSelectedElementsById:i,currentPage:s,animationState:c,updateAnimationState:d}=xa((e=>{let{state:{selectedElementIds:t,selectedElements:n,currentPage:r,animationState:a},actions:{arrangeSelection:o,deleteSelectedElements:l,duplicateElementsById:i,updateSelectedElements:s,setSelectedElementsById:c,updateAnimationState:d}}=e;return{currentPage:r,selectedElementIds:t,selectedElements:n,arrangeSelection:o,deleteSelectedElements:l,duplicateElementsById:i,updateSelectedElements:s,setSelectedElementsById:c,animationState:a,updateAnimationState:d}})),{isEditing:p,getNodeForElement:m,setEditingElement:f}=Os((e=>{let{state:{isEditing:t},actions:{getNodeForElement:n,setEditingElement:r}}=e;return{isEditing:t,getNodeForElement:n,setEditingElement:r}})),g=(0,u.useRef)(null);g.current=t,(0,u.useEffect)((()=>{const t=e.current;if(!t)return;const n=t.ownerDocument,r=()=>{setTimeout((()=>{if(n.activeElement===n.body){const e=g.current,n=1===e?.length?m(e[0]):null;if(""!==window.getSelection().toString())return;n?n.focus({preventScroll:!0}):t.focus({preventScroll:!0})}}),300)};return n.addEventListener("focusout",r,!0),()=>{n.removeEventListener("focusout",r,!0)}}),[e,m]),(0,nr.useGlobalKeyDownEffect)("delete",(()=>a()),[a]),(0,nr.useGlobalKeyDownEffect)({key:["mod+a"]},(()=>{const e=s.elements.map((e=>{let{id:t}=e;return t}));i({elementIds:e})}),[s,i]),(0,nr.useGlobalKeyDownEffect)({key:["up","down","left","right"],shift:!0},(e=>{let{key:t,shiftKey:r}=e;if(p)return;if(n?.[0]?.isBackground)return;const{dx:a,dy:o}=(0,uD.default)(t,r);l({properties:e=>{let{x:t,y:n}=e;return{x:t+a,y:n+o}}})}),[l,p,n]),(0,nr.useGlobalKeyDownEffect)({key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=function(e,t){if("ArrowUp"===e)return t?Ae:Oe;if("ArrowDown"===e)return t?ke:Ne;return null}(t,n);a&&r({position:a})}),[r]),(0,nr.useGlobalKeyDownEffect)({key:"enter",clickable:!1},(()=>{if(1!==n.length)return;const{type:e,id:t}=n[0],{hasEditMode:r}=(0,Hn.getDefinitionForType)(e);r&&f(t)}),[n,f]);const h=(0,u.useCallback)((()=>{0!==n.length&&o({elementIds:n.map((e=>e.id))})}),[o,n]);(0,nr.useGlobalKeyDownEffect)("clone",(()=>h()),[h]);const E=[Cn.STORY_ANIMATION_STATE.PLAYING,Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(c);(0,nr.useGlobalKeyDownEffect)({key:["mod+k"]},(e=>{e.preventDefault(),d({animationState:E?Cn.STORY_ANIMATION_STATE.RESET:Cn.STORY_ANIMATION_STATE.PLAYING}),(0,O.trackEvent)("canvas_play_animations",{status:E?"stop":"play"})}),[E,d])};function mD(){let{url:e="",needsProxy:t=!1,rel:n=[],...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{needsProxy:t,url:e,rel:n,...r}}const fD=(0,p.default)(Tooltip).withConfig({displayName:"frame__StyledTooltip",componentId:"sc-1fjzoyw-0"})(["box-shadow:0px 6px 10px ",";align-items:center;p{display:flex;max-width:100%;}"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.black,.1)})),gD=p.default.div.withConfig({displayName:"frame__IconWrapper",componentId:"sc-1fjzoyw-1"})(["background-color:",";width:24px;height:24px;border-radius:50%;margin-right:8px;display:inline-block;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),hD=p.default.img.withConfig({displayName:"frame__BrandIcon",componentId:"sc-1fjzoyw-2"})(["width:100%;height:100%;border:none;"]),ED=p.default.span.withConfig({displayName:"frame__LinkDesc",componentId:"sc-1fjzoyw-3"})(["padding-top:2px;flex:1;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]);const bD=function(e){let{element:t,active:n,children:r,anchorRef:a}=e;const o=function(e){return e.link||null}(t),l=o?.url&&n?c.createElement(c.Fragment,null,c.createElement(gD,null,o?.icon&&c.createElement(hD,{src:o.icon,alt:(0,d.__)("Site Icon","web-stories")})),c.createElement(ED,null,o.desc||o.url)):null;return c.createElement(fD,{forceAnchorRef:a,placement:_d.PLACEMENT.TOP_START,title:l},r)},yD=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const[r,a]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),i=(0,u.useCallback)((n=>o=>{if(o.stopPropagation(),r!==n)return r&&e(o,r),a(n),void l(o);t(o,r),a(null)}),[e,t,r]);return(0,u.useEffect)((()=>{if(!r)return;const t=setTimeout((()=>{a(null),e(o,r)}),n||_D);return()=>{clearTimeout(t)}}),[r,o,e,n]),i},_D=200;function vD(){return vD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vD.apply(this,arguments)}const wD=p.default.div.withConfig({displayName:"frameElement__Wrapper",componentId:"sc-80q0sm-0"})([""," "," "," outline:1px solid transparent;transition:outline-color 0.5s;&:focus,&:active,&:hover{outline-color:",";}"],Pn.elementWithPosition,Pn.elementWithSize,Pn.elementWithRotation,(e=>{let{theme:t,hasMask:n}=e;return n?"transparent":t.colors.border.selection})),TD=p.default.div.withConfig({displayName:"frameElement__EmptyFrame",componentId:"sc-80q0sm-1"})(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),NOOP=()=>{},SD=(0,Ze.default)(
/* translators: 1: Ctrl Key 2: Alt Key */
(0,d.__)("To exit the canvas area, press Escape. Press Tab to move to the next group or element. To enter floating menu, press %1$s %2$s p.","web-stories"),(0,nr.prettifyShortcut)("ctrl"),(0,nr.prettifyShortcut)("alt"));const CD=(0,u.memo)((function FrameElement(e){let{id:t}=e;const n=(0,AA.default)(),{enterFocusGroup:r,setFocusGroupCleanup:a}=XN((e=>{let{enterFocusGroup:t,setFocusGroupCleanup:n}=e;return{enterFocusGroup:t,setFocusGroupCleanup:n}})),[o,l]=(0,u.useState)(!1),i=KN(QN.ELEMENT_SELECTION),{setNodeForElement:s,handleSelectElement:d,isEditing:p,setEditingElement:m,setEditingElementWithState:f}=Os((e=>{let{state:t,actions:n}=e;return{setNodeForElement:n.setNodeForElement,handleSelectElement:n.handleSelectElement,isEditing:t.isEditing,setEditingElement:n.setEditingElement,setEditingElementWithState:n.setEditingElementWithState}})),{isSelected:g,isOnlySelectedElement:h,isActive:E,isBackground:b,element:y}=xa((e=>{let{state:n}=e;const r=n.selectedElementIds.includes(t),a=r&&1===n.selectedElementIds.length,l=a&&!o&&!p;return{isSelected:r,isBackground:n.currentPage?.elements[0].id===t,element:n.currentPage?.elements.find((e=>e.id===t)),isOnlySelectedElement:a,isActive:l}})),{type:_,flip:v}=y,{Frame:w,isMaskable:T,Controls:S}=(0,Hn.getDefinitionForType)(_),I=(0,u.useRef)(),x=(0,u.useCombinedRefs)(I,i),[A,k]=(0,u.useState)(!1),{isRTL:O,styleConstants:{topOffset:N}={}}=H(),{draggingResource:P,activeDropTargetId:R,isDropSource:M,registerDropTarget:L,unregisterDropTarget:D}=zi((e=>{let{state:{draggingResource:t,activeDropTargetId:n},actions:{isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}}=e;return{draggingResource:t,activeDropTargetId:n,isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}})),B=(0,C.useTransform)((e=>{let{state:t}=e;return!g&&A&&!t.isAnythingTransforming})),F=(0,hc.default)((e=>{let{actions:t}=e;return t.getBox}));(0,u.useLayoutEffect)((()=>{s(t,I.current)}),[t,s]);const U=F(y);(0,C.useTransformHandler)(t,(e=>{const t=I.current;void 0!==e?.dropTargets?.hover&&(t.style.opacity=e.dropTargets.hover?0:1),l(null!==e)}));const{isMedia:z}=(0,Hn.getDefinitionForType)(_),G=(0,u.useCallback)((e=>{g||d(t,e),m(t)}),[t,m,d,g]),j=yD(NOOP,G),Y=(0,u.useCallback)((e=>{g||d(t,e),b||n(SD)}),[d,t,b,g,n]),Z=(0,u.useCallback)((e=>{g||d(t,e),I.current.focus({preventScroll:!0}),b||e.stopPropagation()}),[d,t,b,g]);return _m({node:I.current,eventData:{...we.SELECT_ELEMENT,label:y.type},eventType:"pointerdown"}),(0,nr.useKeyDownEffect)(I,{key:["ctrl+alt+p"]},(()=>{r({groupId:QN.EDIT_ELEMENT})}),[r]),(0,u.useEffect)((()=>{g&&a({groupId:QN.EDIT_ELEMENT,cleanup:()=>I.current?.focus()})}),[a,g]),c.createElement(bD,{element:y,active:B,anchorRef:I},S&&c.createElement(S,{isTransforming:o,box:U,elementRef:I,element:y,isRTL:O,topOffset:N,isActive:E}),c.createElement(wD,vD({ref:x,"data-element-id":t},U,{tabIndex:-1,role:"presentation",hasMask:T,"data-testid":"frameElement",onMouseDown:Z,onFocus:Y,onPointerEnter:()=>k(!0),onPointerLeave:()=>k(!1),onClick:z?j(t):null}),c.createElement(Nn.FrameWithMask,{element:y,fill:!0,flip:v,draggingResource:P,activeDropTargetId:R,isDropSource:M,registerDropTarget:L,unregisterDropTarget:D},w?c.createElement(w,{wrapperRef:I,element:y,box:U,isOnlySelectedElement:h,setEditingElementWithState:f}):c.createElement(TD,null))))}));const ID=function(e){let{targetList:t,frames:n,setTransformStyle:r,onGroupEventStart:a,onGroupEventEnd:o,isDragging:l,setIsDragging:i}=e;const{draggingResource:s}=zi((e=>{let{state:{draggingResource:t}}=e;return{draggingResource:t}})),{nodesById:c,handleSelectElement:d}=Os((e=>{let{state:{nodesById:t},actions:{handleSelectElement:n}}=e;return{nodesById:t,handleSelectElement:n}})),p=(0,u.useRef)({}),m=l||Boolean(s);return{onDragGroup:e=>{let{events:a}=e;a.forEach(((e,a)=>{let{target:o,beforeTranslate:l}=e;const i=n[a],{element:s}=t[a];i.translate=l,r(s.id,o,i)}))},onDragGroupEnd:e=>{let{targets:t,inputEvent:n}=e;i(!1),(e=>{if((0,I.areEventsDragging)(p.current,e))return!1;const t=Object.keys(c).find((t=>c[t].contains(e.target)));return t&&d(t,e),!0})(n)||o({targets:t})},onDragGroupStart:e=>{let{events:t,inputEvent:n}=e;(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;p.current={timeStamp:t,clientX:n,clientY:r}})(n),l||i(!0),a({events:t,isDrag:!0})},className:"default-moveable "+(m?"hide-handles":""),resizable:!m,rotatable:!m}};const xD=function(e){let{onGroupEventEnd:t,targetList:n,setTransformStyle:r,frames:a}=e;const{editorToDataX:o,editorToDataY:l,dataToEditorY:i}=(0,hc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY,dataToEditorY:e.actions.dataToEditorY})));return{onResizeGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:s,direction:c,width:d,height:u,drag:p}=e;const m=a[t],{element:f,updateForResizeEvent:g}=n[t];let h=u;const E=d;let b=null;g&&(b=g(f,c,o(E),l(h))),b&&b.height&&(h=i(b.height)),s.style.width=`${E}px`,s.style.height=`${h}px`,m.direction=c,m.resize=[E,h],m.translate=p.beforeTranslate,m.updates=b,r(f.id,s,m)}))},onResizeGroupStart:e=>{let{events:t}=e;t.forEach(((e,t)=>{const n=a[t];e.setOrigin(["%","%"]),e.dragStart&&e.dragStart.set(n.translate)}))},onResizeGroupEnd:e=>{let{targets:n}=e;t({targets:n,isResize:!0})}}};const AD=function(e){let{onGroupEventStart:t,setTransformStyle:n,onGroupEventEnd:r,targetList:a,frames:o}=e;return{onRotateGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:r,beforeRotate:l,drag:i}=e;const s=o[t],{element:c}=a[t];s.rotate=utils_normalizeRotationDegrees(l),s.translate=i.beforeTranslate,n(c.id,r,s)}))},onRotateGroupEnd:e=>{let{targets:t}=e;r({targets:t,isRotate:!0})},onRotateGroupStart:e=>{let{events:n}=e;t({events:n,isRotate:!0})},throttleRotate:(0,nr.useGlobalIsKeyPressed)("shift")?30:0}};function kD(){return kD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kD.apply(this,arguments)}const OD=["nw","ne","sw","se"],ND=(0,u.forwardRef)((function MultiSelectionMoveable(e,t){let{selectedElements:n,...r}=e;const a=(0,u.useRef)(),{updateElementsById:o,deleteElementsById:l,backgroundElement:i}=xa((e=>({updateElementsById:e.actions.updateElementsById,deleteElementsById:e.actions.deleteElementsById,backgroundElement:e.state.currentPage.elements[0]??{}}))),{nodesById:s,fullbleedContainer:d}=Os((e=>{let{state:{nodesById:t,fullbleedContainer:n}}=e;return{fullbleedContainer:n,nodesById:t}})),{editorToDataX:p,editorToDataY:m}=(0,hc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),{zoomSetting:f,scrollLeft:g,scrollTop:h}=Vi((e=>{let{state:{zoomSetting:t,scrollLeft:n,scrollTop:r}}=e;return{zoomSetting:t,scrollLeft:n,scrollTop:r}})),{actions:{pushTransform:E}}=(0,C.useTransform)();rL(a),(0,u.useEffect)((()=>{a.current&&a.current.updateRect()}),[n,a,s,g,h]),nL(a,[f]);const b=n.map((e=>({element:e,node:s[e.id],updateForResizeEvent:(0,Hn.getDefinitionForType)(e.type).updateForResizeEvent}))),[y,_]=(0,u.useState)(!1),v=(e,t,n)=>{t.style.transform=`translate(${n.translate[0]}px, ${n.translate[1]}px) rotate(${n.rotate}deg)`,E(e,n)},w=b?b.map((e=>{let{element:t}=e;return{translate:[0,0],rotate:t.rotationAngle,direction:[0,0],resize:[0,0],updates:null}})):[],T=e=>{let{events:t,isDrag:n,isRotate:r}=e;t.forEach(((e,t)=>{const a=w[t];n?e.set(a.translate):r&&e.set(a.rotate)}))},S=e=>{let{targets:t,isRotate:n,isResize:r}=e;const i={},s=[];t.forEach(((e,t)=>{const{element:a,updateForResizeEvent:o}=b[t];if(aL(e,d))return void s.push(a.id);const l=w[t],{direction:c}=l,u=e=>Math.abs(e)<=1?0:e,f={x:u(a.x+p(l.translate[0])),y:u(a.y+m(l.translate[1]))};n&&(f.rotationAngle=l.rotate);const[g,h]=l.resize;if(r&&(0!==g&&0!==h)){const e=p(g),t=m(h);f.width=e,f.height=t,o&&Object.assign(f,o(a,c,e,t))}i[a.id]=f})),o({elementIds:Object.keys(i),properties:e=>i[e.id]}),s.length>0&&l({elementIds:s}),b.forEach(((e,t)=>{let{element:n,node:r}=e;w[t].direction=[0,0],w[t].translate=[0,0],w[t].resize=[0,0],w[t].updates=null,r.style.transform="",r.style.width="",r.style.height="",E(n.id,null)})),a.current&&a.current.updateRect()},x=Object.values(un(s,[...n.map((e=>e.id)),i.id])),A=tL({canSnap:!0,otherNodes:x}),k=ID({targetList:b,frames:w,setTransformStyle:v,onGroupEventStart:T,onGroupEventEnd:S,isDragging:y,setIsDragging:_}),O=xD({onGroupEventEnd:S,targetList:b,setTransformStyle:v,frames:w}),N=AD({onGroupEventStart:T,setTransformStyle:v,onGroupEventEnd:S,targetList:b,frames:w}),P=(0,u.useCombinedRefs)(a,t);return b.some((e=>{let{node:t}=e;return void 0===t}))?null:c.createElement(I.Moveable,kD({},r,{className:"default-moveable",ref:P,zIndex:0,target:b.map((e=>{let{node:t}=e;return t})),draggable:!0,resizable:!0,rotatable:!0,renderDirections:OD},k,N,O,A))})),PD=ND;function RD(){return RD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RD.apply(this,arguments)}const MD=function Selection(e){const t=xa((e=>{let{state:t}=e;return t.selectedElements[0]?.id===t.currentPage.elements?.[0]?.id})),{selectedElements:n,isAnimating:r}=xa((e=>({selectedElements:e.state.selectedElements,isAnimating:[Cn.STORY_ANIMATION_STATE.PLAYING,Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED,Cn.STORY_ANIMATION_STATE.SCRUBBING].includes(e.state.animationState)}))),{editingElement:a,lastSelectionEvent:o,nodesById:l,onMoveableMount:i}=Os((e=>{let{state:{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}=e;return{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}));if(0===n.length)return null;if(t)return null;const s=n[0]?.resource?.isPlaceholder;if(s)return null;if(a||r)return null;if(1===n.length){const t=n[0],r=l[t.id];return r?c.createElement(EL,RD({selectedElement:t,targetEl:r,pushEvent:o},e,i&&{ref:i})):null}return c.createElement(PD,RD({selectedElements:n},e,i&&{ref:i}))},LD=p.default.div.withConfig({displayName:"pagenav__Wrapper",componentId:"sc-j8q0gt-0"})(["display:flex;align-items:center;color:",";& > *{pointer-events:initial;}"],(e=>{let{theme:t}=e;return t.colors.fg.white})),DD=(0,p.default)(qf.default).withConfig({displayName:"pagenav__FlippableArrow",componentId:"sc-j8q0gt-1"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));const BD=function PageNav(e){let{isNext:t=!0}=e;const{pages:n,currentPageIndex:r,setCurrentPage:a}=xa((e=>{let{state:{pages:t,currentPageIndex:n},actions:{setCurrentPage:r}}=e;return{pages:t,currentPageIndex:n,setCurrentPage:r}})),{isRTL:o}=H(),l=(0,u.useRef)(null),i=(0,u.useCallback)((e=>e.stopPropagation()),[]),s=(0,u.useCallback)((()=>{const e=t?n[r+1]:n[r-1];e&&a({pageId:e.id})}),[a,r,t,n]),{hasPageNavigation:p}=Vi((e=>{let{state:{hasPageNavigation:t}}=e;return{hasPageNavigation:t}}));if(_m({node:l.current,eventData:we.PAGE_NAVIGATION}),!p)return!1;const g=t&&r<n.length-1||!t&&r>0,h=o===t;return c.createElement(LD,null,c.createElement(m.Button,{ref:l,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.MEDIUM,"aria-disabled":!g,"aria-label":t?(0,d.__)("Next Page","web-stories"):(0,d.__)("Previous Page","web-stories"),onClick:s,onMouseDown:i},c.createElement(DD,{$isLeft:h})))},FD=(0,p.default)(QM).withConfig({displayName:"framesLayer__FramesPageArea",componentId:"sc-5ltl4w-0"})(["pointer-events:initial;"]),HD=48/J.PAGE_WIDTH*100,UD=p.default.div.withConfig({displayName:"framesLayer__FocusContainer",componentId:"sc-5ltl4w-1"})(["grid-row:2 / -1;grid-column:1 / -1;margin:5px;",";"],Fu.focusableOutlineCSS),zD=(0,d.__)("Canvas Area. To navigate into the page, press Enter.","web-stories"),GD=(0,d.__)("To exit the canvas area, press Escape. Press Tab to move to the next group or element.","web-stories"),jD=p.default.div.withConfig({displayName:"framesLayer__DesignSpaceGuidelineBorder",componentId:"sc-5ltl4w-2"})(["border:1px solid ",";left:","%;right:","%;top:0;bottom:0;position:absolute;pointer-events:none;z-index:1;visibility:",";"],(e=>{let{theme:t}=e;return t.colors.border.negativePress}),HD,HD,(e=>{let{isVisible:t}=e;return t?"visible":"hidden"}));function DesignSpaceGuideline(){const e=Os((e=>{let{actions:t}=e;return t.setDesignSpaceGuideline})),{isAnythingTransforming:t}=(0,C.useTransform)((e=>{let{state:t}=e;return{isAnythingTransforming:t.isAnythingTransforming}}));return c.createElement(jD,{ref:e,isVisible:t})}function FramesNavAndSelection(e){let{children:t}=e;const n=(0,u.useRef)(null),r=sc((e=>e.onOpenMenu));return(0,nr.useKeyDownEffect)(n,"mod+alt+shift+m",r),c.createElement(UM,{ref:n,"data-testid":"FramesLayer",pointerEvents:"initial",tabIndex:"-1","aria-label":(0,d.__)("Frames layer","web-stories")},t,c.createElement($M,null,c.createElement(BD,{isNext:!1})),c.createElement(qM,null,c.createElement(BD,null)),c.createElement(MD,{onContextMenu:r}))}function FrameElements(){const e=xa((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>e.id))||He})),t=xa((e=>{let{state:t}=e;return[Cn.STORY_ANIMATION_STATE.PLAYING,Cn.STORY_ANIMATION_STATE.SCRUBBING].includes(t.animationState)})),n=sc((e=>e.onOpenMenu)),{setScrollOffset:r}=Vi((e=>{let{actions:{setScrollOffset:t}}=e;return{setScrollOffset:t}})),a=(0,u.useCallback)((e=>r({left:e.target.scrollLeft,top:e.target.scrollTop})),[r]);return!t&&c.createElement(FD,{fullBleedContainerLabel:(0,d.__)("Fullbleed area (Frames layer)","web-stories"),onContextMenu:n,onScroll:a},e.map((e=>c.createElement(CD,{key:e,id:e}))),c.createElement(DesignSpaceGuideline,null))}const YD=(0,u.memo)((function FramesLayer(){const e=(0,u.useRef)(),t=(0,AA.default)(),{enterFocusGroup:n,setFocusGroupCleanup:r}=XN((e=>{let{enterFocusGroup:t,setFocusGroupCleanup:n}=e;return{enterFocusGroup:t,setFocusGroupCleanup:n}}));return(0,nr.useGlobalKeyDownEffect)({key:"mod+option+2",editable:!0},(()=>{n({groupId:QN.ELEMENT_SELECTION})}),[n]),pD(e),(0,nr.useKeyDownEffect)(e,{key:["enter"]},(()=>{n({groupId:QN.ELEMENT_SELECTION}),t(GD)}),[n,t]),(0,c.useEffect)((()=>{r({groupId:QN.ELEMENT_SELECTION,cleanup:()=>e.current?.focus()})}),[r]),c.createElement(FramesNavAndSelection,null,c.createElement(UD,{role:"region","data-testid":"canvas-focus-container",ref:e,"aria-label":zD,tabIndex:0}),c.createElement(FrameElements,null))})),ZD=(0,u.createContext)({state:{},actions:{}}),WD=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),a=(0,u.useCallback)((e=>{e.preventDefault(),(0,O.trackEvent)("shortcuts_menu_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),o=(0,u.useCallback)((()=>{n&&((0,O.trackEvent)("shortcuts_menu_toggled",{status:"closed"}),r(!1))}),[n]),l=(0,u.useMemo)((()=>({state:{isOpen:n},actions:{toggle:a,close:o}})),[o,n,a]);return c.createElement(ZD.Provider,{value:l},t)};function VD(e){return(0,u.useContextSelector)(ZD,e??u.identity)}const $D=(0,u.createContext)({state:{},actions:{}});const qD=function(e){return(0,u.useContextSelector)($D,e??u.identity)},KD=(0,p.default)(Yf).withConfig({displayName:"carouselScroll__FlippableArrow",componentId:"sc-1npfzcu-0"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));function CarouselScrollButton(e){let{isNext:t=!1}=e;const{hasOverflow:n,canScrollBack:r,canScrollForward:a,scrollBack:o,scrollForward:l}=qD((e=>{let{state:{hasOverflow:t,canScrollBack:n,canScrollForward:r},actions:{scrollBack:a,scrollForward:o}}=e;return{hasOverflow:t,canScrollBack:n,canScrollForward:r,scrollBack:a,scrollForward:o}})),{isRTL:i}=H();if(!n)return null;const s=t?a:r,u=t?l:o,p=t?(0,d.__)("Scroll Forward","web-stories"):(0,d.__)("Scroll Back","web-stories"),g=i===t;return c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!s,onClick:u,"aria-label":p},c.createElement(KD,{$isLeft:g}))}function CarouselScrollForward(){return c.createElement(CarouselScrollButton,{isNext:!0})}function CarouselScrollBack(){return c.createElement(CarouselScrollButton,null)}const XD=(0,u.createContext)({state:{},actions:{}});const QD=function(e,t){const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),p=(0,AA.default)("assertive"),m=(0,u.useCallback)((e=>{let{position:t,onStartReordering:n=(()=>{})}=e;return e=>{e.shiftKey||e.metaKey||(n(),i(t),c(e.target))}}),[]),f=(0,u.useRef)(null);return(0,u.useEffect)((()=>{f.current=a}),[a]),(0,u.useEffect)((()=>{if(!s)return;const t=t=>{if(t.preventDefault(),null!==f.current){const t=f.current;e(l,t>l?t-1:t)}c(null)},n=()=>r(!0),a=e=>{"Escape"===e.key&&(c(null),e.stopPropagation())};return s.ownerDocument.addEventListener("pointerup",t),s.ownerDocument.addEventListener("keydown",a,!0),s.addEventListener("pointermove",n),()=>{o(null),r(!1),s.removeEventListener("pointermove",n),s.ownerDocument.removeEventListener("pointerup",t),s.ownerDocument.removeEventListener("keydown",a,!0)}}),[s,l,o,r,e]),(0,u.useEffect)((()=>{if(n&&a){const e=t-a,n=(0,Ze.default)(
/* translators: %d: new position. */
(0,d.__)("Reordering. Press Escape to abort. Release mouse to drop in position %d.","web-stories"),e);p(n)}}),[n,a,t,p]),{isReordering:n,currentSeparator:a,setCurrentSeparator:o,handleStartReordering:m}},JD=p.default.div.withConfig({displayName:"reorderableScroller__Scroller",componentId:"sc-lvxibs-0"})(["z-index:3;opacity:0;position:sticky;"]),eB=(0,p.default)(JD).withConfig({displayName:"reorderableScroller__HorizontalScroller",componentId:"sc-lvxibs-1"})(["padding-left:","px;height:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        left: 0px;\n        margin-right: -${n}px;\n        `:`\n        right: 0px;\n        margin-left: -${n}px;\n        `})),tB=(0,p.default)(JD).withConfig({displayName:"reorderableScroller__VerticalScroller",componentId:"sc-lvxibs-2"})(["padding-top:","px;width:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        top: 0px;\n        margin-bottom: -${n}px;\n        `:`\n        bottom: 0px;\n        margin-top: -${n}px;\n        `}));const nB=(0,u.memo)((function ReorderableScroller(e){let{direction:t,size:n}=e;const{state:{canScrollEnd:r,canScrollStart:a,mode:o},actions:{startScroll:l}}=(0,u.useContext)(XD),[i,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>s(!0)),[]),p=(0,u.useCallback)((()=>s(!1)),[]);(0,u.useEffect)((()=>{if(i)return l(t)}),[t,l,i]);const m=-1===t&&a||1===t&&r;if((0,u.useEffect)((()=>{m||s(!1)}),[m]),!m)return null;const f="horizontal"===o?eB:tB;return c.createElement(f,{size:n,direction:t,onPointerEnter:d,onPointerLeave:p,mode:o})}));const rB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(!1),[s,c]=(0,u.useState)(0),d=(0,u.useBatchingCallback)((()=>{const t=n.current;if(t)if("horizontal"===e){const e=t.scrollWidth-t.clientWidth;e<=0?(o(!1),i(!1)):(o(t.scrollLeft>0),i(t.scrollLeft<e))}else{const e=t.scrollHeight-t.clientHeight;e<=0?(o(!1),i(!1)):(o(t.scrollTop>0),i(t.scrollTop<e))}}),[e,n]),p=(0,u.useCallback)((e=>(c(e),()=>c(0))),[c]),m=t&&a,f=t&&l;return(0,u.useEffect)((()=>{if(0===s||!(m&&s<0||f&&s>0))return;let t=!0;const a=()=>{const o=Math.max(Math.min(.2*r,10),0);"horizontal"===e?n.current.scrollLeft+=s*o:n.current.scrollTop+=s*o,d(),t&&window.requestAnimationFrame(a)};return a(),()=>{t=!1}}),[s,d,m,f,r,e,n]),(0,u.useEffect)((()=>d()),[t,d]),{startScroll:p,canScrollEnd:f,canScrollStart:m}};function aB(){return aB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aB.apply(this,arguments)}const oB=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"reorderable__ReorderableContainer",componentId:"sc-plmujd-0"})(["display:flex;"]),lB=(0,u.forwardRef)((function Reorderable(e,t){let{children:n,onPositionChange:r,getItemSize:a,scrollSize:o=null,mode:l="horizontal",...i}=e;const s=(0,u.useRef)(null),d=t||s,{isReordering:p,currentSeparator:m,setCurrentSeparator:f,handleStartReordering:g}=QD(r,n.length),{startScroll:h,canScrollEnd:E,canScrollStart:b}=rB(l,p,d,a()),y={state:{isReordering:p,currentSeparator:m,containerRef:d,mode:l,canScrollEnd:E,canScrollStart:b},actions:{setCurrentSeparator:f,handleStartReordering:g,startScroll:h}},_=o||a();return c.createElement(XD.Provider,{value:y},c.createElement(oB,aB({ref:d},i),c.createElement(nB,{direction:-1,size:_}),n,c.createElement(nB,{direction:1,size:_})))}));const iB=function(e){return(0,u.useContextSelector)(XD,e??u.identity)};function sB(){return sB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sB.apply(this,arguments)}const cB=p.default.div.withConfig({displayName:"reorderableItem__Container",componentId:"sc-5aswet-0"})(["z-index:1;"]);const dB=function ReorderableItem(e){let{children:t,position:n,onStartReordering:r,disabled:a,...o}=e;const l=iB((e=>{let{actions:t}=e;return t.handleStartReordering}));return c.createElement(cB,sB({},a?null:{onPointerDown:l({position:n,onStartReordering:r})},o),t)};function uB(){return uB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uB.apply(this,arguments)}const pB=p.default.div.withConfig({displayName:"reorderableSeparator__Wrapper",componentId:"sc-1tnz6qo-0"})(["opacity:0;position:relative;z-index:",";&:hover{opacity:",";}"],(e=>{let{isReordering:t}=e;return t?2:-1}),(e=>{let{isReordering:t}=e;return t?1:0})),mB=p.default.div.withConfig({displayName:"reorderableSeparator__Line",componentId:"sc-1tnz6qo-1"})(["height:4px;margin:0 0 -4px;background:",";width:100%;"],(e=>{let{theme:t}=e;return t.colors.accent.secondary}));const fB=function ReorderableSeparator(e){let{position:t,children:n=c.createElement(mB,null),...r}=e;const a=(0,u.useRef)(null),{isReordering:o,setCurrentSeparator:l}=iB((e=>{let{state:t,actions:n}=e;return{isReordering:t.isReordering,setCurrentSeparator:n.setCurrentSeparator}})),i=(0,u.useCallback)((()=>{o&&l(t)}),[l,o,t]);return c.createElement(pB,uB({onPointerOver:i,ref:a,isReordering:o},r),n)},gB=p.default.div.withConfig({displayName:"carouselPage__Line",componentId:"sc-mvqls9-0"})(["background:",";height:","px;width:","px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t}),4),hB=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"carouselPage__ItemContainer",componentId:"sc-mvqls9-1"})(["display:flex;position:relative;margin:0;padding:0;"]),EB=(0,p.default)(fB).withConfig({displayName:"carouselPage__PageSeparator",componentId:"sc-mvqls9-2"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;",":first-of-type &:first-of-type,",":last-of-type &:last-of-type{width:","px;}",":first-of-type &:first-of-type{left:","px;justify-content:flex-start;}",":first-of-type &:last-of-type{left:","px;}",":last-of-type &:last-of-type{justify-content:flex-end;}"],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),hB,hB,(e=>{let{width:t,margin:n}=e;return(t+n+4)/2}),hB,(e=>{let{margin:t}=e;return(t-4)/2}),hB,(e=>{let{width:t,margin:n}=e;return n+t/2}),hB),bB=(0,p.default)(dB).withConfig({displayName:"carouselPage__ReorderablePage",componentId:"sc-mvqls9-3"})(["display:flex;z-index:1;margin-right:","px;margin-left:","px;"],(e=>{let{margin:t}=e;return t}),(e=>{let{margin:t,position:n}=e;return 0===n?t:0}));const yB=function CarouselPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,clickPage:l,setPageRef:i,page:s,isCurrentPage:u,hasMultiplePages:p}=qD((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,numPages:o,pages:l,currentPageId:i},actions:{clickPage:s,setPageRef:c}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,clickPage:s,setPageRef:c,page:l.find((e=>{let{id:n}=e;return n===t})),isCurrentPage:t===i,hasMultiplePages:o>1}}));return s&&s.id?c.createElement(hB,{ref:e=>i(s,e),"data-testid":`carousel-page-preview-${t}`},0===n&&c.createElement(EB,{position:0,width:r,height:a,margin:o},c.createElement(gB,{height:a})),c.createElement(bB,{position:n,margin:o},c.createElement(Cv,{tabIndex:u&&p?0:-1,onClick:()=>l(s),role:"option","data-page-id":s.id,label:u?(0,Ze.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),n+1):(0,Ze.default)(
/* translators: %s: page number. */
(0,d.__)("Go to page %s","web-stories"),n+1),isActive:u,page:s,width:r,height:a,isInteractive:p})),c.createElement(EB,{position:n+1,width:r,height:a,margin:o},c.createElement(gB,{height:a}))):null};var _B=n(78559);const vB=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"skeletonPage__EmptyPage",componentId:"sc-szsuww-0"})(["display:block;position:relative;flex:0 0;margin:0;padding:0;border-radius:4px;"]);const wB=function SkeletonPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,page:l}=qD((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,pages:o}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,page:o.find((e=>{let{id:n}=e;return n===t}))}}));if(!l||!l.id)return null;const i=l.elements[0],{isMedia:s}=(0,Hn.getDefinitionForType)(i.type),d=s&&wr(i.resource?.baseColor)?(0,_B.default)(i.resource.baseColor.replace("#","")):l.backgroundColor;return c.createElement(vB,{style:{flexBasis:`${r}px`,height:`${a}px`,marginLeft:`${0===n?o:0}px`,marginRight:`${o}px`,...(0,Nr.default)(d)},"data-testid":`carousel-page-preview-skeleton-${t}`})},TB=(0,p.default)(lB).attrs({role:"listbox","aria-orientation":"horizontal",mode:"horizontal"}).withConfig({displayName:"carouselList__PageList",componentId:"sc-1oa14z5-0"})(["grid-area:carousel;flex-direction:row;align-items:center;justify-content:center;overflow-x:hidden;overflow-y:hidden;width:","px;list-style:none;padding:4px 0;margin:-4px 0;",";::-webkit-scrollbar-thumb{border:6px solid transparent !important;}"],(e=>{let{width:t}=e;return t}),(e=>{let{hasOverflow:t}=e;return t&&(0,p.css)(["overflow-x:visible;overflow-x:overlay;justify-content:flex-start;"])}));const SB=function CarouselList(){const{pageThumbWidth:e,carouselWidth:t,hasOverflow:n,pageIds:r,rearrangePages:a,setListRef:o,showSkeleton:l}=qD((e=>{let{state:{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,showSkeleton:o},actions:{rearrangePages:l,setListRef:i}}=e;return{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,rearrangePages:l,setListRef:i,showSkeleton:o}})),i=l?wB:yB;return c.createElement(TB,{mode:"horizontal",width:t,ref:o,hasOverflow:n,"aria-label":(0,d.__)("Pages List","web-stories"),onPositionChange:a,getItemSize:()=>e},r.map(((e,t)=>c.createElement(i,{key:e,pageId:e,index:t}))))},CB=(0,p.css)(["width:32px;margin:-8px;"]),IB=(0,p.default)(Xu.default).withConfig({displayName:"carouselDrawerIcon__IconDown",componentId:"sc-b03fdn-0"})(["",""],CB),xB=(0,p.default)($g).withConfig({displayName:"carouselDrawerIcon__IconUp",componentId:"sc-b03fdn-1"})(["",""],CB);const AB=function CarouselDrawerIcon(e){let{state:t}=e;return[Se.OPEN,Se.CLOSING].includes(t)?c.createElement(IB,null):c.createElement(xB,null)},kB=p.default.div.withConfig({displayName:"carouselDrawer__Wrapper",componentId:"sc-1dxh28m-0"})(["display:flex;justify-content:center;"]),OB=(0,p.default)(m.Button).withConfig({displayName:"carouselDrawer__StyledButton",componentId:"sc-1dxh28m-1"})(["white-space:nowrap;gap:8px;"]);const NB=function CarouselDrawer(){const{carouselState:e,openCarousel:t,closeCarousel:n}=Vi((e=>{let{state:{carouselState:t},actions:{openCarousel:n,closeCarousel:r}}=e;return{carouselState:t,openCarousel:n,closeCarousel:r}})),{currentPageNumber:r,pageCount:a}=xa((e=>{let{state:{currentPageNumber:t,pages:n}}=e;return{currentPageNumber:t,pageCount:n.length}})),o=(0,u.useCallback)((()=>{e===Se.OPEN?n():e===Se.CLOSED&&t()}),[e,t,n]);return c.createElement(kB,null,c.createElement(OB,{"aria-label":(0,d.__)("Toggle page carousel","web-stories"),onClick:o,variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY},(0,Ze.default)(
/* translators: 1: current page number. 2: total page count. */
(0,d._n)("%1$d of %2$d page","%1$d of %2$d pages",a,"web-stories"),r,a),c.createElement(AB,{state:e})))},PB=p.default.section.withConfig({displayName:"carouselLayout__Wrapper",componentId:"sc-iaovfa-0"})(["position:relative;display:grid;grid:'. d d d d d .' 32px '. . . . . . .' ","px '. p . c . n .' auto / 1fr ","px ","px auto ","px ","px 1fr;width:100%;height:auto;z-index:",";&.carousel-enter{top:","px;&.carousel-enter-active{top:0;transition:","ms ease-out;transition-property:top;}}&.carousel-exit{top:0;&.carousel-exit-active{top:","px;transition:","ms ease-out;transition-property:top;}}"],(e=>{let{isCollapsed:t}=e;return t?2:8}),AM,8,8,AM,3,(e=>{let{thumbHeight:t}=e;return t+6}),Ce,(e=>{let{thumbHeight:t}=e;return t+6}),Ce),RB=p.default.div.withConfig({displayName:"carouselLayout__Area",componentId:"sc-iaovfa-1"})(["grid-area:",";display:flex;align-items:center;justify-content:center;flex-direction:column;"],(e=>{let{area:t}=e;return t}));const MB=function CarouselLayout(){const{carouselState:e}=Vi((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{numPages:t,pageThumbHeight:n}=qD((e=>{let{state:{numPages:t,pageThumbHeight:n}}=e;return{numPages:t,pageThumbHeight:n}})),r=(0,u.useRef)();if(t<=0)return null;const a=e===Se.CLOSED,o=[Se.OPEN,Se.OPENING].includes(e);return c.createElement(G_.default,{in:o,classNames:"carousel",containerRef:!0,nodeRef:r,timeout:Ce},c.createElement(PB,{ref:r,"aria-label":(0,d.__)("Page Carousel","web-stories"),isCollapsed:a,thumbHeight:n},c.createElement(RB,{area:"d"},c.createElement(NB,null)),!a&&c.createElement(c.Fragment,null,c.createElement(RB,{area:"p"},c.createElement(CarouselScrollBack,null)),c.createElement(RB,{area:"c"},c.createElement(SB,null)),c.createElement(RB,{area:"n"},c.createElement(CarouselScrollForward,null)))))};const LB=function(e){let{availableSpace:t,numPages:n}=e;return(0,u.useMemo)((()=>{const e=t>=400,r=t-2*kM,a=e?40:36,o=e?60:54,l=a+16,i=Math.floor((r-16)/l),s=i<n;return{pageThumbWidth:a,pageThumbHeight:o,pageThumbMargin:16,carouselWidth:Math.min(i,n)*(a+16)+16,showablePages:i,hasOverflow:s}}),[t,n])};const DB=function(e){let{listElement:t,carouselWidth:n,hasOverflow:r,showablePages:a,pageThumbWidth:o,pageThumbMargin:l}=e;const[i,s]=(0,u.useState)(0),{isRTL:c}=H(),{carouselState:d}=Vi((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{currentPageIndex:p}=xa((e=>{let{state:{currentPageId:t,pages:n}}=e;return{currentPageIndex:n.findIndex((e=>{let{id:n}=e;return n===t}))}})),m=(0,u.useCallback)((e=>{c&&(e*=-1),t.scrollBy?t.scrollBy({left:e,behavior:"smooth"}):t.scrollLeft+=e}),[t,c]),f=n,g=r&&!(c?1===i:0===i),h=r&&!(c?0===i:1===i),E=(0,u.useCallback)((()=>m(f)),[m,f]),b=(0,u.useCallback)((()=>m(-f)),[m,f]);(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const e=()=>{const{offsetWidth:e,scrollLeft:n,scrollWidth:r}=t;s(n/(r-e))};return t.addEventListener("scroll",e,{passive:!0}),()=>t.removeEventListener("scroll",e)}),[t,r]);const y=(0,u.useCallback)((e=>(o+l)*e),[o,l]),_=(0,u.useRef)(!0);return(0,u.useEffect)((()=>{d===Se.CLOSED&&(_.current=!0)}),[d]),(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const{scrollLeft:e}=t,n=Math.max(0,p-a+1),o=p,l=y(n),i=y(o);if(e>=l&&e<=i)return;const s=e<l?l:i,c=setInterval((()=>{if(t.scrollWidth-t.offsetWidth<s)return;const e=_.current?"instant":"smooth";_.current=!1,t.scrollTo({left:s,top:0,behavior:e}),clearInterval(c)}),100);return()=>clearInterval(c)}),[t,r,p,a,y]),{canScrollBack:g,canScrollForward:h,scrollForward:E,scrollBack:b}};function BB(e,t,n,r){const a=r?-1:1;return e===t?a:e===n?-a:0}const FB=function(e){let{listElement:t,pageRefs:n}=e;const{isRTL:r}=H(),{addPageAt:a,arrangePage:o,currentPage:l,currentPageId:i,deletePage:s,pages:c,setCurrentPage:d}=xa((e=>{let{state:{pages:t,currentPage:n,currentPageId:r},actions:{addPageAt:a,arrangePage:o,deletePage:l,setCurrentPage:i}}=e;return{addPageAt:a,arrangePage:o,currentPage:n,currentPageId:r,deletePage:l,pages:t,setCurrentPage:i}})),p=(0,u.useMemo)((()=>c.map((e=>{let{id:t}=e;return t}))),[c]);(0,nr.useEscapeToBlurEffect)(t,[t]),(0,nr.useKeyDownEffect)(t,{key:["up","down","left","right"]},(e=>{let{key:t}=e;const a=BB(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const o=p.indexOf(i)+a;if(o>=0&&o<p.length){const e=p[o];d({pageId:e});const t=(n.current&&n.current[e])?.querySelector("button");t&&t.focus()}}),[i,r,p,d,n,t]),(0,nr.useKeyDownEffect)(t,{key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=BB(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const l=p.indexOf(i);let s=l+a;n&&(s=a<0?0:p.length-1),s!==l&&s>=0&&s<p.length&&o({pageId:i,position:s})}),[o,i,r,p,d]),(0,nr.useKeyDownEffect)(t,"delete",(()=>{s({pageId:i});const e=document.activeElement,n=()=>{if(document.activeElement!==e){const e=t.querySelector('[role="option"][tabindex="0"]');if(e)return void e.focus()}setTimeout(n,100)};n()}),[i,s,t]),(0,nr.useKeyDownEffect)(t,"clone",(()=>{const e=p.indexOf(l.id);a({page:(0,Hn.duplicatePage)(l),position:e+1})}),[a,l,p])};const HB=function CarouselProvider(e){let{availableSpace:t,children:n}=e;const{pages:r,currentPageId:a,setCurrentPage:o,arrangePage:l}=xa((e=>{let{state:{pages:t,currentPageId:n},actions:{setCurrentPage:r,arrangePage:a}}=e;return{pages:t,currentPageId:n,setCurrentPage:r,arrangePage:a}})),[i,s]=(0,u.useState)(null),d=(0,u.useRef)([]),p=r.length,m=(0,u.useMemo)((()=>r.map((e=>{let{id:t}=e;return t}))),[r]),[f,g]=(0,u.useState)(!0);(0,u.useEffect)((()=>{const e=mc((()=>g(!1)),{timeout:5e3});return()=>fc(e)}),[]);const{pageThumbWidth:h,pageThumbHeight:E,pageThumbMargin:b,carouselWidth:y,hasOverflow:_,showablePages:v}=LB({availableSpace:t,numPages:p}),{canScrollBack:w,canScrollForward:T,scrollBack:S,scrollForward:C}=DB({listElement:i,carouselWidth:y,hasOverflow:_,showablePages:v,pageThumbWidth:h,pageThumbMargin:b});FB({listElement:i,pageRefs:d});const I=(0,u.useCallback)(((e,t)=>{d.current[e.id]=t}),[]),x=(0,u.useCallback)((e=>o({pageId:e.id})),[o]),A=(0,u.useCallback)(((e,t)=>{const n=m[e];l({pageId:n,position:t}),o({pageId:n})}),[m,l,o]),k={state:{pageThumbWidth:h,pageThumbHeight:E,pageThumbMargin:b,carouselWidth:y,hasOverflow:_,pages:r,pageIds:m,numPages:p,currentPageId:a,canScrollBack:w,canScrollForward:T,showSkeleton:f},actions:{scrollBack:S,scrollForward:C,clickPage:x,rearrangePages:A,setListRef:s,setPageRef:I}};return c.createElement($D.Provider,{value:k},n)},UB=p.default.div.withConfig({displayName:"carouselContainer__Wrapper",componentId:"sc-1dsu28u-0"})(["height:auto;width:100%;align-self:flex-end;"]);const zB=(0,u.memo)((function CarouselContainer(){const e=(0,u.useRef)(),[t,n]=(0,u.useState)(0);return(0,u.useResizeEffect)(e,(e=>{let{width:t}=e;return n(t)}),[]),c.createElement(HB,{availableSpace:t},c.createElement(UB,{ref:e},c.createElement(MB,null)))})),GB=(0,p.css)(["height:36px;padding:8px;background-color:",";span{padding:0;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),jB=[{label:(0,d._x)("100%","zoom level","web-stories"),value:1},{label:(0,d._x)("200%","zoom level","web-stories"),value:2},{label:(0,d._x)("Fill","zoom level","web-stories"),value:Te.FILL},{label:(0,d._x)("Fit","zoom level","web-stories"),value:Te.FIT}];const YB=function ZoomSelector(){const{zoomSetting:e,zoomLevel:t,setZoomSetting:n,setZoomLevel:r}=Vi((e=>{let{state:{zoomSetting:t,zoomLevel:n},actions:{setZoomSetting:r,setZoomLevel:a}}=e;return{zoomSetting:t,zoomLevel:n,setZoomSetting:r,setZoomLevel:a}})),a=(0,u.useMemo)((()=>{const n=jB.find((n=>{let{value:r}=n;return e===Te.FIXED?r===t:r===e}));return n?n.label:(0,Ze.default)(
/* translators: %d: zoom level percentage value. */
(0,d._x)("%d%%","zoom level","web-stories"),Math.round(100*t))}),[e,t]),o=(0,u.useCallback)(((e,t)=>{Object.prototype.hasOwnProperty.call(Te,t)?n(t):r(t)}),[n,r]);return c.createElement(_A.DropDown,{ariaLabel:(0,d.__)("Zoom Level","web-stories"),placeholder:a,options:jB,placement:_d.PLACEMENT.TOP_START,onMenuItemClick:o,selectedValue:e,popupFillWidth:!1,selectButtonStylesOverride:GB})};var ZB=n(93401),WB=n(21193);const VB=p.default.section.withConfig({displayName:"gridView__Container",componentId:"sc-ytsaos-0"})(["display:flex;flex-direction:column;height:100%;width:100%;padding:32px;"]),$B=p.default.header.withConfig({displayName:"gridView__TopRow",componentId:"sc-ytsaos-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:36px;@media ","{margin-bottom:72px;}@media ","{margin-bottom:112px;}"],(e=>{let{theme:t}=e;return t.breakpoint.desktop}),(e=>{let{theme:t}=e;return t.breakpoint.wide})),qB=(0,p.default)(lB).withConfig({displayName:"gridView__Wrapper",componentId:"sc-ytsaos-2"})(["position:relative;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;flex-grow:1;display:flex;flex-direction:column;pointer-events:all;padding:4px;"]),KB=p.default.div.withConfig({displayName:"gridView__Grid",componentId:"sc-ytsaos-3"})(["position:relative;display:grid;grid-template-columns:",";grid-template-rows:repeat(auto-fill,","px);grid-gap:","px;justify-content:center;align-items:flex-start;flex-grow:1;"],(e=>{let{pageWidth:t}=e;return`repeat(auto-fit, minmax(${t}px, max-content))`}),(e=>{let{pageHeight:t}=e;return t}),(e=>{let{gapWidth:t}=e;return t})),XB=p.default.div.withConfig({displayName:"gridView__NoButton",componentId:"sc-ytsaos-4"})(["flex:0 0 56px;"]),QB=(0,p.default)(m.Button).withConfig({displayName:"gridView__ClickableButton",componentId:"sc-ytsaos-5"})(["pointer-events:all;"]),JB=(0,p.default)(ZB.Slider).withConfig({displayName:"gridView__ClickableSlider",componentId:"sc-ytsaos-6"})(["pointer-events:all;width:366px;"]),eF=(0,p.default)(fB).withConfig({displayName:"gridView__PageSeparator",componentId:"sc-ytsaos-7"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;align-items:center;",""],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),(e=>{let{before:t,width:n,margin:r}=e;return t&&`\n      left: -${(n+2*r)/2}px;\n    `})),tF=p.default.div.withConfig({displayName:"gridView__Line",componentId:"sc-ytsaos-8"})(["background:",";height:","px;width:2px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t})),nF=p.default.div.withConfig({displayName:"gridView__ItemContainer",componentId:"sc-ytsaos-9"})(["display:flex;flex-direction:row;position:relative;"]);const rF=function GridView(e){let{onClose:t}=e;const{pages:n,currentPageId:r,currentPageIndex:a,setCurrentPage:o,arrangePage:l}=xa((e=>{let{state:{pages:t,currentPageIndex:n,currentPageId:r},actions:{setCurrentPage:a,arrangePage:o}}=e;return{pages:t,currentPageIndex:n,currentPageId:r,setCurrentPage:a,arrangePage:o}})),{isRTL:i,styleConstants:{leftOffset:s}={}}=H(),[p,m]=(0,u.useState)(4),[g,h]=(0,u.useState)(null),E=(0,u.useRef)();(0,u.useResizeEffect)(E,(e=>{let{width:t}=e;return h(t)}),[]);const b=(g-20*(p-1))/p,y=12*Math.floor(b/12),_=y*p,v=Math.floor((g-_)/(p-1)),w=y/J.PAGE_RATIO,T=e=>()=>o({pageId:e.id}),S=(0,u.useRef)(),C=(0,u.useRef)({}),I=(0,u.useCallback)(((e,t)=>{l({pageId:e,position:t})}),[l]);(0,WB.default)({containerRef:E,gridRef:S,itemRefs:C,isRTL:i,currentItemId:r,items:n,arrangeItem:I});const x=Math.min(w-24,64);return c.createElement(VB,{"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement($B,null,c.createElement(QB,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.MEDIUM,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(Du.default,null)),c.createElement(JB,{min:4,max:12,majorStep:1,minorStep:1,value:p,handleChange:e=>m(e),"aria-label":(0,d.__)("Pages per row","web-stories"),isRTL:i,leftOffset:s,popupZIndexOverride:11}),c.createElement(XB,null)),c.createElement(qB,{"aria-label":(0,d.__)("Grid View Pages List","web-stories"),ref:E,onPositionChange:(e,t)=>{const r=n[e].id;l({pageId:r,position:t}),o({pageId:r})},mode:"grid",getItemSize:()=>w,scrollSize:64},c.createElement(KB,{pageWidth:y,pageHeight:w,gapWidth:v,ref:S},n.map(((e,t)=>{const r=t===a,o=n.length>1;return c.createElement(nF,{key:e.id,ref:t=>{C.current[e.id]=t}},c.createElement(eF,{position:t,width:y,height:w,margin:v,before:!0},c.createElement(tF,{height:x})),c.createElement(dB,{position:t},c.createElement(Cv,{key:e.id,label:r?(0,Ze.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),t+1):(0,Ze.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s","web-stories"),t+1),tabIndex:r&&o?0:-1,isActive:r&&o,page:e,width:y,height:w,onClick:T(e),isInteractive:o,gridRef:S,role:"option"})),c.createElement(eF,{position:t+1,width:y,height:w,margin:v},c.createElement(tF,{height:x})))})))))},aF=p.default.div.withConfig({displayName:"gridViewButton__Box",componentId:"sc-1gc0r0y-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]);const oF=function GridViewButton(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>{t((e=>{const t=!e;return(0,O.trackEvent)("grid_view_toggled",{status:t?"open":"closed"}),t}))}),[t]);return c.createElement(c.Fragment,null,c.createElement(aF,null,c.createElement(Tooltip,{title:(0,d.__)("Grid View","web-stories"),placement:_d.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:n,"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement(vg.default,null)))),c.createElement(T.Modal,{isOpen:e,onClose:n,contentLabel:(0,d.__)("Grid View","web-stories"),overlayStyles:{alignItems:"stretch",backgroundColor:"#131516"},contentStyles:{pointerEvents:"none",flex:1}},c.createElement(rF,{onClose:n})))};function lF(){return lF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lF.apply(this,arguments)}const iF=(0,p.default)(m.Button).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(e=>{let{selected:t,disabled:n,theme:r}=e;return t&&!n&&(0,p.css)(["background-color:",";"],r.colors.interactiveBg.secondaryPress)}),(e=>{let{direction:t}=e;switch(t){case Cn.DIRECTION.RIGHT_TO_LEFT:return"rotate(270deg)";case Cn.DIRECTION.TOP_TO_BOTTOM:return"rotate(180deg)";case Cn.DIRECTION.LEFT_TO_RIGHT:return"rotate(90deg)";case Cn.ROTATION.COUNTER_CLOCKWISE:return"rotateX(180deg) rotateZ(90deg)";case Cn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return"rotate(-135deg)";case Cn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return"rotate(135deg)";case Cn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return"rotate(-315deg)";case Cn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return"rotate(315deg)";default:return"rotate(0deg)"}})),sF=(0,p.default)((e=>{let{className:t,direction:n,...r}=e;return c.createElement(iF,lF({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,className:t,direction:n},r),[...Object.values(Cn.DIRECTION),...Object.values(Cn.SCALE_DIRECTION)].includes(n)&&c.createElement(ig,null))})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),cF=p.default.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),dF=p.default.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),uF=p.default.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{direction:t}=e;switch(t){case Cn.DIRECTION.RIGHT_TO_LEFT:return(0,p.css)(["top:50%;right:","px;transform:translateY(-50%);"],3);case Cn.DIRECTION.TOP_TO_BOTTOM:return(0,p.css)(["top:","px;left:50%;transform:translateX(-50%);"],3);case Cn.DIRECTION.LEFT_TO_RIGHT:return(0,p.css)(["top:50%;left:","px;transform:translateY(-50%);"],3);case Cn.ROTATION.COUNTER_CLOCKWISE:return(0,p.css)(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case Cn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return(0,p.css)(["bottom:","px;left:","px;"],3,3);case Cn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return(0,p.css)(["top:","px;left:","px;"],3,3);case Cn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return(0,p.css)(["top:","px;right:","px;"],3,3);case Cn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return(0,p.css)(["bottom:","px;right:","px;"],3,3);default:return(0,p.css)(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),pF=p.default.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),mF=p.default.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),fF={[Cn.DIRECTION.RIGHT_TO_LEFT]:(0,d._x)("right to left","animation direction","web-stories"),[Cn.DIRECTION.LEFT_TO_RIGHT]:(0,d._x)("left to right","animation direction","web-stories"),[Cn.DIRECTION.TOP_TO_BOTTOM]:(0,d._x)("top to bottom","animation direction","web-stories"),[Cn.DIRECTION.BOTTOM_TO_TOP]:(0,d._x)("bottom to top","animation direction","web-stories"),[Cn.ROTATION.CLOCKWISE]:(0,d._x)("clockwise","rotation direction","web-stories"),[Cn.ROTATION.COUNTER_CLOCKWISE]:(0,d._x)("counterclockwise","rotation direction","web-stories"),[Cn.SCALE_DIRECTION.SCALE_IN]:(0,d._x)("scale in","scale direction","web-stories"),[Cn.SCALE_DIRECTION.SCALE_OUT]:(0,d._x)("scale out","scale direction","web-stories")},gF=e=>{switch(e){case Cn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:case Cn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return Cn.SCALE_DIRECTION.SCALE_IN;case Cn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:case Cn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return Cn.SCALE_DIRECTION.SCALE_OUT;default:return e}},hF=e=>[...Cn.SCALE_DIRECTION_MAP.SCALE_IN,...Cn.SCALE_DIRECTION_MAP.SCALE_OUT].includes(e),EF=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[]},bF=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return EF(e)?.[0]},yF=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=EF(e);return t[t.length-1]},_F=[Cn.DIRECTION.TOP_TO_BOTTOM,Cn.DIRECTION.RIGHT_TO_LEFT,Cn.DIRECTION.BOTTOM_TO_TOP,Cn.DIRECTION.LEFT_TO_RIGHT],vF=[Cn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT,Cn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT,Cn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT,Cn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT],wF=(e,t,n)=>{const r=n?t.reverse():t;return e.sort(((e,t)=>r.indexOf(e)-r.indexOf(t)))},DirectionRadioInput=e=>{let{value:t,directions:n=[],onChange:r,disabled:a=[],tooltip:o}=e;const l=(0,u.useRef)(),{isRTL:i}=H(),s=(0,u.useMemo)((()=>{const e=[];if(n.includes(Cn.SCALE_DIRECTION.SCALE_OUT)||n.includes(Cn.SCALE_DIRECTION.SCALE_IN)){const t=[];n.includes(Cn.SCALE_DIRECTION.SCALE_OUT)&&t.push(...Cn.SCALE_DIRECTION_MAP.SCALE_OUT),n.includes(Cn.SCALE_DIRECTION.SCALE_IN)&&t.push(...Cn.SCALE_DIRECTION_MAP.SCALE_IN),e.push(...wF(t,vF,i))}else e.push(...wF(n,_F,i));return e}),[n,i]);return yA(l),c.createElement(cF,null,c.createElement(dF,null),c.createElement(pF,null,(0,d.__)("Which Direction?","web-stories")),c.createElement(mF,{ref:l},s.map((e=>{const n=a?.includes(gF(e));return c.createElement(uF,{key:e,"aria-label":fF[e],htmlFor:e,direction:e,disabled:n},c.createElement(Tooltip,{title:n?o:"",placement:hF(e)?yF(e):bF(e)},c.createElement(sF,{direction:e,selected:t===e||e?.includes(t),disabled:n,onClick:()=>r(gF(e))})))}))))},TF=(0,p.css)(["border-radius:0;border-color:"," transparent transparent transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),SF=(0,p.default)(gI).withConfig({displayName:"effectInput__StyledInput",componentId:"sc-1gnssiy-0"})(["height:","px;div{height:calc(100% + 1px);"," &:focus-within{border-radius:",";}}"],45,TF,(e=>{let{theme:t}=e;return t.borders.radius.small})),CF=(0,p.default)(_A.DropDown).withConfig({displayName:"effectInput__StyledDropDown",componentId:"sc-1gnssiy-1"})(["button{height:46px;"," &:hover{","}&.",",&[","]{border-radius:",";}}"],TF,TF,Ju.FOCUS_VISIBLE_SELECTOR,Ju.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.borders.radius.small}));const IF=function EffectInput(e){let{effectProps:t,effectConfig:n,field:r,onChange:a,disabledOptions:o,tooltip:l}=e;const i=(0,u.useCallback)((e=>a(e,!0)),[a]),s=n[r]??t[r].defaultValue,p=t[r].type===Cn.FIELD_TYPES.FLOAT;switch(t[r].type){case Cn.FIELD_TYPES.DROPDOWN:return c.createElement(CF,{options:(t[r].values||[]).map((e=>{let{name:t,...n}=e;return{...n,label:t,disabled:o.includes(n.value)}})),placeholder:(0,d.__)("Select a value","web-stories"),ariaLabel:(0,d.__)("Select effect value","web-stories"),isKeepMenuOpenOnSelection:!1,selectedValue:s,onMenuItemClick:e=>a(e.target.value,!0)});case Cn.FIELD_TYPES.DIRECTION_PICKER:return c.createElement(DirectionRadioInput,{value:s,directions:t[r].values,onChange:i,disabled:o,tooltip:l});default:return c.createElement(SF,{"aria-label":t[r].label,suffix:t[r].label,unit:t[r].unit,value:s,min:0,onChange:e=>a(p?parseFloat(e.target.value):parseInt(e.target.value),!0),isFloat:p,containerStyleOverride:Uu})}};function xF(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!e.zoomDirection||!e.panDir)&&(e.zoomDirection?e.zoomDirection:e.scaleDirection?e.scaleDirection:e.flyInDir?e.flyInDir:e.rotateInDir?e.rotateInDir:e.whooshInDir?e.whooshInDir:!!e.panDir&&e.panDir)}const AF=p.default.div.withConfig({displayName:"effectPanel__AnimationGrid",componentId:"sc-s89nzp-0"})(["display:grid;grid-template-columns:auto auto;"]),kF=p.default.div.withConfig({displayName:"effectPanel__AnimationGridField",componentId:"sc-s89nzp-1"})((e=>{let{isRotationComponent:t,isHalfWidthField:n}=e;return[{gridColumn:"1/3"},t&&{gridRow:"1/3",gridColumn:"auto"},n&&{gridColumn:"auto"}]}));const OF=function EffectPanel(e){let{animation:{id:t,type:n,...r},onChange:a,disabledTypeOptionsMap:o}=e;const{props:l}=(0,Cn.getAnimationEffectProps)(n),i=(0,u.useCallback)(((e,o)=>{a({id:t,type:n,...r,...e},o)}),[t,n,r,a]),s=(0,u.useMemo)((()=>Object.keys(l).reduce(((e,t)=>l[t].type===Cn.FIELD_TYPES.DIRECTION_PICKER||l[t].type===Cn.FIELD_TYPES.ROTATION_PICKER||e),!1)),[l]),d=Object.keys(l).map(((e,t)=>c.createElement(kF,{key:e,isRotationComponent:s&&0===t,isHalfWidthField:s&&(1===t||2===t)},c.createElement(IF,{effectProps:l,effectConfig:r,field:e,onChange:(t,n)=>i({[e]:t},n),disabledOptions:o[n]?.options||[],tooltip:o[n]?.tooltip}))));return c.createElement(AF,null,d)},NF=p.default.div.withConfig({displayName:"effectChooserElements__BaseAnimationCell",componentId:"sc-13qk6mh-0"})(["display:none;transform-origin:50% 50%;"]),PF=(0,p.keyframes)(["0%{transform:translateY(-100%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}15%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}26%{transform:translateY(-62%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}37%{transform:translateY(-0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}41.5%{transform:translateY(-30%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}50%,100%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}"]),RF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__DropAnimation",componentId:"sc-13qk6mh-1"})(["animation:"," 3.2s linear infinite;"],PF),MF=(0,p.keyframes)(["0%{opacity:0;}50%,100%{opacity:1;}"]),LF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__FadeInAnimation",componentId:"sc-13qk6mh-2"})(["animation:"," 2.5s linear infinite;"],MF),DF=(0,p.keyframes)(["0%{transform:translateX(-100%);}50%,100%{transform:translateX(0%);}"]),BF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__FlyInLeftAnimation",componentId:"sc-13qk6mh-3"})(["animation:"," 2s linear infinite;"],DF),FF=(0,p.keyframes)(["0%{transform:translateX(100%);}50%,100%{transform:translateX(0%);}"]),HF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__FlyInRightAnimation",componentId:"sc-13qk6mh-4"})(["animation:"," 2s linear infinite;"],FF),UF=(0,p.keyframes)(["0%{transform:translateY(-100%);}50%,100%{transform:translateY(0%);}"]),zF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__FlyInTopAnimation",componentId:"sc-13qk6mh-5"})(["animation:"," 2s linear infinite;"],UF),GF=(0,p.keyframes)(["0%{transform:translateY(100%);}50%,100%{transform:translateY(0%);}"]),jF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__FlyInBottomAnimation",componentId:"sc-13qk6mh-6"})(["animation:"," 2s linear infinite;"],GF),YF=(0,p.keyframes)(["0%{transform:scale(1);}12.5%{transform:scale(0.75);}37.5%{transform:scale(1.25);}50%,100%{transform:scale(1);}"]),ZF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__PulseAnimation",componentId:"sc-13qk6mh-7"})(["animation:"," 2s cubic-bezier(0.4,0,0.2,1) infinite;"],YF),WF=(0,p.keyframes)(["0%{transform:translateX(-100%) rotate(-360deg);}50%,100%{transform:translateX(0%);}"]),VF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__RotateInLeftAnimation",componentId:"sc-13qk6mh-8"})(["animation:"," 2s linear infinite;"],WF),$F=(0,p.keyframes)(["0%{transform:translateX(100%) rotate(360deg);}50%,100%{transform:translateX(0%);}"]),qF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__RotateInRightAnimation",componentId:"sc-13qk6mh-9"})(["animation:"," 2s linear infinite;"],$F),KF=(0,p.keyframes)(["0%{transform:rotate(-540deg) scale(0.1);opacity:0;}50%,100%{transform:none;opacity:1;}"]),XF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__TwirlInAnimation",componentId:"sc-13qk6mh-10"})(["animation:"," 2s cubic-bezier(0.2,0.75,0.4,1) infinite;"],KF),QF=(0,p.keyframes)(["0%{transform:translateX(-100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),JF=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__WhooshInLeftAnimation",componentId:"sc-13qk6mh-11"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],QF),eH=(0,p.keyframes)(["0%{transform:translateX(100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),tH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__WhooshInRightAnimation",componentId:"sc-13qk6mh-12"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],eH),nH=(0,p.keyframes)(["0%{transform:translateX(-100%) scale(1.5);}50%,100%{transform:translateX(200%) scale(1.5);}"]),rH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__PanLeftAnimation",componentId:"sc-13qk6mh-13"})(["animation:"," 3s linear infinite;"],nH),aH=(0,p.keyframes)(["0%{transform:translateX(100%) scale(1.5);}50%,100%{transform:translateX(-200%) scale(1.5);}"]),oH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__PanRightAnimation",componentId:"sc-13qk6mh-14"})(["animation:"," 3s linear infinite;"],aH),lH=(0,p.keyframes)(["0%{transform:translateY(-100%) scale(1.5);}50%,100%{transform:translateY(200%) scale(1.5);}"]),iH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__PanTopAnimation",componentId:"sc-13qk6mh-15"})(["animation:"," 3s linear infinite;"],lH),sH=(0,p.keyframes)(["0%{transform:translateY(100%) scale(1.5);}50%,100%{transform:translateY(-200%) scale(1.5);}"]),cH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__PanBottomAnimation",componentId:"sc-13qk6mh-16"})(["animation:"," 3s linear infinite;"],sH),dH=(0,p.keyframes)(["0%{opacity:0;transform:scale(0);}50%,100%{opacity:1;transform:scale(1);}"]),uH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__ZoomInAnimation",componentId:"sc-13qk6mh-17"})(["animation:"," 2s linear infinite;"],dH),pH=(0,p.keyframes)(["0%{opacity:0;transform:scale(2);}50%,100%{opacity:1;transform:scale(1);}"]),mH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__ZoomOutAnimation",componentId:"sc-13qk6mh-18"})(["animation:"," 2s linear infinite;"],pH),fH=(0,p.keyframes)(["0%{opacity:0;transform:translate3d(-50%,0,0) scale(2);}50%,100%{opacity:1;transform:none;}"]),gH=(0,p.default)(NF).withConfig({displayName:"effectChooserElements__PanAndZoomAnimation",componentId:"sc-13qk6mh-19"})(["animation:"," 2s linear infinite;"],fH),hH=(e,t)=>vH.includes(e)?e:t?`${e} ${t}`.trim():e,EH="none",bH="dynamicPropertyValue",yH={HALF:"half",QUARTER:"quarter"},_H=[],vH=[Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value],wH={NO_ANIMATION:{value:EH,label:(0,d._x)("None","animation effect","web-stories")},[hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.LEFT_TO_RIGHT)]:{value:hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Pan Left","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Left","animation effect","web-stories")),value:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Cn.DIRECTION.LEFT_TO_RIGHT,gridSpace:yH.QUARTER,Effect:rH,size:16}},[hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.RIGHT_TO_LEFT)]:{value:hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Pan Right","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Right","animation effect","web-stories")),value:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Cn.DIRECTION.RIGHT_TO_LEFT,gridSpace:yH.QUARTER,Effect:oH,size:16}},[hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.BOTTOM_TO_TOP)]:{value:hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.BOTTOM_TO_TOP),label:(0,d._x)("Pan Up","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Up","animation effect","web-stories")),value:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Cn.DIRECTION.BOTTOM_TO_TOP,gridSpace:yH.QUARTER,Effect:cH,size:16}},[hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.TOP_TO_BOTTOM)]:{value:hH(Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Cn.DIRECTION.TOP_TO_BOTTOM),label:(0,d._x)("Pan Down","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Down","animation effect","web-stories")),value:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Cn.DIRECTION.TOP_TO_BOTTOM,gridSpace:yH.QUARTER,Effect:iH,size:16}},[hH(Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_IN)]:{value:hH(Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Zoom In","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom In","animation effect","web-stories")),value:Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:Cn.SCALE_DIRECTION.SCALE_IN,gridSpace:yH.HALF,Effect:uH,size:14}},[hH(Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_OUT)]:{value:hH(Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_OUT),label:(0,d._x)("Zoom Out","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom Out","animation effect","web-stories")),value:Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:Cn.SCALE_DIRECTION.SCALE_OUT,gridSpace:yH.HALF,Effect:mH,size:20}},[Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{value:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,label:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name),value:Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,zoomDirection:bH,Effect:gH,size:26}}},TH={NO_ANIMATION:{value:EH,label:(0,d._x)("None","animation effect","web-stories")},[Cn.ANIMATION_EFFECTS.DROP.value]:{value:Cn.ANIMATION_EFFECTS.DROP.value,label:Cn.ANIMATION_EFFECTS.DROP.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Cn.ANIMATION_EFFECTS.DROP.name),value:Cn.ANIMATION_EFFECTS.DROP.value,Effect:RF}},[Cn.ANIMATION_EFFECTS.FADE_IN.value]:{value:Cn.ANIMATION_EFFECTS.FADE_IN.value,label:Cn.ANIMATION_EFFECTS.FADE_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Cn.ANIMATION_EFFECTS.FADE_IN.name),value:Cn.ANIMATION_EFFECTS.FADE_IN.value,Effect:LF}},[hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.LEFT_TO_RIGHT)]:{value:hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.LEFT_TO_RIGHT),label:Cn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Left","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Cn.DIRECTION.LEFT_TO_RIGHT,gridSpace:yH.QUARTER,Effect:BF,size:16}},[hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.TOP_TO_BOTTOM)]:{value:hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.TOP_TO_BOTTOM),label:Cn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Top","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Cn.DIRECTION.TOP_TO_BOTTOM,gridSpace:yH.QUARTER,Effect:zF,size:16}},[hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.BOTTOM_TO_TOP)]:{value:hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.BOTTOM_TO_TOP),label:Cn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Bottom","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Cn.DIRECTION.BOTTOM_TO_TOP,gridSpace:yH.QUARTER,Effect:jF,size:16}},[hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.RIGHT_TO_LEFT)]:{value:hH(Cn.ANIMATION_EFFECTS.FLY_IN.value,Cn.DIRECTION.RIGHT_TO_LEFT),label:Cn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Right","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Cn.DIRECTION.RIGHT_TO_LEFT,gridSpace:yH.QUARTER,Effect:HF,size:16}},[Cn.ANIMATION_EFFECTS.PULSE.value]:{value:Cn.ANIMATION_EFFECTS.PULSE.value,label:Cn.ANIMATION_EFFECTS.PULSE.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Cn.ANIMATION_EFFECTS.PULSE.name),value:Cn.ANIMATION_EFFECTS.PULSE.value,Effect:ZF}},[hH(Cn.ANIMATION_EFFECTS.ROTATE_IN.value,Cn.DIRECTION.LEFT_TO_RIGHT)]:{value:hH(Cn.ANIMATION_EFFECTS.ROTATE_IN.value,Cn.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Left","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:Cn.DIRECTION.LEFT_TO_RIGHT,gridSpace:yH.HALF,Effect:VF,size:18}},[hH(Cn.ANIMATION_EFFECTS.ROTATE_IN.value,Cn.DIRECTION.RIGHT_TO_LEFT)]:{value:hH(Cn.ANIMATION_EFFECTS.ROTATE_IN.value,Cn.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Right","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:Cn.DIRECTION.RIGHT_TO_LEFT,gridSpace:yH.HALF,Effect:qF,size:18}},[Cn.ANIMATION_EFFECTS.TWIRL_IN.value]:{value:Cn.ANIMATION_EFFECTS.TWIRL_IN.value,label:Cn.ANIMATION_EFFECTS.TWIRL_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Cn.ANIMATION_EFFECTS.TWIRL_IN.name),value:Cn.ANIMATION_EFFECTS.TWIRL_IN.value,Effect:XF,size:26}},[hH(Cn.ANIMATION_EFFECTS.WHOOSH_IN.value,Cn.DIRECTION.LEFT_TO_RIGHT)]:{value:hH(Cn.ANIMATION_EFFECTS.WHOOSH_IN.value,Cn.DIRECTION.LEFT_TO_RIGHT),label:Cn.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Left","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:Cn.DIRECTION.LEFT_TO_RIGHT,gridSpace:yH.HALF,Effect:JF,size:20}},[hH(Cn.ANIMATION_EFFECTS.WHOOSH_IN.value,Cn.DIRECTION.RIGHT_TO_LEFT)]:{value:hH(Cn.ANIMATION_EFFECTS.WHOOSH_IN.value,Cn.DIRECTION.RIGHT_TO_LEFT),label:Cn.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Right","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:Cn.DIRECTION.RIGHT_TO_LEFT,gridSpace:yH.HALF,Effect:tH,size:20}},[hH(Cn.ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_IN)]:{value:hH(Cn.ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Scale In","animation effect","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale In","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:Cn.SCALE_DIRECTION.SCALE_IN,gridSpace:yH.HALF,Effect:uH,size:14}},[hH(Cn.ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_OUT)]:{value:hH(Cn.ANIMATION_EFFECTS.ZOOM.value,Cn.SCALE_DIRECTION.SCALE_OUT),label:(0,d.__)("Scale Out","web-stories"),animation:{ariaLabel:(0,Ze.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale Out","animation effect","web-stories")),value:Cn.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:Cn.SCALE_DIRECTION.SCALE_OUT,gridSpace:yH.HALF,Effect:mH,size:20}}},SH={ariaLabel:Ea().string,value:Ea().string.isRequired,Effect:Ea().any,gridSpace:Ea().oneOf(Object.values(yH)),size:Ea().number,scaleDirection:Ea().oneOf(Object.values(Cn.SCALE_DIRECTION)),panDirection:Ea().oneOf(Object.values(Cn.DIRECTION)),zoomDirection:Ea().oneOf(Object.values(Cn.SCALE_DIRECTION)),flyInDirection:Ea().oneOf(Object.values(Cn.DIRECTION)),rotateInDirection:Ea().oneOf(Object.values(Cn.DIRECTION)),whooshInDirection:Ea().oneOf(Object.values(Cn.DIRECTION))},CH={value:Ea().string.isRequired,label:Ea().string.isRequired,animation:Ea().shape(SH)},IH=(Ea().oneOf([...Object.values(Cn.DIRECTION),...Object.values(Cn.SCALE_DIRECTION),!1]),(e,t)=>{const n=Object.entries(t).filter((e=>{let[t]=e;return-1===vH.indexOf(t)})).map((e=>{let[t,n]=e;return[t,n.options]})).reduce(((e,t)=>{let[n,r]=t;return[...e,...(r||[]).map((e=>hH(n,e)))]}),[]);return Object.keys(e).filter((e=>n.includes(e)))}),xH=e=>Object.values(e).includes(bH),AH=e=>{let{animation:t,disabledOptions:n=[]}=e;const r=t.panDirection&&!n.includes(t.panDirection)?t.panDirection:Object.values(Cn.DIRECTION).filter((e=>!n.includes(e)))?.[0]||void 0;return t.value===Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value?{...t,zoomDirection:n.includes(Cn.SCALE_DIRECTION.SCALE_IN)?Cn.SCALE_DIRECTION.SCALE_OUT:Cn.SCALE_DIRECTION.SCALE_IN,panDirection:r}:t},kH=e=>{let{animation:t,disabledTypeOptionsMap:n}=e;return xH(t)?AH({animation:t,disabledOptions:n[t.value]?.options}):t},OH=p.default.div.withConfig({displayName:"styles__ContentWrapper",componentId:"sc-1d71y2l-0"})(["display:inline-block;"]),NH=p.default.li.withConfig({displayName:"styles__AnimationListItem",componentId:"sc-1d71y2l-1"})(["border:none;background:",";border-radius:",";height:","px;position:relative;grid-column-start:",";overflow:hidden;font-family:'Teko',sans-serif;font-size:","px;line-height:1;color:",";text-transform:uppercase;transition:background 0.1s linear;margin:0;& > div{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;}&[aria-disabled='true']{background:",";}&:hover:not([aria-disabled='true']){cursor:pointer;}&:hover:not([aria-disabled='true']),&:focus:not([aria-disabled='true']){background:",";","{display:inline-block;}","{display:none;}}"," ",";"],(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),56,(e=>{let{gridSpace:t}=e;return(e=>{switch(e){case yH.HALF:return"span 2";case yH.QUARTER:return"span 1";default:return"span 4"}})(t)}),(e=>{let{size:t=28}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryHover}),NF,OH,(e=>{let{noEffect:t}=e;return t&&(0,p.css)(["height:36px;font-size:14px;text-transform:none;","{display:inline-block !important;}"],OH)}),Hu),PH=(0,p.css)(["display:inline-block;margin-top:0;padding:16px 4px 16px 16px;ul{display:grid;justify-content:center;gap:12px 4px;grid-template-columns:repeat(4,1fr);position:relative;}"]),RH=e=>{let{theme:t}=e;return(0,p.css)(["margin:-1px -1px 0 -1px;width:calc(100% + 2px);border-color:transparent transparent "," transparent;height:","px;&:hover{border-color:transparent transparent "," transparent;}",""],t.colors.border.defaultNormal,45,t.colors.border.defaultNormal,Hu)};function MH(){return MH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MH.apply(this,arguments)}const LH=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return c.createElement(NH,MH({ref:t,"aria-label":n.animation?.ariaLabel||n.label,disabled:n.disabled,"aria-disabled":n.disabled,size:n.animation?.size,gridSpace:n.animation?.gridSpace,noEffect:!n.animation?.Effect},r),c.createElement(Tooltip,{title:n?.tooltip||""},c.createElement(OH,null,n.label),n.animation?.Effect&&c.createElement(n.animation.Effect,null,n.label)))})),DH=LH;LH.displayName="DropDownItem",LH.propTypes={option:Ea().shape(CH)};const BH=(0,u.forwardRef)((function EffectChooserDropdown(e,t){let{onAnimationSelected:n,onNoEffectSelected:r,isBackgroundEffects:a=!1,selectedEffectType:o,disabledTypeOptionsMap:l,direction:i,selectButtonStylesOverride:s}=e;const{enableExperimentalAnimationEffects:m}=(0,S.useFeatures)(),f=(0,u.useMemo)((()=>hH(o,i)),[o,i]),g=(0,u.useMemo)((()=>a&&IH(wH,l)),[l,a]),h=a?_d.PLACEMENT.BOTTOM:_d.PLACEMENT.TOP,E=a?wH:TH,b=(0,u.useMemo)((()=>m?Object.values(E):Object.values(E).filter((e=>{let{value:t}=e;return-1===_H.indexOf(t)}))),[E,m]),y=(0,u.useMemo)((()=>b?.map((e=>{const t=a&&g.includes(e.value);return{...e,disabled:t,tooltip:t&&l[e.animation?.value]?.tooltip}}))),[b,a,g,l]),_=(0,u.useCallback)(((e,t)=>{if(e.preventDefault(),t===EH)return void(Boolean(f)&&r());const a=E[t]?.animation,o=kH({animation:a,disabledTypeOptionsMap:l});n({animation:o.value,panDir:o?.panDirection,zoomDirection:o?.zoomDirection,flyInDir:o?.flyInDirection,rotateInDir:o?.rotateInDirection,whooshInDir:o?.whooshInDirection,scaleDirection:o?.scaleDirection})}),[E,l,n,f,r]),v=f&&f!==EH?RH:Hu,w=(0,p.css)([""," ",""],v,void 0!==s&&s);return c.createElement(_A.DropDown,{ref:t,options:y,placeholder:(0,d._x)("None","animation effect","web-stories"),selectedValue:f,ariaLabel:(0,d.__)("Animation: Effect Chooser","web-stories"),menuStylesOverride:PH,renderItem:DH,onMenuItemClick:_,placement:h,isKeepMenuOpenOnSelection:!0,selectButtonStylesOverride:w})})),FH=BH,HH="animation",UH=(0,p.default)(fx).withConfig({displayName:"animation__StyledRow",componentId:"sc-1j3eshx-0"})(["margin-bottom:-1px;"]),zH=p.default.div.withConfig({displayName:"animation__GroupWrapper",componentId:"sc-1j3eshx-1"})([""," margin-bottom:16px;"],(e=>{let{hasAnimation:t,theme:n}=e;return t&&`\n    border: 1px solid ${n.colors.border.defaultNormal};\n    border-radius: ${n.borders.radius.small};\n  `})),GH=(0,d.__)("The background image is too small to animate. Double click on the bg & scale the image before applying the animation.","web-stories");const jH=function AnimationPanel(e){let{selectedElements:t,selectedElementAnimations:n,pushUpdateForObject:r,updateAnimationState:a}=e;const o=(0,u.useRef)(!1),{highlight:l,resetHighlight:i}=Hp((e=>({highlight:e[Vm.ANIMATION],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),s=1===t.length&&t[0].isBackground,p=(0,u.useMemo)((()=>{const e=t.map((e=>e.animation)).filter(Boolean);return n.map((t=>({...e.find((e=>e.id===t.id))||t}))).filter((e=>!e.delete))}),[t,n]),m=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,u.shallowEqual)(e,p[0])||(r(HH,e,null,t),o.current=!0)}),[r,p]),f=(0,u.useCallback)((e=>{let{animation:t,...a}=e;if(!t)return;const l=n[0]?.id||(0,ue.default)(),i=(0,Cn.getAnimationEffectDefaults)(t),s=n[0]?.type===t?{duration:n[0]?.duration,delay:n[0]?.delay}:{};r(HH,{id:l,type:t,...i,...s,...a},null,!0),o.current=!0}),[n,r]),g=document.activeElement,h=(0,u.useDebouncedCallback)((()=>{o.current&&(a({animationState:Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED}),o.current=!1)}),300);(0,u.useEffect)(h,[n,a,g,h]);const E=(0,u.useCallback)((()=>{r(HH,{...p[0],delete:!0},null,!0)}),[r,p]),b=(0,u.useMemo)((()=>{if(t[0]?.isBackground){const e=["media","image","video","gif"].includes(t[0].type)&&(0,Cn.hasOffsets)({element:t[0]}),n=(0,Rs.progress)(t[0]?.scale||0,{MIN:Cn.BG_MIN_SCALE,MAX:Cn.BG_MAX_SCALE});return{[Cn.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:{tooltip:GH,options:[!e.bottom&&Cn.DIRECTION.TOP_TO_BOTTOM,!e.left&&Cn.DIRECTION.RIGHT_TO_LEFT,!e.top&&Cn.DIRECTION.BOTTOM_TO_TOP,!e.right&&Cn.DIRECTION.LEFT_TO_RIGHT].filter(Boolean)},[Cn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:{tooltip:GH,options:[n<=.01&&Cn.SCALE_DIRECTION.SCALE_IN,n>=.99&&Cn.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)},[Cn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{tooltip:GH,options:[!e.bottom&&Cn.DIRECTION.TOP_TO_BOTTOM,!e.left&&Cn.DIRECTION.RIGHT_TO_LEFT,!e.top&&Cn.DIRECTION.BOTTOM_TO_TOP,!e.right&&Cn.DIRECTION.LEFT_TO_RIGHT,n<=.01&&Cn.SCALE_DIRECTION.SCALE_IN,n>=.99&&Cn.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)}}}return{}}),[t]),y=(_=p[0]?.type,[...Object.values(Cn.ANIMATION_EFFECTS),...Object.values(Cn.ANIMATION_PARTS),...Object.values(Cn.BACKGROUND_ANIMATION_EFFECTS)].find((e=>e.value===_))?.name||"");var _;return t.length>1?null:c.createElement(YH,{name:"animation",title:(0,d.__)("Animation","web-stories"),onAnimationEnd:()=>i(),isPersistable:!l,$_css:l?.showEffect&&A_.FLASH},c.createElement(zH,{hasAnimation:y},c.createElement(UH,null,c.createElement(FH,{ref:e=>{e&&l?.focus&&l?.showEffect&&e.focus()},onAnimationSelected:f,onNoEffectSelected:E,isBackgroundEffects:s,disabledTypeOptionsMap:b,direction:xF(p[0]),selectedEffectType:p[0]?.type,selectButtonStylesOverride:l?.focus&&A_.OUTLINE})),p[0]&&c.createElement(OF,{animation:p[0],onChange:m,disabledTypeOptionsMap:b})))};var YH=(0,p.default)(wk).withConfig({displayName:"animation___StyledSimplePanel",componentId:"sc-1j3eshx-2"})(["",""],(e=>e.$_css));function ZH(){return ZH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZH.apply(this,arguments)}const WH=p.default.div.withConfig({displayName:"borderWidth__BorderInputsFlexContainer",componentId:"sc-tay5fw-0"})(["display:flex;gap:7px;margin-bottom:16px;"]),VH=(0,p.default)(LockToggle).withConfig({displayName:"borderWidth__StyledLockToggle",componentId:"sc-tay5fw-1"})(["",";"],Hu),$H=p.default.div.withConfig({displayName:"borderWidth__ToggleWrapper",componentId:"sc-tay5fw-2"})(["padding-top:2px;"," align-self:stretch;"],(e=>{let{locked:t}=e;return t&&"\n    padding-left: 8px;\n  "})),qH=(0,p.default)(mg).withConfig({displayName:"borderWidth__BorderTop",componentId:"sc-tay5fw-3"})(["transform:rotate(90deg);"]),KH=(0,p.default)(mg).withConfig({displayName:"borderWidth__BorderBottom",componentId:"sc-tay5fw-4"})(["transform:rotate(-90deg);"]),XH=(0,p.default)(mg).withConfig({displayName:"borderWidth__BorderRight",componentId:"sc-tay5fw-5"})(["transform:scaleX(-1);"]);const QH=function WidthControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=BN(t,"border",nP),a=t.every(Nn.canSupportMultiBorder),o=!0===r.lockedWidth||!a,l=(0,u.useCallback)((e=>(t,r)=>{n("border",o?{left:r,top:r,right:r,bottom:r}:{[e]:r},nP,!0)}),[n,o]),i=(0,u.useCallback)((e=>{n("border",e,nP,!0)}),[n]),s=o?(0,d.__)("Border","web-stories"):(0,d.__)("Left border","web-stories"),p=(0,u.useCallback)((e=>({isIndeterminate:_e===e,placeholder:_e===e?ve:null})),[]);return c.createElement(WH,null,c.createElement(LP,{locked:o},c.createElement(RP,ZH({value:r.left,onChange:l("left"),"aria-label":s,suffix:!o&&c.createElement(mg,null)},p(r.left))),!o&&c.createElement(c.Fragment,null,c.createElement(RP,ZH({value:r.top,onChange:l("top"),"aria-label":(0,d.__)("Top border","web-stories"),labelText:(0,d.__)("Top","web-stories"),suffix:c.createElement(qH,null)},p(r.top))),c.createElement(RP,ZH({value:r.right,onChange:l("right"),"aria-label":(0,d.__)("Right border","web-stories"),labelText:(0,d.__)("Right","web-stories"),suffix:c.createElement(XH,null)},p(r.right))),c.createElement(RP,ZH({value:r.bottom,onChange:l("bottom"),"aria-label":(0,d.__)("Bottom border","web-stories"),labelText:(0,d.__)("Bottom","web-stories"),suffix:c.createElement(KH,null)},p(r.bottom))))),a&&c.createElement($H,{locked:o},c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent border","web-stories")},c.createElement(VH,{isLocked:o,onClick:()=>{let e={lockedWidth:!o};o||(e={...e,top:r.left,right:r.left,bottom:r.left}),i(e)},"aria-label":(0,d.__)("Toggle consistent border","web-stories")}))))};const JH=function BorderStylePanel(e){const{selectedElements:t,pushUpdate:n}=e,r=BN(t,"border",nP),{color:a,left:o,top:l,right:i,bottom:s}=r,p=t.every((e=>(0,Nn.canMaskHaveBorder)(e))),m=(0,u.useCallback)(((e,t)=>n({border:{...r,[t]:e}},!0)),[r,n]);if(!p)return null;const f=t.every(Nn.canSupportMultiBorder),g=[o,l,i,s].some((e=>e>0));return c.createElement(wk,{name:"borderStyle",title:(0,d.__)("Border","web-stories")},c.createElement(QH,e),g&&c.createElement(fx,null,c.createElement(PI,{value:a,onChange:e=>{m(e,"color")},label:(0,d.__)("Border color","web-stories"),hasEyedropper:!0,allowsOpacity:f})))},eU=(0,p.default)(m.Button).withConfig({displayName:"captions__StyledButton",componentId:"sc-17zds0n-0"})(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),tU=(0,p.default)(eU).withConfig({displayName:"captions__UploadButton",componentId:"sc-17zds0n-1"})(["padding:12px 8px;"]);var nU=(0,p.default)(tU).withConfig({displayName:"captions___StyledUploadButton",componentId:"sc-17zds0n-2"})(["",""],(e=>e.$_css));const rU={MAX:1e3};const aU=function CaptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=MN(t,"tracks",[]),a=r===_e,o=(0,S.useFeature)("captionHotlinking"),{capabilities:{hasUploadMediaAction:l}}=H();Bx((e=>{let{resource:t}=e;return{resource:{...t,alt:t.alt?.slice(0,rU.MAX)}}}),[]);const i=(0,u.useCallback)((e=>{let t=[];if(e){const n=r.findIndex((t=>{let{id:n}=t;return n===e}));t=[...r.slice(0,n),...r.slice(n+1)]}n({tracks:t},!0)}),[r,n]),s=(0,u.useCallback)((e=>{let{src:t="",id:a,needsProxy:o=!1}=e;const l={track:t,trackId:a,trackName:t.split("/").pop(),id:(0,ue.default)(),kind:"captions",srclang:"",label:"",needsProxy:o};n({tracks:[...r,l]},!0)}),[r,n]),{highlight:p,resetHighlight:m}=Hp((e=>({highlight:e[Vm.CAPTIONS],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),g=(0,u.useCallback)((e=>c.createElement(nU,{onAnimationEnd:()=>m(),ref:e=>{e&&p?.focus&&p?.showEffect&&e.focus()},onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE,$_css:p?.showEffect&&A_.OUTLINE},(0,d.__)("Upload a file","web-stories"))),[m,p?.focus,p?.showEffect]);return l||o||r.length?c.createElement(oU,{onAnimationEnd:()=>m(),name:"caption",title:(0,d.__)("Caption and Subtitles","web-stories"),isPersistable:!p,$_css2:p?.showEffect&&A_.FLASH},c.createElement(IO,{isIndeterminate:a,tracks:a?[]:r,handleChangeTrack:s,handleRemoveTrack:i,renderUploadButton:g})):null};var oU=(0,p.default)(wk).withConfig({displayName:"captions___StyledSimplePanel",componentId:"sc-17zds0n-3"})(["",""],(e=>e.$_css2));const lU=p.default.div.withConfig({displayName:"alignment__ElementRow",componentId:"sc-812g1l-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;padding:16px;overflow:auto;overflow:overlay;"]),iU=["distributeHorizontally","distributeVertically","alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom"],sU=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"alignment__AlignmentButton",componentId:"sc-812g1l-1"})(["position:relative;:focus{z-index:1;}",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")})),cU=(0,p.default)(VA).withConfig({displayName:"alignment__StyledPanel",componentId:"sc-812g1l-2"})(["background-color:",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black24}),(e=>{let{theme:t}=e;return t.colors.divider.secondary}));const dU=function ElementAlignmentPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isRTL:r}=H(),{isDistributionEnabled:a,handleAlignLeft:o,handleAlignCenter:l,handleAlignRight:i,handleAlignTop:s,handleAlignMiddle:p,handleAlignBottom:m,handleHorizontalDistribution:f,handleVerticalDistribution:g}=QP({selectedElements:t,updateElements:e=>n(e,!0)}),h=(0,u.useRef)(),[E,b]=(0,u.useState)(null),y=(0,u.useCallback)((e=>()=>{const t=iU.findIndex((e=>e===E)),n=iU[t+e];n&&(b(n),h.current.querySelector(`#${n}`).focus())}),[E,b]),_=r?-1:1;return(0,nr.useKeyDownEffect)(h,"left",(()=>y(_)),[y,_]),(0,nr.useKeyDownEffect)(h,"right",(()=>y(-_)),[y,_]),c.createElement(cU,{name:"alignment",canCollapse:!1,ariaLabel:(0,d.__)("Alignment","web-stories")},c.createElement(lU,{ref:h},c.createElement(Tooltip,{title:(0,d.__)("Distribute horizontally","web-stories")},c.createElement(sU,{disabled:!a,onClick:f,"aria-label":(0,d.__)("Distribute horizontally","web-stories"),id:iU[0],onFocus:()=>b(iU[0])},c.createElement(gh,null))),c.createElement(Tooltip,{title:(0,d.__)("Distribute vertically","web-stories")},c.createElement(sU,{disabled:!a,onClick:g,"aria-label":(0,d.__)("Distribute vertically","web-stories"),id:iU[1],onFocus:()=>b(iU[1])},c.createElement(yh,null))),c.createElement(Tooltip,{title:(0,d.__)("Align left","web-stories")},c.createElement(sU,{onClick:o,"aria-label":(0,d.__)("Align left","web-stories"),id:iU[2],onFocus:()=>b(iU[2])},c.createElement(mf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align center","web-stories")},c.createElement(sU,{onClick:l,"aria-label":(0,d.__)("Align center","web-stories"),id:iU[3],onFocus:()=>b(iU[3])},c.createElement(cf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align right","web-stories")},c.createElement(sU,{onClick:i,"aria-label":(0,d.__)("Align right","web-stories"),id:iU[4],onFocus:()=>b(iU[4])},c.createElement(vf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align top","web-stories")},c.createElement(sU,{onClick:s,"aria-label":(0,d.__)("Align top","web-stories"),id:iU[5],onFocus:()=>b(iU[5])},c.createElement(Bf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align vertical center","web-stories")},c.createElement(sU,{onClick:p,"aria-label":(0,d.__)("Align vertical center","web-stories"),id:iU[6],onFocus:()=>b(iU[6])},c.createElement(Ef,null))),c.createElement(Tooltip,{title:(0,d.__)("Align bottom","web-stories")},c.createElement(sU,{onClick:m,"aria-label":(0,d.__)("Align bottom","web-stories"),id:iU[7],onFocus:()=>b(iU[7])},c.createElement(af,null)))))};const uU=function(e,t,n){switch(n){case Hn.OverlayType.NONE:return null;case Hn.OverlayType.SOLID:return function(e,t){switch(t){case Hn.OverlayType.NONE:return{color:{r:0,g:0,b:0,a:.5}};case Hn.OverlayType.LINEAR:case Hn.OverlayType.RADIAL:{const{stops:t}=e,n=t.sort(((e,t)=>(t.color.a??1)-(e.color.a??1))),{color:{r,g:a,b:o}}=n[0];return{color:{r,g:a,b:o,a:.5}}}default:return e}}(e,t);case Hn.OverlayType.LINEAR:return function(e,t){switch(t){case Hn.OverlayType.NONE:return{type:"linear",rotation:0,stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case Hn.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"linear",rotation:0,stops:[{color:{r:t,g:n,b:r,a:0},position:.4},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case Hn.OverlayType.RADIAL:{const{stops:t,alpha:n}=e;return{type:"linear",rotation:0,stops:t,alpha:n}}default:return e}}(e,t);case Hn.OverlayType.RADIAL:return function(e,t){switch(t){case Hn.OverlayType.NONE:return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case Hn.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:t,g:n,b:r,a:0},position:0},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case Hn.OverlayType.LINEAR:{const{stops:t,alpha:n}=e;return{type:"radial",size:{w:.67,h:.67},stops:t,alpha:n}}default:return e}}(e,t);default:return e}},pU={[Hn.OverlayType.NONE]:{label:(0,d._x)("None","overlay","web-stories")},[Hn.OverlayType.SOLID]:{label:(0,d.__)("Tint","web-stories")},[Hn.OverlayType.LINEAR]:{label:(0,d.__)("Linear","web-stories")},[Hn.OverlayType.RADIAL]:{label:(0,d.__)("Vignette","web-stories")}};const mU=function FilterPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=DN(t,"overlay"),a=r===_e,o=r?r.type||Hn.OverlayType.SOLID:Hn.OverlayType.NONE,{getProxiedUrl:l}=ko(),{isDefaultBackground:i}=t[0],s=xa((e=>!i||e.state.currentPage?.backgroundColor)),p=(0,u.useCallback)((e=>n({overlay:e},!0)),[n]),m=o!==Hn.OverlayType.RADIAL&&o!==Hn.OverlayType.LINEAR,{LayerIcon:f}=(0,Hn.getDefinitionForType)(t[0].type);return c.createElement(wk,{name:"filter",title:(0,d.__)("Filters","web-stories")},!a&&c.createElement(fx,null,Object.keys(pU).map((e=>{const{label:n}=pU[e];return c.createElement(UI,{key:e,element:t[0],label:n,isToggled:o===e,onClick:()=>p(uU(r,o,e)),filter:uU(r,Hn.OverlayType.NONE,e),"aria-label":(0,Ze.default)(
/* translators: %s: Filter type */
(0,d.__)("Filter: %s","web-stories"),n)},c.createElement(f,{element:t[0],getProxiedUrl:l,currentPageBackgroundColor:s}))}))),o!==Hn.OverlayType.NONE&&c.createElement(fx,null,c.createElement(PI,{label:(0,d.__)("Color","web-stories"),value:r,onChange:p,allowsGradient:!0,hasEyedropper:m})))},fU=(0,p.default)(Ve.Text).withConfig({displayName:"imageAccessibility__StyledText",componentId:"sc-147toy8-0"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),gU={alt:null},hU={MAX:1e3};const EU=function ImageAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=BN(t,"resource",gU),a=MN(t,"alt",r.alt),{highlight:o,resetHighlight:l,cancelHighlight:i}=Hp((e=>({highlight:e[Vm.ASSISTIVE_TEXT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(bU,{onAnimationEnd:()=>l(),name:"imageAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!o,$_css:o&&A_.FLASH},c.createElement(fU,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the image.","web-stories")),c.createElement(fx,null,c.createElement(Mx,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},placeholder:a===_e?ve:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:hU.MAX,rows:2,isIndeterminate:a===_e})))};var bU=(0,p.default)(wk).withConfig({displayName:"imageAccessibility___StyledSimplePanel",componentId:"sc-147toy8-1"})(["",""],(e=>e.$_css));const yU=function(e){const{id:t}=e,{isSelected:n,toggleLayer:r}=xa((e=>{let{state:n,actions:r}=e;return{isSelected:n.selectedElementIds.includes(t),toggleLayer:r.toggleLayer}})),a=os();return{isSelected:n,handleClick:(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r({elementId:t,metaKey:e.metaKey,shiftKey:e.shiftKey}),a()}),[r,t,a])}},_U=p.default.div.withConfig({displayName:"layer__ActionsContainer",componentId:"sc-aphr0z-0"})(["position:absolute;display:none;align-items:center;height:100%;top:0;right:0;padding-right:6px;column-gap:6px;--background-color:",";--background-color-opaque:",";background-color:var(--background-color);::before{position:absolute;content:'';width:32px;height:100%;top:0;left:0;transform:translateX(-100%);background:linear-gradient( to right,var(--background-color-opaque),var(--background-color) );pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.bg.secondary,0)})),vU=p.default.div.attrs({"data-testid":"layer-option"}).withConfig({displayName:"layer__LayerContainer",componentId:"sc-aphr0z-1"})(["position:relative;height:","px;width:100%;overflow:hidden;:is(:hover,:focus-within) ","{display:inline-flex;}"],35,_U),wU=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1,role:"option"}).withConfig({displayName:"layer__LayerButton",componentId:"sc-aphr0z-2"})(["position:relative;display:grid;grid-template-columns:36px 1fr;border:0;padding:0;background:transparent;height:100%;width:100%;overflow:hidden;align-items:center;user-select:none;border-radius:0;padding-left:12px;transition:revert;"," :hover{background:",";}:hover + *{--background-color:",";--background-color-opaque:",";}:active{background:",";}:active + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["background:",";+ *{--background-color:",";--background-color-opaque:",";--selected-hover-color:",";}"],n.colors.interactiveBg.tertiaryPress,n.colors.interactiveBg.tertiaryPress,(0,We.rgba)(n.colors.interactiveBg.tertiaryPress,0),n.colors.interactiveBg.tertiaryHover)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.interactiveBg.tertiaryHover,0)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.interactiveBg.tertiaryPress,0)})),TU=p.default.div.withConfig({displayName:"layer__LayerIconWrapper",componentId:"sc-aphr0z-3"})(["display:flex;align-items:center;justify-content:flex-start;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),SU=p.default.div.withConfig({displayName:"layer__LayerDescription",componentId:"sc-aphr0z-4"})(["position:relative;width:100%;overflow:hidden;display:flex;align-items:center;margin-left:0;text-align:left;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),CU=p.default.div.withConfig({displayName:"layer__IconWrapper",componentId:"sc-aphr0z-5"})(["display:flex;align-items:center;justify-content:flex-start;position:absolute;right:0;width:32px;aspect-ratio:1;svg{position:relative;display:block;width:100%;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),IU=p.default.div.withConfig({displayName:"layer__LayerContentContainer",componentId:"sc-aphr0z-6"})(["margin-right:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),xU=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1}).withConfig({displayName:"layer__LayerAction",componentId:"sc-aphr0z-7"})(["position:relative;aspect-ratio:1;width:20px;padding:0;svg{position:absolute;width:32px;height:auto;top:50%;left:50%;transform:translate(-50%,-50%);}&&{transition:revert;background:var(--background-color);}:disabled{color:",";}:hover{color:var( --selected-hover-color,"," );}& + &{margin-left:4px;}*{pointer-events:none;}:focus{","}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,"var(--background-color)")}));function AU(e){e.stopPropagation(),e.preventDefault()}const kU=(0,u.memo)((function(e){let{element:t}=e;const{LayerIcon:n,LayerContent:r}=(0,Hn.getDefinitionForType)(t.type),{isSelected:a,handleClick:o}=yU(t),{isDefaultBackground:l}=t,{duplicateElementsById:i,deleteElementById:s,currentPageBackgroundColor:p}=xa((e=>{let{actions:t,state:n}=e;return{duplicateElementsById:t.duplicateElementsById,deleteElementById:t.deleteElementById,currentPageBackgroundColor:!l||n.currentPage?.backgroundColor}})),{getProxiedUrl:m}=ko(),f=(0,u.useRef)(null);_m({node:f.current,eventData:{...we.SELECT_ELEMENT,label:t.type}});const g=(0,u.useRef)(null);_m({node:g.current,eventData:{...we.DELETE_ELEMENT,label:t.type}});const h=`layer-${t.id}`;return c.createElement(vU,null,c.createElement(wU,{ref:f,id:h,onClick:o,isSelected:a},c.createElement(TU,null,c.createElement(n,{element:t,getProxiedUrl:m,currentPageBackgroundColor:p})),c.createElement(SU,null,c.createElement(IU,null,t.isBackground?c.createElement(Pn.LayerText,null,(0,d.__)("Background","web-stories")):c.createElement(r,{element:t})),t.isBackground&&c.createElement(CU,null,c.createElement(ZE.default,null)))),c.createElement(_U,null,t.isBackground?c.createElement(xU,{"aria-label":(0,d.__)("Locked","web-stories"),"aria-describedby":h,disabled:!0},c.createElement(ZE.default,null)):c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:(0,d.__)("Delete Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(xU,{ref:g,"aria-label":(0,d.__)("Delete","web-stories"),"aria-describedby":h,onPointerDown:AU,onClick:()=>s({elementId:t.id})},c.createElement(Qy.default,null))),c.createElement(Tooltip,{title:(0,d.__)("Duplicate Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(xU,{"aria-label":(0,d.__)("Duplicate","web-stories"),"aria-describedby":h,onPointerDown:AU,onClick:()=>i({elementIds:[t.id]})},c.createElement(vb,null))))))})),OU=(0,p.default)(lB).attrs({"aria-orientation":"vertical","aria-label":(0,d.__)("Layers List","web-stories")}).withConfig({displayName:"layerList__LayerList",componentId:"sc-9dcbvm-0"})(["flex-direction:column;width:100%;height:100%;align-items:stretch;user-select:",";overflow-y:auto;padding-bottom:4px;"],(e=>{let{hasUserSelect:t}=e;return t?"none":"initial"})),NU=(0,p.default)(fB).withConfig({displayName:"layerList__LayerSeparator",componentId:"sc-9dcbvm-1"})(["height:","px;margin:-","px 0;padding:","px 0;"],35,17.5,17.5),PU=(0,u.memo)((function ReorderableLayer(e){let{id:t,position:n,handleStartReordering:r}=e;const a=xa((e=>{let{state:n}=e;return n.currentPage?.elements.find((e=>e.id===t))}));return a?c.createElement(u.Fragment,{key:t},c.createElement(NU,{position:n+1}),c.createElement(dB,{position:n,onStartReordering:r(t),disabled:a.isBackground},c.createElement(kU,{element:a}))):null}));const RU=function LayerPanel(e){let{layers:t}=e;const{arrangeElement:n,setSelectedElementsById:r}=xa((e=>{let{actions:t}=e;return{arrangeElement:t.arrangeElement,setSelectedElementsById:t.setSelectedElementsById}})),a=sc((e=>e.onOpenMenu)),o=t.length,l=os(),i=(0,u.useCallback)((e=>()=>{r({elementIds:[e]}),l()}),[r,l]);return o?c.createElement(OU,{onContextMenu:a,onPositionChange:(e,r)=>n({elementId:t.find((t=>t.position===e)).id,position:r}),mode:"vertical",getItemSize:()=>35},t.map((e=>c.createElement(PU,{key:e.id,id:e.id,position:e.position,handleStartReordering:i})))):null};const MU=function(){const e=xa((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>e.id))||He})).map(((e,t)=>({id:e,position:t})));return e.reverse(),e},LU=p.default.div.withConfig({displayName:"layerPanel__Container",componentId:"sc-15wxdbu-0"})(["filter:drop-shadow(0px -4px 8px rgba(0,0,0,0.2));max-height:","px;background-color:",";"],(e=>{let{maxHeight:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}));const DU=(0,u.memo)((function(){const e=MU(),t=Am((e=>{let{state:t}=e;return t.sidebarContentHeight}));return c.createElement(LU,{maxHeight:t},c.createElement(_k,{padding:"0"},c.createElement(RU,{layers:e})))})),BU=p.default.div.withConfig({displayName:"link__IconInfo",componentId:"sc-niusn4-0"})(["display:flex;flex-direction:column;margin-left:20px;"]),FU=(0,p.default)(Ve.Text).withConfig({displayName:"link__IconText",componentId:"sc-niusn4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),HU=p.default.span.withConfig({displayName:"link__Error",componentId:"sc-niusn4-2"})(["font-size:12px;line-height:16px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.negative}));const UU=function LinkPanel(e){let{selectedElements:t,pushUpdateForObject:n}=e;const{clearEditing:r,setDisplayLinkGuidelines:a,displayLinkGuidelines:o}=Os((e=>({clearEditing:e.actions.clearEditing,setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines,displayLinkGuidelines:e.state.displayLinkGuidelines}))),{highlight:l,resetHighlight:i,cancelHighlight:s}=Hp((e=>({highlight:e[Vm.LINK],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{hasElementsInAttachmentArea:p}=vL(),m=(0,u.useMemo)((()=>mD({icon:null,desc:null})),[]),f=mD(BN(t,"link",m)),{url:g="",desc:h="",icon:E,rel:b=[]}=f,[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(!1),{actions:{getLinkMetadata:T}}=Z(),{getProxiedUrl:S,checkResourceAccess:C}=ko(),I=(0,u.useBatchingCallback)((e=>{let{newUrl:t,newTitle:r,newIcon:a,needsProxy:o}=e;return n("link",(()=>t?mD({url:t,needsProxy:o,desc:r||"",icon:a?Lr(t,a):""}):null),m,!0)}),[n,m]),[x,A]=(0,u.useState)(!Dr(Br(g))),k=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){_(!0);try{const{title:t,image:n}=T?await T(e):{},r=!!n&&await C(n);I({newUrl:e,newTitle:t,newIcon:n,needsProxy:r})}catch(e){A(!0)}finally{_(!1)}}}),[C,T,I]),1200),O=(0,u.useCallback)(((e,t)=>{if(r(),k.cancel(),e.url){if(_e===e.url)return;const t=Br(e.url),n=Dr(t);A(!n),n&&k(t)}n("link",""!==e.url?{...e}:null,m,t)}),[r,n,m,k]),N=(0,u.useCallback)((e=>{O({icon:e?.src},!0)}),[O]),P=Boolean(g?.length),R=P&&!x;(0,u.useEffect)((()=>{if(v){const e=P&&g!==_e;a(p&&!e)}}),[t,v,p,P,a,g]);const M=E?S(f,E):null,L=_e===g,D=_e===h,B=_e===b,F=(0,u.useCallback)((e=>O({rel:e},!0)),[O]);return c.createElement(zU,{name:"link",title:(0,d.__)("Link","web-stories"),onAnimationEnd:()=>i(),isPersistable:!l,$_css:l?.showEffect&&A_.FLASH},c.createElement(bx,{ref:e=>{e&&l?.focus&&l?.showEffect&&(e.addEventListener("keydown",s,{once:!0}),e.focus())},onChange:e=>!o&&O({url:e},!e),onBlur:()=>{a(!1),w(!1)},onFocus:()=>{w(!0)},value:g||"",placeholder:L?ve:(0,d.__)("Enter an address to apply a link","web-stories"),isIndeterminate:L,"aria-label":(0,d.__)("Element link","web-stories"),hasError:o}),o&&c.createElement(fx,null,c.createElement(HU,null,(0,d.__)("Link can not reside below the dashed line when a page attachment is present","web-stories"))),R&&c.createElement(c.Fragment,null,c.createElement(fx,null,c.createElement(hT,{placeholder:D?ve:(0,d.__)("Optional description","web-stories"),onChange:e=>{let{target:t}=e;return O({desc:t.value},!t.value)},value:h,"aria-label":(0,d.__)("Link description","web-stories"),isIndeterminate:D,disabled:y,containerStyleOverride:Uu})),c.createElement(fx,{spaceBetween:!1},c.createElement(mx,{handleChange:N,icon:M,isLoading:y,disabled:y}),c.createElement(BU,null,c.createElement(FU,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Optional brand icon","web-stories")))),!B&&c.createElement(PN,{onChangeRel:F,rel:b})))};var zU=(0,p.default)(wk).withConfig({displayName:"link___StyledSimplePanel",componentId:"sc-niusn4-3"})(["",""],(e=>e.$_css));const GU=p.default.label.withConfig({displayName:"pageAttachment__Label",componentId:"sc-qn4x32-0"})(["margin-left:12px;"]),jU=(0,p.default)(OC.Checkbox).withConfig({displayName:"pageAttachment__StyledCheckbox",componentId:"sc-qn4x32-1"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${Ju.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),YU=(0,p.default)(fx).withConfig({displayName:"pageAttachment__StyledRow",componentId:"sc-qn4x32-2"})(["justify-content:flex-start;"]),ZU=p.default.div.withConfig({displayName:"pageAttachment__Space",componentId:"sc-qn4x32-3"})(["width:20px;"]),WU=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"pageAttachment__HelperText",componentId:"sc-qn4x32-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const VU=function PageAttachmentPanel(){const{currentPage:e,updateCurrentPageProperties:t,hasProducts:n}=xa((e=>{let{state:t,actions:n}=e;return{updateCurrentPageProperties:n.updateCurrentPageProperties,currentPage:t.currentPage,hasProducts:t.currentPage.elements?.some((e=>{let{type:t,product:n}=e;return"product"===t&&n?.productId}))}})),{setDisplayLinkGuidelines:r}=Os((e=>({setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines}))),{actions:{getLinkMetadata:a}}=Z(),{pageAttachment:o={}}=e,l=(0,d.__)("Learn more","web-stories"),{url:i,ctaText:s=l,icon:p,theme:m,rel:f=[]}=o,[g,h]=(0,u.useState)(s),[E,b]=(0,u.useState)(i),[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(!1),{hasLinksInAttachmentArea:T}=vL();(0,u.useEffect)((()=>()=>{r(!1)}),[T,r,i]),(0,u.useEffect)((()=>{y&&i?.length&&_(!1)}),[i,y]);const S=(0,u.useCallback)((e=>{const n={...o,...e};t({properties:{pageAttachment:n}})}),[t,o]),C=(0,u.useDebouncedCallback)(S,300),{getProxiedUrl:I,checkResourceAccess:x}=ko(),A=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){w(!0);try{const{image:t}=a?await a(e):{},n=t?Lr(e,t):"",r=!!n&&await x(n);S({url:e,icon:n,needsProxy:r})}catch(t){S({url:e,icon:"",needsProxy:!1}),O(!0)}finally{w(!1)}}}),[x,a,S]),1200),[k,O]=(0,u.useState)(i&&!Dr(Br(i).trim())),N=g===l,P=Boolean(i)&&!k,R=(0,u.useCallback)((e=>{A.cancel(),b(e),O(!1);const t=Br(e.trim());Dr(t)&&A(t)}),[A]),M=(0,u.useCallback)((e=>{let{target:t}=e;const{value:n}=t;h(n),C({ctaText:n})}),[C]),L=(0,u.useCallback)((e=>{S({icon:e?.src},!0)}),[S]),D=(0,u.useCallback)((e=>S({rel:e},!0)),[S]),B=(0,u.useCallback)((e=>{let{target:t}=e;t.value?(C.cancel(),S({ctaText:g||l})):(S({ctaText:l}),h(l))}),[g,C,l,S]),F=`cb-${(0,ue.default)()}`;if(n)return c.createElement(wk,{name:"pageAttachment",title:(0,d.__)("Call to Action","web-stories"),collapsedByDefault:!1},c.createElement(fx,null,c.createElement(WU,null,(0,d.__)("Since there are products on this page, you cannot add a regular page attachment, but only customize the appearance of the shopping call to action.","web-stories"))),c.createElement(YU,null,c.createElement(jU,{id:F,checked:m===Le,onChange:e=>S({theme:e.target.checked?Le:De})}),c.createElement(GU,{htmlFor:F},c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Use dark theme","web-stories")))));const H=p?I(o,p):null;let U;const z=y||k;return z&&(U=y?(0,d.__)("Links cannot reside below the dashed line when a page attachment is present. If you add a page attachment, your viewers will not be able to click on the link.","web-stories"):(0,d.__)("Invalid link","web-stories")),c.createElement(wk,{name:"pageAttachment",title:(0,d.__)("Call to Action","web-stories"),collapsedByDefault:!1},c.createElement(bx,{onChange:e=>R(e?.trim()),onBlur:()=>{C.cancel(),S({url:E?.trim().length?Br(E.trim()):""})},onFocus:()=>{T&&!i?.length&&(_(!0),r(!0))},value:E,clear:!0,"aria-label":(0,d.__)("Type an address to add a page attachment link","web-stories"),hasError:z,hint:U}),P&&c.createElement(c.Fragment,null,c.createElement(fx,null,c.createElement(hT,{onChange:M,onBlur:B,value:g,"aria-label":(0,d.__)("Page Attachment CTA text","web-stories"),suffix:N?(0,d.__)("Default","web-stories"):null})),c.createElement(YU,null,c.createElement(jU,{id:F,checked:m===Le,onChange:e=>S({theme:e.target.checked?Le:De})}),c.createElement(GU,{htmlFor:F},c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Use dark theme","web-stories")))),c.createElement(YU,null,c.createElement(mx,{handleChange:L,icon:H,isLoading:v,disabled:v}),c.createElement(ZU,null),c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Link icon","web-stories"))),c.createElement(PN,{onChangeRel:D,rel:f})))},$U=p.default.div.withConfig({displayName:"warning__WarningContainer",componentId:"sc-16blgsz-0"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),(e=>{let{theme:t}=e;return t.borders.radius.small})),qU=(0,p.default)(Mh).withConfig({displayName:"warning__WarningIcon",componentId:"sc-16blgsz-1"})(["width:32px;height:100%;color:",";"],(e=>{let{theme:t}=e;return t.colors.status.warning})),KU=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"warning__Message",componentId:"sc-16blgsz-2"})(["max-width:calc(100% - 40px);"]);const XU=function Warning(e){let{message:t}=e;const n=(0,AA.default)("assertive");return(0,u.useEffect)((()=>{n(t)}),[t,n]),c.createElement($U,{"data-testid":"warningContainer"},c.createElement(qU,{title:Jd.lowContrast.warningIcon}),c.createElement(KU,null,t))},QU={horizontal:!1,vertical:!1},JU=(0,p.default)(fx).withConfig({displayName:"pageBackground__Row",componentId:"sc-1rac0x7-0"})(["justify-content:flex-start;"]),ez=p.default.div.withConfig({displayName:"pageBackground__SelectedMedia",componentId:"sc-1rac0x7-1"})(["width:128px;height:36px;border-radius:4px;border:1px solid ",";display:flex;justify-content:space-between;margin-right:12px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),tz=p.default.div.withConfig({displayName:"pageBackground__MediaWrapper",componentId:"sc-1rac0x7-2"})(["height:24px;width:24px;border-radius:4px;overflow:hidden;margin:5px;img{object-fit:cover;max-height:100%;max-width:100%;}"]),nz=(0,p.default)(m.Button).withConfig({displayName:"pageBackground__RemoveButton",componentId:"sc-1rac0x7-3"})(["margin:1px;align-self:center;"]),rz=(0,p.default)(m.Button).attrs({size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"pageBackground__ReplaceButton",componentId:"sc-1rac0x7-4"})(["margin-right:8px;"]),az=(0,p.default)(Ve.Text).withConfig({displayName:"pageBackground__Text",componentId:"sc-1rac0x7-5"})(["align-self:center;width:55px;"]);const oz=function PageBackgroundPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isDefaultBackground:r}=t[0],{combineElements:a,currentPage:o,clearBackgroundElement:l,updateCurrentPageProperties:i,currentPageBackgroundColor:s}=xa((e=>{let{state:t,actions:n}=e;return{currentPage:t.currentPage,clearBackgroundElement:n.clearBackgroundElement,combineElements:n.combineElements,updateCurrentPageProperties:n.updateCurrentPageProperties,currentPageBackgroundColor:!r||t.currentPage?.backgroundColor}})),{getProxiedUrl:p}=ko(),{capabilities:{hasUploadMediaAction:m}}=H(),g=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),[h,E]=(0,u.useState)(!1),b=(0,u.useCallback)((e=>{i({properties:{backgroundColor:e}})}),[i]),y=(0,u.useCallback)((()=>{n({isBackground:!1,opacity:100},!0),l()}),[n,l]),_=(0,u.useCallback)((e=>{const n=(0,Hn.createNewElement)(e.type,Mi(e.type,{resource:e}));a({firstElement:n,secondId:t[0].id}),(0,O.trackEvent)("replace_background_media")}),[a,t]),v=(0,u.useCallback)((e=>c.createElement(rz,{onClick:e,"aria-label":(0,d.__)("Replace","web-stories")},c.createElement(lm,null))),[]),{highlight:w,resetHighlight:T,cancelHighlight:S}=Hp((e=>({highlight:e[Vm.PAGE_BACKGROUND],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));(0,u.useEffect)((()=>{Jv([o],g).then((e=>{const t=e[0]?.result,n=t?.some((e=>{let{isBackground:t}=e;return t}));E(Boolean(n))})).catch((()=>{}))}),[o,g]);const C=t[0];if(!C||!C.isBackground)return null;const I=C.isBackground&&!r,{backgroundColor:x}=o,{LayerIcon:A}=(0,Hn.getDefinitionForType)(C.type),k=t[0]?.flip||QU;return c.createElement(lz,{onAnimationEnd:()=>T(),name:"pageBackground",title:(0,d.__)("Page Background","web-stories"),isPersistable:!w,collapsedByDefault:!1,$_css:w?.showEffect&&A_.FLASH},r&&c.createElement(JU,null,c.createElement(PI,{ref:e=>{e&&w?.focus&&w?.showEffect&&(e.addEventListener("keydown",S,{once:!0}),e.focus())},allowsGradient:!0,value:x,onChange:b,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0,allowsOpacity:!1})),I&&c.createElement(JU,{expand:!1},c.createElement(ez,null,c.createElement(tz,null,c.createElement(A,{element:C,getProxiedUrl:p,currentPageBackgroundColor:s})),c.createElement(az,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Media","web-stories")),c.createElement(nz,{"aria-label":(0,d.__)("Detach background","web-stories"),onClick:y,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY},c.createElement(Du.default,null))),m&&c.createElement(Tooltip,{title:(0,d.__)("Replace","web-stories")},c.createElement(yx,{buttonInsertText:(0,d.__)("Use as background","web-stories"),onInsert:_,renderButton:v})),c.createElement(xN,{onChange:e=>n({flip:e},!0),value:k})),h&&c.createElement(XU,{message:Jd.lowContrast.backgroundPanel}))};var lz=(0,p.default)(wk).withConfig({displayName:"pageBackground___StyledSimplePanel",componentId:"sc-1rac0x7-6"})(["",""],(e=>e.$_css));const iz=function ShapeStylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=MN(t,"backgroundColor"),a=(0,u.useCallback)((e=>{n({backgroundColor:e},!0)}),[n]),{highlight:o,resetHighlight:l,cancelHighlight:i}=Hp((e=>({highlight:e[Vm.STYLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(sz,{onAnimationEnd:()=>l(),name:"shapeStyle",title:(0,d.__)("Color","web-stories"),isPersistable:!o,"aria-labelledby":null,"aria-label":(0,d.__)("Shape style","web-stories"),$_css:o?.showEffect&&A_.FLASH},c.createElement(fx,null,c.createElement(PI,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},allowsGradient:!0,value:r,isMultiple:""===r,onChange:a,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0})))};var sz=(0,p.default)(wk).withConfig({displayName:"shapeStyle___StyledSimplePanel",componentId:"sc-1ekkvr9-0"})(["",""],(e=>e.$_css));const cz={MIN:-360,MAX:360},dz={MIN:1,MAX:1e3},uz={MIN:1,MAX:1e3},pz={MIN:1,MAX:J.PAGE_WIDTH-1},mz={MIN:1-Math.floor(J.DANGER_ZONE_HEIGHT),MAX:J.PAGE_HEIGHT+Math.floor(J.DANGER_ZONE_HEIGHT)-1},fz={horizontal:!1,vertical:!1};function gz(e){return"number"==typeof e&&!isNaN(e)}const hz=function(e,t,n){Bx(((t,n,r)=>{let{width:a,height:o}=n,{width:l,height:i}=r;const{type:s}=t,c=Boolean(a),d=Boolean(o);if(!c&&!d)return null;const{updateForResizeEvent:u}=(0,Hn.getDefinitionForType)(s);if(u){return u(t,[c?1:0,d?1:0],(0,Rs.clamp)(a,dz),(0,Rs.clamp)(o,uz))}if(e){const e=l/i;if(!c)return{width:(0,Rs.clamp)((0,Mr.dataPixels)(o*e),dz)};if(!d)return{height:(0,Rs.clamp)((0,Mr.dataPixels)(a/e),uz)}}return null}),[e]),Bx((e=>{let{rotationAngle:t}=e;return{rotationAngle:t%360}}),[]),Bx((e=>{let{rotationAngle:t,x:n,y:r,width:a,height:o}=e;const l=(0,Ss.calcRotatedObjectPositionAndSize)(t,n,r,a,o),i=n-l.x,s=r-l.y;return{x:(0,Rs.clamp)(n,{MIN:pz.MIN+i-l.width,MAX:pz.MAX+i}),y:(0,Rs.clamp)(r,{MIN:mz.MIN+s-l.height,MAX:mz.MAX+s})}}),[]);const r=(0,u.useCallback)(((t,n,r)=>e&&t>=r.MAX?(0,Rs.clamp)(r.MAX*n,r):(0,Rs.clamp)(t,r)),[e]);Bx(((e,t)=>{let{height:n}=e,{width:a,height:o}=t;const l=o/a;return n=(0,Rs.clamp)(n,uz),gz(l)?{height:r((0,Mr.dataPixels)(n),l,uz)}:{height:(0,Rs.clamp)(n,uz)}}),[t,e]),Bx(((e,t)=>{let{width:n}=e,{width:a,height:o}=t;const l=a/o;return n=(0,Rs.clamp)(n,dz),gz(l)?{width:r((0,Mr.dataPixels)(n),l,dz)}:{width:(0,Rs.clamp)(n,dz)}}),[n,e])};function Ez(){return Ez=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ez.apply(this,arguments)}const bz=(0,p.default)(LockToggle).withConfig({displayName:"sizePosition__StyledLockToggle",componentId:"sc-7rw4xb-0"})(["",";"],Hu);function yz(e){return ki.default?.[e?.sticker?.type].aspectRatio||1}const _z=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . o . .' 'c c c c c c c';"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null})),vz=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . f . .' ",";"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null}),(e=>{let{unlockedRadius:t}=e;return t?"\n  'o . . . . . .'\n  'c c c c c c c'\n":"'o . . . c c c'"})),wz=p.default.div.withConfig({displayName:"sizePosition__Grid",componentId:"sc-7rw4xb-1"})(["display:grid;"," grid-template-columns:1fr 4px 8px 4px 1fr 8px 32px;grid-template-rows:repeat(4,36px);row-gap:16px;align-items:center;justify-items:start;margin-bottom:16px;"],(e=>{let{canFlip:t}=e;return t?vz:_z})),Tz=p.default.div.withConfig({displayName:"sizePosition__Area",componentId:"sc-7rw4xb-2"})(["grid-area:",";width:100%;"],(e=>{let{area:t}=e;return t})),Sz=p.default.div.withConfig({displayName:"sizePosition__Dash",componentId:"sc-7rw4xb-3"})(["height:1px;width:100%;background:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),Cz=(0,p.default)(m.Button).withConfig({displayName:"sizePosition__StyledButton",componentId:"sc-7rw4xb-4"})(["padding:10px 16px;width:100%;",";"],Hu);const Iz=function SizePositionPanel(e){const{selectedElements:t,submittedSelectedElements:n,pushUpdate:r,pushUpdateForObject:a}=e,o=MN(t,"x"),l=MN(t,"y"),i=MN(t,"width"),s=MN(t,"height"),p=MN(t,"rotationAngle"),m=BN(t,"flip",fz),g=BN(t,"borderRadius",{locked:!0}),h=(0,u.useMemo)((()=>MN(n,"width")/MN(n,"height")),[n]),E=MN(t,"lockAspectRatio"),b=(0,u.useRef)(null);_m({node:b.current,eventData:we.SET_BACKGROUND_MEDIA});const y=E===_e||E,{currentPage:_,combineElements:v}=xa((e=>({currentPage:e.state.currentPage,combineElements:e.actions.combineElements}))),w=_?.elements[0].id,T=1===t.length,{isMedia:S}=(0,Hn.getDefinitionForType)(t[0].type),C=t.every((e=>{let{type:t}=e;return(0,Hn.getDefinitionForType)(t).canFlip})),I=t.some((e=>{let{type:t}=e;return(0,Hn.getDefinitionForType)(t).isAspectAlwaysLocked})),x=t.some((e=>{let{type:t}=e;return"text"===t})),A=(0,u.useMemo)((()=>T?(0,Ss.calcRotatedObjectPositionAndSize)(p,o,l,i,s):{}),[p,o,l,i,s,T]),k=o-A.x,O=l-A.y,N=T?{minX:pz.MIN+k-A.width,minY:mz.MIN+O-A.height,maxX:pz.MAX+k,maxY:mz.MAX+O}:function(e){const t=e.map((e=>(0,Ss.calcRotatedObjectPositionAndSize)(e.rotationAngle,e.x,e.y,e.width,e.height)));return e.reduce(((e,n,r)=>{const a=t[r],o=n.x-a.x,l=n.y-a.y,i=pz.MIN+o-a.width,s=mz.MIN+l-a.height,c=pz.MAX+o,d=mz.MAX+l;return{minX:e.minX?Math.max(e.minX,i):i,minY:e.minY?Math.max(e.minY,s):s,maxX:e.maxX?Math.min(e.maxX,c):c,maxY:e.maxY?Math.min(e.maxY,d):d}}),{})}(t),P=(e,t)=>E===_e?{lockAspectRatio:y,height:t,width:e}:{height:t,width:e};hz(y,s,i);const R=(0,u.useCallback)((()=>{v({firstElement:t[0],secondId:w})}),[t,v,w]),M=!y&&x,L=_e===s?ve:null,D=M?(0,d.__)("Auto","web-stories"):L,B=(0,u.useCallback)((e=>({isIndeterminate:_e===e,placeholder:_e===e?ve:null})),[]);return c.createElement(wk,{name:"size",title:(0,d.__)("Selection","web-stories")},c.createElement(wz,{isSingleMedia:S&&T,canFlip:C,unlockedRadius:!g.locked},S&&T&&c.createElement(Tz,{area:"b"},c.createElement(Cz,{ref:b,onClick:R,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Set as background","web-stories"))),c.createElement(Tz,{area:"x"},c.createElement(gI,Ez({suffix:(0,d._x)("X","Position on X axis","web-stories"),value:o,min:N.minX,max:N.maxX,onChange:(e,t)=>r({x:t},!0),"aria-label":(0,d.__)("X position","web-stories"),canBeNegative:!0},B(o),{containerStyleOverride:Uu}))),c.createElement(Tz,{area:"y"},c.createElement(gI,Ez({suffix:(0,d._x)("Y","Position on Y axis","web-stories"),value:l,min:N.minY,max:N.maxY,onChange:(e,t)=>r({y:t},!0),"aria-label":(0,d.__)("Y position","web-stories"),canBeNegative:!0},B(l),{containerStyleOverride:Uu}))),c.createElement(Tz,{area:"w"},c.createElement(gI,Ez({suffix:(0,d._x)("W","The Width dimension","web-stories"),value:i,min:dz.MIN,max:dz.MAX,onChange:(e,t)=>{const n=t;let a=s;y&&(""===n?a="":gz(n/h)&&(a=(0,Mr.dataPixels)(n/h))),r((e=>{if("sticker"===e?.type){const t=yz(e);return P(n,Math.floor(n/t))}return P(n,a)}),!0)},"aria-label":(0,d.__)("Width","web-stories")},B(i),{containerStyleOverride:Uu}))),c.createElement(Tz,{area:"d"},c.createElement(Sz,null)),c.createElement(Tz,{area:"h"},c.createElement(gI,{suffix:(0,d._x)("H","The Height dimension","web-stories"),value:M?"":s,disabled:M,min:uz.MIN,max:uz.MAX,onChange:(e,t)=>{const n=t;let a=i;y&&(""===n?a="":gz(n*h)&&(a=(0,Mr.dataPixels)(n*h))),r((e=>{if("sticker"===e?.type){const t=yz(e);return P(Math.floor(n*t),n)}return P(a,n)}),!0)},"aria-label":(0,d.__)("Height","web-stories"),isIndeterminate:_e===s,placeholder:D,containerStyleOverride:Uu})),c.createElement(Tz,{area:"l"},c.createElement(Tooltip,{title:(0,d.__)("Lock aspect ratio","web-stories")},c.createElement(bz,{"aria-label":(0,d.__)("Lock aspect ratio","web-stories"),title:(0,d.__)("Lock aspect ratio","web-stories"),isLocked:y||I,disabled:I,onClick:()=>!I&&r({lockAspectRatio:!y},!0)}))),c.createElement(Tz,{area:"r"},c.createElement(gI,Ez({suffix:c.createElement(Uf,null),unit:(0,d._x)("°","Degrees, 0 - 360.","web-stories"),value:p,min:cz.MIN,max:cz.MAX,onChange:(e,t)=>r({rotationAngle:t},!0),"aria-label":(0,d.__)("Rotation","web-stories"),canBeNegative:!0},B(p),{containerStyleOverride:Uu}))),C&&c.createElement(Tz,{area:"f"},c.createElement(xN,{onChange:e=>a("flip",e,fz,!0),value:m})),c.createElement(Tz,{area:"o"},c.createElement(CR,e)),c.createElement(Tz,{area:"c"},c.createElement(jP,e))))};function xz(){return xz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xz.apply(this,arguments)}const Az={MIN:.5,MAX:10},kz={MIN:0,MAX:300},Oz=(0,p.default)(gI).withConfig({displayName:"style__StyledNumericInput",componentId:"sc-9ups92-0"})(["flex-grow:1;"]),Nz=p.default.div.withConfig({displayName:"style__Space",componentId:"sc-9ups92-1"})(["flex:0 0 3px;"]),Pz=(0,p.default)(YS).withConfig({displayName:"style__StyledToggle",componentId:"sc-9ups92-2"})(["",";"],Hu);function Rz(e){return c.createElement(Pz,xz({size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},e))}const Mz=function StylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const{actions:{maybeEnqueueFontStyle:r}}=ho(),a=MN(t,"textAlign"),o=MN(t,"lineHeight"),{textInfo:{isBold:l,isItalic:i,isUnderline:s,isUppercase:p,letterSpacing:m,fontWeight:f},handlers:{handleClickBold:g,handleClickItalic:h,handleClickUnderline:E,handleClickUppercase:b,handleSetLetterSpacing:y}}=TP(t,n),_=(0,u.useCallback)(((e,t)=>y((0,Rs.clamp)(t,kz))),[y]);Bx((e=>{let{lineHeight:t}=e;return{lineHeight:(0,Rs.clamp)(t,Az)}}),[]);const v=(0,u.useCallback)((e=>()=>{n({textAlign:a===e?"":e},!0)}),[n,a]),w=!0===l,T=!0===i,S=!0===s,C=!0===p;return c.createElement(c.Fragment,null,c.createElement(fx,null,c.createElement(Oz,{"aria-label":(0,d.__)("Line-height","web-stories"),isFloat:!0,value:o,min:Az.MIN,max:Az.MAX,suffix:c.createElement(oE,null),onChange:(e,t)=>n({lineHeight:t},!0),allowEmpty:!0,isIndeterminate:_e===o,placeholder:_e===o?ve:null,containerStyleOverride:Uu}),c.createElement(Nz,null),c.createElement(Oz,{"aria-label":(0,d.__)("Letter-spacing","web-stories"),value:m,min:kz.MIN,max:kz.MAX,suffix:c.createElement(sE,null),unit:"%",onChange:_,allowEmpty:!0,isIndeterminate:_e===m,placeholder:_e===m?ve:null,containerStyleOverride:Uu})),c.createElement(fx,null,c.createElement(Rz,{isToggled:"left"===a,onClick:v("left"),"aria-label":(0,d.__)("Align text left","web-stories")},c.createElement(Of,null)),c.createElement(Rz,{isToggled:"center"===a,onClick:v("center"),"aria-label":(0,d.__)("Align text center","web-stories")},c.createElement(Sf,null)),c.createElement(Rz,{isToggled:"right"===a,onClick:v("right"),"aria-label":(0,d.__)("Align text right","web-stories")},c.createElement(Rf,null)),c.createElement(Rz,{isToggled:"justify"===a,onClick:v("justify"),"aria-label":(0,d.__)("Align text justified","web-stories")},c.createElement(xf,null)),c.createElement(Rz,{isToggled:w,onClick:()=>g(!w),"aria-label":(0,d.__)("Bold","web-stories")},c.createElement(uE,null)),c.createElement(Rz,{isToggled:T,onClick:async()=>{await r(t.map((e=>{let{font:t,content:n}=e;return{font:t,fontStyle:T?"normal":"italic",fontWeight:f,content:(0,br.stripHTML)(n)}}))),h(!T)},"aria-label":(0,d.__)("Italic","web-stories")},c.createElement(fE,null)),c.createElement(Rz,{isToggled:S,onClick:()=>E(!S),"aria-label":(0,d.__)("Underline","web-stories")},c.createElement(UE,null)),c.createElement(Rz,{isToggled:C,onClick:()=>b(!C),"aria-label":(0,d.__)("Uppercase","web-stories")},c.createElement(ME,null))))};const Lz=function ColorControls(e){let{selectedElements:t,pushUpdate:n,textColorRef:r}=e;const{textInfo:{color:a},handlers:{handleSetColor:o}}=TP(t,n);return c.createElement(fx,null,c.createElement(PI,{"data-testid":"text.color",value:a,onChange:o,allowsSavedColors:!0,label:(0,d.__)("Text color","web-stories"),labelId:"text-color-label",changedStyle:"color",ref:r,hasEyedropper:!0}))};var Dz=n(56226);function Bz(){return Bz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bz.apply(this,arguments)}const Fz=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"pillGroup__Container",componentId:"sc-1wd98s2-0"})(["display:flex;flex:1;column-gap:4px;"]);const Hz=function PillGroup(e){let{options:t,value:n,onSelect:r,...a}=e;return c.createElement(Fz,null,t.map((e=>{let{id:t,label:o}=e;return c.createElement(Dz.default,Bz({key:t,isActive:t===n,onClick:()=>r(t),role:"option"},a),o)})))},Uz=(0,p.default)(fx).withConfig({displayName:"backgroundColor__FillRow",componentId:"sc-2oqmdd-0"})(["align-items:flex-start;justify-content:space-between;button{flex:1;z-index:1;}"]),zz=[{id:Hn.BACKGROUND_TEXT_MODE.NONE,label:(0,d.__)("None","web-stories")},{id:Hn.BACKGROUND_TEXT_MODE.FILL,label:(0,d.__)("Fill","web-stories")},{id:Hn.BACKGROUND_TEXT_MODE.HIGHLIGHT,label:(0,d.__)("Highlight","web-stories")}];const Gz=function BackgroundControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=DN(t,"backgroundColor"),a=MN(t,"backgroundTextMode"),o=(0,u.useRef)(),l=(0,u.useCallback)((e=>{n((t=>({backgroundTextMode:e,padding:[Hn.BACKGROUND_TEXT_MODE.FILL,Hn.BACKGROUND_TEXT_MODE.HIGHLIGHT].includes(e)?d_(t):u_(t)})),!0)}),[n]),i=(0,u.useCallback)((e=>{l(e)}),[l]);return c.createElement(c.Fragment,null,c.createElement(Uz,{ref:o},c.createElement(Hz,{value:a,onSelect:i,options:zz,pillStyleOverride:Hu})),a!==Hn.BACKGROUND_TEXT_MODE.NONE&&c.createElement(fx,null,c.createElement(PI,{"data-testid":"text.backgroundColor",allowsGradient:!0,allowsSavedColors:!0,value:r,onChange:e=>n({backgroundColor:e},!0),label:(0,d.__)("Background color","web-stories"),labelId:"background-color-label",changedStyle:"background",hasEyedropper:!0})))};function jz(){return jz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jz.apply(this,arguments)}const Yz={horizontal:0,vertical:0,locked:!0,hasHiddenPadding:!1},Zz={MIN:0,MAX:300},Wz=p.default.div.withConfig({displayName:"padding__Space",componentId:"sc-17x5rfj-0"})(["flex:0 0 8px;"]),Vz=(0,p.default)(LockToggle).withConfig({displayName:"padding__LockToggle",componentId:"sc-17x5rfj-1"})([""," ",";"],(e=>{let{isLocked:t}=e;return!t&&"\n    position: absolute;\n    right: 0;\n    top: calc(100% - 8px);\n  "}),Hu),$z=(0,p.default)(fx).withConfig({displayName:"padding__Row",componentId:"sc-17x5rfj-2"})(["position:relative;"]),qz=p.default.div.withConfig({displayName:"padding__IconWrapper",componentId:"sc-17x5rfj-3"})(["width:44px;margin-left:6px;color:",";"," svg{width:22px;}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{reverse:t}=e;return t&&"transform: scaleY(-1);"}));const Kz=function PaddingControls(e){let{selectedElements:t,pushUpdateForObject:n,pushUpdate:r}=e;const a=BN(t.map((e=>({...e,padding:u_(e)}))),"padding",Yz),o=!0===a.locked,l=(0,u.useCallback)((e=>{r((t=>{const{x:n,y:r,width:a,height:o}=t,l=e(t);return function(e){let{currentPadding:t,newPadding:n,x:r,y:a,width:o,height:l}=e;const i={};return"horizontal"in n&&(i.x=r-(n.horizontal-(t.horizontal||0)),i.width=o+2*(n.horizontal-(t.horizontal||0))),"vertical"in n&&(i.y=a-(n.vertical-(t.vertical||0)),i.height=l+2*(n.vertical-(t.vertical||0))),i}({x:n,y:r,height:o,width:a,currentPadding:t.padding,newPadding:l})})),n("padding",(t=>e({padding:t})),Yz,!0)}),[r,n]);Bx((e=>{let{padding:{horizontal:t,vertical:n,...r}}=e;return{padding:{...r,horizontal:(0,Rs.clamp)(t,Zz),vertical:(0,Rs.clamp)(n,Zz)}}}),[]);const i=o?{suffix:(0,d.__)("Padding","web-stories"),"aria-label":(0,d.__)("Padding","web-stories"),onChange:(e,t)=>{l((e=>({horizontal:t+p_(e,"horizontal"),vertical:t+p_(e,"vertical")})))},stretch:!0}:{suffix:(0,d.__)("Horizontal padding","web-stories"),"aria-label":(0,d.__)("Horizontal padding","web-stories"),onChange:(e,t)=>{l((e=>({horizontal:t+p_(e,"horizontal")})))}};return c.createElement(c.Fragment,null,c.createElement($z,null,c.createElement(gI,jz({value:a.horizontal,isIndeterminate:a.horizontal===_e,placeholder:a.horizontal===_e?ve:null},i,{containerStyleOverride:Uu})),o&&c.createElement(Wz,null),c.createElement(Vz,{isLocked:o,onClick:()=>l((e=>o?{locked:!1}:{locked:!0,horizontal:e.padding.horizontal,vertical:e.padding.horizontal+p_(e,"vertical")-p_(e,"horizontal")})),"aria-label":(0,d.__)("Toggle padding ratio lock","web-stories")}),!o&&c.createElement(qz,{reverse:!0},c.createElement(r_,null))),!o&&c.createElement($z,null,c.createElement(gI,{isIndeterminate:a.vertical===_e,placeholder:a.vertical===_e?ve:null,suffix:(0,d.__)("Vertical padding","web-stories"),value:a.vertical,onChange:(e,t)=>{l((e=>({vertical:Number(t)+p_(e,"vertical")})))},"aria-label":(0,d.__)("Vertical padding","web-stories"),containerStyleOverride:Uu}),c.createElement(qz,null,c.createElement(r_,null))))},Xz=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"panelHeader__AutoStyleButton",componentId:"sc-1sprex4-0"})(["",";"],(e=>{let{theme:t}=e;return Fu.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")}));const Qz=function PanelHeader(e){let{selectedElements:t,pushUpdate:n}=e;const{state:{isCollapsed:r}}=(0,u.useContext)(jA),a=m_(t[0],(e=>{n(e,!0),(0,O.trackEvent)("auto_style_text")})),o=(0,d.__)("Text","web-stories");return c.createElement(hk,{ariaLabel:o,secondaryAction:r?null:c.createElement(Tooltip,{title:(0,d.__)("Adaptive text colors","web-stories")},c.createElement(Xz,{"aria-label":(0,d.__)("Adaptive text colors","web-stories"),onClick:a,disabled:t?.length>1},c.createElement(rh,null)))},o)};const Jz=function(e){let{activeIndex:t,setActiveIndex:n,groupRef:r}=e;(0,nr.useKeyDownEffect)(r,{key:["up","down","left","right"]},(e=>{let{key:a}=e;if(r.current){const e=((e,t)=>{switch(e){case"ArrowUp":return-t;case"ArrowDown":return t;case"ArrowLeft":return-1;case"ArrowRight":return 1;default:return 0}})(a,2),o=r.current.querySelectorAll("button:not([disabled])"),l=o.length-1,i=(t??0)+e,s=Math.max(0,Math.min(l,i));n(s),o[s]&&o[s].focus()}}),[t,n,r])},eG=p.default.button.withConfig({displayName:"styleItem__PresetButton",componentId:"sc-157dmik-0"})(["background-color:",";border-color:transparent;position:relative;cursor:pointer;border-width:0;border-radius:4px;padding:3px;height:100%;width:100%;display:flex;justify-content:center;align-items:center;> svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));}",""],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),32,32,16,16,(e=>{let{theme:t}=e;return t.colors.fg.primary}),Hu),tG=p.default.span.withConfig({displayName:"styleItem__HighLight",componentId:"sc-157dmik-1"})(["padding:0 2px;"," box-decoration-break:clone;"],(e=>{let{background:t}=e;return(0,Nr.default)(t)})),nG=p.default.div.withConfig({displayName:"styleItem__TextWrapper",componentId:"sc-157dmik-2"})(["position:relative;display:inline-block;line-height:","px;max-height:","px;overflow:hidden;border-radius:4px;padding:3px;max-width:100%;"," font-size:12px;",""],20,43,(e=>{let{styles:t}=e;return t}),(e=>{let{background:t}=e;return t?(0,Nr.default)(t):null}));const rG=function StyleItem(e){let{style:t,i:n,activeIndex:r,handleOnClick:a,isEditMode:o,activeItemOverlay:l,applyLabel:i=(0,d.__)("Apply style","web-stories")}=e;const s=xa((e=>{let{state:t}=e;return t.selectedElements})),[p,m]=(0,u.useState)(!1),f=()=>{l&&m(!0)},g=()=>{l&&m(!1)};if(!t)return null;const h=s[0]?.content?(0,br.stripHTML)(s[0].content):(0,d.__)("Lorem ipsum dolor sit amet","web-stories");return c.createElement(eG,{tabIndex:r===n?0:-1,style:t,onClick:()=>a(t),onPointerEnter:f,onFocus:f,onPointerLeave:g,onBlur:g,"aria-label":o?(0,d.__)("Delete style","web-stories"):i},(()=>{const e=t.backgroundTextMode===Hn.BACKGROUND_TEXT_MODE.HIGHLIGHT,n=t.backgroundTextMode===Hn.BACKGROUND_TEXT_MODE.FILL;return c.createElement(nG,{styles:fC(t,!0),background:n?t.backgroundColor:null},e?c.createElement(tG,{background:t.backgroundColor},h):h)})(),o&&c.createElement(Du.default,null),!o&&p&&l)};function aG(){return aG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aG.apply(this,arguments)}const oG=p.default.div.withConfig({displayName:"styleGroup__Group",componentId:"sc-1cojpnq-0"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:20px;grid-row-gap:16px;"]),lG=p.default.div.withConfig({displayName:"styleGroup__ButtonWrapper",componentId:"sc-1cojpnq-1"})(["height:","px;width:","px;"],64,(e=>{let{width:t}=e;return t}));const iG=function StyleGroup(e){let{styles:t,isEditMode:n=!1,handleClick:r,buttonWidth:a=128,...o}=e;const[l,i]=(0,u.useState)(0),s=(0,u.useRef)(null);return Jz({activeIndex:l,setActiveIndex:i,groupRef:s,type:Be}),c.createElement(oG,{ref:s},t.map(((e,t)=>c.createElement(lG,{key:JSON.stringify(e),width:a},c.createElement(rG,aG({style:e,i:t,activeIndex:l,handleOnClick:r,isEditMode:n},o))))))};function sG(){return sG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sG.apply(this,arguments)}const cG=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-10q8amw-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),dG=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-10q8amw-1"})(["display:flex;margin-left:auto;"]),uG=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-10q8amw-2"})(["margin-left:8px;",";"],Hu);const pG=function(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{})}=e;const o=(0,u.useRef)();(0,u.useEffect)((()=>{o.current?.focus()}),[]);const l={type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(cG,null,t,c.createElement(dG,null,c.createElement(uG,sG({},l,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit styles","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(Gb.default,null)),c.createElement(uG,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:o},c.createElement(Du.default,null))))};const mG=function(e){let{onEmpty:t}=e;const{globalStoryStyles:n,updateStory:r}=xa((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),{textStyles:a}=n||{},o=(0,u.useCallback)((e=>{const o=a.filter((t=>t!==e));r({properties:{globalStoryStyles:{...n,textStyles:o}}}),0===o.length&&t()}),[a,r,n,t]);return o},fG="DELETE_STYLE_PRESET_DIALOG_DISMISSED",gG=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-ezab89-0"})(["margin-left:12px;"]),hG=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-ezab89-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const EG=function(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(wo.getItemByKey(vo[fG])),o=(0,d.__)("This is a global style. Deleting this style will remove it from the Saved Styles across all stories and the style will no longer be available to any other users on the site.","web-stories"),l=`cb-${(0,ue.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),c.createElement(hG,null,c.createElement(OC.Checkbox,{id:l,checked:r,onChange:()=>{wo.setItemByKey(vo[fG],!r),a(!r)}}),c.createElement(gG,{htmlFor:l},c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};function bG(){return bG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bG.apply(this,arguments)}const yG=p.default.div.withConfig({displayName:"styleManager__Container",componentId:"sc-4hlmhs-0"})(["border-radius:8px;background:",";width:256px;user-select:none;display:flex;flex-direction:column;align-items:stretch;overflow:hidden;&.style-manager-appear{opacity:0.01;margin-top:-10px;&.style-manager-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),_G=p.default.div.withConfig({displayName:"styleManager__Body",componentId:"sc-4hlmhs-1"})(["display:flex;margin:8px 12px 16px;"]),vG=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styleManager__StyledText",componentId:"sc-4hlmhs-2"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const wG=function StyleManager(e){let{styles:t,onClose:n,applyStyle:r,...a}=e;const[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)(!1),[p,m]=(0,u.useState)(null),f=(0,u.useRef)(null),g=(0,u.useRef)(document.activeElement),h=(0,u.useCallback)((e=>{g.current&&g.current.focus(),n(e)}),[n]);(0,nr.useKeyDownEffect)(f,"esc",h);const E=mG({onEmpty:h});return(0,u.useFocusOut)(f,(()=>{i||n()}),[i]),DT({ref:f}),c.createElement(G_.default,{nodeRef:f,in:!0,appear:!0,classNames:"style-manager",timeout:300},c.createElement(yG,{role:"dialog","aria-label":(0,d.__)("Style presets manager","web-stories"),ref:f},c.createElement(pG,{handleClose:h,isEditMode:o,setIsEditMode:l},c.createElement(vG,null,(0,d.__)("Saved Styles","web-stories"))),c.createElement(_G,null,c.createElement(iG,bG({styles:[...t].reverse(),handleClick:e=>{if(!o)return void r(e);wo.getItemByKey(vo[fG])?E(e):(s(!0),m(e))},isEditMode:o,buttonWidth:106},a))),i&&c.createElement(EG,{onClose:()=>s(!1),onPrimary:()=>{E(p),m(null),s(!1)}})))},TG=p.default.div.withConfig({displayName:"components__NoStylesWrapper",componentId:"sc-1u9p583-0"})(["display:flex;justify-content:center;align-items:center;width:calc(100% + 32px);margin:0 0 -8px -16px;background-color:",";height:64px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black24})),SG=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE}).withConfig({displayName:"components__MoreButton",componentId:"sc-1u9p583-1"})(["",";margin:12px 0;padding:0 16px;justify-content:center;align-self:center;width:100%;svg{transform:rotate(-90deg);height:32px;width:32px;margin-left:-4px;}"],Hu);const CG=function(e){let{pushUpdate:t}=e;Bx(aR,[]);const n=xa((e=>{let{state:{selectedElements:t}}=e;return t?t?.filter((e=>{let{type:t}=e;return"text"===t})):He})),r=(0,u.useRef)(null),a=(0,u.useCallback)((e=>{t((t=>({...e(t),...r.current})),!0),r.current=null}),[t]),{handlers:{handleSetColor:o,handleSetLetterSpacing:l,handleClickUnderline:i,handleClickItalic:s,handleSelectFontWeight:c}}=TP(n,a),d=(0,u.useCallback)((e=>{const{color:t,fontWeight:n,isItalic:a,isUnderline:d,letterSpacing:u,...p}=e;r.current=p,o(t),l(u),c(n),i(d),s(a)}),[o,l,i,s,c]);return d},IG=p.default.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),xG=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),AG=(0,p.default)(Ve.Text).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-2"})(["color:",";margin:6px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold})),kG=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-3"})(["margin-left:auto;"]),OG=(0,p.default)(Ve.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),NG={x:12};const PG=function PresetPanel(e){let{pushUpdate:t}=e;const n=xa((e=>{let{state:t}=e;return t.story.globalStoryStyles.textStyles})),{refs:{sidebar:r}}=Am(),a=(0,u.useRef)(null),[o,l]=(0,u.useState)(!1),{isRTL:i,styleConstants:{topOffset:s}={}}=H(),p=n.length>0,m=CG({pushUpdate:t}),{addGlobalPreset:g}=_C({presetType:Be}),h=e=>{m(e)};return c.createElement(c.Fragment,null,c.createElement(IG,null,c.createElement(AG,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Recently Saved Styles","web-stories")),c.createElement(kG,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:g,"aria-label":(0,d.__)("Add style","web-stories")},c.createElement(fy,null))),p&&c.createElement(c.Fragment,null,c.createElement(xG,null,c.createElement(iG,{styles:[...n].reverse().slice(0,2),handleClick:h})),c.createElement(SG,{ref:a,onClick:()=>l(!0),"aria-haspopup":"dialog","aria-expanded":o},(0,d.__)("More styles","web-stories"),c.createElement(Xu.default,null)),c.createElement(PT.Popup,{topOffset:s,isRTL:i,anchor:a,dock:r,isOpen:o,placement:_d.PLACEMENT.RIGHT_START,spacing:NG,renderContents:()=>c.createElement(wG,{styles:n,applyStyle:h,onClose:()=>l(!1)})})),!p&&c.createElement(TG,null,c.createElement(OG,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))};function RG(){return RG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RG.apply(this,arguments)}const MG=p.default.section.withConfig({displayName:"textStyle__SubSection",componentId:"sc-1al6pl8-0"})(["border-top:1px solid ",";display:flex;flex-direction:column;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),LG=(0,p.default)(Ve.Text).withConfig({displayName:"textStyle__SubHeading",componentId:"sc-1al6pl8-1"})(["color:",";margin:14px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold}));const DG=function(e){const{dropdownHighlight:t,colorHighlight:n,resetHighlight:r,cancelHighlight:a}=Hp((e=>({dropdownHighlight:e[Vm.FONT],colorHighlight:e[Vm.TEXT_COLOR],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)([]),{selectedElements:p}=e;Bx(aR,[]);const{currentPage:m}=xa((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),f=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),g=p.map((e=>e.id)),h=i?.some((e=>{let{id:t}=e;return g.includes(t)}));return(0,u.useEffect)((()=>{Jv([m],f).then((e=>{const t=e[0]?.result;s(t)})).catch((()=>{}))}),[m,f]),c.createElement(BG,{name:"textStyle",onAnimationEnd:()=>r(),isPersistable:!1,$_css:(t?.showEffect||n?.showEffect)&&A_.FLASH},c.createElement(Qz,e),c.createElement(_k,null,c.createElement(yR,RG({},e,{fontDropdownRef:e=>{e&&t?.focus&&t?.showEffect&&(e.focus(),l(!0))},highlightStylesOverride:o?A_.OUTLINE:[]})),c.createElement(Mz,e),c.createElement(Lz,RG({},e,{textColorRef:e=>{e&&n?.focus&&n?.showEffect&&(e.addEventListener("keydown",a,{once:!0}),e.focus(),l(!1))}})),h&&c.createElement(XU,{message:Jd.lowContrast.textPanel}),c.createElement(MG,null,c.createElement(LG,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Text Box","web-stories")),c.createElement(Gz,e),c.createElement(Kz,e)),c.createElement(MG,null,c.createElement(PG,e))))};var BG=(0,p.default)(VA).withConfig({displayName:"textStyle___StyledPanel",componentId:"sc-1al6pl8-2"})(["",""],(e=>e.$_css));const FG={alt:null,poster:null,height:0,width:0},HG={MAX:1e3},UG=(0,p.default)(dx).withConfig({displayName:"videoAccessibility__StyledMedia",componentId:"sc-1uodz5m-0"})(["height:114px;width:64px;"]),zG=p.default.div.withConfig({displayName:"videoAccessibility__InputsWrapper",componentId:"sc-1uodz5m-1"})(["align-self:flex-start;margin-left:16px;"]),GG=(0,p.default)(Ve.Text).withConfig({displayName:"videoAccessibility__StyledText",componentId:"sc-1uodz5m-2"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const jG=function VideoAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=BN(t,"resource",FG),a=MN(t,"alt",r.alt),{height:o,width:l}=r,i=MN(t,"poster"),s=MN(t,"poster",r.poster),{allowedMimeTypes:{image:p},capabilities:{hasUploadMediaAction:m}}=H(),f=(0,u.useMemo)((()=>p.map((e=>Ot(e))).flat()),[p]),g=(0,u.useCallback)((e=>{e?.src!==i&&n({poster:e?.src},!0)}),[n,i]),h=(0,u.useMemo)((()=>{let e=(0,d.__)("No file types are currently supported.","web-stories");return f.length&&(e=(0,Ze.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,It.default)(f))),e}),[f]),{highlightInput:E,highlightMediaPicker:b,resetHighlight:y,cancelHighlight:_}=Hp((e=>({highlightInput:e[Vm.ASSISTIVE_TEXT],highlightMediaPicker:e[Vm.VIDEO_A11Y_POSTER],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));let v=null;return o&&o!==_e&&l&&l!==_e&&(v={height:o,width:l}),c.createElement(YG,{onAnimationEnd:()=>y(),name:"videoAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!E&&!b,$_css:(E||b)&&A_.FLASH},c.createElement(fx,null,c.createElement(UG,{ref:e=>{e&&b?.focus&&b?.showEffect&&e.focus()},value:s,cropParams:v,onChange:g,onChangeErrorText:h,title:(0,d.__)("Select as video poster","web-stories"),buttonInsertText:(0,d.__)("Set as video poster","web-stories"),alt:(0,d.__)("Preview poster image","web-stories"),type:p,ariaLabel:(0,d.__)("Video poster","web-stories"),menuOptions:["edit","reset"],imgProps:v,canUpload:m}),c.createElement(zG,null,c.createElement(GG,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the video.","web-stories")),c.createElement(Mx,{ref:e=>{e&&E?.focus&&E?.showEffect&&(e.addEventListener("keydown",_,{once:!0}),e.focus())},placeholder:a===_e?ve:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:HG.MAX,rows:2,isIndeterminate:a===_e}))))};var YG=(0,p.default)(wk).withConfig({displayName:"videoAccessibility___StyledSimplePanel",componentId:"sc-1uodz5m-3"})(["",""],(e=>e.$_css));const ZG=(0,p.default)(fx).withConfig({displayName:"videoOptions__Row",componentId:"sc-csxmtu-0"})(["margin-top:2px;"]),WG=(0,p.default)(m.Button).withConfig({displayName:"videoOptions__StyledButton",componentId:"sc-csxmtu-1"})(["padding:12px 8px;"]),VG=(0,p.default)(WG).withConfig({displayName:"videoOptions__TrimButton",componentId:"sc-csxmtu-2"})(["margin-left:20px;"]),$G=p.default.div.withConfig({displayName:"videoOptions__TrimWrapper",componentId:"sc-csxmtu-3"})(["position:relative;display:flex;"]),qG=p.default.div.withConfig({displayName:"videoOptions__Spinner",componentId:"sc-csxmtu-4"})(["margin-left:4px;margin-top:4px;"]),KG=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"videoOptions__HelperText",componentId:"sc-csxmtu-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const XG=function VideoOptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=MN(t,"resource"),a=MN(t,"id"),o=MN(t,"loop"),l=1===t.length,{state:{canTrim:i,canMute:s,isTrimming:p,isMuting:m,isDisabled:g},actions:{handleMute:h,handleTrim:E}}=MR({resource:r,elementId:a,isSingleElement:l}),b=m?(0,d.__)("Removing audio…","web-stories"):(0,d.__)("Remove audio","web-stories"),y=p?(0,d.__)("Trimming…","web-stories"):(0,d.__)("Trim","web-stories"),_=(0,AA.default)();(0,u.useEffect)((()=>{m&&_(b)}),[m,b,_]),(0,u.useEffect)((()=>{p&&_(y)}),[p,y,_]);const Processing=()=>c.createElement(qG,null,c.createElement(FT.default,{size:24}));return c.createElement(wk,{name:"videoOptions",title:(0,d.__)("Video Settings","web-stories")},c.createElement(ZG,{spaceBetween:!1},c.createElement(OO,{loop:o,onChange:e=>n({loop:e.target.checked},!0)}),i&&c.createElement($G,null,c.createElement(VG,{disabled:g,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:E},y),p&&c.createElement(Processing,null))),s&&c.createElement(c.Fragment,null,c.createElement(ZG,{spaceBetween:!1},c.createElement(WG,{disabled:g,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:h},b),m&&c.createElement(Processing,null)),c.createElement(ZG,null,c.createElement(KG,null,(0,d.__)("Removing the audio from this video will upload a new muted version of it to the media library. This might take a couple of seconds.","web-stories")))))},QG=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-qyqy4a-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const JG=function PageBackgroundAudioPanel(){const{capabilities:{hasUploadMediaAction:e}}=H(),{backgroundAudio:t,currentPageId:n,updateCurrentPageProperties:r}=xa((e=>({updateCurrentPageProperties:e.actions.updateCurrentPageProperties,backgroundAudio:e.state.currentPage?.backgroundAudio,currentPageId:e.state.currentPage?.id}))),a=(0,u.useCallback)((e=>{r({properties:{backgroundAudio:e}})}),[r]);return t||e?c.createElement(wk,{name:"pageBackgroundAudio",title:(0,d.__)("Page Background Audio","web-stories"),collapsedByDefault:!1},c.createElement(fx,null,c.createElement(QG,null,(0,d.__)("Select an audio file that plays while this page is in view.","web-stories"))),c.createElement(RO,{backgroundAudio:t,updateBackgroundAudio:a,showCaptions:!0,showLoopControl:!0,audioId:`page-${n}-background-audio`})):null},ej=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"product__HelperText",componentId:"sc-87kxeq-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const tj=function ProductPanel(e){let{selectedElements:t}=e;return 1!==t.length?null:c.createElement(wk,{name:"product",title:(0,d.__)("Product","web-stories"),collapsedByDefault:!1},c.createElement(fx,null,c.createElement(ej,null,(0,d.__)("TODO: Provide opportunity to manually override information here.","web-stories"))))},nj=p.default.div.withConfig({displayName:"layers__Container",componentId:"sc-12gh0kb-0"})(["background-color:",";overflow:auto;z-index:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),3),rj=(0,p.default)(Mu).withConfig({displayName:"layers__StyledNavigationWrapper",componentId:"sc-12gh0kb-1"})(["width:260px;"]);const aj=function Layers(){const e=MU().length,[t,n]=(0,u.useState)(!1),r=(0,u.useRef)();return c.createElement(c.Fragment,null,c.createElement(Ku,{isOpen:t,placement:_d.PLACEMENT.RIGHT,ariaLabel:(0,d.__)("Layers Panel","web-stories")},c.createElement(rj,{alignRight:!0,ref:r,isOpen:t},c.createElement(nj,null,c.createElement(DU,null)))),c.createElement(yp,{isOpen:t,notificationCount:e,copy:(0,d.__)("Layers","web-stories"),onClick:()=>n((e=>!e)),"aria-label":(0,Ze.default)(
/* translators: %d: number of layers */
(0,d.__)("Layers (%d)","web-stories"),e)}))},oj=p.default.div.withConfig({displayName:"primaryMenu__Wrapper",componentId:"sc-1n6k8y9-0"})(["display:flex;align-items:flex-end;justify-content:flex-end;width:100%;height:100%;z-index:",";"],3),lj=p.default.div.withConfig({displayName:"primaryMenu__MenuItems",componentId:"sc-1n6k8y9-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-right:","px;gap:","px;"],16,8);const ij=function PrimaryMenu(){return c.createElement(oj,null,c.createElement(lj,{id:"primary-menu-items"},c.createElement(YB,null),c.createElement(oF,null),c.createElement(aj,null)))};function sj(){return sj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sj.apply(this,arguments)}const cj=(0,nr.isPlatformMacOS)(),LargeKey=e=>c.createElement("kbd",sj({className:"large-key"},e)),ShiftKeyWrapper=e=>cj?c.createElement("kbd",e):c.createElement(LargeKey,e),dj={header:{label:(0,d.__)("Keyboard Shortcuts","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"/"))},landmarks:[{label:(0,d.__)("Element","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",null,"1"))},{label:(0,d.__)("Workspace","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",null,"2"))},{label:(0,d.__)("Design panels","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",null,"3"))}],sections:[{title:(0,d.__)("Basics","web-stories"),commands:[{label:(0,d.__)("Undo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Redo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement(ShiftKeyWrapper,null,(0,nr.prettifyShortcut)("shift")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Save","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"S"))},{label:(0,d.__)("Play / Stop","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"K"))}]},{title:(0,d.__)("Text","web-stories"),commands:[{disabled:!0,label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"K"))},{label:(0,d.__)("Bold","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"B"))},{label:(0,d.__)("Italic","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"I"))},{label:(0,d.__)("Underline","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"U"))}]},{title:(0,d.__)("Element","web-stories"),commands:[{label:(0,d.__)("Copy","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"C"))},{label:(0,d.__)("Cut","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"X"))},{label:(0,d.__)("Duplicate","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"D"))},{label:(0,d.__)("Paste","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"V"))},{label:(0,d.__)("Copy Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",null,"O"))},{label:(0,d.__)("Paste Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Select all","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Select multiple","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Gd.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(nr.Shortcut,{shortcut:"shift"})}},(0,Ze.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ click</span>","web-stories"),(0,nr.prettifyShortcut)("shift"))))},{label:(0,d.__)("Move forward or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Gd.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,Ze.default)(
/* translators: 1: Cmd/Ctrl key. 2: Up key. 3: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <kbd>%2$s</kbd> <span>or</span> <kbd>%3$s</kbd>","web-stories"),(0,nr.prettifyShortcut)("mod"),(0,nr.prettifyShortcut)("up"),(0,nr.prettifyShortcut)("down"))))},{label:(0,d.__)("Move to front or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Gd.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,Ze.default)(
/* translators: 1: Cmd/Ctrl key. 2: Shift key. 3: Up key. 4: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <lkbd>%2$s</lkbd> <kbd>%3$s</kbd> <span>or</span> <kbd>%4$s</kbd>","web-stories"),(0,nr.prettifyShortcut)("mod"),(0,nr.prettifyShortcut)("shift"),(0,nr.prettifyShortcut)("up"),(0,nr.prettifyShortcut)("down"))))},{label:(0,d.__)("Enter crop/edit mode","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Gd.default,{mapping:{kbd:c.createElement("kbd",null)}},(0,Ze.default)(
/* translators: %s: Enter key. */
(0,d.__)("<kbd>%s</kbd> <span>or double-click</span>","web-stories"),(0,nr.prettifyShortcut)("enter"))))},{label:(0,d.__)("Delete","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("delete")))},{disabled:!0,label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Disable snapping and drop targeting","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Gd.default,{mapping:{lkbd:c.createElement(LargeKey,null)}},(0,Ze.default)(
/* translators: %s: Cmd/Ctrl key. */
(0,d.__)("<span>Hold</span> <lkbd>%s</lkbd>","web-stories"),(0,nr.prettifyShortcut)("mod"))))},{label:(0,d.__)("Access floating toolbar","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("ctrl")),c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Open context menu","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("mod")),c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("alt")),c.createElement("kbd",{className:"large-key"},(0,nr.prettifyShortcut)("shift")),c.createElement("kbd",null,"M"))},{label:(0,d.__)("Move element 1px","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Gd.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(nr.Shortcut,{shortcut:"shift"})}},(0,Ze.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ arrow keys</span>","web-stories"),(0,nr.prettifyShortcut)("shift"))))}]}]},uj=dj.header,pj=dj.landmarks.filter((e=>!e.disabled)),mj=dj.sections.map((e=>({...e,commands:e.commands.filter((e=>!e.disabled))})));function fj(){return fj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fj.apply(this,arguments)}const gj=p.default.dd.withConfig({displayName:"shortcutLabel__Wrapper",componentId:"sc-6tlmvo-0"})(["display:block;margin:0;kbd{"," display:flex;justify-content:",";align-items:center;margin:0;padding:0;color:",";background-color:transparent;& > kbd{display:flex;justify-content:center;align-items:center;padding:0 5px;height:24px;width:24px;border-radius:",";border:1px solid ",";color:",";}& > kbd.large-key{width:auto;}kbd + kbd{margin-left:2px;}kbd + span{margin-left:4px;}span + kbd{margin-left:4px;}}"],Bu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})),(e=>{let{alignment:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));const hj=function ShortCutLabel(e){let{keys:t,alignment:n="center",...r}=e;return c.createElement(gj,fj({alignment:n},r),t)};function Ej(){return Ej=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ej.apply(this,arguments)}const bj=p.default.dl.withConfig({displayName:"headerShortcut__List",componentId:"sc-1egg06k-0"})(["margin:24px;display:flex;flex-shrink:0;"]),yj=p.default.dt.withConfig({displayName:"headerShortcut__Item",componentId:"sc-1egg06k-1"})(["margin:0 12px 0 0;"]);const _j=function HeaderShortcut(e){const{label:t,shortcut:n}=uj;return c.createElement(bj,null,c.createElement(yj,null,c.createElement(Lu.Headline,Ej({as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},e),t)),c.createElement(hj,{keys:n}))},vj=p.default.dl.withConfig({displayName:"landmarkShortcuts__LandmarksWrapper",componentId:"sc-k7r8e2-0"})(["background-color:",";margin:0;padding:16px 24px;display:flex;justify-content:space-between;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),wj=p.default.div.withConfig({displayName:"landmarkShortcuts__Landmark",componentId:"sc-k7r8e2-1"})(["display:flex;flex-direction:column-reverse;"]),Tj=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"landmarkShortcuts__Label",componentId:"sc-k7r8e2-2"})(["text-align:center;margin-top:8px;white-space:nowrap;display:inline-block;"]);const Sj=function LandmarkShortcuts(){return c.createElement(vj,null,pj.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(wj,{key:t},c.createElement("dt",null,c.createElement(Tj,null,t)),c.createElement(hj,{keys:n}))})))},Cj=(0,p.default)(Lu.Headline).attrs({as:"h3",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"shortcutMenuSection__Header",componentId:"sc-xssjcb-0"})(["margin-top:24px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Ij=p.default.dl.withConfig({displayName:"shortcutMenuSection__List",componentId:"sc-xssjcb-1"})(["display:grid;grid-template-columns:1fr;row-gap:12px;align-items:center;margin:12px 0 0;"]),xj=p.default.div.withConfig({displayName:"shortcutMenuSection__ListRow",componentId:"sc-xssjcb-2"})(["display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;column-gap:5px;align-items:center;dd{grid-column:1;grid-row:1;}dt{grid-column:2;grid-row:1;}"]),Aj=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"}).withConfig({displayName:"shortcutMenuSection__Label",componentId:"sc-xssjcb-3"})(["display:inline-block;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const kj=function ShortcutMenuSection(e){let{title:t,commands:n}=e;const r=`header-${(0,ue.default)()}`;return c.createElement(c.Fragment,null,c.createElement(Cj,{id:r},t),c.createElement(Ij,{title:t},n.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(xj,{key:t},c.createElement("dt",null,c.createElement(Aj,null,t)),c.createElement(hj,{keys:n,alignment:"left"}))}))))},Oj=p.default.div.withConfig({displayName:"regularShortcuts__ContentWrapper",componentId:"sc-fl8s7-0"})(["display:flex;flex-direction:column;margin:0 24px 24px;"]);const Nj=function RegularShortcuts(){return c.createElement(Oj,null,mj.map((e=>{let{title:t,commands:n}=e;return c.createElement(kj,{key:t,title:t,commands:n})})))},Pj="mod+/",Rj=p.default.div.withConfig({displayName:"shortcutMenu__Container",componentId:"sc-m0xcqa-0"})(["position:absolute;left:0;bottom:0;width:352px;border-radius:",";background-color:",";border:","px solid ",";"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),1,(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),Mj=p.default.div.withConfig({displayName:"shortcutMenu__FlexContent",componentId:"sc-m0xcqa-1"})(["display:flex;flex-direction:column;max-height:calc( 100vh - ","px - ","px );"],110,(e=>{let{bottomOffset:t}=e;return t})),Lj=p.default.div.withConfig({displayName:"shortcutMenu__CloseContainer",componentId:"sc-m0xcqa-2"})(["position:absolute;right:4px;top:4px;"]),Dj=p.default.div.withConfig({displayName:"shortcutMenu__ScrollableContent",componentId:"sc-m0xcqa-3"})(["overflow:auto;flex-shrink:1;",";"],Fu.focusableOutlineCSS),Bj=`kb-header-${(0,ue.default)()}`;const Fj=function ShortcutMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggleMenu:r,isOpen:a}=VD((e=>{let{actions:t,state:n}=e;return{toggleMenu:t.toggleMenu,close:t.close,isOpen:n.isOpen}})),[o,l]=(0,u.useState)(0);return(0,u.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const n=()=>{const t=e.getBoundingClientRect(),n=e.ownerDocument.documentElement.getBoundingClientRect();l(n.height-t.y-t.height)};return n(),setTimeout(n),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)}),[]),(0,u.useEffect)((()=>{a&&e.current&&e.current.focus()}),[a]),(0,nr.useKeyDownEffect)(t,Pj,r,[r]),(0,nr.useKeyDownEffect)(t,"esc",n),c.createElement(Rj,{ref:t},c.createElement(Lj,null,c.createElement(m.Button,{ref:e,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE,onClick:n,"aria-label":(0,d.__)("Close Menu","web-stories")},c.createElement(Du.default,null))),c.createElement(Mj,{bottomOffset:o},c.createElement(_j,{id:Bj}),c.createElement(Dj,{role:"presentation",tabIndex:0},c.createElement(Sj,null),c.createElement(Nj,null))))},Hj=(0,p.default)(yp).withConfig({displayName:"keyboardShortcutsMenu__StyledToggleButton",componentId:"sc-1nngfyy-0"})(["padding-left:","px;padding-right:","px;width:auto;display:block;background-color:",";"],3,3,(e=>{let{theme:t}=e;return t.colors.bg.primary})),Uj=p.default.div.withConfig({displayName:"keyboardShortcutsMenu__Wrapper",componentId:"sc-1nngfyy-1"})(["z-index:",";"],3),zj=(0,p.default)(tE).withConfig({displayName:"keyboardShortcutsMenu__MainIcon",componentId:"sc-1nngfyy-2"})(["height:32px;width:auto;display:block;"]);const Gj=function KeyboardShortcutsMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggle:r,isOpen:a}=VD((e=>{let{actions:{close:t,toggle:n},state:{isOpen:r}}=e;return{close:t,toggle:n,isOpen:r}}));return(0,u.useEffect)((()=>{document.body.classList.contains(rd)&&!a&&e?.current?.focus?.()}),[a]),(0,nr.useGlobalKeyDownEffect)(Pj,r,[r]),(0,u.useFocusOut)(t,n,[n]),c.createElement(Tu,null,c.createElement(Uj,{ref:t},c.createElement(Ku,{popupId:"keyboard_shortcut_menu",isOpen:a,ariaLabel:(0,d.__)("Keyboard Shortcuts","web-stories")},c.createElement(Fj,{toggleMenu:r})),c.createElement(Hj,{ref:e,isOpen:a,"aria-owns":"keyboard_shortcut_menu",onClick:r,"aria-label":(0,d.__)("Keyboard Shortcuts","web-stories"),label:(0,d.__)("Keyboard Shortcuts","web-stories"),MainIcon:zj,shortcut:"mod+/"})))};var jj=n(11443);function Yj(){document.querySelector(qs)?.focus()}const Zj=(0,p.css)(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Wj=(0,p.default)(zu).withConfig({displayName:"bottomNavigation__BottomNavBar",componentId:"sc-yk08yc-0"})(["position:absolute;bottom:0;transition:transform ","ms ",";z-index:2;",""],Zs,$e.BEZIER.default,(e=>{let{isHidden:t}=e;return t&&(0,p.css)(["transform:translateY(100%);"])})),Vj=p.default.div.withConfig({displayName:"bottomNavigation__BottomNavButtons",componentId:"sc-yk08yc-1"})(["display:flex;padding:0 16px;white-space:nowrap;"]),$j=p.default.div.withConfig({displayName:"bottomNavigation__ArrowWrap",componentId:"sc-yk08yc-2"})([""," margin:-5px -16px;"," svg{display:block;}"],Zj,(e=>{let{$isRTL:t}=e;return t&&(0,p.css)(["transform:rotate(180deg);"])}));function BottomNavigation(e){let{onAllTips:t,onPrev:n,onNext:r,hasBottomNavigation:a,isNextDisabled:o,isPrevDisabled:l}=e;const{isRTL:i}=H(),s=(0,u.useRef)(null),p=(0,u.useRef)(null),[m,g]=(0,u.useState)({isPrevDisabled:l,isNextDisabled:o});return(0,u.useEffect)((()=>{[l&&document.activeElement===s.current,o&&document.activeElement===p.current].forEach((e=>(e=>t=>{e&&t()})(e)(Yj))),g({isPrevDisabled:l,isNextDisabled:o})}),[l,o]),c.createElement(Wj,{"aria-hidden":!a,isHidden:!a},c.createElement(Vj,null,c.createElement(Gu,{onClick:()=>{Yj(),t()},type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a},c.createElement($j,{$isRTL:i},c.createElement(Yf,null)),c.createElement(qj,null,(0,d.__)("All Tips","web-stories")))),c.createElement(Vj,null,c.createElement(Gu,{ref:s,onClick:n,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a||m.isPrevDisabled},(0,d.__)("Previous","web-stories")),c.createElement(Gu,{ref:p,onClick:r,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a||m.isNextDisabled},(0,d.__)("Next","web-stories"))))}var qj=(0,p.default)("span").withConfig({displayName:"bottomNavigation___StyledSpan",componentId:"sc-yk08yc-3"})(["",""],Zj);const Kj=p.default.div.withConfig({displayName:"navigator__Layout",componentId:"sc-3xgugm-0"})([""," contain:content;"],$A.fullSizeRelative),Xj=p.default.div.withConfig({displayName:"navigator__Content",componentId:"sc-3xgugm-1"})([""]),Qj=p.default.div.withConfig({displayName:"navigator__ContentInner",componentId:"sc-3xgugm-2"})(["position:relative;"]);const Jj=(0,u.memo)((function Navigator(e){let{children:t,isOpen:n,onClose:r,onNext:a,onPrev:o,onAllTips:l,hasBottomNavigation:i,isNextDisabled:s,isPrevDisabled:p}=e;const m=(0,u.useRef)(null),f=(0,u.useRef)(null);return(0,u.useEffect)((()=>function(e,t){if(!e||!t)return()=>{};const{height:n}=e.getBoundingClientRect();t.style.height=`${n}px`,e.style.position="absolute",e.style.bottom=0,e.style.content="contain";let r=requestAnimationFrame((()=>{r=requestAnimationFrame((()=>{t.style.transition=`height 500ms ${$e.BEZIER.default}`}))}));return()=>cancelAnimationFrame(r)}(m.current,f.current)),[]),(0,u.useResizeEffect)(m,(e=>{let{height:t}=e;f.current&&(f.current.style.height=`${t}px`)}),[]),c.createElement(Mu,{isOpen:n},c.createElement(Zu,{onClose:r,label:(0,d.__)("Quick Tips","web-stories"),popupId:$s}),c.createElement(Kj,{ref:f},c.createElement(Xj,{ref:m},c.createElement(Qj,null,t))),c.createElement(BottomNavigation,{onNext:a,onPrev:o,onAllTips:l,hasBottomNavigation:i,isNextDisabled:s,isPrevDisabled:p}))}));var eY=n(94537);const tY=p.default.div.withConfig({displayName:"header__Panel",componentId:"sc-1aci6do-0"})(["padding:24px 0 16px 0;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),nY=p.default.h1.withConfig({displayName:"header__Heading",componentId:"sc-1aci6do-1"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],Bu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function rY(){return c.createElement(tY,null,c.createElement(nY,{as:"h2"},(0,d.__)("Web Stories Help Center","web-stories")),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover tips & resources to help you get the most out of your Web Stories.","web-stories")))}const aY=p.default.div.withConfig({displayName:"tips__Panel",componentId:"sc-1bvshes-0"})(["padding:24px 0;"]),oY=(0,p.default)(m.Button).withConfig({displayName:"tips__StyledButton",componentId:"sc-1bvshes-1"})([""," display:flex;justify-content:space-between;width:100%;padding:6px 0;"],Bu.expandTextPreset(((e,t)=>{let{label:n}=e,{SMALL:r}=t;return n[r]}))),lY=p.default.span.withConfig({displayName:"tips__ButtonText",componentId:"sc-1bvshes-2"})(["vertical-align:middle;text-align:left;",""],(e=>{let{unread:t,theme:n}=e;return t&&(0,p.css)(["&::before{content:' ';display:inline-block;height:10px;width:10px;margin-right:16px;border-radius:",";background-color:",";}"],n.borders.radius.round,n.colors.accent.primary)})),iY=p.default.div.withConfig({displayName:"tips__ArrowWrap",componentId:"sc-1bvshes-3"})(["width:32px;margin:-9px;transform-origin:50% 50%;transform:",";"],(e=>{let{$isRTL:t}=e;return t?"none":"rotate(180deg)"})),sY=(0,p.default)(Yf).withConfig({displayName:"tips__StyledArrow",componentId:"sc-1bvshes-4"})(["width:100%;"]);function Tip(e){let{children:t,onClick:n,unread:r=!0}=e;const{isRTL:a}=H();return c.createElement(oY,{size:f.BUTTON_SIZES.SMALL,onClick:n},c.createElement(lY,{unread:r},t),c.createElement(iY,{$isRTL:a},c.createElement(sY,null)))}function Tips(e){let{onTipSelect:t=(()=>{}),readTips:n}=e;const{state:{tips:r}}=oc(),a=Object.entries(r);return c.createElement(aY,null,a.map((e=>{let[r,a]=e;return c.createElement(Tip,{unread:!n[r],key:r,onClick:()=>{Yj(),t(r)}},a.title)})))}function cY(){return cY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cY.apply(this,arguments)}const dY=(0,p.css)(["opacity:1;transform:none;"]),uY=(0,p.css)(["position:absolute;bottom:0;opacity:0.6;transform:scale(0.96);"]),pY={entering:dY,entered:dY,exiting:uY,exited:uY},mY=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-aat78p-0"})(["position:relative;color:",";opacity:0.6;transform-origin:50% 50%;transform:scale(0.96);transition:transform ","ms ",",opacity ","ms ",";z-index:",";",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),600,$e.BEZIER.default,600,$e.BEZIER.default,Ws,(e=>{let{state:t}=e;return pY[t]}));function Transitioner(e){let{children:t,...n}=e;return c.createElement(ScheduledTransition,cY({},n,{timeout:600,mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(mY,{state:e},t)))}const fY=p.default.div.withConfig({displayName:"menu__Container",componentId:"sc-ztoh5v-0"})(["padding:0 ","px;max-height:60vh;overflow-y:scroll;*{user-select:text;}"],24);function gY(e){let{onTipSelect:t=Mt,readTips:n,components:r,...a}=e;const o=r?.Footer;return c.createElement(Transitioner,a,c.createElement(fY,{"data-testid":"help_center_container"},c.createElement(rY,null),c.createElement(Tips,{readTips:n,onTipSelect:t}),o&&c.createElement(o,null)))}function hY(){return hY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hY.apply(this,arguments)}const EY=420,bY=p.default.div.withConfig({displayName:"transitioner__Opacity",componentId:"sc-cc5d3w-0"})([""]),yY=()=>(0,p.css)(["transition-delay:","ms;transform:none;","{opacity:1;}"],80,bY),_Y=e=>{let{isLeftToRightTransition:t}=e;return(0,p.css)(["position:absolute;bottom:0;","{opacity:0;}",""],bY,t?(0,p.css)(["transform:translateX(-100%);"]):(0,p.css)(["transform:translateX(100%);"]))},vY={entering:yY,entered:yY,exiting:_Y,exited:_Y},wY=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-cc5d3w-1"})(["position:relative;color:",";background-color:",";transition:transform ","ms ",";transform-origin:50% 50%;z-index:",";"," ","{opacity:0.6;transition:opacity ","ms ",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),EY,$e.BEZIER.default,Vs,(e=>{let{isLeftToRightTransition:t}=e;return t?(0,p.css)(["transform:translateX(100%);"]):(0,p.css)(["transform:translateX(-100%);"])}),bY,EY,$e.BEZIER.default,(e=>{let{state:t,...n}=e;return vY[t]?.(n)}));function TY(e){let{children:t,isLeftToRightTransition:n,...r}=e;return c.createElement(ScheduledTransition,hY({},r,{timeout:{enter:500,exit:EY},mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(wY,{state:e,isLeftToRightTransition:n},c.createElement(bY,null,t))))}var SY,CY,IY;function xY(){return xY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xY.apply(this,arguments)}const SvgDoneCheckmark=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",xY({viewBox:"0 0 135 136",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,SY||(SY=c.createElement("circle",{cx:67.5,cy:68.5,r:67.5,fill:"currentColor"})),CY||(CY=c.createElement("path",{d:"M67.5 93.146c13.889 0 25.148-11.259 25.148-25.147 0-13.889-11.26-25.147-25.147-25.147-13.889 0-25.148 11.258-25.148 25.147 0 13.888 11.26 25.147 25.148 25.147Z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),IY||(IY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M81.698 57.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037Z",fill:"currentColor"})))},AY=(0,c.memo)(SvgDoneCheckmark);function kY(){return kY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kY.apply(this,arguments)}const OY=p.default.div.withConfig({displayName:"quickTip__Panel",componentId:"sc-1kyj87z-0"})(["width:100%;padding-bottom:","px;*{user-select:text;}"],48),NY=p.default.div.withConfig({displayName:"quickTip__Overflow",componentId:"sc-1kyj87z-1"})(["position:relative;width:100%;max-height:70vh;padding:","px;strong{font-weight:700;}"],24),PY=p.default.video.withConfig({displayName:"quickTip__Video",componentId:"sc-1kyj87z-2"})(["height:180px;margin-bottom:","px;max-width:100%;"],24),RY=p.default.h1.withConfig({displayName:"quickTip__Title",componentId:"sc-1kyj87z-3"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],Bu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary})),MY=(0,p.default)(Ve.Text).withConfig({displayName:"quickTip__Paragraph",componentId:"sc-1kyj87z-4"})(["& + &{margin-top:8px;}"]),LY=p.default.div.withConfig({displayName:"quickTip__DoneContainer",componentId:"sc-1kyj87z-5"})([""," height:180px;margin-bottom:","px;color:#f4f2ef;svg{display:block;path{color:#4285f4;}}"],qA.centerContent,24);function QuickTip(e){let{title:t,description:n,isLeftToRightTransition:r=!0,figureSrc:a,figureSrcImg:o,figureAlt:l,href:i,isDone:s=!1,...d}=e;const{cdnURL:u}=H();return c.createElement(TY,kY({},d,{isLeftToRightTransition:r}),c.createElement(OY,null,c.createElement(NY,null,Boolean(a)&&c.createElement(PY,{controls:!1,autoPlay:!0,loop:!0,muted:!0,noControls:!0,preload:"true",crossOrigin:"anonymous"},c.createElement("source",{src:`${u}${a}.webm`,type:"video/webm"}),c.createElement("source",{src:`${u}${a}.mp4`,type:"video/mp4"})),o&&c.createElement(PY,{as:"img",alt:l,src:`${u}${o}.png`,crossOrigin:"anonymous"}),s&&c.createElement(LY,null,c.createElement(AY,{height:135,width:135})),c.createElement(RY,null,t),n.map(((e,n)=>c.createElement(MY,{key:`${t}-${n}`,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,rel:"noreferrer noopener",target:"_blank",href:i}),screenreader:c.createElement(oP.VisuallyHidden,null)}},e)))))))}function DY(){return DY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DY.apply(this,arguments)}const BY=(0,u.memo)((function Companion(e){let{tipKey:t,onTipSelect:n,isLeftToRightTransition:r,readTips:a,components:o}=e;const{state:{tips:l}}=oc(),i={...l,[Ys[0]]:Ys[1]},s=t&&i[t];return c.createElement(eY.default,null,s?c.createElement(QuickTip,DY({key:t,isDone:t===Ys[0],transitionKey:t,isLeftToRightTransition:r},s)):c.createElement(gY,{key:"menu",readTips:a,onTipSelect:n,components:o}))})),FY=(0,p.default)(Sy).withConfig({displayName:"toggle__MainIcon",componentId:"sc-12rmkcw-0"})(["height:32px;width:auto;display:block;"]),HY=(0,p.default)(yp).withConfig({displayName:"toggle__StyledToggleButton",componentId:"sc-12rmkcw-1"})(["padding-left:3px;padding-right:3px;display:block;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));function UY(e){let{isOpen:t=!1,popupId:n="",onClick:r=(()=>{}),notificationCount:a=0}=e;return c.createElement(HY,{"aria-owns":n,"aria-label":a>0?(0,Ze.default)(
/* translators: %s:  number of unread notifications. */
(0,d._n)("Help Center: %s unread notification","Help Center: %s unread notifications",a,"web-stories"),a):(0,d.__)("Help Center","web-stories"),onClick:r,isOpen:t,label:(0,d.__)("Help","web-stories"),MainIcon:FY,notificationCount:a})}const zY=p.default.div.withConfig({displayName:"helpCenter__Wrapper",componentId:"sc-12zoy5g-0"})(["z-index:",";"],3),HelpCenter=e=>{let{components:t}=e;const n=(0,u.useRef)(null),{state:r,actions:a}=oc();return(0,u.useEffect)((()=>{r.isOpen&&Yj()}),[r.isOpen]),Ca(ba.onReplaceBackgroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(Ls)}),[a])),Ca(ba.onReplaceForegroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(Ds)}),[a])),c.createElement(Tu,null,c.createElement(c.Fragment,null,c.createElement(jj.Styles,null),c.createElement(zY,{ref:n},c.createElement(Ku,{popupId:$s,isOpen:r.isOpen,ariaLabel:(0,d.__)("Help Center","web-stories")},c.createElement(Jj,{isOpen:r.isOpen,onNext:a.goToNext,onPrev:a.goToPrev,onAllTips:a.goToMenu,onClose:a.close,hasBottomNavigation:r.hasBottomNavigation,isNextDisabled:r.isNextDisabled,isPrevDisabled:r.isPrevDisabled},c.createElement(BY,{readTips:r.readTips,tipKey:r.navigationFlow[r.navigationIndex],onTipSelect:a.goToTip,isLeftToRightTransition:r.isLeftToRightTransition,components:t}))),c.createElement(UY,{isOpen:r.isOpen,onClick:a.toggle,notificationCount:r.unreadTipsCount,popupId:$s}))))},GY=p.default.div.withConfig({displayName:"secondaryMenu__Wrapper",componentId:"sc-4921wn-0"})(["display:flex;align-items:flex-end;justify-content:flex-start;width:100%;height:100%;"]),jY=p.default.div.withConfig({displayName:"secondaryMenu__MenuItems",componentId:"sc-4921wn-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-left:","px;gap:","px;"],16,8),YY="help_center",ZY="checklist",WY="keyboard_shortcuts";const VY=function SecondaryMenu(e){let{menu:t}=e;const n=(0,u.useRef)(""),{close:r,isHelpCenterOpen:a}=oc((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isHelpCenterOpen:n}})),{close:o,open:l,isChecklistOpen:i}=zd((e=>{let{actions:{close:t,open:n},state:{isOpen:r}}=e;return{close:t,open:n,isChecklistOpen:r}})),{close:s,isKeyboardShortcutsMenuOpen:d}=VD((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isKeyboardShortcutsMenuOpen:n}})),{handleResetReviewChecklist:p,reviewChecklistRequested:m}=gu((e=>{let{actions:{handleResetReviewChecklist:t},state:{reviewChecklistRequested:n}}=e;return{reviewChecklistRequested:n,handleResetReviewChecklist:t}})),f=Os((e=>{let{state:{editingElementState:{isTrimMode:t},isEditing:n}}=e;return t||n})),g=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.current=e}),[]);return(0,u.useEffect)((()=>{i&&n.current!==ZY&&(r(),s(),g(ZY))}),[r,s,i,g]),(0,u.useEffect)((()=>{a&&n.current!==YY&&(o(),s(),g(YY))}),[o,s,a,g]),(0,u.useEffect)((()=>{d&&n.current!==WY&&(o(),r(),g(WY))}),[o,r,d,g]),(0,u.useEffect)((()=>{m&&(g(),p(),l())}),[m,p,l,g]),(0,u.useEffect)((()=>{f&&n.current&&(g(),o(),r())}),[o,r,f,g]),c.createElement(GY,null,c.createElement(jY,null,c.createElement(HelpCenter,{components:t?.helpCenter}),t?.checklist&&c.createElement(Checklist,{items:t.checklist}),c.createElement(Gj,null)))},$Y=p.default.section.withConfig({displayName:"footerLayout__Wrapper",componentId:"sc-gme2s1-0"})(["position:relative;display:grid;grid:'secondary carousel primary' auto / ","px minmax(auto,calc(100% - ","px)) ","px;width:100%;max-width:100%;height:100%;"],NM,2*NM,NM),qY=p.default.div.withConfig({displayName:"footerLayout__Area",componentId:"sc-gme2s1-1"})(["grid-area:",";display:flex;align-items:flex-end;justify-content:center;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t="auto"}=e;return t}));const KY=function FooterLayout(e){let{footer:t,zIndex:n}=e;return c.createElement(Tu,null,c.createElement($Y,{"aria-label":(0,d.__)("Workspace Footer","web-stories")},c.createElement(qY,{area:"carousel"},c.createElement(zB,null)),c.createElement(qY,{area:"primary",zIndex:n},c.createElement(ij,null)),c.createElement(qY,{area:"secondary",zIndex:n},c.createElement(VY,{menu:t?.secondaryMenu}))))},XY=p.default.section.withConfig({displayName:"footer__Outer",componentId:"sc-124zhi3-0"})(["height:100%;"]),QY=(0,p.default)(XY).withConfig({displayName:"footer__Inner",componentId:"sc-124zhi3-1"})(["margin-right:","px;"],(e=>{let{marginRight:t}=e;return t}));const JY=(0,u.memo)((function(e){let{footer:t,zIndex:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(0);(0,u.useResizeEffect)(r,(e=>{let{width:t}=e;return o(t)}),[]);const l=(0,u.useMemo)((()=>a>=1e3?8:0),[a]);return c.createElement(Ud,null,c.createElement(WD,null,c.createElement(XY,{ref:r},c.createElement(QY,{marginRight:l},c.createElement(KY,{footer:t,zIndex:n})))))}));function eZ(){return eZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eZ.apply(this,arguments)}const tZ=(0,p.default)(m.Button).withConfig({displayName:"pageMenuButton__StyledButton",componentId:"sc-x8fz92-0"})(["margin-top:12px;"]);const nZ=(0,u.forwardRef)((function PageMenuButtonWithRef(e,t){let{children:n,title:r,shortcut:a,...o}=e;return c.createElement(Tooltip,{title:r,shortcut:a,hasTail:!0},c.createElement(tZ,eZ({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,ref:t},o),n))}));nZ.propTypes={children:Ea().node,title:Ea().string,shortcut:Ea().string};const rZ=nZ;const aZ=function AnimationToggle(){const{animationState:e,updateAnimationState:t}=xa((e=>{let{state:{animationState:t},actions:{updateAnimationState:n}}=e;return{animationState:t,updateAnimationState:n}})),n=[Cn.STORY_ANIMATION_STATE.PLAYING,Cn.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(e),r=n?(0,d.__)("Stop","web-stories"):(0,d.__)("Play","web-stories"),a=n?(0,d.__)("Stop Page Animations","web-stories"):(0,d.__)("Play Page Animations","web-stories"),o=n?jy:uy,l=(0,u.useCallback)((()=>{t({animationState:n?Cn.STORY_ANIMATION_STATE.RESET:Cn.STORY_ANIMATION_STATE.PLAYING}),(0,O.trackEvent)("canvas_play_animations",{status:n?"stop":"play"})}),[n,t]);return c.createElement(rZ,{title:r,shortcut:"mod+k",onClick:l,"aria-label":a},c.createElement(o,null))},oZ=p.default.div.withConfig({displayName:"pageMenu__Wrapper",componentId:"sc-m9u2n8-0"})(["margin-top:auto;padding:0 4px;pointer-events:all;"]);const lZ=(0,u.memo)((function PageMenu(){const{currentPage:e,numberOfPages:t,deleteCurrentPage:n,addPage:r,hasAnimations:a}=xa((e=>{let{state:{currentPage:t,pages:n},actions:{deleteCurrentPage:r,addPage:a}}=e;return{currentPage:t,numberOfPages:n.length,deleteCurrentPage:r,addPage:a,hasAnimations:t?.animations?.length>0}})),o=(0,u.useRef)(null),l=(0,u.useRef)(null);_m({node:o.current,eventData:we.PAGE_ADD}),_m({node:l.current,eventData:we.PAGE_DELETE});const i=(0,u.useCallback)((()=>n()),[n]),s=(0,u.useCallback)((()=>r({page:(0,Hn.createPage)()})),[r]),p=(0,u.useCallback)((()=>r({page:(0,Hn.duplicatePage)(e)})),[r,e]),m=t<=1;return e?c.createElement(oZ,{role:"group","aria-label":(0,d.__)("Page actions","web-stories")},a&&c.createElement(aZ,null),c.createElement(rZ,{ref:o,title:(0,d.__)("New Page","web-stories"),onClick:s,"aria-label":(0,d.__)("Add New Page","web-stories")},c.createElement(_y,null)),c.createElement(rZ,{title:(0,d.__)("Duplicate Page","web-stories"),onClick:p,"aria-label":(0,d.__)("Duplicate Page","web-stories")},c.createElement(vb,null)),c.createElement(rZ,{ref:l,title:(0,d.__)("Delete Page","web-stories"),disabled:m,onClick:i,"aria-label":(0,d.__)("Delete Page","web-stories")},c.createElement(Qy.default,null))):null}));function iZ(){return iZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iZ.apply(this,arguments)}const sZ=p.default.section.withConfig({displayName:"pageSideMenu__MenusWrapper",componentId:"sc-sll2i1-0"})(["position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:space-between;z-index:",";pointer-events:auto;min-height:100%;pointer-events:none;",""],3,(e=>{let{isZoomed:t,theme:n}=e;return t&&`\n    min-height: initial;\n    background-color: ${(0,We.rgba)(n.colors.standard.black,.45)};\n    border-radius: ${n.borders.radius.small};\n    padding: 8px;\n    margin-left: -24px;\n  `})),cZ=p.default.div.withConfig({displayName:"pageSideMenu__Divider",componentId:"sc-sll2i1-1"})(["width:20px;height:1px;margin:13px auto 1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),dZ=(0,p.default)(YN.default).withConfig({displayName:"pageSideMenu__StyledContextMenu",componentId:"sc-sll2i1-2"})(["pointer-events:all;"]);const uZ=function PageSideMenu(){const{zoomSetting:e}=Vi((e=>{let{state:{zoomSetting:t}}=e;return{zoomSetting:t}})),t=x_(),n=e!==Te.FIT;return c.createElement(sZ,{"aria-label":(0,d.__)("Page side menu","web-stories"),isZoomed:n},t.length?c.createElement(dZ,{isInline:!0,isAlwaysVisible:!0,isIconMenu:!0,disableControlledTabNavigation:!0,"data-testid":"Element quick actions","aria-label":(0,d.__)("Group of available options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()}},t.map((e=>{let{Icon:t,label:n,onClick:r,separator:a,tooltipPlacement:o,wrapWithMediaPicker:l,...i}=e;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VO.noop;return c.createElement(u.Fragment,{key:n},"top"===a&&c.createElement(hP.default,null),c.createElement(Tooltip,{placement:o,title:n},c.createElement(cP.default,iZ({"aria-label":n,onClick:t=>{r(t),e(t)}},i),c.createElement(sP,{title:n},c.createElement(t,null)))),"bottom"===a&&c.createElement(hP.default,null))};return l?c.createElement(MediaPicker,{key:n,render:e=>{let{onClick:t}=e;return s(t)}}):s()}))):null,n&&c.createElement(cZ,null),c.createElement(lZ,null))};const pZ=(0,u.memo)((function NavLayer(e){let{header:t,footer:n}=e;return c.createElement(ChecklistCountProvider,{hasChecklist:Boolean(n?.secondaryMenu?.checklist)},c.createElement(UM,{pointerEvents:"none",onMouseDown:e=>e.stopPropagation()},c.createElement(WM,{pointerEvents:"initial",zIndex:5},t),c.createElement(Tu,null,c.createElement(KM,null,c.createElement(uZ,null))),c.createElement(XM,{pointerEvents:"initial"},c.createElement(JY,{footer:n,zIndex:5}))))})),mZ=0,fZ=1,gZ=2,hZ=(0,I.withOverlay)(p.default.div.withConfig({displayName:"selectionCanvas__Container",componentId:"sc-qsqc5z-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;user-select:none;"])),EZ=p.default.div.withConfig({displayName:"selectionCanvas__Lasso",componentId:"sc-qsqc5z-1"})(["display:none;position:absolute;border:1px dotted ",";z-index:1;"],(e=>{let{theme:t}=e;return t.colors.border.selection}));const bZ=function SelectionCanvas(e){let{children:t}=e;const n=xa((e=>{let{state:t}=e;return t.currentPage?.elements||He})),{selectedElements:r,clearSelection:a}=xa((e=>{let{state:{selectedElements:t},actions:{clearSelection:n}}=e;return{selectedElements:t,clearSelection:n}})),{fullbleedContainer:o,isEditing:l,nodesById:i,clearEditing:s,selectIntersection:d}=Os((e=>{let{state:{fullbleedContainer:t,isEditing:n,nodesById:r},actions:{clearEditing:a,selectIntersection:o}}=e;return{fullbleedContainer:t,isEditing:n,nodesById:r,clearEditing:a,selectIntersection:o}})),p=(0,u.useMemo)((()=>o?.closest("[data-scroll-container]")),[o]),{editorToDataX:m,editorToDataY:f}=(0,hc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),g=(0,u.useRef)(null),h=(0,u.useRef)(null),E=(0,u.useRef)([0,0]),b=(0,u.useRef)([0,0]),y=(0,u.useRef)([0,0]),_=(0,u.useRef)(mZ),v=(0,u.useCallback)((()=>{const[e,t]=b.current,[n,r]=y.current;return[Math.min(e,n),Math.min(t,r),Math.abs(e-n),Math.abs(t-r)]}),[]),w=(0,u.useCallback)((()=>{const e=h.current;if(!e)return;const t=_.current,[n,r,a,o]=v();e.style.left=`${n}px`,e.style.top=`${r}px`,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.display=t===fZ?"block":"none"}),[v]),T=(0,u.useCallback)((e=>{i[n[0].id].contains(e.target)||(r.length&&a(),l&&s());let t=0,o=0;for(let e=g.current;e;e=e.offsetParent)t+=e.offsetLeft,o+=e.offsetTop;const c=e.pageX-t,d=e.pageY-o;E.current=[t,o],b.current=[c,d],y.current=[c,d],_.current=gZ,w()}),[s,a,n,l,i,r.length,w]),S=(0,u.useCallback)((e=>{if(_.current===mZ)return;const[t,n]=b.current,[r,a]=E.current,o=e.pageX-r,l=e.pageY-a;y.current[0]=o,y.current[1]=l,w(),Math.abs(t-o)+Math.abs(n-l)>10&&(_.current=fZ)}),[w]),C=(0,u.useCallback)((()=>{if(_.current===fZ){const[e,t,n,r]=v(),{offsetLeft:l,offsetTop:i,offsetHeight:c,offsetWidth:u}=o,{offsetLeft:g,offsetTop:h}=p,E=l+g,b=i+h+(c-u/J.PAGE_RATIO)/2,y=m(e-E),_=f(t-b),w=m(n),T=f(r);a(),s(),d({x:y,y:_,width:w,height:T})}_.current=mZ,w()}),[s,a,m,f,o,v,p,d,w]);return(0,u.useEffect)((()=>(document.addEventListener("mouseup",C),()=>{document.removeEventListener("mouseup",C)})),[C]),(0,u.useEffect)(w),c.createElement(hZ,{onMouseDown:T,onMouseMove:S,"data-fix-caret":!0},t,c.createElement(I.InOverlay,{ref:g},c.createElement(EZ,{ref:h})))},yZ="edit-story-canvas-upload-message";const _Z=function CanvasUploadDropTarget(e){let{children:t}=e;const n=is(),r=(0,u.useCallback)((e=>{e&&e.length>0&&n(e)}),[n]);return c.createElement(rm,{onDrop:r,labelledBy:yZ},t,c.createElement(dm,null,c.createElement(UM,null,c.createElement(QM,{overlay:c.createElement(gm,{id:yZ,message:(0,d.__)("Upload to media library and add to the page.","web-stories")})}))))},vZ=p.default.div.withConfig({displayName:"canvasElementDropzone__Container",componentId:"sc-8cm35g-0"})(["width:100%;height:100%;"]);const wZ=function CanvasElementDropzone(e){let{children:t}=e;const n=ls(),{activeDropTargetId:r}=zi((e=>({activeDropTargetId:e.state.activeDropTargetId}))),{pageContainer:a}=Os((e=>({pageContainer:e.state.pageContainer}))),{editorToDataX:o,editorToDataY:l}=(0,hc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),i=(0,u.useCallback)((e=>{if(Xp(e,"resource/media")&&!r){const{resource:t,offset:{x:r,y:i,w:s,h:c}}=JSON.parse(e.dataTransfer.getData("resource/media")),{x:d,y:u}=a.getBoundingClientRect();n(t.type,{resource:t,x:o(e.clientX-d-r),y:l(e.clientY-u-i),width:o(s),height:l(c)}),e.stopPropagation(),e.preventDefault()}}),[r,a,n,o,l]),s=(0,u.useCallback)((e=>{Xp(e,"resource/media")&&!r&&(e.stopPropagation(),e.preventDefault())}),[r]);return c.createElement(vZ,{onDrop:i,onDragOver:s},t)};const TZ=function(e,t,n,r){const a=((e,t,n)=>{const r=4*(Math.floor(t)*n+Math.floor(e));return[r,r+1,r+2,r+3]})(t,n,r),[o,l,i,s]=a;return{r:e[o],g:e[l],b:e[i],a:e[s]/255}},SZ=200,CZ=SZ/7,IZ=(0,p.default)(UM).withConfig({displayName:"eyedropperLayer__EyedropperBackground",componentId:"sc-nf74gq-0"})(["background:",";cursor:not-allowed;z-index:2;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),xZ=(0,p.default)(QM).withConfig({displayName:"eyedropperLayer__DisplayPageArea",componentId:"sc-nf74gq-1"})(["position:absolute;"]),AZ=p.default.div.withConfig({displayName:"eyedropperLayer__EyedropperCanvas",componentId:"sc-nf74gq-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]),kZ=p.default.div.withConfig({displayName:"eyedropperLayer__ColorInfo",componentId:"sc-nf74gq-3"})(["text-transform:uppercase;margin-top:30px;padding:9px;min-width:102px;text-align:center;"]),OZ=p.default.div.withConfig({displayName:"eyedropperLayer__Circle",componentId:"sc-nf74gq-4"})(["transform:translateY(20px);background:",";border:2px solid black;border-radius:50%;overflow:hidden;width:","px;height:","px;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),198,SZ),NZ=p.default.div.withConfig({displayName:"eyedropperLayer__Magnifier",componentId:"sc-nf74gq-5"})(["position:absolute;top:0;left:0;transform:translateY(-2000px);pointer-events:none;"]),PZ=p.default.div.withConfig({displayName:"eyedropperLayer__Center",componentId:"sc-nf74gq-6"})(["position:absolute;top:0;left:0;right:0;bottom:0;z-index:3;background:",";cursor:not-allowed;display:flex;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),RZ=p.default.img.withConfig({displayName:"eyedropperLayer__CanvasImage",componentId:"sc-nf74gq-7"})(["width:100%;"]);const MZ=function EyedropperLayer(){const{fullbleedContainer:e,isEyedropperActive:t,eyedropperCallback:n,eyedropperImg:r,eyedropperPixelData:a,setIsEyedropperActive:o,setEyedropperImg:l,setEyedropperPixelData:i}=Os((e=>{let{state:{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o},actions:{setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}}=e;return{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o,setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}})),{pageWidth:s}=Vi((e=>{let{state:{pageWidth:t}}=e;return{pageWidth:t}})),d=s/J.FULLBLEED_RATIO,p=r,m=(0,u.useRef)(),f=(0,u.useRef)(),g=(0,u.useRef)(),h=(0,u.useRef)(),E=(0,u.useRef)(),b=()=>{o(!1),l(null),i(null)};return(0,u.useFocusOut)(E,b,[t,p]),(0,nr.useGlobalKeyDownEffect)("esc",b),t&&!p?c.createElement(c.Fragment,null,c.createElement(PZ,{onClick:b},c.createElement(FT.default,null))):t&&p?c.createElement(IZ,{"data-testid":"eyedropperLayer",onMouseMove:t=>{const{left:n,top:r,width:o,height:l}=e.getBoundingClientRect(),i=(t.clientX-n)*(s/o),c=(t.clientY-r)*(d/l);if(i<0||c<0||i>o||c>l)return void(g.current.style.display="none");g.current.style.display="block",g.current.style.transform=`translate(${i-100}px, ${c}px)`,function(e,t){const n=f.current;if(n){const r=n.getContext("2d");r.imageSmoothingEnabled=!1,r.mozImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.clearRect(0,0,SZ,SZ),r.drawImage(m.current,Math.round(e-3.5),Math.round(t-3.5),7,7,0,0,SZ,SZ),r.beginPath(),r.rect(Math.round(100)-14.285714285714286,Math.round(100)-14.285714285714286,CZ,CZ),r.stroke()}}(i,c);const u=TZ(a,i,c,o),{r:p,g:E,b,a:y}=u,_=(0,We.rgba)(p,E,b,y);h.current.style.background=`rgba(${p},${E},${b},${y})`,h.current.style.color=(0,We.readableColor)(_,"#333","#EDEDED",!1),h.current.innerText=_}},c.createElement(xZ,{withSafezone:!1,showOverflow:!0},c.createElement(AZ,{ref:E,onClick:t=>{const{left:r,top:o,width:l,height:i}=e.getBoundingClientRect(),c=(t.clientX-r)*(s/l),u=(t.clientY-o)*(d/i),p=TZ(a,c,u,s);n(p)}},c.createElement(RZ,{ref:m,src:p,alt:""}),c.createElement(NZ,{ref:g},c.createElement(OZ,null,c.createElement("canvas",{ref:f,width:SZ,height:SZ})),c.createElement(kZ,{ref:h}))))):null};var LZ=n(52589);const DZ=e=>{if(!(1===e.length))return!1;if(!(1===e[0].elements?.length))return!1;if(!e[0].elements[0].isDefaultBackground)return!1;const t=e[0].pageAttachment?.url;if(t)return!1;return!!(0,u.shallowEqual)(Hn.DEFAULT_PAGE_BACKGROUND_COLOR.color,e[0].backgroundColor.color)},BZ=(0,p.default)(QM).withConfig({displayName:"emptyStateLayer__DisplayPageArea",componentId:"sc-1ypjr32-0"})(["position:absolute;z-index:1;"]),FZ=p.default.div.withConfig({displayName:"emptyStateLayer__EmptyStateMessage",componentId:"sc-1ypjr32-1"})(["display:flex;flex-direction:column;align-items:center;padding:20px;text-align:center;svg{pointer-events:none;}p{margin-top:14px;}"]),HZ=(0,p.default)(m.Button).withConfig({displayName:"emptyStateLayer__StyledButton",componentId:"sc-1ypjr32-2"})(["pointer-events:initial;"]);const UZ=function EmptyStateLayer(){const{isRTL:e}=H(),{isMenuOpen:t,onOpenMenu:n}=sc((e=>{let{isMenuOpen:t,onOpenMenu:n}=e;return{isMenuOpen:t,onOpenMenu:n}})),{pages:r}=xa((e=>{let{state:{pages:t}}=e;return{pages:t}})),{isAnythingTransforming:a}=(0,C.useTransform)((e=>({isAnythingTransforming:e.state.isAnythingTransforming})));return!DZ(r)||a?null:c.createElement(UM,{onContextMenu:n,pointerEvents:"none","aria-label":(0,d.__)("Empty state layer","web-stories")},c.createElement(BZ,{withSafezone:!1},c.createElement(FZ,null,c.createElement(HZ,{type:f.BUTTON_TYPES.SECONDARY,variant:f.BUTTON_VARIANTS.CIRCLE,onClick:t=>{const r=t.target.getBoundingClientRect();t.clientX=r.left-(e?-1:1)*LZ.CONTEXT_MENU_MIN_WIDTH/2+r.width/2;t.clientY=r.top-132+r.height,n(t)},"aria-haspopup":"true","aria-label":(0,d.__)("Add content","web-stories"),"aria-describedby":"emptystate-message","aria-expanded":t},c.createElement(QE,null)),c.createElement(p.ThemeProvider,{theme:{...g.theme,colors:h.light}},c.createElement(Ve.Text,{id:"emptystate-message",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add an image, video or template to get started","web-stories"))))))},zZ=p.default.section.attrs({"aria-label":(0,d.__)("Canvas","web-stories"),"data-fix-caret":!0}).withConfig({displayName:"canvasLayout__Background",componentId:"sc-1ciyn0c-0"})(["background-color:",";width:100%;height:100%;position:relative;user-select:none;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));const GZ=(0,u.memo)((function CanvasLayout(e){let{header:t,footer:n}=e;const r=Ns(xs),a=Os((e=>e.actions.setCanvasContainer)),o=(0,u.useRef)(null),l=(0,u.useCombinedRefs)(o,a,r);!function(e){const{setWorkspaceSize:t}=Vi((e=>{let{actions:{setWorkspaceSize:t}}=e;return{setWorkspaceSize:t}})),n=PM();(0,u.useResizeEffect)(e,(e=>{let{width:r,height:a}=e;t({width:r,height:a,availableHeight:a-64-16-n-16})}),[t,n])}(o);const i=function(){const{pageWidth:e,pageHeight:t,pagePadding:n,viewportWidth:r,viewportHeight:a,hasPageNavigation:o,hasVerticalOverflow:l,hasHorizontalOverflow:i,scrollLeft:s,scrollTop:c}=Vi((e=>{let{state:{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:l,hasVerticalOverflow:i,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}}=e;return{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:l,hasVerticalOverflow:i,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}})),d=e/J.FULLBLEED_RATIO;return{"--page-nav-width":`${o?DM:0}px`,"--page-nav-gap":(o?20:0)+"px","--page-width-px":`${e}px`,"--page-height-px":`${t}px`,"--page-padding-px":`${n}px`,"--fullbleed-height-px":`${d}px`,"--viewport-width-px":`${r}px`,"--viewport-height-px":`${a}px`,"--overflow-x":i?"scroll":"visible","--overflow-y":l?"scroll":"visible","--scroll-left-px":-s+"px","--scroll-top-px":-c+"px"}}(),{pageWidth:s,pageHeight:d}=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),m=(0,S.useFeature)("floatingMenu"),f=0!==s&&0!==d;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(qN,null,c.createElement(zZ,{ref:l,style:i},c.createElement(_Z,null,c.createElement(wZ,null,c.createElement(bZ,null,f&&c.createElement(dD,null),f&&c.createElement(YD,null),c.createElement(pZ,{header:t,footer:n})),c.createElement(_L,null),c.createElement(MZ,null),c.createElement(UZ,null),m&&c.createElement(aM,null))))))}));const jZ=function Canvas(e){let{header:t,footer:n}=e;return c.createElement(GZ,{header:t,footer:n})},YZ=24;const ZZ=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=ls(),n=Zc(),{setSelectedElementsById:r}=xa((e=>{let{actions:{setSelectedElementsById:t}}=e;return{setSelectedElementsById:t}})),a=(0,u.useBatchingCallback)((async function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const l=(0,Ir.getHTMLFormatters)(),{setColor:i}=l,s=[],c=a.some((e=>e.content?.includes("color:")));let d=[],u=null;const p={r:255,g:255,b:255},m={r:0,g:0,b:0},f={...p,a:.3},g={...m,a:.3};let h,E,b;if(o&&!c){d=await Promise.all(a.map((e=>"text"===e.type?n(e):null))),u=d.find((e=>e));const e=d.every((e=>null===e||e.color?.r===u.color?.r&&e.color?.g===u.color?.g&&e.color?.b===u.color?.b&&e.color?.a===u.color?.a));E=d.reduce(((e,t)=>t?.backgroundColor?e+1:e),0);const r=d.reduce(((e,t)=>0===t?.backgroundColor?.r&&0===t?.backgroundColor?.g&&0===t?.backgroundColor?.b?e+1:e),0);if(h=E-r>0?g:f,b=E>0||!1===e,b){const{textSetHeight:e,textSetWidth:n}=a[0],r=e=>Math.min.apply(null,a.map((t=>t[e]))),o=r("x"),l=r("y"),i={x:o-YZ,y:l-YZ,width:n+48,height:e+48,backgroundColor:{color:h},type:"shape"};s.push(t(Hn.ELEMENT_TYPES.SHAPE,i))}}a.forEach(((e,n)=>{const r=un(e,["id","normalizedOffsetX","normalizedOffsetY","textSetWidth","textSetHeight"]);if(o&&!c){const t=0===h.r?p:m,a=b?{color:t}:d[n];"text"===e.type&&a.color&&(r.content=i(r.content,a)),"shape"===e.type&&u.color&&(e.border?r.border.color=u:r.backgroundColor=u)}s.push(t(e.type,r))})),r({elementIds:s.map((e=>{let{id:t}=e;return t}))})}),[n,e,t,r]),o=(0,u.useCallback)(((e,t)=>{let{offsetX:n,offsetY:r}=t;if(!e.length)return;const o=e.map((e=>{const t=e.normalizedOffsetX+n,a=e.normalizedOffsetY+r,{width:o,height:l}=e;return t>J.PAGE_WIDTH||t+o<0||a>J.FULLBLEED_HEIGHT||a+l<-J.DANGER_ZONE_HEIGHT?null:{...e,x:t,y:a}})).filter((e=>e));a(o,!1)}),[a]);return{insertTextSet:a,insertTextSetByOffset:o}};const WZ=function(e){if(!e)return"00:00:00";let t=e/1e3;const n=parseInt(t/3600);t%=3600;const r=parseInt(t/60);return t%=60,`${re(n)}:${re(r)}:${re(t)}`};const VZ=function(e){if(!e)return 0;const t=e.split(":");if(3!==t.length)return 0;const n=parseFloat(t[2])+60*parseInt(t[1])+3600*parseInt(t[0]);return Math.round(1e3*n)};const $Z=function(){const{isEditing:e,isTrimMode:t,setEditingElementWithState:n,clearEditing:r}=Os((e=>{let{state:{isEditing:t,editingElementState:{isTrimMode:n}={}},actions:{setEditingElementWithState:r,clearEditing:a}}=e;return{isEditing:t,isTrimMode:n,setEditingElementWithState:r,clearEditing:a}})),{selectedElement:a}=xa((e=>{let{state:{selectedElements:t}}=e;return{selectedElement:1===t.length?t[0]:null}})),{actions:{getMediaById:o}}=Z(),[l,i]=(0,u.useState)(null),{isCurrentResourceUploading:s}=vi((e=>{let{state:{isCurrentResourceUploading:t}}=e;return{isCurrentResourceUploading:t}})),c=(0,u.useCallback)((()=>{const{resource:e}=a,{trimData:t}=e,n={element:a,resource:e,start:0,end:null};o&&t?.original?(i(null),o(t.original).then((e=>({element:a,resource:e,start:VZ(t.start),end:VZ(t.end)})),(()=>n)).then((e=>i(e)))):i(n)}),[o,a]),d=(0,u.useCallback)((()=>{e?r():(n(a.id,{isTrimMode:!0,hasEditMenu:!0,showOverflow:!1}),c()),(0,O.trackEvent)("video_trim_mode_toggled",{status:e?"closed":"open"})}),[e,r,n,a,c]),{isTranscodingEnabled:p}=Da(),m=(0,u.useMemo)((()=>{if("video"!==a?.type||!a?.resource)return!1;const{id:e,isExternal:t}=a.resource;return p&&!t&&!s(e)}),[a,p,s]);return{isTrimMode:Boolean(e&&t),hasTrimMode:m,toggleTrimMode:d,videoData:l}};const qZ=function(e){const[t,n]=(0,u.useState)(null),[r,a]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),[i,s]=(0,u.useState)(null),[c,d]=(0,u.useState)(null),[p,m]=(0,u.useState)(null),[f,g]=(0,u.useState)(null),[h,E]=(0,u.useState)(!1),b=(0,u.useRef)(!1);(0,u.useEffect)((()=>{f&&(b.current||(h?f.pause():(f.currentTime=r/1e3,f.play())))}),[f,h,r]);const y=f?f.paused:null;(0,u.useEffect)((()=>{h||(b.current=y)}),[y,h]),(0,u.useEffect)((()=>{if(f&&e)return f.addEventListener("timeupdate",c),f.addEventListener("loadedmetadata",o),()=>{f.removeEventListener("timeupdate",c),f.removeEventListener("loadedmetadata",o)};function t(e){f.currentTime=e/1e3,f.play()}function o(r){const o=Math.floor(1e3*r.target.duration);a(e.start),l(e.start),n(e.start),s(e.end??o),d(e.end??o),m(o),t(e.start)}function c(e){const a=Math.floor(1e3*e.target.currentTime);n(Math.min(a,i)),a>i&&!b.current&&t(r)}}),[r,i,e,f]);const _=(0,u.useCallback)((e=>{e=Math.min(i-100,e),e=Math.max(0,e),a(e),f.currentTime=e/1e3}),[f,i]),v=(0,u.useCallback)((e=>{e=Math.max(r+100,e),e=Math.min(p,e),s(e),f.currentTime=e/1e3}),[f,r,p]);return{hasChanged:(0,u.useMemo)((()=>r!==o||i!==c),[r,o,i,c]),currentTime:t,startOffset:r,endOffset:i,maxOffset:p,setStartOffset:_,setEndOffset:v,setVideoNode:g,setIsDraggingHandles:E}};const KZ=function VideoTrimProvider(e){let{children:t}=e;const{trimExistingVideo:n}=vi((e=>{let{actions:{trimExistingVideo:t}}=e;return{trimExistingVideo:t}})),{isTrimMode:r,hasTrimMode:a,toggleTrimMode:o,videoData:l}=$Z(),{hasChanged:i,currentTime:s,startOffset:d,endOffset:p,maxOffset:m,setStartOffset:f,setEndOffset:g,setVideoNode:h,setIsDraggingHandles:E}=qZ(l),b=(0,u.useCallback)((()=>{const{resource:e,element:t}=l;if(!e)return;const r=Math.round(p/1e3-d/1e3);n({resource:{...e,length:r,lengthFormatted:ae(r)},canvasResourceId:t.resource.id,elementId:t.id,start:WZ(d),end:WZ(p)}),(0,O.trackEvent)("video_trim",{original_length:e.length,new_length:r,start_offset:d,end_offset:p}),o()}),[p,d,n,o,l]),y={state:{videoData:l,hasChanged:i,isTrimMode:r,hasTrimMode:a,currentTime:s,startOffset:d,endOffset:p,maxOffset:m},actions:{performTrim:b,toggleTrimMode:o,setVideoNode:h,setStartOffset:f,setEndOffset:g,setIsDraggingHandles:E}};return c.createElement(PR.Provider,{value:y},t)},XZ=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1encx56-0"})(["grid-area:",";position:relative;overflow:hidden;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t}=e;return t})),QZ=(0,p.default)(XZ).attrs({area:"canv",zIndex:1}).withConfig({displayName:"layout__CanvasArea",componentId:"sc-1encx56-1"})([""]),JZ=(0,p.default)(XZ).attrs({area:"sidebar",zIndex:2}).withConfig({displayName:"layout__SidebarArea",componentId:"sc-1encx56-2"})([""]);const eW=function Workspace(e){let{header:t,footer:n}=e;const{editingElementState:r}=Os((e=>({editingElementState:e.state.editingElementState})));return c.createElement(KZ,null,c.createElement(Ir.RichTextProvider,{editingState:r},c.createElement(JZ,null,c.createElement(D,null,c.createElement(Bm,null))),c.createElement(QZ,null,c.createElement(D,null,c.createElement(jZ,{header:t,footer:n})))))},tW="OPEN_MENU",nW="CLOSE_MENU",rW="RESET",aW={isMenuOpen:!1,menuPosition:{x:0,y:0}};const oW=function(e,t){switch(t.type){case nW:return{...e,isMenuOpen:!1,menuPosition:aW.menuPosition};case tW:return{...e,isMenuOpen:!0,menuPosition:t.payload};case rW:return{...aW};default:return e}},lW=(0,Ze.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,nr.prettifyShortcut)("mod+z"));const iW=()=>{const e=mr((e=>{let{actions:t}=e;return t.undo})),{addAnimations:t,copySelectedElement:n,copiedElementState:r,selectedElement:a,selectedElementType:o,selectedElementAnimations:l,updateSelectedElements:i,isSelectedElementBackground:s}=xa((e=>{let{state:t,actions:n}=e;return{addAnimations:n.addAnimations,copiedElementState:t.copiedElementState,copySelectedElement:n.copySelectedElement,selectedElement:t.selectedElements?.[0],selectedElementType:t.selectedElements?.[0]?.type,isSelectedElementBackground:t.selectedElements?.[0]?.isBackground,selectedElementAnimations:t.selectedElementAnimations,updateSelectedElements:n.updateSelectedElements}})),c=(0,Er.useSnackbar)((e=>e.showSnackbar)),p=(0,u.useRef)(e);p.current=e;const m=(0,u.useCallback)((()=>{n(),c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Copied style.","web-stories"),onAction:()=>{p.current(),(0,O.trackEvent)("context_menu_action",{name:"undo_copy_styles",element:o,isBackground:s})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"copy_styles",element:o,isBackground:s})}),[n,c,o,s]),f=(0,u.useCallback)(((e,t)=>{i({properties:n=>{const r=c_(n,e,t),a=aR({...n,...r});return{...r,...a}}})}),[i]),g=CG({pushUpdate:f}),h=(0,u.useCallback)((()=>{const e=a?.id;if(!e||o!==r.type)return;const n=l.length?{...l[0],delete:!0}:void 0,u=r.animations.map((e=>({...e,id:(0,ue.default)(),targets:[a.id]})));if(t({animations:u}),"text"===r.type&&r.styles.content){const e=function(e,t){const{textStyles:n}=EC([e.styles],{textStyles:[],colors:[]},Be),{colors:r}=EC([e.styles],{textStyles:[],colors:[]},Fe),{content:a,...o}=e.styles;return{...o,...n[0],...r[0].color,animation:t,border:o.border||null}}(r,n);g(e)}else i({properties:e=>c_(e,{...r.styles,animation:n},!0)});c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Pasted style.","web-stories"),onAction:()=>{p.current(),(0,O.trackEvent)("context_menu_action",{name:"undo_paste_styles",element:o,isBackground:s})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"paste_styles",element:o,isBackground:s})}),[t,r,g,a,l,c,i,o,s]);return{copiedElementType:r?.type,handleCopyStyles:m,handlePasteStyles:h}},sW=()=>{const{clearBackgroundElement:e,duplicateElementsById:t,selectedElements:n,setBackgroundElement:r,updateElementsById:a}=xa((e=>{let{state:t,actions:n}=e;return{clearBackgroundElement:n.clearBackgroundElement,duplicateElementsById:n.duplicateElementsById,selectedElements:t.selectedElements,setBackgroundElement:n.setBackgroundElement,updateElementsById:n.updateElementsById}})),o=(0,Er.useSnackbar)((e=>e.showSnackbar)),l=Os((e=>{let{actions:t}=e;return t.setEditingElement})),i=mr((e=>{let{actions:t}=e;return t.undo})),s=(0,u.useRef)(i);s.current=i;return{handleDuplicateSelectedElements:(0,u.useCallback)((()=>{n.length&&(t({elementIds:n.map((e=>{let{id:t}=e;return t}))}),o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Duplicated elements.","web-stories"),onAction:()=>{s.current(),(0,O.trackEvent)("context_menu_action",{name:"undo_duplicate_elements",elements:n.map((e=>e.type))})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"duplicate_elements",elements:n.map((e=>e.type))}))}),[t,n,o]),handleOpenScaleAndCrop:(0,u.useCallback)((e=>{const t=n?.[0];t&&(l(t.id,e),(0,O.trackEvent)("context_menu_action",{name:"open_scale_and_crop",element:t.type,isBackground:t.isBackground}))}),[n,l]),handleSetPageBackground:(0,u.useCallback)((()=>{const e=n?.[0];e&&!e.isBackground&&(r({elementId:e.id}),o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Set page background.","web-stories"),onAction:()=>{s.current(),(0,O.trackEvent)("context_menu_action",{name:"undo_set_page_background",element:e.type,isBackground:e.isBackground})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"set_as_page_background",element:e.type,isBackground:e.isBackground}))}),[n,r,o]),handleRemovePageBackground:(0,u.useCallback)((()=>{const t=n?.[0];t&&t.isBackground&&(a({elementIds:[t.id],properties:e=>c_(e,{isBackground:!1,opacity:100,overlay:null},!0)}),e(),o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Removed page background.","web-stories"),onAction:()=>{s.current(),(0,O.trackEvent)("context_menu_action",{name:"undo_remove_page_background",elements:t.type,isBackground:t.isBackground})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"remove_media_from_background",element:t.type,isBackground:t.isBackground}))}),[e,n,o,a])}},cW=()=>{const{arrangeElement:e,elements:t,selectedElement:n}=xa((e=>{let{state:t,actions:n}=e;return{arrangeElement:n.arrangeElement,elements:t.currentPage?.elements||[],selectedElement:t.selectedElements?.[0]}})),r=t.findIndex((e=>{let{id:t}=e;return t===n?.id})),a=n&&!n.isBackground&&r>1,o=n&&!n.isBackground&&r<t.length-1,l=(0,u.useCallback)((()=>{if(!a)return;const t=1===r?r:r-1;e({elementId:n.id,position:t}),(0,O.trackEvent)("context_menu_action",{name:"send_backward",element:n.type,isBackground:n.isBackground})}),[e,a,r,n]),i=(0,u.useCallback)((()=>{a&&(e({elementId:n.id,position:1}),(0,O.trackEvent)("context_menu_action",{name:"send_to_back",element:n.type}))}),[e,a,n]),s=(0,u.useCallback)((()=>{if(!o)return;const a=r>=t.length-1?r:r+1;e({elementId:n.id,position:a}),(0,O.trackEvent)("context_menu_action",{name:"bring_forward",element:n.type})}),[e,o,r,t,n]),c=(0,u.useCallback)((()=>{o&&(e({elementId:n.id,position:t.length-1}),(0,O.trackEvent)("context_menu_action",{name:"bring_to_front",element:n.type}))}),[e,o,t,n]);return{canElementMoveBackwards:a,canElementMoveForwards:o,handleBringForward:s,handleBringToFront:c,handleSendBackward:l,handleSendToBack:i}},dW=()=>{const{addPageAt:e,currentPage:t,deleteCurrentPage:n,isSelectedElementBackground:r,pageLength:a,selectedElementType:o}=xa((e=>{let{state:t,actions:n}=e;return{addPageAt:n.addPageAt,currentPage:t.currentPage,deleteCurrentPage:n.deleteCurrentPage,isSelectedElementBackground:t.selectedElements?.[0]?.background||!1,pageLength:t.pages?.length||1,selectedElementType:t.selectedElements?.[0]?.type||null}}));return{handleAddPageAtPosition:(0,u.useCallback)((t=>{let n=Boolean(t)||0===t?t:a-1;n=n>a?a-1:n,n=n<0?0:n,e({page:(0,Hn.createPage)(),position:n}),(0,O.trackEvent)("context_menu_action",{name:"page_added",element:o,isBackground:r})}),[e,r,a,o]),handleDuplicatePage:(0,u.useCallback)((()=>{e({page:(0,Hn.duplicatePage)(t),position:null})}),[e,t]),handleDeletePage:(0,u.useCallback)((()=>{n(),(0,O.trackEvent)("context_menu_action",{name:"page_deleted",element:o,isBackground:r})}),[n,r,o])}},uW=()=>{const{addGlobalPreset:e}=_C({presetType:Be}),{addGlobalPreset:t}=_C({presetType:Fe}),n=mG({onEmpty:Mt}),{deleteGlobalColor:r}=MC({onEmpty:Mt}),a=xa((e=>{let{state:t}=e;return t.selectedElements?.[0]})),o=(0,Er.useSnackbar)((e=>e.showSnackbar)),l=mr((e=>{let{actions:t}=e;return t.undo}));(0,u.useRef)(l).current=l;return{handleAddTextPreset:(0,u.useCallback)((t=>{const r=e(t);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Saved style to "Saved Styles".',"web-stories"),onAction:()=>{n(r),(0,O.trackEvent)("context_menu_action",{name:"remove_text_preset",element:a?.type})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"add_text_preset",element:a?.type})}),[e,n,a?.type,o]),handleAddColorPreset:(0,u.useCallback)((e=>{const n=t(e);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Added color to "Saved Colors".',"web-stories"),onAction:()=>{r(n),(0,O.trackEvent)("context_menu_action",{name:"remove_color_preset",element:a?.type})},actionHelpText:lW}),(0,O.trackEvent)("context_menu_action",{name:"add_color_preset",element:a?.type})}),[t,r,a?.type,o])}};const pW=function RightClickMenuProvider(e){let{children:t}=e;const[{isMenuOpen:n,menuPosition:r},a]=(0,u.useReducer)(oW,aW),{handleCopyStyles:o,handlePasteStyles:l}=iW(),i=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation();let t=e?.clientX,n=e?.clientY;if(!t&&!n){const r=e.target.getBoundingClientRect();t=r.x,n=r.y}a({type:tW,payload:{x:t,y:n}}),(0,O.trackEvent)("context_menu_action",{name:"context_menu_opened"})}),[]),s=(0,u.useCallback)((()=>{n&&a({type:nW})}),[n]);(0,nr.useGlobalKeyDownEffect)({key:["mod+alt+o"]},(e=>{e.preventDefault(),o()}),[o]),(0,nr.useGlobalKeyDownEffect)({key:["mod+alt+p"]},(e=>{e.preventDefault(),l()}),[l]);const d=(0,u.useMemo)((()=>({isMenuOpen:n,menuPosition:r,onCloseMenu:s,onOpenMenu:i})),[s,i,n,r]);return c.createElement(ic.Provider,{value:d},t)};var mW=n(8682);const fW=(0,p.default)(Ve.Text).attrs({forwardedAs:"kbd",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"shortcut__StyledText",componentId:"sc-74dfi9-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const gW=function Shortcut(e){return c.createElement(fW,e)},hW=p.default.div.withConfig({displayName:"suffix__Suffix",componentId:"sc-1l1uahg-0"})(["position:relative;svg{width:32px;color:",";position:absolute;right:-14px;top:-16px;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),EW=hW;function bW(){return bW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bW.apply(this,arguments)}const yW=(0,p.default)(cP.default).withConfig({displayName:"item__StyledButton",componentId:"sc-p2jje0-0"})(["",""],(e=>{let{supportsIcon:t}=e;return t&&"\n    svg {\n      width: 32px;\n      position: absolute;\n      margin-left: -12px;\n    }\n    span {\n      padding-left: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  "}));const _W=(0,u.forwardRef)((function MenuItemWithRef(e,t){let{label:n,shortcut:r,icon:a,SuffixIcon:o,...l}=e;return c.createElement(yW,bW({ref:t},l),a,n,r&&c.createElement(gW,null,r.display),o&&c.createElement(EW,null,c.createElement(o,null)))}));_W.propTypes={label:Ea().oneOfType([Ea().string,Ea().object]),shortcut:Ea().shape({display:Ea().object.isRequired,title:Ea().string}),icon:Ea().node,SuffixIcon:Ea().object};const vW=_W;function wW(){return wW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wW.apply(this,arguments)}const TW=function SubMenuTrigger(e){let{openSubMenu:t,closeSubMenu:n,isSubMenuOpen:r,isRTL:a=!1,subMenuRef:o,parentMenuRef:l,...i}=e;const s=(0,u.useRef)(),d=(0,u.useRef)({}),{setFocusedId:p}=(0,mW.default)((e=>{let{actions:t}=e;return{setFocusedId:t.setFocusedId}})),m=e=>{const{x:t,y:n,width:r,height:a}=e.getBoundingClientRect(),{x:o,y:l}=d.current;if(void 0===o||void 0===l)return!0;return o<t-2||o>t+r+2||l<n-2||l>n+a+2},f=(0,u.useDebouncedCallback)((()=>{s.current&&o.current?.firstChild&&m(s.current)&&m(o.current.firstChild)&&n()}),200);(0,u.useEffect)((()=>{if(r&&o.current){const t=(e=o.current,Array.from(e.querySelectorAll(Ms.FOCUSABLE_SELECTORS.join(", "))));t[0].focus(),p(t[0].id)}var e}),[r,o,p]),(0,u.useEffect)((()=>{const e=l.current?.querySelector('[role="dialog"]');if(!r||!e)return;const t=e=>{d.current.x=e.clientX,d.current.y=e.clientY,f()};return e.addEventListener("pointermove",t),()=>{e.removeEventListener("pointermove",t)}}),[r,l,f]);const g=(0,u.useCallback)((e=>{const{code:o}=e;[Ms.KEYS.SPACE,Ms.KEYS.ENTER].includes(o)?r?n():t():(!a&&Ms.KEYS.RIGHT===o||(a&&Ms.KEYS.LEFT)===o)&&(r||t())}),[t,n,r,a]);return(0,nr.useKeyDownEffect)(s,{key:["enter","space","left","right"]},g,[g]),c.createElement(vW,wW({},i,{ref:s,onPointerEnter:t,onPointerLeave:()=>{d.current={},f()},onClick:e=>e.preventDefault(),"aria-haspopup":!0,"aria-expanded":r,dismissOnClick:!1}))},SW={ADD_NEW_PAGE_AFTER:(0,d.__)("Add New Page After","web-stories"),ADD_NEW_PAGE_BEFORE:(0,d.__)("Add New Page Before","web-stories"),ADD_TO_COLOR_PRESETS:(0,d.__)("Add Color to “Saved Colors”","web-stories"),ADD_TO_TEXT_PRESETS:(0,d.__)("Add Style to “Saved Styles”","web-stories"),BRING_FORWARD:(0,d.__)("Bring Forward","web-stories"),BRING_TO_FRONT:(0,d.__)("Bring to Front","web-stories"),BROWSE_STOCK_IMAGES_AND_VIDEO:(0,d.__)("Browse Stock Images and Video","web-stories"),BROWSE_PAGE_TEMPLATES:(0,d.__)("Browse Page Templates","web-stories"),CLEAR_IMAGE_STYLES:(0,d.__)("Clear Image Styles","web-stories"),CLEAR_SHAPE_STYLES:(0,d.__)("Clear Shape Styles","web-stories"),CLEAR_VIDEO_STYLES:(0,d.__)("Clear Video Styles","web-stories"),CLEAR_STYLES:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Clear style","Clear styles",e,"web-stories")},CHOOSE_IMAGE_OR_VIDEO:(0,d.__)("Choose Image or Video","web-stories"),COPY_IMAGE_STYLES:(0,d.__)("Copy Image Styles","web-stories"),COPY_SHAPE_STYLES:(0,d.__)("Copy Shape Styles","web-stories"),COPY_VIDEO_STYLES:(0,d.__)("Copy Video Styles","web-stories"),COPY_STYLES:(0,d.__)("Copy Style","web-stories"),DELETE_PAGE:(0,d.__)("Delete Page","web-stories"),DETACH_IMAGE_FROM_BACKGROUND:(0,d.__)("Detach Image From Background","web-stories"),DETACH_VIDEO_FROM_BACKGROUND:(0,d.__)("Detach Video From Background","web-stories"),DUPLICATE_PAGE:(0,d.__)("Duplicate Page","web-stories"),DUPLICATE_ELEMENTS:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Duplicate Element","Duplicate Elements",e,"web-stories")},PASTE_IMAGE_STYLES:(0,d.__)("Paste Image Styles","web-stories"),PASTE_SHAPE_STYLES:(0,d.__)("Paste Shape Styles","web-stories"),PASTE_VIDEO_STYLES:(0,d.__)("Paste Video Styles","web-stories"),PASTE_STYLES:(0,d.__)("Paste Style","web-stories"),SCALE_AND_CROP_BACKGROUND_IMAGE:(0,d.__)("Scale & Crop Background Image","web-stories"),SCALE_AND_CROP_BACKGROUND_VIDEO:(0,d.__)("Scale & Crop Background Video","web-stories"),SCALE_AND_CROP_IMAGE:(0,d.__)("Scale & Crop Image","web-stories"),SCALE_AND_CROP_VIDEO:(0,d.__)("Scale & Crop Video","web-stories"),SEND_BACKWARD:(0,d.__)("Send Backward","web-stories"),SEND_TO_BACK:(0,d.__)("Send to Back","web-stories"),SET_AS_PAGE_BACKGROUND:(0,d.__)("Set as Page Background","web-stories"),TRIM_VIDEO:(0,d.__)("Trim Video","web-stories"),UPLOAD_IMAGE_OR_VIDEO:(0,d.__)("Upload Image or Video","web-stories")},CW=(0,p.default)(Ve.Text).attrs({forwardedAs:"kbd",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"constants__StyledKbd",componentId:"sc-m1qol5-0"})(["color:inherit;:not(:last-child){margin-right:4px;}"]),IW={SEND_BACKWARD:{display:c.createElement(nr.Shortcut,{shortcut:"mod down",component:CW}),title:(0,nr.createShortcutAriaLabel)("mod down")},SEND_TO_BACK:{display:c.createElement(nr.Shortcut,{shortcut:"mod shift down",component:CW}),title:(0,nr.createShortcutAriaLabel)("mod shift down")},BRING_FORWARD:{display:c.createElement(nr.Shortcut,{shortcut:"mod up",component:CW}),title:(0,nr.createShortcutAriaLabel)("mod up")},BRING_TO_FRONT:{display:c.createElement(nr.Shortcut,{shortcut:"mod shift up",component:CW}),title:(0,nr.createShortcutAriaLabel)("mod shift up")},DELETE:{display:c.createElement(nr.Shortcut,{shortcut:"delete",component:CW}),title:(0,nr.createShortcutAriaLabel)("delete")},COPY_STYLES:{display:c.createElement(nr.Shortcut,{shortcut:"alt mod O",component:CW}),title:(0,nr.createShortcutAriaLabel)("alt mod O")},PASTE_STYLES:{display:c.createElement(nr.Shortcut,{shortcut:"alt mod P",component:CW}),title:(0,nr.createShortcutAriaLabel)("alt mod P")}},xW=(0,p.default)(Yg).withConfig({displayName:"useLayerSelect__ReversedIcon",componentId:"sc-169lxcx-0"})(["transform:rotate(180deg);"]);const AW=function(e){let{menuItemProps:t,menuPosition:n,isMenuOpen:r}=e;const{isRTL:a}=H(),[o,l]=(0,u.useState)(!1),i=Os((e=>{let{state:{nodesById:t}}=e;return t})),{currentPage:s,selectedElements:p,setSelectedElementsById:m}=xa((e=>{let{state:{currentPage:t,selectedElements:n},actions:{setSelectedElementsById:r}}=e;return{currentPage:t,selectedElements:n,setSelectedElementsById:r}})),f=(0,hc.default)((e=>{let{actions:{getBox:t}}=e;return t}));(0,u.useEffect)((()=>{r||l(!1)}),[r]);const{x:g,y:h}=n,E=(0,u.useCallback)((()=>{if(!s?.elements?.length||!Object.keys(i)?.length)return[];const e=new(ji().Vector)(g,h),t=s.elements.find((e=>{let{isBackground:t}=e;return t})),n=i[t.id],{x:r,y:a,width:o,height:l}=n.getBoundingClientRect(),c=new(ji().Box)(new(ji().Vector)(r,a),o,l).toPolygon(),d=-f(t).y,u=s.elements.map((e=>{if(e.isBackground)return{element:e,polygon:c};const{id:t,rotationAngle:n}=e;if(!i[t])return null;const r=f(e),a=new(ji().Vector)(c.pos.x+r.x+r.width/2,c.pos.y+d+r.y+r.height/2),o=new(ji().Box)(a,r.width,r.height).toPolygon(),l=new(ji().Vector)(-r.width/2,-r.height/2);return o.setOffset(l),o.setAngle(n*Math.PI/180),{element:e,polygon:o}})).map((t=>{let{element:n,polygon:r}=t;return ji().pointInPolygon(e,r)?n:null})).filter(Boolean);return u.reverse(),u}),[s,f,g,h,i]),b=(0,u.useMemo)((()=>{if(!r||0===p.length)return[];const e=E();return 1===e.length&&e[0].id===p[0].id?[]:e.map((e=>{const{id:n,isBackground:r,type:a}=e,{LayerContent:o}=(0,Hn.getDefinitionForType)(a);return{key:n,supportsIcon:!0,icon:p[0].id===n?c.createElement(zg.default,null):null,label:r?c.createElement("span",null,(0,d.__)("Background","web-stories")):c.createElement(o,{element:e}),onClick:()=>{m({elementIds:[n]}),(0,O.trackEvent)("context_menu_action",{name:"layer_selected",element:a,isBackground:r})},...t}}))}),[E,r,t,m,p]);return b.length>0?{label:(0,d.__)("Select Layer","web-stories"),openSubMenu:()=>l(!0),closeSubMenu:()=>l(!1),isSubMenuOpen:o,subMenuItems:o?b:[],SuffixIcon:a?xW:Yg,...t}:null},kW=p.default.div.withConfig({displayName:"shared__SubMenuContainer",componentId:"sc-anftx6-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0}));kW.propTypes={position:Ea().shape({x:Ea().number,y:Ea().number})};const OW=210,NW=(0,d.__)("Select a layer","web-stories");Ea().oneOfType([Ea().func,Ea().shape({current:Ea().instanceOf(Element)})]).isRequired;function PW(){return PW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PW.apply(this,arguments)}const RW=function ForegroundMediaMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElement:r}=xa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElement:t.selectedElements?.[0]}})),{handleCopyStyles:a,handlePasteStyles:o}=iW(),{handleDuplicateSelectedElements:l,handleOpenScaleAndCrop:i,handleSetPageBackground:s}=sW(),{canElementMoveBackwards:d,canElementMoveForwards:p,handleSendBackward:m,handleSendToBack:f,handleBringForward:g,handleBringToFront:h}=cW(),E=vi((e=>e.state.canTranscodeResource)),{hasTrimMode:b,toggleTrimMode:y}=RR((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),_=(0,u.useRef)(),{menuPosition:v,onCloseMenu:w}=sc(),T=AW({menuPosition:v,isMenuOpen:!0}),{closeSubMenu:S,isSubMenuOpen:C,subMenuItems:I,...x}=T||{},A="video"===r?.type,k=A?SW.SCALE_AND_CROP_VIDEO:SW.SCALE_AND_CROP_IMAGE,O=A?SW.COPY_VIDEO_STYLES:SW.COPY_IMAGE_STYLES,N=A?SW.PASTE_VIDEO_STYLES:SW.PASTE_IMAGE_STYLES,P=A&&b;return c.createElement(c.Fragment,null,T&&c.createElement(c.Fragment,null,c.createElement(TW,PW({closeSubMenu:S,parentMenuRef:t,subMenuRef:_,isSubMenuOpen:C},x)),c.createElement(kW,{ref:_,position:{x:(t.current.firstChild?.offsetWidth||OW)+2,y:0}},c.createElement(YN.default,{onDismiss:w,isOpen:C,onCloseSubMenu:S,"aria-label":NW,isSubMenu:!0,parentMenuRef:t},I.map((e=>{let{key:t,...n}=e;return c.createElement(vW,PW({key:t},n))})))),c.createElement(hP.default,null)),c.createElement(cP.default,{onClick:l},SW.DUPLICATE_ELEMENTS(1)),c.createElement(hP.default,null),c.createElement(cP.default,{disabled:!d,onClick:m},SW.SEND_BACKWARD,c.createElement(gW,null,IW.SEND_BACKWARD.display)),c.createElement(cP.default,{disabled:!d,onClick:f},SW.SEND_TO_BACK,c.createElement(gW,null,IW.SEND_TO_BACK.display)),c.createElement(cP.default,{disabled:!p,onClick:g},SW.BRING_FORWARD,c.createElement(gW,null,IW.BRING_FORWARD.display)),c.createElement(cP.default,{disabled:!p,onClick:h},SW.BRING_TO_FRONT,c.createElement(gW,null,IW.BRING_TO_FRONT.display)),c.createElement(hP.default,null),c.createElement(cP.default,{onClick:s},SW.SET_AS_PAGE_BACKGROUND),c.createElement(cP.default,{onClick:i},k),P&&c.createElement(cP.default,{disabled:!E(r?.resource),onClick:y},SW.TRIM_VIDEO),c.createElement(cP.default,{onClick:a},O,c.createElement(gW,null,IW.COPY_STYLES.display)),c.createElement(cP.default,{disabled:n!==r?.type,onClick:o},N,c.createElement(gW,null,IW.PASTE_STYLES.display)))};const MW=function MultipleElementsMenu(){const{handleDuplicateSelectedElements:e}=sW();return c.createElement(cP.default,{onClick:e},SW.DUPLICATE_ELEMENTS(2))};function LW(){return LW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LW.apply(this,arguments)}const DW=function(e){let{parentMenuRef:t}=e;const{currentPageIndex:n,canDeletePage:r,selectedElement:a}=xa((e=>{let{state:t}=e;return{currentPageIndex:t.currentPageIndex,canDeletePage:t.pages.length>1,selectedElement:t.selectedElements?.[0]}})),{handleOpenScaleAndCrop:o,handleRemovePageBackground:l}=sW(),{handleAddPageAtPosition:i,handleDeletePage:s,handleDuplicatePage:d}=dW(),p=vi((e=>e.state.canTranscodeResource)),{hasTrimMode:m,toggleTrimMode:f}=RR((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),g=(0,u.useRef)(),{menuPosition:h,onCloseMenu:E}=sc(),b=AW({menuPosition:h,isMenuOpen:!0}),{closeSubMenu:y,isSubMenuOpen:_,subMenuItems:v,...w}=b||{},T=a?.isDefaultBackground,S="video"===a?.type,C=S?SW.DETACH_VIDEO_FROM_BACKGROUND:SW.DETACH_IMAGE_FROM_BACKGROUND,I=S?SW.SCALE_AND_CROP_BACKGROUND_VIDEO:SW.SCALE_AND_CROP_BACKGROUND_IMAGE,x=S&&m;return c.createElement(c.Fragment,null,b&&c.createElement(c.Fragment,null,c.createElement(TW,LW({closeSubMenu:y,parentMenuRef:t,subMenuRef:g,isSubMenuOpen:_},w)),c.createElement(kW,{ref:g,position:{x:(t.current.firstChild?.offsetWidth||OW)+2,y:0}},c.createElement(YN.default,{onDismiss:E,isOpen:_,onCloseSubMenu:y,"aria-label":NW,isSubMenu:!0,parentMenuRef:t},v.map((e=>{let{key:t,...n}=e;return c.createElement(vW,LW({key:t},n))})))),c.createElement(hP.default,null)),c.createElement(cP.default,{disabled:T,onClick:l},C),c.createElement(cP.default,{disabled:T,onClick:o},I),c.createElement(hP.default,null),x&&c.createElement(c.Fragment,null,c.createElement(cP.default,{disabled:!p(a?.resource),onClick:f},C),c.createElement(hP.default,null)),c.createElement(cP.default,{onClick:()=>i(n+1)},SW.ADD_NEW_PAGE_AFTER),c.createElement(cP.default,{onClick:()=>i(n)},SW.ADD_NEW_PAGE_BEFORE),c.createElement(cP.default,{onClick:d},SW.DUPLICATE_PAGE),c.createElement(cP.default,{disabled:!r,onClick:s},SW.DELETE_PAGE))};function BW(){return BW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BW.apply(this,arguments)}const FW=function ShapeMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=xa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=iW(),{handleDuplicateSelectedElements:l}=sW(),{canElementMoveBackwards:i,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:f}=cW(),{handleAddColorPreset:g}=uW(),h=(0,u.useRef)(),{menuPosition:E,onCloseMenu:b}=sc(),y=AW({menuPosition:E,isMenuOpen:!0}),{closeSubMenu:_,isSubMenuOpen:v,subMenuItems:w,...T}=y||{};return c.createElement(c.Fragment,null,y&&c.createElement(c.Fragment,null,c.createElement(TW,BW({closeSubMenu:_,parentMenuRef:t,subMenuRef:h,isSubMenuOpen:v},T)),c.createElement(kW,{ref:h,position:{x:(t.current.firstChild?.offsetWidth||OW)+2,y:0}},c.createElement(YN.default,{onDismiss:b,isOpen:v,onCloseSubMenu:_,"aria-label":NW,isSubMenu:!0,parentMenuRef:t},w.map((e=>{let{key:t,...n}=e;return c.createElement(vW,BW({key:t},n))})))),c.createElement(hP.default,null)),c.createElement(cP.default,{onClick:l},SW.DUPLICATE_ELEMENTS(1)),c.createElement(hP.default,null),c.createElement(cP.default,{disabled:!i,onClick:d},SW.SEND_BACKWARD,c.createElement(gW,null,IW.SEND_BACKWARD.display)),c.createElement(cP.default,{disabled:!i,onClick:p},SW.SEND_TO_BACK,c.createElement(gW,null,IW.SEND_TO_BACK.display)),c.createElement(cP.default,{disabled:!s,onClick:m},SW.BRING_FORWARD,c.createElement(gW,null,IW.BRING_FORWARD.display)),c.createElement(cP.default,{disabled:!s,onClick:f},SW.BRING_TO_FRONT,c.createElement(gW,null,IW.BRING_TO_FRONT.display)),c.createElement(hP.default,null),c.createElement(cP.default,{onClick:a},SW.COPY_SHAPE_STYLES,c.createElement(gW,null,IW.COPY_STYLES.display)),c.createElement(cP.default,{disabled:n!==r,onClick:o},SW.PASTE_SHAPE_STYLES,c.createElement(gW,null,IW.PASTE_STYLES.display)),c.createElement(cP.default,{onClick:g},SW.ADD_TO_COLOR_PRESETS))};function HW(){return HW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HW.apply(this,arguments)}const UW=function StickerMenu(e){let{parentMenuRef:t}=e;const{handleDuplicateSelectedElements:n}=sW(),{canElementMoveBackwards:r,canElementMoveForwards:a,handleSendBackward:o,handleSendToBack:l,handleBringForward:i,handleBringToFront:s}=cW(),d=(0,u.useRef)(),{menuPosition:p,onCloseMenu:m}=sc(),f=AW({menuPosition:p,isMenuOpen:!0}),{closeSubMenu:g,isSubMenuOpen:h,subMenuItems:E,...b}=f||{};return c.createElement(c.Fragment,null,f&&c.createElement(c.Fragment,null,c.createElement(TW,HW({closeSubMenu:g,parentMenuRef:t,subMenuRef:d,isSubMenuOpen:h},b)),c.createElement(kW,{ref:d,position:{x:(t.current.firstChild?.offsetWidth||OW)+2,y:0}},c.createElement(YN.default,{onDismiss:m,isOpen:h,onCloseSubMenu:g,"aria-label":NW,isSubMenu:!0,parentMenuRef:t},E.map((e=>{let{key:t,...n}=e;return c.createElement(vW,HW({key:t},n))})))),c.createElement(hP.default,null)),c.createElement(cP.default,{onClick:n},SW.DUPLICATE_ELEMENTS(1)),c.createElement(hP.default,null),c.createElement(cP.default,{disabled:!r,onClick:o},SW.SEND_BACKWARD,c.createElement(gW,null,IW.SEND_BACKWARD.display)),c.createElement(cP.default,{disabled:!r,onClick:l},SW.SEND_TO_BACK,c.createElement(gW,null,IW.SEND_TO_BACK.display)),c.createElement(cP.default,{disabled:!a,onClick:i},SW.BRING_FORWARD,c.createElement(gW,null,IW.BRING_FORWARD.display)),c.createElement(cP.default,{disabled:!a,onClick:s},SW.BRING_TO_FRONT,c.createElement(gW,null,IW.BRING_TO_FRONT.display)))};function zW(){return zW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zW.apply(this,arguments)}const GW=function TextMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=xa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=iW(),{handleDuplicateSelectedElements:l}=sW(),{canElementMoveBackwards:i,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:f}=cW(),{handleAddColorPreset:g,handleAddTextPreset:h}=uW(),E=(0,u.useRef)(),{menuPosition:b,onCloseMenu:y}=sc(),_=AW({menuPosition:b,isMenuOpen:!0}),{closeSubMenu:v,isSubMenuOpen:w,subMenuItems:T,...S}=_||{};return c.createElement(c.Fragment,null,_&&c.createElement(c.Fragment,null,c.createElement(TW,zW({closeSubMenu:v,parentMenuRef:t,subMenuRef:E,isSubMenuOpen:w},S)),c.createElement(kW,{ref:E,position:{x:(t.current.firstChild?.offsetWidth||OW)+2,y:0}},c.createElement(YN.default,{onDismiss:y,isOpen:w,onCloseSubMenu:v,"aria-label":NW,isSubMenu:!0,parentMenuRef:t},T.map((e=>{let{key:t,...n}=e;return c.createElement(vW,zW({key:t},n))})))),c.createElement(hP.default,null)),c.createElement(cP.default,{onClick:l},SW.DUPLICATE_ELEMENTS(1)),c.createElement(hP.default,null),c.createElement(cP.default,{disabled:!i,onClick:d},SW.SEND_BACKWARD,c.createElement(gW,null,IW.SEND_BACKWARD.display)),c.createElement(cP.default,{disabled:!i,onClick:p},SW.SEND_TO_BACK,c.createElement(gW,null,IW.SEND_TO_BACK.display)),c.createElement(cP.default,{disabled:!s,onClick:m},SW.BRING_FORWARD,c.createElement(gW,null,IW.BRING_FORWARD.display)),c.createElement(cP.default,{disabled:!s,onClick:f},SW.BRING_TO_FRONT,c.createElement(gW,null,IW.BRING_TO_FRONT.display)),c.createElement(hP.default,null),c.createElement(cP.default,{onClick:a},SW.COPY_STYLES,c.createElement(gW,null,IW.COPY_STYLES.display)),c.createElement(cP.default,{disabled:n!==r,onClick:o},SW.PASTE_STYLES,c.createElement(gW,null,IW.PASTE_STYLES.display)),c.createElement(cP.default,{onClick:h},SW.ADD_TO_TEXT_PRESETS),c.createElement(cP.default,{onClick:g},SW.ADD_TO_COLOR_PRESETS))},jW=(0,u.createContext)({tabs:{}});const YW=function(e){return(0,u.useContextSelector)(jW,e??u.identity)};const ZW=function(){const{insertElement:e}=YW((e=>({insertElement:e.actions.insertElement}))),t=(0,u.useCallback)(((t,n)=>{s_.default.set(t.id,{url:n,type:"cached"}),e(t.type,{resource:t})}),[e]),n=(0,u.useCallback)((e=>{t(e,e.sizes?.medium?.source_url||e.src)}),[t]);return{insertMediaElement:t,onSelect:n}};async function WW(e){const t=await n(38803)(`./${e}.json`);return(0,tr.migrate)(t.default,t.default.version).pages.reduce(((t,n)=>{const r={minX:1/0,maxX:0,minY:1/0,maxY:0},a=n.elements.filter((e=>!e.isBackground&&Boolean(function(e,t){return e.minX=Math.min(e.minX,t.x),e.maxX=Math.max(e.maxX,t.x+t.width),e.minY=Math.min(e.minY,t.y),e.maxY=Math.max(e.maxY,t.y+t.height),e}(r,e))));return[...t,{textSetFonts:n.fonts,id:n.id,textSetCategory:e,elements:a.map((e=>({...e,normalizedOffsetX:e.x-r.minX,normalizedOffsetY:e.y-r.minY,textSetWidth:r.maxX-r.minX,textSetHeight:r.maxY-r.minY})))}]}),[])}var VW=n(52829),$W=n(65727);const qW=(0,p.default)($W.default).withConfig({displayName:"searchInput__StyledSearchInput",componentId:"sc-145nauf-0"})(["input{",";}"],Hu);const KW=function WrappedSearchInput(e){let{initialValue:t,placeholder:n,onSearch:r,disabled:a=!1,incremental:o=!1,delayMs:l=500}=e;const[i,s]=(0,u.useState)(t),p=(0,u.useDebouncedCallback)((()=>{r(i)}),l),m=(0,u.useCallback)((e=>{o&&l?p():r(e)}),[p,r,l,o]),f=(0,u.useCallback)((e=>{const t=e.target.value;s(t),(o||""===t)&&m(t)}),[m,o]),g=(0,u.useCallback)((()=>{s(""),m("")}),[m]),h=(0,u.useCallback)((e=>{e.preventDefault(),m(i)}),[m,i]),E=i.length>0;return c.createElement("form",{onSubmit:h},c.createElement(qW,{inputValue:i,placeholder:n,onChange:f,handleClearInput:g,disabled:a,ariaClearLabel:(0,d.__)("Clear Search","web-stories"),isOpen:E,"aria-label":(0,d.__)("Search","web-stories")}))},XW=p.default.div.withConfig({displayName:"section__Container",componentId:"sc-emh1dh-0"})(["position:relative;margin-top:28px;margin-bottom:28px;&:first-child{margin-top:0px;}"]),QW=(0,p.default)(Lu.Headline).attrs({as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"section__Title",componentId:"sc-emh1dh-1"})(["flex:1 1 auto;color:",";margin-bottom:28px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));function JW(e){let{title:t,children:n,...r}=e;return c.createElement(XW,r,c.createElement(QW,null,t),n)}p.default.h3.withConfig({displayName:"common__Title",componentId:"sc-q5ifvb-0"})(["color:",";margin:0;font-size:19px;line-height:1.4;flex:3 0 0;display:flex;align-items:center;padding:2px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),p.default.div.withConfig({displayName:"common__Header",componentId:"sc-q5ifvb-1"})(["display:flex;margin:0 0 25px;"]);var eV=n(32214);const tV=function(e){let{sectionRef:t,innerContainerRef:n,isExpanded:r,setFocusedRowOffset:a,collapsedHeight:o,bottomMargin:l,topMargin:i}=e;(0,u.useLayoutEffect)((()=>{if(!t.current||!n.current)return;let e;e=r?`${n.current.offsetHeight+i+l}px`:`${o}px`,t.current.style.height=e,t.current.style.minHeight=e,a(0)}),[l,o,n,r,t,a,i])};const nV=function(e){let{innerContainerRef:t,isExpanded:n,setFocusedRowOffset:r,selectedItemId:a,itemRefs:o,offsetSpacing:l=0}=e;(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null;!n&&e&&r(e?.offsetTop-l||0)}),[t,n,o,l,a,r]),(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null,r=e?.offsetTop||0;for(const t of o.current){if(!t)continue;const a=e&&t.offsetTop===r;!e||a||n?t.classList.remove("invisible"):t.classList.add("invisible")}}),[t,n,a,o])},rV=p.default.div.withConfig({displayName:"chipGroup__Section",componentId:"sc-emvo4b-0"})(["height:","px;min-height:","px;background-color:",";display:flex;flex-direction:column;align-items:flex-start;flex:0 1 auto;position:relative;transition:height 0.2s,min-height 0.2s;"],80,80,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),aV=p.default.div.withConfig({displayName:"chipGroup__Container",componentId:"sc-emvo4b-1"})(["overflow:hidden;margin:","px 12px ","px 24px;"],16,20),oV=p.default.div.withConfig({displayName:"chipGroup__InnerContainer",componentId:"sc-emvo4b-2"})(["display:flex;justify-content:center;flex-wrap:wrap;position:relative;padding:4px 0;transition:transform 0.2s;column-gap:8px;row-gap:14px;"]),lV=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE}).withConfig({displayName:"chipGroup__ExpandButton",componentId:"sc-emvo4b-3"})(["display:flex;position:absolute;bottom:-24px;background:",";max-height:none;width:32px;height:32px;"," visibility:inherit;align-self:center;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{isExpanded:t}=e;return t&&"transform: scaleY(-1);"})),iV=e=>{let{items:t,selectedItemId:n,selectItem:r,deselectItem:a,ariaLabel:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(),p=(0,u.useRef)(),m=(0,u.useRef)([]),[f,g]=(0,u.useState)(0),h=(0,u.useCallback)(((e,t)=>{e&&null!==t?a():(i(!1),r(t))}),[a,r]),E=(0,u.useCallback)((()=>i((e=>!e))),[]);tV({sectionRef:s,innerContainerRef:p,isExpanded:l,setFocusedRowOffset:g,collapsedHeight:80,bottomMargin:20,topMargin:16}),nV({isExpanded:l,innerContainerRef:p,selectedItemId:n,setFocusedRowOffset:g,itemRefs:m,offsetSpacing:4});const b=t.length>0;cC({ref:s},[l]),(0,nr.useKeyDownEffect)(s,l?"":"down",(()=>b&&i(!0)),[l,b]);const y=(0,u.useMemo)((()=>`pill-group-${(0,ue.default)()}`),[]);return c.createElement(rV,{ref:s},b&&c.createElement(c.Fragment,null,c.createElement(aV,{id:y,isExpanded:l,role:"listbox","aria-label":o||(0,d.__)("List of filtering options","web-stories")},c.createElement(oV,{role:"presentation",ref:p,style:{transform:`translateY(-${f}px`}},t.map(((e,t)=>{const{id:r,label:a}=e,o=r===n,l=o||!o&&0===t?0:-1;return c.createElement(eV.Chip,{key:r,role:"option",ref:e=>{m.current[r]=e},active:o,"aria-selected":o,onClick:()=>h(o,r),tabIndex:l},a)})))),c.createElement(lV,{onClick:E,isExpanded:l,"aria-controls":y,"aria-expanded":l,"aria-label":(0,d.__)("Expand","web-stories")},c.createElement(Wg.default,null))))},sV="1em",cV=p.default.section.attrs((e=>{let{isActive:t}=e;return{role:"tabpanel","aria-expanded":t,hidden:!t}})).withConfig({displayName:"shared__Pane",componentId:"sc-10fhorr-0"})(["padding:1.5em ",";",""],sV,(e=>{let{isOverflowScrollable:t=!1}=e;return t&&(0,p.css)(["overflow-y:scroll;height:100%;"])}));function dV(e){return`library-pane-${e}`}function uV(e){return`library-tab-${e}`}const pV=p.default.div.withConfig({displayName:"shared__LoadingContainer",componentId:"sc-10fhorr-1"})(["display:flex;justify-content:center;margin-top:18px;"]),mV=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.ICON}).withConfig({displayName:"shared__ActionButton",componentId:"sc-10fhorr-2"})(["display:flex;align-items:center;position:absolute;top:calc(50% - ","px);right:calc(50% - ","px);color:",";border-radius:",";width:","px;height:","px;opacity:",";"],8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round}),16,16,(e=>{let{$display:t}=e;return t?"1":"0"})),fV=p.default.div.withConfig({displayName:"shared__PageTemplateTitleContainer",componentId:"sc-10fhorr-3"})(["position:absolute;bottom:0;width:100%;padding:8px;background-color:",";opacity:",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{isActive:t}=e;return t?1:0})),gV=p.default.div.withConfig({displayName:"styles__PaneInner",componentId:"sc-18rwr03-0"})(["height:100%;display:flex;flex-direction:column;"]),hV=p.default.div.withConfig({displayName:"styles__PaneHeader",componentId:"sc-18rwr03-1"})(["padding-top:24px;flex:0 1 auto;"]),EV=p.default.div.withConfig({displayName:"styles__GalleryContainer",componentId:"sc-18rwr03-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;"]),bV=p.default.div.withConfig({displayName:"styles__MediaGalleryContainer",componentId:"sc-18rwr03-3"})(["overflow-y:scroll;overflow-x:hidden;padding:0 ",";margin-top:1em;position:relative;width:100%;flex:1 1 auto;min-height:100px;"],sV),yV=p.default.div.withConfig({displayName:"styles__MediaGalleryInnerContainer",componentId:"sc-18rwr03-4"})(["width:calc(100% + ","px);"],x.SCROLLBAR_WIDTH),_V=p.default.div.withConfig({displayName:"styles__MediaGalleryLoadingPill",componentId:"sc-18rwr03-5"})(["display:block;position:absolute;bottom:20px;left:60px;right:60px;width:240px;text-align:center;padding:8px 80px;background-color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.black,.4)})),vV=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"styles__MediaGalleryMessage",componentId:"sc-18rwr03-6"})(["color:",";padding:1em;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),wV=(0,p.default)(cV).withConfig({displayName:"styles__StyledPane",componentId:"sc-18rwr03-7"})(["height:100%;padding:0;overflow:hidden;"]),TV=p.default.div.withConfig({displayName:"styles__SearchInputContainer",componentId:"sc-18rwr03-8"})(["padding:0 ",";"],sV);var SV=n(63240),CV=n(38823);const IV=function DeleteDialog(e){let{mediaId:t,type:n,onClose:r}=e;const{actions:{deleteMedia:a}}=Z(),{showSnackbar:o}=(0,Er.useSnackbar)(),{deleteMediaElement:l}=vi((e=>{let{actions:{deleteMediaElement:t}}=e;return{deleteMediaElement:t}})),{deleteElementsByResourceId:i}=xa((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),s=(0,u.useCallback)((async()=>{r();try{await a(t),l({id:t}),i({id:t})}catch(e){(0,O.trackError)("local_media_deletion",e.message),o({message:(0,d.__)("Failed to delete media item.","web-stories"),dismissible:!0})}}),[a,l,i,t,r,o]),p=(0,d.__)("Delete Image?","web-stories"),m=(0,d.__)("Delete Video?","web-stories"),f=(0,d.__)("You are about to permanently delete this image from your site. The image will appear broken in any content that uses it. ","web-stories"),g=(0,d.__)("You are about to permanently delete this video from your site. The video will appear broken in any content that uses it. ","web-stories");return c.createElement(y,{isOpen:!0,onClose:r,title:"image"===n?p:m,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:s,primaryText:(0,d.__)("Delete","web-stories"),maxWidth:512},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},"image"===n?f:g),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,d.__)("This action can not be undone.","web-stories")))},xV=(0,p.css)(["display:flex;width:","px;margin-right:28px;"],152),AV=p.default.img.withConfig({displayName:"mediaEditDialog__Image",componentId:"sc-ctku7j-0"})(["",""],xV),kV=p.default.video.withConfig({displayName:"mediaEditDialog__Video",componentId:"sc-ctku7j-1"})(["",""],xV),OV=p.default.div.withConfig({displayName:"mediaEditDialog__DialogBody",componentId:"sc-ctku7j-2"})(["display:flex;justify-content:left;align-items:flex-start;"]),NV=p.default.div.withConfig({displayName:"mediaEditDialog__MetadataTextContainer",componentId:"sc-ctku7j-3"})(["display:flex;flex-direction:column;margin:0 4px;"]),PV=(0,p.default)(Ve.Text).withConfig({displayName:"mediaEditDialog__DateText",componentId:"sc-ctku7j-4"})(["margin-bottom:8px;"]),RV=(0,p.default)(tT).withConfig({displayName:"mediaEditDialog__AssistiveTextArea",componentId:"sc-ctku7j-5"})(["margin:20px 0 4px;"]),MV=(0,d.__)("Edit Image","web-stories"),LV=(0,d.__)("Edit Video","web-stories"),DV=(0,d.__)("Assistive text","web-stories"),BV=(0,d.__)("Video description","web-stories"),FV=(0,d.__)("Describe the appearance and function of the image. Leave empty if the image is purely decorative.","web-stories"),HV=(0,d.__)("For indexability and accessibility. Include any burned-in text inside the video.","web-stories");const UV=function MediaEditDialog(e){let{resource:t,onClose:n}=e;const{id:r,src:a,creationDate:o,width:l,height:i,type:s,alt:p,poster:m,mimeType:f}=t,{actions:{updateMedia:g}}=Z(),{updateMediaElement:h}=vi((e=>{let{actions:{updateMediaElement:t}}=e;return{updateMediaElement:t}})),{showSnackbar:E}=(0,Er.useSnackbar)(),[b,_]=(0,u.useState)(p),v=(0,Pd.toDate)(o),w=(0,u.useCallback)((e=>{_(e.target.value)}),[]),T=(0,u.useCallback)((async()=>{try{await g(r,{altText:b}),h({id:r,data:{alt:b}}),n()}catch(e){(0,O.trackError)("local_media_edit",e.message),E({message:(0,d.__)("Failed to update, please try again.","web-stories"),dismissible:!0})}}),[b,r,n,E,g,h]),S="image"===s;return c.createElement(y,{isOpen:!0,onClose:n,title:S?MV:LV,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:T,primaryText:(0,d.__)("Save","web-stories")},c.createElement(OV,null,"image"===s?c.createElement(AV,{src:(0,Eo.default)(152,t),alt:p,loading:"lazy",crossOrigin:"anonymous",decoding:"async"}):c.createElement(kV,{key:a,crossOrigin:"anonymous",poster:m,preload:"metadata",muted:!0},c.createElement("source",{src:a,type:f})),c.createElement(NV,null,(0,Od.default)(v)&&c.createElement(PV,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,Ze.default)(
/* translators: %s: upload date of media item. */
(0,d.__)("Uploaded: %s","web-stories"),(0,Dd.default)(o))),c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,Ze.default)(
/* translators: 1: image width. 2: image height. */
(0,d.__)("%1$d x %2$d pixels","web-stories"),l,i)),c.createElement(RV,{value:b,"aria-label":S?DV:BV,type:"text",placeholder:S?DV:BV,onChange:w}),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},S?FV:HV))))},zV=(0,p.default)(mV).withConfig({displayName:"dropDownMenu__MoreButton",componentId:"sc-1eq0xdj-0"})(["top:4px;right:4px;"]),GV=p.default.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-1eq0xdj-1"})(["margin-top:10px;"]),jV=p.default.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-1eq0xdj-2"})(["z-index:1;"]),YV=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),ZV="edit",WV="delete";const VV=function DropDownMenu(e){let{resource:t,display:n,isMenuOpen:r,onMenuOpen:a,onMenuCancelled:o,onMenuSelected:l,setParentActive:i=VO.noop}=e;const s=[{group:[{label:(0,d.__)("Edit meta data","web-stories"),value:ZV},{label:(0,d.__)("Delete from library","web-stories"),value:WV}]}],[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),h=(0,u.useRef)(),E=(0,u.useCallback)((()=>{o(),h.current?.focus(),i()}),[o,i]),{canTranscodeResource:b}=vi((e=>{let{state:{canTranscodeResource:t}}=e;return{canTranscodeResource:t}})),y=(0,u.useCallback)((()=>{m(!1),E()}),[m,E]),_=(0,u.useCallback)((()=>{g(!1),E()}),[g,E]);cC({ref:h.current||null},[],3);const v=os();(0,nr.useKeyDownEffect)(h.current||null,"tab",v,[v]);const w=(0,u.useMemo)((()=>`list-${(0,ue.default)()}`),[]),T=(0,u.useMemo)((()=>`button-${(0,ue.default)()}`),[]);return b(t)&&c.createElement(jV,null,c.createElement(zV,{ref:h,onClick:a,"aria-label":(0,d.__)("More","web-stories"),"aria-pressed":r,"aria-haspopup":!0,"aria-expanded":r,"aria-owns":r?w:null,id:T,$display:n,tabIndex:n||r?0:-1},c.createElement(Ch,null)),(n||r)&&c.createElement(PT.Popup,{anchor:h,placement:_d.PLACEMENT.BOTTOM_START,isOpen:r},c.createElement(GV,null,c.createElement(YI.Menu,{parentId:T,listId:w,onMenuItemClick:(e,t)=>{switch(l(),t){case ZV:g(!0);break;case WV:m(!0)}},options:s,onDismissMenu:E,hasMenuRole:!0,menuStylesOverride:YV}))),p&&c.createElement(IV,{mediaId:t.id,type:t.type,onClose:y}),f&&c.createElement(UV,{resource:t,onClose:_}))},$V=(0,p.default)(Ve.Text).withConfig({displayName:"attribution__StyledText",componentId:"sc-dg18hp-0"})(["color:",";"],(e=>{let{theme:t,active:n}=e;return(0,We.rgba)(t.colors.standard.white,n?1:.6)})),qV=p.default.a.withConfig({displayName:"attribution__Link",componentId:"sc-dg18hp-1"})(["display:block;position:absolute;left:0;bottom:0;width:100%;padding:8px;background-color:",";text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-decoration:none;"],(e=>{let{theme:t,active:n}=e;return(0,We.rgba)(t.colors.bg.primary,n?.8:.6)})),KV=e=>{let{author:t,url:n}=e;const[r,a]=(0,u.useState)(!1),o=()=>a(!0),l=()=>a(!1);return c.createElement(qV,{title:t,active:r,onPointerEnter:o,onFocus:o,onPointerLeave:l,onBlur:l,href:n,target:"_blank",rel:"noreferrer"},c.createElement($V,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t))};function XV(){return XV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XV.apply(this,arguments)}const QV=p.default.div.withConfig({displayName:"libraryMoveable__TargetBox",componentId:"sc-jgbz52-0"})(["position:absolute;width:100%;height:100%;top:0;z-index:1;cursor:pointer;"]);const JV=function LibraryMoveable(e){let{type:t,elementProps:n={},handleDrag:r,handleDragEnd:a,onClick:o=Mt,cloneElement:l,cloneProps:i,elements:s=[],active:d=!1}=e;const p=l,[m,f]=(0,u.useState)(!1),[g,h]=(0,u.useState)(!1),[E,b]=(0,u.useState)(!1),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useRef)(null),T=(0,u.useRef)(null),S=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{setZoomSetting:x}=Vi((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),A=ls(),{backgroundElement:k}=xa((e=>({backgroundElement:e.state.currentPage?.elements?.[0]??{}}))),{fullbleedContainer:O,nodesById:N,pageContainer:P}=Os((e=>({fullbleedContainer:e.state.fullbleedContainer,pageContainer:e.state.pageContainer,nodesById:e.state.nodesById}))),{activeDropTargetId:R,setDraggingResource:M}=zi((e=>{let{state:{activeDropTargetId:t},actions:{setDraggingResource:n}}=e;return{activeDropTargetId:t,setDraggingResource:n}})),{clearTransforms:L,pushTransform:D}=(0,C.useTransform)((e=>({clearTransforms:e.actions.clearTransforms,pushTransform:e.actions.pushTransform}))),B={translate:[0,0]},{insertTextSetByOffset:F}=ZZ(),H=(0,u.useRef)({}),U=(0,u.useCallback)((()=>{_.current.style.transform=null,y.current.style.transform=null,y.current.style.opacity=0,f(!1),L(),M(null)}),[M,L]);(0,nr.useKeyDownEffect)(m?document.body:{current:null},"esc",(()=>{h(!0),U()}),[m,U]);const z=(0,u.useCallback)((()=>{let e=0,t=0;for(let n=w.current;n;n=n.offsetParent)e+=n.offsetLeft,t+=n.offsetTop;return{offsetX:e,offsetY:t}}),[w]);_m({node:_.current,eventData:{...we.INSERT_ELEMENT,label:t},eventType:"pointerdown"});const{offsetX:G}=z(),j=tL({isDragging:!0,canSnap:!0,otherNodes:Object.values(un(N,[k.id])),snappingOffsetX:G});return c.createElement(c.Fragment,null,c.createElement(QV,{ref:_,onPointerOver:()=>b(!0),onPointerOut:()=>b(!1)}),(m||d||E)&&c.createElement(c.Fragment,null,c.createElement(I.InOverlay,{ref:w,zIndex:1,pointerEvents:"none",render:()=>c.createElement(p,XV({ref:y},i))}),c.createElement(I.Moveable,XV({ref:T,className:"default-moveable hide-handles",target:_.current,edge:!0,draggable:!0,origin:!1,pinchable:!0,onDragStart:e=>{let{set:t,inputEvent:n}=e;n.stopPropagation(),h(!1),t(B.translate),f(!0),(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;H.current={timeStamp:t,clientX:n,clientY:r}})(n),x(Te.FIT);const{offsetX:r,offsetY:a}=z(),o=_.current.getBoundingClientRect();v.current={width:o.width,height:o.height},_.current.style.width=`${i.width}px`,_.current.style.height=`${i.height}px`;const l=o.left-r,s=o.top-a;y.current.style.left=`${l}px`,y.current.style.top=`${s}px`,T.current&&T.current.updateRect()},onDrag:e=>{let{beforeTranslate:t,inputEvent:n}=e;if(D(null,{drag:t}),g)return!1;B.translate=t,y.current&&(0,I.areEventsDragging)(H.current,n)&&(1===y.current.style.opacity||R?R&&(y.current.style.opacity=0):y.current.style.opacity=1,y.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`,_.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`),r?.(n)},onDragEnd:e=>{let{inputEvent:r}=e;if(g)return!1;if(_.current.style.width=`${v.current.width}px`,_.current.style.height=`${v.current.height}px`,!(0,I.areEventsDragging)(H.current,r))return U(),o(),!1;if(R&&a)a();else if(!aL(y.current,O)){const{x:e,y:r,width:a,height:o}=y.current.getBoundingClientRect(),{x:l,y:i}=P.getBoundingClientRect();"textSet"===t?F(s,{offsetX:(0,Mr.editorToDataX)(e-l,S.width),offsetY:(0,Mr.editorToDataY)(r-i,S.height)}):A(t,{...n,x:(0,Mr.editorToDataX)(e-l,S.width),y:(0,Mr.editorToDataY)(r-i,S.height),width:(0,Mr.editorToDataX)(a,S.width),height:(0,Mr.editorToDataY)(o,S.height)})}U()}},j))))},e$=p.default.div.withConfig({displayName:"insertionOverlay__IconContainer",componentId:"sc-x3oxxu-0"})(["height:","px;width:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";border-radius:",";pointer-events:none;svg{position:absolute;top:0;left:0;}"],16,16,8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round})),t$=p.default.div.withConfig({displayName:"insertionOverlay__Scrim",componentId:"sc-x3oxxu-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:",";pointer-events:none;"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.black,.5)}));const n$=function InsertionOverlay(e){let{showIcon:t=!0}=e;return c.createElement(t$,null,t&&c.createElement(e$,{role:"presentation"},c.createElement(sy,null)))};function r$(){return r$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r$.apply(this,arguments)}const a$=(0,p.css)(["width:100%;cursor:pointer;transition:0.2s transform,0.15s opacity;border-radius:4px;opacity:0;"]),o$=p.default.img.withConfig({displayName:"innerElement__Image",componentId:"sc-qkk7ov-0"})(["",""],a$),l$=p.default.video.withConfig({displayName:"innerElement__Video",componentId:"sc-qkk7ov-1"})([""," object-fit:cover;",""],a$,(e=>{let{showWithoutDelay:t}=e;return t?"opacity: 1;":""})),i$=p.default.div.withConfig({displayName:"innerElement__DurationWrapper",componentId:"sc-qkk7ov-2"})(["position:absolute;bottom:8px;left:8px;background:",";border-radius:100px;height:18px;padding:0 6px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),s$=p.default.div.withConfig({displayName:"innerElement__MuteWrapper",componentId:"sc-qkk7ov-3"})(["position:absolute;bottom:8px;right:8px;height:24px;width:24px;background:",";color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),c$=(0,p.default)(Ve.Text).attrs({forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"innerElement__Duration",componentId:"sc-qkk7ov-4"})(["color:",";display:block;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),d$=p.default.img.withConfig({displayName:"innerElement__CloneImg",componentId:"sc-qkk7ov-5"})(["opacity:0;width:",";height:",";position:absolute;"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const u$=(0,u.memo)((function InnerElement(e){let{type:t,src:n,resource:r,alt:a,width:o,height:l,onClick:i,onLoad:s=VO.noop,showVideoDetail:d,mediaElement:p,active:m,isMuted:f}=e;const g=(0,u.useRef)(null),h=(0,u.useRef)(null),{handleDrag:E,handleDrop:b}=zi((e=>{let{state:t,actions:n}=e;return{handleDrag:n.handleDrag,handleDrop:n.handleDrop,dropTargets:t.dropTargets,activeDropTargetId:t.activeDropTargetId}}),((e,t)=>{if(h.current)return!1;if(null===h.current)return h.current=!1,!1;if(e?.dropTargets&&t?.dropTargets){const n=Object.keys(e.dropTargets),r=Object.keys(t.dropTargets);if(n.join()!==r.join())return!1}return e?.activeDropTargetId===t?.activeDropTargetId})),{setDraggingResource:y}=zi((e=>{let{actions:{setDraggingResource:t}}=e;return{setDraggingResource:t}}));let _;(0,u.useEffect)((()=>{r.poster&&(g.current=r.poster)}),[r.poster]);const{lengthFormatted:v,poster:w,mimeType:T}=r,S=w??g.current,C=S||(0,Eo.default)(o,r),I={width:o,height:l,alt:a,crossOrigin:"anonymous"},x={...I,onLoad:()=>{p.current&&(p.current.style.opacity=1),s()},loading:"lazy",decoding:"async",draggable:!1},A={...x,onLoad:void 0},k={...x,src:C},O={...I,title:a,alt:null,loop:t===ft.GIF,muted:!0,preload:"metadata",poster:S,showWithoutDelay:m};if(t===ft.IMAGE?(_=c.createElement(o$,r$({key:n},k,{ref:p})),A.src=C):[ft.VIDEO,ft.GIF].includes(t)&&(_=c.createElement(c.Fragment,null,w&&!m?c.createElement(o$,r$({key:n},k,{ref:p})):c.createElement(l$,r$({key:n},O,{ref:p}),t===ft.GIF?r.output.src&&c.createElement("source",{src:r.output.src,type:r.output.mimeType}):c.createElement("source",{src:(0,Eo.default)(o,r),type:T})),t===ft.VIDEO&&d&&v&&c.createElement(i$,null,c.createElement(c$,null,v)),t===ft.VIDEO&&d&&f&&c.createElement(s$,null,c.createElement(gb,null))),A.src=w),!_)throw new Error("Invalid media element type.");const N=t===ft.IMAGE?C:w;return c.createElement(c.Fragment,null,_,m&&c.createElement(n$,{showIcon:!1}),c.createElement(JV,{active:m,handleDrag:e=>{h.current||(s_.default.set(r.id,{url:C,type:"cached"}),y(r),h.current=!0),E(r,e.clientX,e.clientY)},handleDragEnd:()=>{b(r),h.current=!1},type:r.type,elementProps:{resource:r},onClick:i(N),cloneElement:d$,cloneProps:A}))})),p$=p.default.div.withConfig({displayName:"insertionMenu__DropDownContainer",componentId:"sc-xjd4tf-0"})(["margin-top:10px;min-width:160px;"]),m$=p.default.div.withConfig({displayName:"insertionMenu__MenuContainer",componentId:"sc-xjd4tf-1"})(["z-index:1;"]),f$=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),g$="insert",h$="addBackground";const E$=function InsertionMenu(e){let{resource:t,display:n,onInsert:r,width:a,index:o,isLocal:l=!1,setParentActive:i=VO.noop,setParentInactive:s=VO.noop}=e;const p=(0,u.useRef)(),[m,f]=(0,u.useState)(!1),g=(0,u.useCallback)((e=>{e.stopPropagation(),f(!0)}),[]),h=(0,u.useCallback)((()=>{f(!1),p.current?.focus(),i()}),[i]),{currentBackgroundId:E,combineElements:b}=xa((e=>({currentBackgroundId:e.state.currentPage?.elements?.[0]?.id,combineElements:e.actions.combineElements}))),{type:y,poster:_}=t,v=[{group:[{label:["image","gif"].includes(y)?(0,d.__)("Insert image","web-stories"):(0,d.__)("Insert video","web-stories"),value:g$},{label:(0,d.__)("Add as background","web-stories"),value:h$}]}];cC({ref:p},[],3);const w=os();(0,nr.useKeyDownEffect)(l?null:p,"tab",w,[w]);const T=(0,u.useMemo)((()=>`list-${(0,ue.default)()}`),[]),S=(0,u.useMemo)((()=>`button-${(0,ue.default)()}`),[]);return c.createElement(m$,null,c.createElement(mV,{ref:p,onClick:g,"aria-label":(0,d.__)("Open insertion menu","web-stories"),"aria-pressed":m,"aria-haspopup":!0,"aria-expanded":m,"aria-owns":m?T:null,id:S,$display:n,tabIndex:0===o?0:-1},c.createElement(sy,null)),m&&c.createElement(PT.Popup,{anchor:p,placement:_d.PLACEMENT.BOTTOM_START,isOpen:m},c.createElement(p$,null,c.createElement(YI.Menu,{parentId:S,listId:T,onMenuItemClick:(e,n)=>{const o=_||(0,Eo.default)(a,t),l=Mi(t.type,{resource:t});switch(f(!1),n){case g$:r(t,o);break;case h$:b({firstElement:l,secondId:E})}s()},options:v,onDismissMenu:h,hasMenuRole:!0,menuStylesOverride:f$}))))},b$=p.default.div.attrs((e=>({style:{width:e.width+"px",height:e.height+"px",margin:e.margin,backgroundColor:"transparent",color:"inherit",border:"none",padding:0}}))).withConfig({displayName:"mediaElement__Container",componentId:"sc-n7038j-0"})([""]),y$=p.default.div.withConfig({displayName:"mediaElement__InnerContainer",componentId:"sc-n7038j-1"})(["position:relative;display:flex;margin-bottom:10px;background-color:",";"],(e=>{let{theme:t,$baseColor:n}=e;return n||(0,We.rgba)(t.colors.standard.black,.3)})),_$=(0,p.default)(CV.Blurhash).withConfig({displayName:"mediaElement__BlurhashContainer",componentId:"sc-n7038j-2"})(["position:absolute !important;top:0;left:0;"]);function v$(e){let{index:t,resource:n,width:r,height:a,margin:o,onInsert:l,providerType:i,canEditMedia:s}=e;const{id:p,src:m,type:f,width:g,height:h,alt:E,isMuted:b,baseColor:y,blurHash:_}=n,{isCurrentResourceProcessing:v,isCurrentResourceUploading:w}=vi((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),T=g&&h?g/h:1,S=r||a/T,C=a||S/T,I=(0,u.useRef)(),[x,A]=(0,u.useState)(!0),[k,O]=(0,u.useState)(!1),[N,P]=(0,u.useState)(!1),[R,M]=(0,u.useState)(!1),L=(0,u.useCallback)((()=>O(!0)),[]),D=(0,u.useCallback)((()=>O(!1)),[]),B=(0,u.useCallback)((()=>P(!0)),[]),F=(0,u.useCallback)((()=>P(!1)),[]),H=(0,u.useCallback)((()=>{P(!1),O(!1)}),[]),[U,z]=(0,u.useState)(null),G=(0,u.useRef)(k);G.current=k,(0,u.useEffect)((()=>{if(![ft.VIDEO,ft.GIF].includes(f))return;const e=()=>{null!==U&&(clearTimeout(U),z(null))};if(!N)if(k){if(A(!1),I.current&&null==U){const e=setTimeout((()=>{G.current&&m&&I.current.play().catch((()=>{}))}),600);z(e)}}else A(!0),e(),I.current&&I.current?.pause&&m&&(I.current.pause(),I.current.currentTime=0);return e}),[N,k,f,m,U,z,G]);const j=(0,u.useCallback)((e=>()=>{l(n,e)}),[l,n]),Y=k&&n.attribution?.author?.displayName&&n.attribution?.author?.url&&c.createElement(KV,{author:n.attribution.author.displayName,url:n.attribution.author.url}),Z=(0,u.useRef)(),W=(0,u.useCallback)((()=>M(!0)),[]),V=!R&&!k;return c.createElement(b$,{ref:Z,"data-testid":`mediaElement-${f}`,"data-id":p,className:"mediaElement",width:S,height:C,margin:o,onPointerEnter:L,onFocus:L,onPointerLeave:D,onBlur:D,tabIndex:"-1"},c.createElement(y$,{$baseColor:V&&y},c.createElement(u$,{type:f,src:m,mediaElement:I,resource:n,alt:E,isMuted:b,width:S,height:C,onClick:j,onLoad:W,showVideoDetail:x,active:k}),Y,V&&_&&c.createElement(_$,{hash:_,width:S,height:C,punch:1}),(!m||v(p)||w(p))&&c.createElement(LoadingBar,{loadingMessage:(0,d.__)("Uploading media…","web-stories")}),c.createElement(E$,{resource:n,display:k,onInsert:l,width:S,index:t,isLocal:"local"===i,setParentActive:L,setParentInactive:D}),"local"===i&&s&&c.createElement(VV,{resource:n,display:k,isMenuOpen:N,onMenuOpen:B,onMenuCancelled:F,onMenuSelected:H,setParentActive:L})))}function MediaElement(e){const{isCurrentResourceProcessing:t,isCurrentResourceUploading:n}=vi((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),{id:r}=e.resource;return t(r)||n(r)?c.createElement(Tooltip,{title:(0,d.__)("Uploading media…","web-stories")},c.createElement(v$,e)):c.createElement(v$,e)}MediaElement.defaultProps={providerType:"local",canEditMedia:!1};const w$=(0,u.memo)(MediaElement),T$={maxPhotos:2},ContainerRenderer=e=>{let{children:t,containerRef:n}=e;return c.createElement(EV,{ref:n},t)},RowRenderer=e=>{let{children:t}=e;return t};function MediaGallery(e){let{resources:t,onInsert:n,providerType:r,canEditMedia:a}=e;const o=t.map(((e,t)=>({index:t,key:e.id,src:e.src,width:e.width,height:e.height}))),l=(0,u.useCallback)((e=>{let{photo:o,layout:l}=e;return c.createElement(w$,{key:o.key,index:o.index,margin:"0px 0px 8px 0px",resource:t[o.index],width:l.width,height:l.height,onInsert:n,providerType:r,canEditMedia:a})}),[r,n,t,a]);return c.createElement("div",null,c.createElement(SV.default,{layout:"rows",photos:o,renderPhoto:l,renderRowContainer:RowRenderer,renderContainer:ContainerRenderer,targetRowHeight:110,rowConstraints:T$,spacing:8}))}MediaGallery.defaultProps={canEditMedia:!1};const S$=MediaGallery,C$=(0,p.default)(Ve.Text).withConfig({displayName:"paginatedMediaGallery__StyledText",componentId:"sc-1xn8t7i-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function PaginatedMediaGallery(e){let{providerType:t,resources:n,searchTerm:r,selectedCategoryId:a,isMediaLoading:o,isMediaLoaded:l,hasMore:i,onInsert:s,setNextPage:p,canEditMedia:m}=e;const f=(0,u.useRef)(),g=(0,u.useCallback)((()=>f.current.clientHeight===f.current.scrollHeight?p():()=>{}),[p]),h=(0,u.useDebouncedCallback)(g,500),E=(0,u.useCallback)((()=>{const e=f.current;if(!n.length||!e||0===e.clientHeight||!i||!l||o)return;if(e.clientHeight===e.scrollHeight)return void h();e.scrollHeight-e.scrollTop<=e.clientHeight+300&&p()}),[n.length,i,l,o,h,p]);(0,u.useEffect)((()=>{f.current?.scrollTo?.(0,0)}),[r,a]);const b=(0,u.useDebouncedCallback)(E,500);(0,u.useLayoutEffect)((()=>{!async function(){var e;await(e=200,new Promise((t=>setTimeout(t,e)))),E()}()}),[E]),(0,u.useEffect)((()=>{const e=f.current;if(e)return e.addEventListener("scroll",b),window.addEventListener("resize",b),()=>{e.removeEventListener("scroll",b),window.removeEventListener("resize",b)}}),[b]);const y=l&&0===n.length?c.createElement(vV,null,(0,d.__)("No media found.","web-stories")):c.createElement("div",{style:{marginBottom:15}},c.createElement(S$,{providerType:t,canEditMedia:m,resources:n,onInsert:s})),[_,v]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(o&&i){const e=setTimeout((()=>{v(o)}),1e3);return()=>clearTimeout(e)}v(!1)}),[o,i]);const w="local"!==t&&Et[t].attributionComponent&&Et[t].attributionComponent();return c.createElement(c.Fragment,null,c.createElement(bV,{"data-testid":"media-gallery-container",ref:f},c.createElement(yV,null,y)),_&&c.createElement(_V,{"data-testid":"loading-pill"},c.createElement(C$,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Loading…","web-stories"))),!_&&w)}PaginatedMediaGallery.defaultProps={canEditMedia:!1};const I$=PaginatedMediaGallery,x$={INCREMENTAL_SEARCH_DEBOUNCE_MEDIA:"incrementalSearchDebounceMedia"},A$=dV("media"),k$=vo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const O$=function VideoOptimizationDialog(){const{isTranscoding:e}=vi((e=>{let{state:{isTranscoding:t}}=e;return{isTranscoding:t}})),[t,n]=(0,u.useState)(Boolean(wo.getItemByKey(k$))),{updateCurrentUser:r}=Na((e=>{let{actions:t}=e;return{updateCurrentUser:t.updateCurrentUser}})),a=(0,u.useCallback)((e=>{n(e),wo.setItemByKey(k$,e)}),[]),o=(0,u.useCallback)((()=>{r({mediaOptimization:!1}),a(!0)}),[r,a]),l=(0,u.useCallback)((()=>{a(!0)}),[a]),i=(0,d.__)("Video optimization in progress","web-stories"),s=(0,d.__)("This process can’t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories");return c.createElement(y,{isOpen:e&&!t,onClose:l,title:i,onSecondary:o,secondaryText:(0,d.__)("Disable optimization","web-stories"),onPrimary:l,primaryText:(0,d.__)("Sounds good","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s))};const N$=async function(e){const{src:t,mimeType:n,width:r,height:a,isMuted:o,length:l,lengthFormatted:i,...s}=e,c=X(n);if(!["image","video"].includes(c))throw new Error("Invalid media type.");const d=r&&a,u={};if("video"===c&&(!d||null===o||null===l||null===i)){const e=await ne(t);await le(e),u.width=e.videoWidth,u.height=e.videoHeight;const n=oe(e);u.length=n.length,u.lengthFormatted=n.lengthFormatted,u.isMuted=!ie(e)}if("image"===c&&!d){const e=await K(t);u.width=e.width,u.height=e.height}return Q({type:c,width:r,height:a,isMuted:o,length:l,lengthFormatted:i,src:t,isExternal:!0,mimeType:n,...s,...u})};const P$=function(e){let{link:t,setLink:n,setErrorMsg:r,onClose:a}=e;const{insertElement:o}=YW((e=>({insertElement:e.actions.insertElement}))),{capabilities:{hasUploadMediaAction:l},allowedMimeTypes:{image:i,vector:s,video:c}}=H(),p=(0,u.useMemo)((()=>[...i,...s,...c]),[i,s,c]),m=(0,u.useMemo)((()=>p.map((e=>Ot(e))).flat()),[p]),{actions:{getHotlinkInfo:f}}=Z(),{updateBaseColor:g}=Oo({}),[h,E]=(0,u.useState)(!1),{uploadVideoPoster:b}=Aa({}),{getProxiedUrl:y,checkResourceAccess:_}=ko(),v=(0,u.useCallback)((async(e,i)=>{const{ext:s,type:c,mimeType:d,fileName:u}=e,p="video"===c;try{const e=i?y({needsProxy:i},t):t,m={id:(0,ue.default)(),src:e,mimeType:d,needsProxy:i,alt:u};if(p){const t=await ne(e);await le(t),m.width=t.videoWidth,m.height=t.videoHeight;const n=oe(t);if(m.length=n.length,m.lengthFormatted=n.lengthFormatted,m.isMuted=!ie(t),l)try{const e=Ue(u.replace(`.${s}`,"")),n=await de(t),r=await b(0,e,n);m.poster=r.poster,m.posterId=r.posterId}catch{}}const f=await N$(m);f.src=t,o(c,{resource:f}),g(f),r(null),n(""),a()}catch(e){r(bO())}finally{E(!1)}}),[l,o,t,a,r,n,b,y,g]),w=(0,u.useCallback)((async()=>{if(t)if(EO(t)){E(!0);try{const e=await f(t),n=await _(t);(0,O.trackEvent)("hotlink_media",{event_label:t,file_size:e.fileSize,file_type:e.mimeType,needs_proxy:n}),await v(e,n)}catch(e){E(!1),(0,O.trackError)("hotlink_media",e?.message);let t=(0,d.__)("No file types are currently supported.","web-stories");m.length&&(t=(0,Ze.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,It.default)(m))),r(bO(e.code,t))}}else r((0,d.__)("Invalid link.","web-stories"))}),[m,t,f,r,v,_]);return{onInsert:w,isInserting:h,setIsInserting:E}},R$=p.default.form.withConfig({displayName:"hotlinkModal__InputWrapper",componentId:"sc-1tbxkw-0"})(["margin:16px 4px;width:470px;height:100px;"]);const M$=function(e){let{isOpen:t,onClose:n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o}}=H(),[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(null),p=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]),m=(0,u.useMemo)((()=>p.map((e=>Ot(e))).flat()),[p]);(0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{t&&s.current&&s.current.focus()}));return()=>clearTimeout(e)}),[t,s]);let f=(0,d.__)("No file types are currently supported.","web-stories");m.length&&(f=(0,Ze.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,It.default)(m)));const[g,h]=(0,u.useState)(""),{onInsert:E,isInserting:b,setIsInserting:_}=P$({link:g,setLink:h,errorMsg:l,setErrorMsg:i,onClose:n}),v=l||!g||b,w=(0,u.useCallback)((()=>{if(g?.length>0){const e=Br(g);h(e),EO(e)||i((0,d.__)("Invalid link.","web-stories"))}}),[g]),T=(0,u.useCallback)((e=>{l&&i(null),h(e)}),[h,l]),S=(0,u.useCallback)((e=>{e.preventDefault(),v||E()}),[v,E]),C=b?(0,d.__)("Inserting…","web-stories"):(0,d.__)("Insert","web-stories");return c.createElement(y,{onClose:()=>{n(),h(""),i(!1),_(!1)},isOpen:t,title:(0,d.__)("Insert external image or video","web-stories"),onPrimary:()=>E(),primaryText:C,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:v}},c.createElement(R$,{onSubmit:S},c.createElement(hT,{ref:s,onChange:e=>{let{target:{value:t}}=e;return T(t)},value:g,hint:l?.length?l:f,hasError:Boolean(l?.length),onBlur:w,label:(0,d.__)("URL","web-stories"),type:"url",required:!0})))},L$=(0,p.default)(m.Button).withConfig({displayName:"hotlink__Button",componentId:"sc-1njsgyy-0"})(["",";margin:0 10px 0 0;"],Hu);const D$=function Hotlink(){const[e,t]=(0,u.useState)(!1),n=(0,d.__)("Insert by link","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:n},c.createElement(L$,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>t(!0),"aria-label":n},c.createElement(jE,null))),c.createElement(M$,{isOpen:e,onClose:()=>t(!1)}))};function B$(){return B$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B$.apply(this,arguments)}const F$=p.default.div.withConfig({displayName:"toggle__Wrapper",componentId:"sc-29rl44-0"})(["padding:","px;"],4),H$=p.default.div.withConfig({displayName:"toggle__Background",componentId:"sc-29rl44-1"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;top:-","px;left:-","px;height:","px;width:","px;background-color:transparent;border-radius:",";border:","px solid ",";pointer-events:none;transition:all 0.3s;"],1,1,20,44,t.borders.radius.x_large,1,t.colors.border.defaultNormal)})),U$=p.default.span.withConfig({displayName:"toggle__Circle",componentId:"sc-29rl44-2"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;:after{content:'';position:absolute;top:","px;left:","px;height:","px;width:","px;background-color:",";border-radius:",";cursor:pointer;transition:background-color 0.3s,border-color 0.3s,left 0.15s;}"],-5,-5,28,28,t.colors.fg.secondary,t.borders.radius.round)})),z$=p.default.div.withConfig({displayName:"toggle__IconContainer",componentId:"sc-29rl44-3"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;width:","px;top:","px;left:","px;z-index:1;opacity:0;transition:opacity 0.15s;pointer-events:none;svg{color:",";}"],32,-6,19,t.colors.standard.white)})),G$=p.default.div.withConfig({displayName:"toggle__ToggleContainer",componentId:"sc-29rl44-4"})((e=>{let{theme:t}=e;return(0,p.css)(["position:relative;height:","px;width:","px;background-color:transparent;border-radius:",";input[type='checkbox']{position:absolute;top:-","px;left:-","px;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:disabled{cursor:default;~ ","{border-color:",";}:checked ~ ","{background-color:",";border-color:",";}~ ",":after{background-color:",";}:checked ~ ",":after{background-color:",";}~ "," svg{color:",";}}&.","{~ ","{outline:none;box-shadow:0 0 0 5px ",",0 0 0 7px ",";}}:checked{~ ","{background-color:",";border-color:",";}~ ",":after{left:","px;background-color:",";}~ ","{opacity:1;}}:hover{:not(:disabled) ~ ","{border-color:",";}:checked:not(:disabled) ~ ","{background-color:",";border-color:",";}}:active{~ ","{box-shadow:0 0 0 8px ",";}}}"],20,44,t.borders.radius.x_large,.5,.5,20,44,H$,t.colors.fg.disable,H$,t.colors.fg.disable,t.colors.fg.disable,U$,t.colors.fg.disable,U$,t.colors.bg.secondary,z$,t.colors.fg.disable,Ju.FOCUS_VISIBLE_SELECTOR,H$,t.colors.bg.primary,t.colors.border.focus,H$,t.colors.interactiveBg.positivePress,t.colors.interactiveBg.positivePress,U$,21,t.colors.interactiveBg.positiveNormal,z$,H$,t.colors.fg.secondary,H$,t.colors.interactiveBg.positiveHover,t.colors.interactiveBg.positiveHover,H$,t.colors.shadow.active)})),j$=e=>{let{className:t,...n}=e;return c.createElement(F$,{className:t},c.createElement(G$,null,c.createElement("input",B$({type:"checkbox"},n)),c.createElement(H$,null),c.createElement(z$,null,c.createElement(zg.default,null)),c.createElement(U$,null)))};var Y$=n(91703),Z$=n.n(Y$);const W$=p.default.img.withConfig({displayName:"imageCapture__Photo",componentId:"sc-u3jq3q-0"})(["display:block;width:240px;margin:0 auto;"]),V$=p.default.div.withConfig({displayName:"imageCapture__Actions",componentId:"sc-u3jq3q-1"})(["display:flex;justify-content:center;margin-top:20px;"]),ImageCapture=e=>{let{videoRef:t,onCapture:n,onClear:r}=e;const[a,o]=(0,u.useState)("");return c.createElement(c.Fragment,null,a&&c.createElement(W$,{src:a,alt:(0,d.__)("Image capture","web-stories")}),c.createElement(V$,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:async()=>{if(!t.current)return;const e=await de(t.current),r=await(0,$.createBlob)(e);o(r),n(se(e,"image-capture.jpeg",ge))},disabled:null!==r},(0,d.__)("Capture Image","web-stories")),c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>{o(""),r()},disabled:null===r},(0,d.__)("Clear Image","web-stories"))))},$$=p.default.video.withConfig({displayName:"modal__Video",componentId:"sc-mu21h6-0"})(["width:100%;height:100%;"]),q$=p.default.div.withConfig({displayName:"modal__VideoWrapper",componentId:"sc-mu21h6-1"})(["width:240px;aspect-ratio:9 / 16;background:#000;margin:0 auto;"]);const K$=function Modal(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(!1),[s,p]=(0,u.useState)(!0),[g,h]=(0,u.useState)(!0),E=(0,u.useCallback)((e=>{const t=se(e,"test-recording.webm","video/webm");o(t)}),[]),b=is(),{error:_,status:v,mediaBlob:w,stopRecording:T,startRecording:S,liveStream:C,clearMediaStream:I,clearMediaBlob:x}=Z$()({recordScreen:!1,blobOptions:{type:"video/webm"},mediaStreamConstraints:{audio:g,video:s},onStop:E}),A=(0,u.useCallback)((()=>{I(),x(),n(),r.current&&(r.current.srcObject=null),i(!1)}),[x,I,n]),k=(0,u.useCallback)((()=>{b([a]),n(),"recording"===v&&(T(),i(!1),o(null))}),[a,b,n,v,T]);(0,u.useEffect)((()=>{r.current&&C&&(r.current.srcObject=C)}),[C]);const O="recording"===v,N=(0,u.useMemo)((()=>`toggle_${(0,ue.default)()}`),[]),P=(0,u.useMemo)((()=>`toggle_${(0,ue.default)()}`),[]),R=(0,d.__)("Insert","web-stories");return c.createElement(y,{onClose:A,isOpen:t,title:(0,d.__)("Record video / audio","web-stories"),onPrimary:k,primaryText:R,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:"stopped"!==v&&!1===l}},c.createElement(Ve.Text,null,(0,d.__)("Record content for your story using your camera / microphone.","web-stories")),c.createElement(Ve.Text,null,_?`${v} ${_.message}`:v),!l&&c.createElement(q$,null,w&&!C&&c.createElement(c.Fragment,null,c.createElement($$,{src:URL.createObjectURL(w),autoPlay:!0,controls:!0})),!w&&C&&c.createElement($$,{ref:r,autoPlay:!0})),O&&c.createElement(ImageCapture,{videoRef:r,onCapture:e=>{o(e),i(!0)},onClear:l?()=>i(!1):null}),c.createElement(Ve.Text,{as:"label",htmlFor:N,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Camera","web-stories")),c.createElement(j$,{id:N,"aria-label":(0,d.__)("Enable camera","web-stories"),name:N,checked:s,onChange:()=>p((e=>!e))}),c.createElement(Ve.Text,{as:"label",htmlFor:P,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Microphone","web-stories")),c.createElement(j$,{id:P,"aria-label":(0,d.__)("Enable microphone","web-stories"),name:P,checked:g,onChange:()=>h((e=>!e))}),c.createElement(m.Button,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:O?T:S,disabled:!1},O?(0,d.__)("Stop recording","web-stories"):(0,d.__)("Start recording","web-stories")))},X$=(0,p.default)(m.Button).withConfig({displayName:"mediaRecording__Button",componentId:"sc-zpc7g2-0"})(["",";margin:0 10px 0 0;"],Hu),Q$=(0,p.default)(Ng).withConfig({displayName:"mediaRecording__Camera",componentId:"sc-zpc7g2-1"})(["width:24px !important;height:24px !important;"]);const J$=function MediaRecording(){const[e,t]=(0,u.useState)(!1),n=(0,d.__)("Record audio/video","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:n},c.createElement(X$,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>t(!0),"aria-label":n},c.createElement(Q$,null))),c.createElement(K$,{isOpen:e,onClose:()=>t(!1)}))};function eq(){return eq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eq.apply(this,arguments)}const tq=(0,p.default)(m.Button).withConfig({displayName:"mediaPane__Button",componentId:"sc-usipec-0"})(["",";"],Hu),nq=p.default.div.withConfig({displayName:"mediaPane__FilterArea",componentId:"sc-usipec-1"})(["display:flex;justify-content:space-between;margin-top:24px;padding:0 "," 0 ",";"],sV,sV),rq=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"mediaPane__SearchCount",componentId:"sc-usipec-2"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;"]),aq=p.default.div.withConfig({displayName:"mediaPane__ButtonsWrapper",componentId:"sc-usipec-3"})(["display:flex;flex:1;justify-content:flex-end;"]),oq=$o,lq=[{value:oq,label:(0,d.__)("All Types","web-stories")},{value:"image",label:(0,d.__)("Images","web-stories")},{value:"video",label:(0,d.__)("Video","web-stories")}];const iq=function MediaPane(e){const{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,setNextPage:i,setMediaType:s,setSearchTerm:p,totalItems:m}=vi((e=>{let{state:{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,totalItems:i},actions:{setNextPage:s,setMediaType:c,setSearchTerm:d}}=e;return{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,totalItems:i,setNextPage:s,setMediaType:c,setSearchTerm:d}})),g=(0,S.useFeature)("mediaRecording"),{capabilities:{hasUploadMediaAction:h}}=H(),E=l.length>0,b=(0,u.useCallback)(((e,t)=>{s({mediaType:t})}),[s]),{onSelect:y,insertMediaElement:_}=ZW();(0,u.useEffect)((()=>{l.length>0&&(0,O.trackEvent)("search",{search_type:"media",search_term:l,search_filter:o})}),[l,o]);const v=(0,S.useFeature)(x$.INCREMENTAL_SEARCH_DEBOUNCE_MEDIA),w=(0,u.useCallback)((e=>c.createElement(tq,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:e,"aria-label":(0,d.__)("Upload","web-stories")},c.createElement(lm,null))),[]);return c.createElement(wV,eq({id:A$},e),c.createElement(gV,null,c.createElement(hV,null,c.createElement(TV,null,c.createElement(KW,{initialValue:l,placeholder:(0,d.__)("Search","web-stories"),onSearch:e=>{const t=e.trim();t!==l&&p({searchTerm:t})},incremental:v})),c.createElement(nq,null,c.createElement(xA,{selectedValue:o?.toString()||oq,onMenuItemClick:b,options:lq,placement:_d.PLACEMENT.BOTTOM_START}),E&&n.length>0&&c.createElement(rq,null,(0,Ze.default)(
/* translators: %d: number of results. */
(0,d._n)("%s result found.","%s results found.",m,"web-stories"),m)),!E&&c.createElement(aq,null,g&&h&&c.createElement(J$,null),c.createElement(D$,null),h&&c.createElement(Tooltip,{title:(0,d.__)("Upload","web-stories")},c.createElement(yx,{renderButton:w,onInsert:y}))))),a&&!n.length?c.createElement(vV,null,E?(0,d.__)("No results found.","web-stories"):(0,d.__)("No media found.","web-stories")):c.createElement(I$,{providerType:"local",canEditMedia:h,resources:n,isMediaLoading:r,isMediaLoaded:a,hasMore:t,onInsert:_,setNextPage:i,searchTerm:l}),c.createElement(O$,null)))};const sq=function MediaIcon(){return c.createElement(lm,{title:(0,d.__)("Media Gallery","web-stories")})};const cq=function TermsDialog(){const e=wo.getItemByKey(`${vo.TERMS_MEDIA3P}`),[t,n]=(0,u.useState)(!e),r=(0,u.useCallback)((()=>{n(!1),wo.setItemByKey(`${vo.TERMS_MEDIA3P}`,!0),(0,O.trackEvent)("media3p_terms_acknowledged")}),[]);(0,u.useEffect)((()=>{n(!e)}),[e]);const a=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_terms_of_service")}),[]);return e?null:c.createElement(y,{isOpen:t,contentLabel:(0,d.__)("Third party stock content terms","web-stories"),onClose:r,ariaHideApp:!1,onPrimary:r,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs/terms/",rel:"noreferrer",target:"_blank","aria-label":(0,d.__)("Learn more by visiting Web Stories for WordPress","web-stories"),onClick:a})}},(0,d.__)("Your use of stock content is subject to third party terms. <a>Learn more.</a>","web-stories"))))},dq=dV("media3p");function uq(){return uq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uq.apply(this,arguments)}const pq=(0,p.default)(Ve.Text).withConfig({displayName:"providerTab__StyledText",componentId:"sc-1muzdn0-0"})(["color:inherit;"]),mq=p.default.button.withConfig({displayName:"providerTab__Tab",componentId:"sc-1muzdn0-1"})(["padding:6px 16px;background:none;border:none;color:",";position:relative;cursor:pointer;:hover{color:",";}border-radius:",";",";",""],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.x_large}),Hu,(e=>{let{$isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-17px;left:16px;right:16px;}"],n.colors.border.selection)}));const fq=function ProviderTab(e){let{name:t,isActive:n,...r}=e;return c.createElement(mq,uq({$isActive:n},r),c.createElement(pq,{forwardedAs:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t))},gq=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"providerTabList__Section",componentId:"sc-19jgogw-0"})(["display:flex;flex-wrap:wrap;margin-top:16px;margin-bottom:16px;padding:0 1em;"]);const hq=function ProviderTabList(e){let{providers:t}=e;const{isRTL:n}=H(),r=(0,u.useRef)(),{selectedProvider:a,setSelectedProvider:o}=_i((e=>{let{media3p:{state:{selectedProvider:t},actions:{setSelectedProvider:n}}}=e;return{selectedProvider:t,setSelectedProvider:n}})),[l,i]=(0,u.useState)(0),s=t.length;(0,u.useEffect)((()=>i(t.indexOf(a))),[t,a]);const d=(0,u.useCallback)((e=>{if(!r.current)return;r.current.children[e].focus()}),[]),p=(0,u.useCallback)((()=>o({provider:t[l]})),[l,o,t]),m=n?-1:1;return(0,nr.useKeyDownEffect)(r,"left",(()=>d((l-m+s)%s)),[d,l,m,s]),(0,nr.useKeyDownEffect)(r,"right",(()=>d((l+m+s)%s)),[d,l,m,s]),(0,nr.useKeyDownEffect)(r,"home",(()=>d(0)),[d]),(0,nr.useKeyDownEffect)(r,"end",(()=>d(s-1)),[d,s]),(0,nr.useKeyDownEffect)(r,["enter","space"],p,[p]),c.createElement(gq,{ref:r},t.map(((e,t)=>c.createElement(fq,{key:e,index:t,name:Et[e].displayName,isActive:a===e,onClick:()=>o({provider:e}),onFocus:()=>i(t),tabIndex:a===e?0:-1,role:"tab",id:`provider-tab-${e}`,"aria-controls":`provider-tabpanel-${e}`}))))};function Eq(){return Eq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eq.apply(this,arguments)}const bq=(0,p.default)(Lu.Headline).attrs((()=>({as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}))).withConfig({displayName:"providerPanel__MediaSubheading",componentId:"sc-1c53rqi-0"})(["margin-top:24px;padding:0 24px;",""],(e=>e.shouldDisplay||"display: none;")),yq=p.default.div.withConfig({displayName:"providerPanel__ProviderWrapper",componentId:"sc-1c53rqi-1"})(["position:relative;display:flex;flex-direction:column;height:100%;min-height:100px;max-width:100%;top:0;left:0;",""],(e=>{let{hidden:t}=e;return t&&(0,p.css)(["position:absolute;visibility:hidden;"])}));const _q=function ProviderPanel(e){let{providerType:t,isActive:n,searchTerm:r,...a}=e;const{insertElement:o}=YW((e=>({insertElement:e.actions.insertElement}))),{actions:{registerUsage:l}}=co(),{updateBaseColor:i}=Oo({}),s=(0,u.useCallback)((e=>{e?.attribution?.registerUsageUrl&&l({registerUsageUrl:e.attribution.registerUsageUrl})}),[l]),p=(0,u.useCallback)(((e,t)=>{s_.default.set(e.id,{url:t,type:"cached"}),o(e.type,{resource:e}),s(e),e.baseColor||i(e)}),[o,s,i]),{media3p:m}=_i((e=>{let{media3p:t}=e;return{media3p:t}}));if(!n)return c.createElement(yq,Eq({},a,{hidden:!0}));const f=m[t].state,g=m[t].actions,h=f.categories.selectedCategoryId?f.categories.categories.find((e=>e.id===f.categories.selectedCategoryId)).label:(0,d.__)("Trending","web-stories"),E=Boolean(f.media?.length||f.categories.selectedCategoryId),b=(0,d.__)("Search Results","web-stories");return c.createElement(yq,a,Et[t].supportsCategories&&c.createElement(iV,{items:f.categories.categories,selectedItemId:f.categories.selectedCategoryId,selectItem:g.selectCategory,deselectItem:g.deselectCategory}),c.createElement(bq,{"data-testid":"media-subheading",shouldDisplay:E},r.length&&!f.categories.selectedCategoryId?b:h),c.createElement(I$,{providerType:t,resources:f.media,isMediaLoading:f.isMediaLoading,isMediaLoaded:f.isMediaLoaded,hasMore:f.hasMore,setNextPage:g.setNextPage,onInsert:p,searchTerm:r,selectedCategoryId:f.categories.selectedCategoryId}))};function vq(){return vq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vq.apply(this,arguments)}const wq=p.default.div.withConfig({displayName:"media3pPane__PaneBottom",componentId:"sc-1hq1xk8-0"})(["position:relative;height:100%;flex:1 1 auto;min-height:0;"]);const Tq=function Media3pPane(e){const{isActive:t}=e,{searchTerm:n,selectedProvider:r,setSelectedProvider:a,setSearchTerm:o,media3p:l}=_i((e=>{let{media3p:{state:{selectedProvider:t,searchTerm:n},actions:{setSelectedProvider:r,setSearchTerm:a}},media3p:o}=e;return{searchTerm:n,selectedProvider:t,setSelectedProvider:r,setSearchTerm:a,media3p:o}}));(0,u.useEffect)((()=>{t&&!r&&a({provider:Object.keys(Et)[0]})}),[t,r,a]);const i=l[r]?.state?.categories?.selectedCategoryId;(0,u.useEffect)((()=>{n.length&&(0,O.trackEvent)("search",{search_type:"media3p",search_term:n,search_filter:r,search_category:i})}),[r,n,i]);const s=(0,u.useCallback)((e=>{const t=e.trim();t!==n&&o({searchTerm:t})}),[n,o]),p=(0,S.useFeature)(x$.INCREMENTAL_SEARCH_DEBOUNCE_MEDIA),m=(0,u.useRef)(),f=(0,S.useFeatures)(),g=(0,u.useMemo)((()=>Object.keys(Et).filter((e=>!Et[e].featureName||f[Et[e].featureName]))),[f]);return c.createElement(c.Fragment,null,t&&c.createElement(cq,null),c.createElement(wV,vq({id:dq},e),c.createElement(gV,null,c.createElement(hV,null,c.createElement(TV,null,c.createElement(KW,{initialValue:n,placeholder:(0,d.__)("Search","web-stories"),onSearch:s,incremental:p,disabled:Boolean(r&&Et[r].supportsCategories&&l[r]?.state.categories.selectedCategoryId)})),c.createElement(hq,{providers:g})),c.createElement(wq,{ref:m},g.map((e=>c.createElement(_q,{key:e,providerType:e,isActive:e===r,searchTerm:n,role:"tabpanel","aria-labelledby":`provider-tab-${e}`,id:`provider-tabpanel-${e}`})))))))};const Sq=function Media3pIcon(){return c.createElement(Vb,{title:(0,d.__)("Explore Media","web-stories")})},Cq=J.PAGE_WIDTH/3,Iq=p.default.button.withConfig({displayName:"shapePreview__Aspect",componentId:"sc-1pj9cm0-0"})(["background:transparent;outline:none;border:0;padding:0;position:relative;border-radius:",";background-color:",";&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),xq=p.default.div.withConfig({displayName:"shapePreview__AspectInner",componentId:"sc-1pj9cm0-1"})(["position:relative;padding-bottom:95.5%;"]),Aq=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewContainer",componentId:"sc-1pj9cm0-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;border-radius:",";display:flex;justify-content:center;align-items:center;svg{display:inline-block;width:36px;height:36px;}"],(e=>{let{theme:t}=e;return t.borders.radius.small})),kq=p.default.div.withConfig({displayName:"shapePreview__ShapeClone",componentId:"sc-1pj9cm0-3"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";svg{display:inline-block;width:100%;height:100%;path{fill:#c4c4c4;}}"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),Oq=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewSizer",componentId:"sc-1pj9cm0-4"})(["padding-top:100%;"]),Nq=p.default.path.withConfig({displayName:"shapePreview__Path",componentId:"sc-1pj9cm0-5"})(["fill:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const Pq=function ShapePreview(e){let{mask:t,isPreview:n,index:r}=e;const{insertElement:a}=YW((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:o,dataToEditorY:l}=(0,hc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),[i,s]=(0,u.useState)(!1),d=()=>s(!0),p=()=>s(!1),m=(0,u.useRef)(),f=(0,u.createRef)(),g=(0,u.useMemo)((()=>({backgroundColor:(0,Zv.default)("#c4c4c4"),width:Cq*t.ratio,height:Cq,mask:{type:t.type},lockAspectRatio:Nn.MaskTypes.RECTANGLE!==t.type})),[t.ratio,t.type]),h=(0,u.useCallback)((()=>{a("shape",g),(0,O.trackEvent)("insert_shape",{name:t.type})}),[a,g,t.type]),E=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c.createElement("svg",{viewBox:"0 0 1 "+1/(n&&t.iconRatio?t.iconRatio:t.ratio),width:36*(n&&t.iconRatio?t.iconRatio:t.ratio),height:36},e&&c.createElement("title",null,t.name),c.createElement(Nq,{d:n&&t.iconPath?t.iconPath:t.path,ref:f}))};return c.createElement(Iq,{ref:m,onClick:h,tabIndex:0===r?0:-1,"aria-label":t.name,onPointerEnter:d,onFocus:d,onPointerLeave:p,onBlur:p},c.createElement(xq,null,c.createElement(Aq,{key:t.type},c.createElement(Oq,null),E()),i&&c.createElement(n$,null)),c.createElement(JV,{type:"shape",elementProps:g,cloneElement:kq,cloneProps:{width:o(Cq*t.ratio),height:l(Cq),children:E(!1)}}))},Rq=(0,p.default)(m.Button).attrs({size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),Ju.FOCUS_VISIBLE_SELECTOR,Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),Mq=p.default.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),Lq=p.default.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const Dq=function StickerPreview(e){let{stickerType:t,index:n}=e;const{insertElement:r}=YW((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:a,dataToEditorY:o}=(0,hc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),l=ki.default[t],i=l.aspectRatio,s=(0,u.useMemo)((()=>({width:Cq*i,height:Cq,sticker:{type:t}})),[i,t]),[d,p]=(0,u.useState)(!1),m=()=>p(!0),f=()=>p(!1),g=l.svg;return c.createElement(Rq,{"data-testid":`library-sticker-${t}`,onClick:()=>r("sticker",{width:Cq,sticker:{type:t}}),tabIndex:0===n?0:-1,onPointerEnter:m,onFocus:m,onPointerLeave:f,onBlur:f},c.createElement(Mq,null,c.createElement(g,{style:{height:i<.955?"60%":"auto",width:i<.955?"auto":"60%"}}),d&&c.createElement(n$,null),c.createElement(JV,{type:"sticker",elementProps:s,cloneElement:Lq,cloneProps:{width:a(Cq*(i<1?i:1)),height:o(Cq/(i<1?1:i)),children:c.createElement(g,{style:{height:"auto",width:"100%"}})}})))},Bq=dV("shapes");function Fq(){return Fq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fq.apply(this,arguments)}const Hq=p.default.div.withConfig({displayName:"shapesPane__SectionContent",componentId:"sc-ffcyax-0"})(["position:relative;display:grid;grid-column-gap:12px;grid-row-gap:24px;@media screen and (min-width:1220px){grid-template-columns:repeat(4,1fr);}@media screen and (min-width:1100px) and (max-width:1220px){grid-template-columns:repeat(3,1fr);}@media screen and (max-width:1100px){grid-template-columns:repeat(2,1fr);}"]),Uq=Object.keys(ki.default);const zq=function ShapesPane(e){const t=(0,u.useRef)();cC({ref:t});const n=(0,u.useRef)(null);return cC({ref:n}),c.createElement(cV,Fq({id:Bq},e,{isOverflowScrollable:!0}),c.createElement(JW,{"data-testid":"shapes-library-pane",title:(0,d.__)("Shapes","web-stories")},c.createElement(Hq,{ref:t},Nn.MASKS.filter((e=>e.showInLibrary)).map(((e,t)=>c.createElement(Pq,{mask:e,key:e.type,index:t,isPreview:!0}))))),c.createElement(JW,{"data-testid":"stickers-library-pane",title:(0,d.__)("Stickers","web-stories")},c.createElement(Hq,{ref:n},Uq.map(((e,t)=>c.createElement(Dq,{key:e,index:t,stickerType:e}))))))};const Gq=function ShapesIcon(){return c.createElement(Ly,{title:(0,d.__)("Shapes library","web-stories")})};function jq(){return jq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jq.apply(this,arguments)}const Yq=p.default.button.withConfig({displayName:"fontPreview__Preview",componentId:"sc-kfwh27-0"})(["position:relative;display:flex;align-items:center;background-color:",";padding:8px 0px;border-radius:",";width:100%;border:none;cursor:pointer;text-align:left;"," &."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isTextSelected:t}=e;return t?Hu:"outline: none;"}),Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),Zq=(0,p.default)(Ve.Text).attrs({forwardedAs:"span"}).withConfig({displayName:"fontPreview__PreviewText",componentId:"sc-kfwh27-1"})(["color:",";font-size:","px;font-weight:",";font-family:",";line-height:normal;margin:",";"],(e=>{let{theme:t,isClone:n}=e;return n?t.colors.standard.black:t.colors.fg.primary}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t}),(e=>{let{fontFamily:t}=e;return t}),(e=>{let{isClone:t}=e;return t?0:"0px 16px"})),Wq=p.default.div.withConfig({displayName:"fontPreview__DragContainer",componentId:"sc-kfwh27-2"})(["position:absolute;opacity:0;background-color:",";width:","px;line-height:","px;"],(e=>{let{theme:t}=e;return t.colors.opacity.white24}),(e=>{let{width:t}=e;return t}),(e=>{let{lineHeight:t}=e;return t}));const Vq=function FontPreview(e){let{title:t,element:n,insertPreset:r,getPosition:a,index:o}=e;const l=(0,Ir.getHTMLFormatters)(),{font:i,fontSize:s,content:p}=n,{fontWeight:m}=hC(p),{actions:{maybeEnqueueFontStyle:f}}=ho(),{dataToEditorX:g,dataToEditorY:h}=(0,hc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),{shouldUseSmartColor:E}=YW((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor}))),b=Zc(),{isTextSelected:y,updateSelectedElements:_}=xa((e=>{let{state:t,actions:n}=e;return{isTextSelected:yC("text",t.selectedElements),updateSelectedElements:n.updateSelectedElements}})),v=(0,u.useRef)(null);(0,u.useEffect)((()=>{f([{font:i,fontWeight:m,content:(0,br.stripHTML)(p)}])}),[i,m,p,f]);const w=(0,u.useCallback)(((e,t)=>{let{fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=e;return t=l.setFontWeight(t,n),t=l.toggleItalic(t,r),t=l.toggleUnderline(t,a),t=l.setLetterSpacing(t,o)}),[l]),T=(0,u.useCallback)((async()=>{if(y)return void _({properties:e=>{const t=w(hC(n.content),e.content),r=un(n,["x","y","content","width"]),a=aR({...e,...r});return{...e,...r,...a,content:t}}});let e=n;const o={isPositioned:!1};if(E){const t=a(n);o.isPositioned=!0,e={...n,...t},o.accessibleColors=await b(e)}r(e,o),(0,O.trackEvent)("insert_text_preset",{name:t})}),[y,a,n,E,r,t,_,w,b]),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isClone:n}=e;return c.createElement(Zq,jq({font:i,fontSize:s,fontWeight:m},e),n?(0,br.stripHTML)(p):t)};(0,nr.useKeyDownEffect)(v,{key:["enter","space"]},T,[T]),cC({ref:v});const[C,I]=(0,u.useState)(!1),x=()=>I(!0),A=()=>I(!1);return c.createElement(Yq,{ref:v,onPointerEnter:x,onFocus:x,onPointerLeave:A,onBlur:A,tabIndex:0===o?0:-1,isTextSelected:y,"aria-label":y?(0,Ze.default)(
/* translators: %s: preset name */
(0,d.__)("Apply preset: %s","web-stories"),t):null},S(),C&&!y&&c.createElement(n$,null),c.createElement(JV,{cloneElement:Wq,cloneProps:{children:S({fontSize:h(s),isClone:!0}),width:g(n.width),lineHeight:Math.ceil(h(s))},elementProps:n,type:"text",onClick:T}))},$q=dV("text"),qq=(0,Mr.dataFontEm)(1),Kq="text";const Xq=function(e){let{shouldUseSmartColor:t}=e;const{insertElement:n}=YW((e=>({insertElement:e.actions.insertElement}))),{state:{versionNumber:r}}=mr(),a=(0,Ir.getHTMLFormatters)(),{setColor:o}=a,[l,i]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),d=(0,u.useRef)(null),p=Zc();(0,u.useEffect)((()=>{d.current?.element&&!d.current.versionNumber?d.current.versionNumber=r:d.current?.versionNumber&&(d.current=null)}),[r]);const m=(0,u.useCallback)((e=>{const{y:t}=e;if(!d.current)return t;const{element:{height:n,y:r}}=d.current;let a=r+n+qq;const{width:o,height:l}=Pi(Kq,e.width,e.height,{...e,y:a});return a+l>=J.PAGE_HEIGHT&&(a=t),{width:o,height:l,y:a}}),[]);(0,u.useEffect)((()=>{if(l&&s){const{content:e}=s,{color:t,backgroundColor:r}=l,a=r?{backgroundColor:{color:r},backgroundTextMode:Hn.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:d_(s)}:null,u={...s,content:t?o(e,{color:t}):e,...a},p=n(Kq,{...u,height:(0,Rn.calculateTextHeight)(u,u.width)});d.current={versionNumber:null,element:p},i(null),c(null)}}),[l,s,n,o]);const f=(0,u.useCallback)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isPositioned:a,accessibleColors:o}=r,l=a?{}:m(e);if(t){if(c({...e,...l}),o)return void i(o);i(await p({...e,...l}))}else{const t=n(Kq,{...e,...l});d.current={versionNumber:null,element:t}}}),[m,p,t,n]);return{getPosition:m,insertPreset:f}};const Qq=function(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return(0,Ze.default)(
/* translators: %1$s: first item of list. %2$s: second item of list. */
(0,d.__)("%1$s and %2$s","web-stories"),e[0],e[1]);default:return(0,Ze.default)(
/* translators: %1$s: is a comma separated list. %2$s: last entry in list  */
(0,d.__)("%1$s, and %2$s","web-stories"),e.slice(0,e.length-1).join(
/* translators: delimiter used in a list */
(0,d.__)(", ","web-stories")),e[e.length-1])}},Jq=p.default.div.withConfig({displayName:"styles__FullWidthWrapper",componentId:"sc-10l2iqe-0"})(["margin-left:-",";margin-right:-",";"],sV,sV);function eK(e){return Array.from(new Set(e.map((e=>{let{elements:t=[]}=e;return t.map((e=>"text"===e.type&&Boolean(e.font?.family)?e.font?.family:null))})).flat().filter(Boolean)))||[]}const tK=(0,p.css)(["margin-top:38px;padding-top:2px;width:100%;height:100%;"]),nK=p.default.div.withConfig({displayName:"components__VirtualizedWrapper",componentId:"sc-qhv222-0"})(["height:",";width:100%;position:relative;"],(e=>{let{height:t}=e;return`${t}px`}));nK.propTypes={height:Ea().number.isRequired};const rK=p.default.div.withConfig({displayName:"components__VirtualizedContainer",componentId:"sc-qhv222-1"})(["position:absolute;top:0;left:",";display:grid;grid-template-columns:1fr 1fr;grid-template-columns:",";grid-template-rows:",";gap:","px;width:calc(100% - ",");height:100%;margin-top:4px;"],(e=>{let{paneLeft:t}=e;return t}),(e=>{let{columnWidth:t}=e;return`\n    repeat(auto-fill, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`minmax(${t}px, auto)`}),(e=>{let{rowGap:t}=e;return t}),(e=>{let{paneLeft:t}=e;return t}));rK.propTypes={columnWidth:Ea().number.isRequired,rowHeight:Ea().number.isRequired,rowGap:Ea().number,paneLeft:Ea().oneOfType([Ea().string,Ea().number])},rK.defaultProps={rowGap:12,paneLeft:0};var aK,oK,lK;function iK(){return iK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iK.apply(this,arguments)}const SvgDesertBw=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iK({viewBox:"0 0 274 118",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,aK||(aK=c.createElement("path",{d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z",fill:"#767E80"})),oK||(oK=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",fill:"#ADB1B3"})),lK||(lK=c.createElement("circle",{cx:213,cy:72,r:13,fill:"#E4E5E6"})))},sK=(0,c.memo)(SvgDesertBw),cK=p.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-vwmhk4-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:8vh auto;text-align:center;*{text-align:center;margin:0 auto;}"]),dK=(0,p.default)(sK).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-vwmhk4-1"})(["margin-bottom:48px;"]);const uK=function EmptyContentMessage(e){let{children:t,...n}=e;return c.createElement(cK,n,c.createElement(dK,{"aria-hidden":!0,width:274,height:118}),t)};var pK=n(78720);function mK(e,t){return e?{content:t?`<span style="color: #fff">${e}<span>`:e}:{}}function TextSetContainer(e){let{pageSize:t,children:n}=e;return t?c.createElement(Zi,{pageSize:t},n):n}const fK=function TextSetElements(e){let{elements:t,isForDisplay:n,pageSize:r}=e;const{textSetHeight:a,textSetWidth:o}=t[0],l=n?(J.PAGE_WIDTH-o)/2:0,i=n?(J.PAGE_WIDTH-a)/2:0;return c.createElement(TextSetContainer,{pageSize:r},t.map((e=>{let{id:t,content:r,normalizedOffsetX:a,normalizedOffsetY:o,...s}=e;return c.createElement(wc,{previewMode:!0,key:t,element:{id:t,...mK(r,n),...s,x:a+l,y:o+i}})})))};function gK(){return gK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gK.apply(this,arguments)}const hK=p.default.button.withConfig({displayName:"textSet__TextSetItem",componentId:"sc-1hor9ow-0"})(["border:0;background:none;position:absolute;top:0;height:","px;width:","px;display:flex;align-items:center;justify-content:center;flex-direction:column;transform:",";background-color:",";border-radius:",";cursor:pointer;transition:background-color ",";outline:none;&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],xe,xe,(e=>{let{translateX:t,translateY:n}=e;return`translateX(${t}px) translateY(${n}px)`}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),f.BUTTON_TRANSITION_TIMING,Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),EK=p.default.img.withConfig({displayName:"textSet__TextSetImg",componentId:"sc-1hor9ow-1"})(["width:","px;height:","px;"],xe,xe),bK=p.default.div.withConfig({displayName:"textSet__DragContainer",componentId:"sc-1hor9ow-2"})(["position:absolute;opacity:0;width:","px;height:","px;background-color:",";"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.opacity.white24}));function TextSet(e,t){let{id:n,elements:r,translateY:a,translateX:o,isActive:l,index:i,...s}=e;const{insertTextSet:d}=YW((e=>({insertTextSet:e.actions.insertTextSet}))),{cdnURL:p}=H(),{pageWidth:m,pageHeight:f}=Vi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),g=(0,u.useCallback)((()=>{d(r),(0,O.trackEvent)("insert_textset")}),[r,d]),h=(0,u.useCallback)((e=>{let{code:t}=e;"Enter"!==t&&"Space"!==t||g()}),[g]);cC({ref:t.current});const[E,b]=(0,u.useState)(!1),{textSetHeight:y,textSetWidth:_}=r[0],v=(0,Mr.dataToEditorX)(_,m),w=(0,Mr.dataToEditorY)(y,f);return c.createElement(hK,gK({translateX:o,translateY:a,ref:t,onKeyUp:h,onPointerEnter:()=>b(!0),onPointerLeave:()=>b(!1),tabIndex:0===i?0:-1},s),c.createElement(EK,{src:`${p}images/text-sets/${n}.png`,alt:"",crossOrigin:"anonymous",decoding:"async"}),(l||E)&&c.createElement(n$,null),c.createElement(JV,{type:"textSet",elements:r,elementProps:{},onClick:g,cloneElement:bK,cloneProps:{width:v,height:w,children:c.createElement(fK,{elements:r,pageSize:{width:m,height:f}})}}))}const yK=(0,u.forwardRef)(TextSet);TextSet.displayName="TextSet";const _K=yK,vK={contact:(0,d._x)("Contact","text set category","web-stories"),editorial:(0,d._x)("Editorial","text set category","web-stories"),list:(0,d._x)("List","text set category","web-stories"),cover:(0,d._x)("Cover","text set category","web-stories"),section_header:(0,d._x)("Header","text set category","web-stories"),step:(0,d._x)("Steps","text set category","web-stories"),table:(0,d._x)("Table","text set category","web-stories"),quote:(0,d._x)("Quote","text set category","web-stories")},wK={TITLE:(0,d.__)("Text Sets","web-stories"),SWITCH_LABEL:(0,d.__)("Match fonts from story","web-stories")},TK={width:xe,height:xe/J.PAGE_RATIO};const SK=function TextSets(e){let{paneRef:t,filteredTextSets:n}=e;const r=(0,u.useRef)(),a=(0,u.useRef)({}),o=(0,u.useMemo)((()=>n.map((e=>e.id))),[n]),l=(0,pK.useVirtual)({size:Math.ceil((n||[]).length/2),parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:4}),i=(0,pK.useVirtual)({horizontal:!0,size:2,parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:0}),{activeGridItemId:s,handleGridFocus:p,handleGridItemFocus:m,isGridFocused:f}=function(e){let{containerRef:t,gridItemRefs:n,gridItemIds:r,rowVirtualizer:a}=e;const[o,l]=(0,u.useState)(),[i,s]=(0,u.useState)(!1),c=(0,u.useMemo)((()=>a.virtualItems),[a]),d=(0,u.useRef)();(0,u.useEffect)((()=>{c!==d?.current&&(d.current=c),o&&i&&n.current?.[o]?.focus()}),[o,c,i,n]),cC({ref:t});const p=(0,u.useCallback)((()=>{if(!i){const e=n.current?.[o]?o:r?.[0];l(e),s(!0),n.current?.[e]?.focus()}}),[o,i,r,n]),m=(0,u.useCallback)((e=>{o!==e&&l(e)}),[o]),f=os(),g=(0,u.useCallback)((()=>{f(),s(!1)}),[f]);return(0,nr.useKeyDownEffect)(t,"tab",g,[g]),(0,u.useFocusOut)(t,(()=>{s(!1)}),[]),(0,u.useMemo)((()=>({handleGridFocus:p,handleGridItemFocus:m,activeGridItemId:o,isGridFocused:i})),[o,i,p,m])}({rowVirtualizer:l,containerRef:r,gridItemRefs:a,gridItemIds:o});return c.createElement(Zi,{pageSize:TK},c.createElement(nK,{height:l.totalSize},c.createElement(rK,{height:l.totalSize,ref:r,columnWidth:xe,rowHeight:xe,onFocus:p,role:"group","aria-label":(0,d.__)("Text Set Options","web-stories")},l.virtualItems.map((e=>i.virtualItems.map((t=>{const r=(e=>{let{columnIndex:t,rowIndex:n}=e;return 0===t?2*n:2*n+1})({columnIndex:t.index,rowIndex:e.index}),o=n[r];if(!o?.elements)return null;const l=s===o.id&&f;return c.createElement(_K,{key:r,id:o.id,"data-testid":`text_set_${o.id}`,ref:e=>a.current[o.id]=e,translateY:e.start,translateX:t.start,"aria-label":o.title,isActive:l,onFocus:()=>m(o.id),elements:o.elements,index:r})})))))))},CK=p.default.div.withConfig({displayName:"textSetsPane__TitleBar",componentId:"sc-vycaev-0"})(["display:flex;justify-content:space-between;padding:20px 0;"]),IK=p.default.div.withConfig({displayName:"textSetsPane__TextSetsToggle",componentId:"sc-vycaev-1"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),xK=p.default.div.withConfig({displayName:"textSetsPane__TextSetsWrapper",componentId:"sc-vycaev-2"})(["",";"],tK);const AK=function TextSetsPane(e){let{paneRef:t}=e;const{areTextSetsLoading:n,textSets:r}=YW((e=>{let{state:{areTextSetsLoading:t,textSets:n}}=e;return{areTextSetsLoading:t,textSets:n}})),[a,o]=(0,u.useState)(!1),l=(0,u.useRef)(!1),i=(0,u.useMemo)((()=>Object.values(r).flat()),[r]),s=xa((e=>{let{state:{pages:t}}=e;return t})),[p,m]=(0,u.useState)(wo.getItemByKey(`${vo.TEXT_SET_SETTINGS}`)?.selectedCategory),f=(0,u.useCallback)((()=>function(e){let{fonts:t,textSets:n}=e;return n.map((e=>e.elements.reduce(((e,n)=>"text"===n.type&&Boolean(n.font?.family)?e|-1!==t.indexOf(n.font?.family):e),!1)&&e)).filter(Boolean)}({fonts:eK(s),textSets:p?r[p]:i})),[i,s,p,r]),g=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((e=>{let{textSetFonts:t=[],textSetCategory:n,elements:r,id:a}=e;return{id:a,title:(0,Ze.default)(
/* translators: 1: text set category. 2: list of fonts. */
(0,d._n)("Text set %1$s with %2$s font","Text set %1$s with %2$s fonts",t.length,"web-stories"),vK[n],Qq(t)),elements:r}}))}),[]),h=(0,u.useMemo)((()=>g(a?f():p?r?.[p]:i)),[p,r,i,g,f,a]),E=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","text sets","web-stories")},...Object.keys(r).map((e=>({id:e,label:vK[e]??e})))]),[r]),b=(0,AA.default)(),y=(0,u.useCallback)((e=>{m(e),b(null===e?(0,d.__)("Show all text sets","web-stories"):(0,Ze.default)(
/* translators: %s: filter category name */
(0,d.__)("Selected text set filter %s","web-stories"),vK[e])),wo.setItemByKey(`${vo.TEXT_SET_SETTINGS}`,{selectedCategory:e}),l.current=!0}),[b]),_=(0,u.useCallback)((()=>{requestAnimationFrame((()=>o((e=>!e)))),l.current=!0}),[o]);(0,u.useEffect)((()=>{l.current&&(0,O.trackEvent)("search",{search_type:"textsets",search_term:"",search_category:p,search_filter:a?"show_in_use":void 0})}),[p,a]);const v=(0,u.useMemo)((()=>`section-${(0,ue.default)()}`),[]),w=(0,u.useMemo)((()=>`toggle_text_sets_${(0,ue.default)()}`),[]),T=(0,u.useMemo)((()=>a?(0,d.__)("No matching Text Sets available. Try adding text to your story.","web-stories"):(0,d.__)("No Text Sets available.","web-stories")),[a]);return c.createElement(XW,{id:v},c.createElement(CK,null,c.createElement(Lu.Headline,{as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},wK.TITLE),c.createElement(IK,null,c.createElement(Ve.Text,{as:"label",htmlFor:w,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},wK.SWITCH_LABEL),c.createElement(j$,{id:w,"aria-label":wK.SWITCH_LABEL,name:w,checked:a,onChange:_}))),c.createElement(Jq,null,c.createElement(iV,{items:E,selectedItemId:p,selectItem:y,deselectItem:()=>y(null),ariaLabel:(0,d.__)("Select filter for text sets list","web-stories")})),c.createElement(xK,null,h?.length||n?c.createElement(SK,{paneRef:t,filteredTextSets:h}):c.createElement(uK,null,T)))};function kK(){return kK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kK.apply(this,arguments)}const OK=(0,p.default)(XW).withConfig({displayName:"stylePresets__SectionContainer",componentId:"sc-bczcw0-0"})(["padding:16px 0;margin-bottom:-24px;border-top:1px solid ",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),NK=p.default.div.withConfig({displayName:"stylePresets__TitleBar",componentId:"sc-bczcw0-1"})(["display:flex;padding-bottom:16px;justify-content:space-between;align-items:center;"]),PK=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-bczcw0-2"})([""]),RK=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-bczcw0-3"})(["margin-left:auto;"]),MK=(0,p.default)(Ve.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-bczcw0-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),LK={x:40},DK="text";const BK=(0,u.memo)((function(){const{textStyles:e,isText:t,updateSelectedElements:n}=xa((e=>{let{state:t,actions:n}=e;return{isText:Boolean(t.selectedElements&&yC(DK,t.selectedElements)),textStyles:t.story?.globalStoryStyles?.textStyles||[],updateSelectedElements:n.updateSelectedElements}})),{insertElement:r}=YW((e=>({insertElement:e.actions.insertElement}))),{setColor:a,setFontWeight:o,setLetterSpacing:l,toggleItalic:i,toggleUnderline:s}=(0,Ir.getHTMLFormatters)(),p=(0,u.useRef)(null),m=(0,u.useRef)(null),[g,h]=(0,u.useState)(!1),{isRTL:E,styleConstants:{topOffset:b}={}}=H(),y=e.length>0,_=(0,u.useCallback)((e=>{n({properties:t=>{const n=c_(t,e,!0),r=aR({...t,...n});return{...n,...r}}})}),[n]),v=CG({pushUpdate:_}),{addGlobalPreset:w}=_C({presetType:Be}),T=e=>{t?v(e):((e=>{const{color:t,fontWeight:n,isItalic:c,isUnderline:d,letterSpacing:u}=e;let p=bs.content;p=a(p,t),p=o(p,n),p=i(p,c),p=s(p,d),p=l(p,u),r(DK,{...bs,...e,content:p})})(e),h(!1))},S=t?{}:{activeItemOverlay:c.createElement(n$,null),applyLabel:(0,d.__)("Add new text","web-stories")};return c.createElement(OK,null,c.createElement(NK,null,c.createElement(Lu.Headline,{as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Saved Styles","web-stories")),c.createElement(RK,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:w,"aria-label":(0,d.__)("Add style","web-stories"),disabled:!t},c.createElement(fy,null))),y&&c.createElement(c.Fragment,null,c.createElement(PK,{ref:m},c.createElement(iG,kK({styles:[...e].reverse().slice(0,2),handleClick:T,buttonWidth:150},S))),c.createElement(SG,{ref:p,onClick:()=>h(!0),"aria-haspopup":"dialog","aria-expanded":g},(0,d.__)("More styles","web-stories"),c.createElement(Xu.default,null)),c.createElement(PT.Popup,{topOffset:b,isRTL:E,anchor:p,isOpen:g,placement:_d.PLACEMENT.RIGHT_START,spacing:LK,renderContents:()=>c.createElement(wG,kK({styles:e,applyStyle:T,onClose:()=>h(!1)},S))})),!y&&c.createElement(TG,null,c.createElement(MK,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))}));function FK(){return FK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FK.apply(this,arguments)}const HK=(0,p.default)(cV).withConfig({displayName:"textPane__Pane",componentId:"sc-zvmbdp-0"})(["overflow-y:scroll;max-height:100%;position:relative;"]),UK=p.default.div.withConfig({displayName:"textPane__GridContainer",componentId:"sc-zvmbdp-1"})(["display:grid;grid-template-columns:1fr 1fr;gap:12px;"]),zK=p.default.div.withConfig({displayName:"textPane__SmartColorToggle",componentId:"sc-zvmbdp-2"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const GK=function TextPane(e){const t=(0,u.useRef)(),[,n]=(0,u.useState)(),{shouldUseSmartColor:r,setShouldUseSmartColor:a}=YW((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor,setShouldUseSmartColor:e.actions.setShouldUseSmartColor}))),{getPosition:o,insertPreset:l}=Xq({shouldUseSmartColor:r}),i=Wc((e=>{let{actions:t}=e;return t.generateDeferredCurrentPageCanvas}));(0,u.useResizeEffect)(t,(()=>{n(Date.now())}),[]);const s=(0,u.useCallback)((()=>a((e=>!e))),[a]),p=(0,u.useMemo)((()=>`toggle_auto_color_${(0,ue.default)()}`),[]);return c.createElement(HK,FK({id:$q},e,{ref:t}),c.createElement(zK,null,c.createElement(Ve.Text,{as:"label",htmlFor:p,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Adaptive text colors","web-stories")),c.createElement(Tooltip,{title:(0,d.__)("May impact performance when inserting text","web-stories")},c.createElement(j$,{id:p,checked:r,onChange:s}))),c.createElement(XW,{onPointerOver:()=>r&&i()},c.createElement(UK,null,ys.map(((e,t)=>{let{title:n,element:r}=e;return c.createElement(Vq,{key:n,title:n,element:r,insertPreset:l,getPosition:o,index:t})})))),c.createElement(BK,null),t.current&&c.createElement(AK,{paneRef:t}))};const jK=function TextIcon(){return c.createElement(IE.default,{title:(0,d.__)("Text library","web-stories")})},YK=dV("elements");function ZK(){return ZK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZK.apply(this,arguments)}const WK=function ElementsPane(e){return c.createElement(cV,ZK({id:YK},e),(0,d.__)("Still empty","web-stories"))};const VK=function ElementsIcon(){return c.createElement(vg.default,{title:(0,d.__)("Elements library","web-stories")})},$K=dV("pageTemplates");var qK=n(13293);const KK={cover:{name:(0,d.__)("Cover","web-stories")},section:{name:(0,d.__)("Section","web-stories")},quote:{name:(0,d.__)("Quote","web-stories")},editorial:{name:(0,d.__)("Editorial","web-stories")},list:{name:(0,d.__)("List","web-stories")},table:{name:(0,d.__)("Table","web-stories")},steps:{name:(0,d.__)("Steps","web-stories")}};function XK(){return XK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XK.apply(this,arguments)}const QK=p.default.div.withConfig({displayName:"defaultPageTemplate__PageTemplateWrapper",componentId:"sc-kt5s68-0"})([""]),JK=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN}).withConfig({displayName:"defaultPageTemplate__PageTemplateButton",componentId:"sc-kt5s68-1"})(["position:relative;display:block;padding:0;border-radius:",";overflow:hidden;&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),Ju.FOCUS_VISIBLE_SELECTOR,Ju.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Fu.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),eX=(0,p.default)(fV).withConfig({displayName:"defaultPageTemplate__TemplateTitleContainer",componentId:"sc-kt5s68-2"})(["",":hover &,",":focus &{opacity:1;}"],JK,JK),tX=p.default.img.withConfig({displayName:"defaultPageTemplate__PosterImg",componentId:"sc-kt5s68-3"})(["display:block;width:100%;"]),nX=(0,u.forwardRef)(((e,t)=>{let{page:n,columnWidth:r,isActive:a,onFocus:o,...l}=e;const i=(0,Ze.default)(
/* translators: 1: template name. 2: page template name. */
(0,d._x)("%1$s %2$s","page template title","web-stories"),n.title,KK[n.type].name),[s,p]=(0,u.useState)(!1);return c.createElement(QK,{ref:t,role:"listitem"},c.createElement(JK,XK({columnWidth:r,tabIndex:a?0:-1,"aria-label":i,onPointerEnter:()=>p(!0),onPointerLeave:()=>p(!1),onFocus:()=>{p(!0),o?.()},onBlur:()=>p(!1)},l),n.png&&c.createElement(tX,{src:n.png,alt:(0,Ze.default)(
/* translators: 1: page title */
(0,d.__)("Snapshot of page template for %1$s","web-stories"),n.title),crossOrigin:"anonymous",decoding:"async",draggable:!1}),s&&c.createElement(n$,null),n.title&&c.createElement(eX,null,c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},i))))}));nX.displayName="DefaultPageTemplate";const rX=nX,aX=p.default.img.withConfig({displayName:"savedPageTemplate__TemplateImage",componentId:"sc-5hfe38-0"})(["width:100%;height:auto;"]),oX=p.default.div.withConfig({displayName:"savedPageTemplate__PageTemplateWrapper",componentId:"sc-5hfe38-1"})(["height:","px;width:","px;cursor:pointer;",";",";"],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{isHighlighted:t}=e;return t&&Fu.focusCSS}),Hu);oX.propTypes={pageSize:Ec.isRequired};const lX=p.default.div.withConfig({displayName:"savedPageTemplate__PreviewPageWrapper",componentId:"sc-5hfe38-2"})(["position:relative;height:","px;width:","px;background-color:",";border-radius:",";overflow:hidden;",""],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{background:t}=e;return(0,Nr.default)(t)}));lX.propTypes={pageSize:Ec.isRequired};const iX=(0,p.default)(mV).withConfig({displayName:"savedPageTemplate__DeleteButton",componentId:"sc-5hfe38-3"})(["top:4px;right:4px;"]);function SavedPageTemplate(e,t){let{page:n,pageSize:r,handleDelete:a,index:o,...l}=e;const{capabilities:{hasUploadMediaAction:i}}=H(),{actions:{updatePageTemplate:s}}=Z(),{actions:{uploadFile:p}}=Rt(),{updateSavedTemplate:m}=YW((e=>({updateSavedTemplate:e.actions.updateSavedTemplate}))),f=pc((e=>{let{actions:t}=e;return t.queuePageImageGeneration})),g=pc((e=>{let{state:{dataUrls:t}}=e;return t[n.id]}))||n.pregeneratedPageDataUrl,[h,E]=(0,u.useState)(!1);(0,u.useFocusOut)(t,(()=>E(!1)),[]);const{highlightedTemplate:b,onClick:y}=l,_=(0,u.useCallback)((()=>E(!0)),[]),v=(0,u.useCallback)((()=>{E(!1)}),[]),w=n.image?.url||g,T=i&&g&&!n.image?.url;(0,u.useEffect)((()=>{T&&(async()=>{try{const e=await bo(g),t=se(e,`web-stories-page-template-${n.templateId}.jpg`,"image/jpeg"),r=await p(t,{templateId:n.templateId,mediaSource:"page-template"});s(n.templateId,{featured_media:r.id}),m({templateId:n.templateId,image:{id:r.id,height:r.height,width:r.width,url:r.src}})}catch(e){(0,O.trackError)("upload_generated_page_template_image",e?.message)}})()}),[g,p,s,n.templateId,T,m]),(0,u.useEffect)((()=>{!w&&i&&f(n)}),[w,f,n,i]);const S=(0,u.useRef)(),C=(0,u.useRef)();cC({ref:S},[],2),cC({ref:C},[],2);const I=os();return(0,nr.useKeyDownEffect)(C,"tab",I,[I]),c.createElement(oX,{pageSize:r,role:"listitem",ref:t,onPointerEnter:_,onPointerLeave:v,"aria-label":n.title,isHighlighted:n.id===b,onFocus:_,onBlur:v,onClick:y},c.createElement(lX,{pageSize:r,background:n.backgroundColor},w?c.createElement(aX,{alt:n.image?.alt||(0,d.__)("Saved Page Template","web-stories"),src:w,height:n.image?.height,width:n.image?.height,draggable:!1}):c.createElement(Zi,{pageSize:{height:r.height,width:r.width}},n.elements.map((e=>c.createElement(wc,{key:e.id,previewMode:!0,element:e})))),h&&c.createElement(n$,{showIcon:!1}),c.createElement(mV,{ref:S,onClick:e=>{e.stopPropagation(),y(e)},"aria-label":(0,d.__)("Use template","web-stories"),$display:h,tabIndex:0===o?0:-1},c.createElement(sy,null)),c.createElement(iX,{ref:C,$display:h,onClick:e=>{e.stopPropagation(),a(n,e)},"aria-label":(0,d.__)("Delete Page Template","web-stories"),tabIndex:h?0:-1},c.createElement(e_,null))))}const sX=(0,u.forwardRef)(SavedPageTemplate);SavedPageTemplate.displayName="SavedPageTemplate";const cX=sX;function dX(){return dX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dX.apply(this,arguments)}const uX=p.default.div.withConfig({displayName:"templateList__WrapperGrid",componentId:"sc-1ukppvz-0"})(["display:grid;width:100%;margin-left:",";margin-bottom:12px;gap:12px;grid-template-columns:",";grid-template-rows:",";"],sV,(e=>{let{columnWidth:t}=e;return`repeat(auto-fit, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`repeat(minmax(${t}px, 1fr))`}));const pX=function TemplateList(e){let{pages:t,parentRef:n,pageSize:r,handleDelete:a,fetchTemplates:o,...l}=e;const{addPage:i}=xa((e=>{let{actions:t}=e;return{addPage:t.addPage}})),{isRTL:s}=H(),{showSnackbar:p}=(0,Er.useSnackbar)(),[m,f]=(0,u.useState)(),g=(0,u.useRef)(),h=(0,u.useRef)({}),E=(0,u.useCallback)((e=>{let{templateId:t,version:n,title:r,...a}=e;const o=(0,Hn.duplicatePage)(a);i({page:o}),(0,O.trackEvent)("insert_page_template",{name:r||"custom"}),p({message:(0,d.__)("Page Template added.","web-stories"),dismissible:!0})}),[i,p]),b=(0,u.useCallback)((e=>{f(e)}),[]),y=a||o;return(0,u.useEffect)((()=>{t.length>0&&(m&&t.some((e=>e.id===m))||f(t[0].id))}),[m,t]),(0,u.useEffect)((()=>{o?.()}),[o]),(0,WB.default)({containerRef:n,gridRef:g,itemRefs:h,items:t,currentItemId:m,isRTL:s}),c.createElement(uX,{ref:g,columnWidth:r.width,rowHeight:r.containerHeight,role:"list","aria-label":(0,d.__)("Page Template Options","web-stories")},y?t.map(((e,t)=>c.createElement(cX,dX({key:e.id,"data-testid":`page_template_${e.id}`,ref:t=>h.current[e.id]=t,page:e,pageSize:r,onClick:()=>E(e),handleDelete:a,onFocus:()=>b(e.id),index:t},l)))):t.map((e=>c.createElement(rX,dX({ref:t=>h.current[e.id]=t,key:e.id,"data-testid":`page_template_${e.id}`,page:e,pageSize:r,onFocus:()=>b(e.id),isActive:m===e.id,onClick:()=>E(e.story),columnWidth:r.width},l)))))},mX=p.default.div.withConfig({displayName:"defaultTemplates__ActionRow",componentId:"sc-14vj9wc-0"})(["display:flex;justify-content:space-between;margin:0px 16px 22px 16px;"]),fX=p.default.div.withConfig({displayName:"defaultTemplates__PageTemplatesParentContainer",componentId:"sc-14vj9wc-1"})(["",";margin-top:26px;overflow-x:hidden;overflow-y:scroll;"],tK);const gX=function DefaultTemplates(e){let{pageSize:t}=e;const{actions:{getPageTemplates:n}}=Z(),[r,a]=(0,u.useState)([]),[o,l]=(0,u.useState)(!1);(0,u.useEffect)((()=>{!async function(){l(!0);const e=(0,O.getTimeTracker)("load_page_templates");a(await n()),l(!1),e()}()}),[n,a]);const i=(0,u.useRef)(),[s,p]=(0,u.useState)(null),m=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","page templates","web-stories")},...Object.entries(KK).map((e=>{let[t,{name:n}]=e;return{id:t,label:n}}))]),[]),f=(0,u.useMemo)((()=>r.reduce(((e,t)=>[...e,...Object.values(t.postersByPage).map(((e,n)=>({id:`${t.slug}_${n}`,title:t.title,story:t.pages[n],...e}))).reduce(((e,t)=>!t.type||s&&t.type!==s?e:[...e,t]),[])]),[])),[r,s]),g=(0,u.useCallback)((e=>{p(e),(0,O.trackEvent)("search",{search_type:"page_templates",search_term:"",search_category:e})}),[]);return c.createElement(c.Fragment,null,c.createElement(iV,{items:m,selectedItemId:s,selectItem:g,deselectItem:()=>g(null)}),c.createElement(fX,{ref:i,tabIndex:-1},c.createElement(mX,null,c.createElement(Lu.Headline,{as:"h2",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Templates","web-stories"))),!o&&i.current?c.createElement(pX,{pageSize:t,parentRef:i,pages:f}):c.createElement(pV,null,c.createElement(qK.LoadingSpinner,{animationSize:64,numCircles:8}))))};function hX(){return hX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hX.apply(this,arguments)}const EX=p.default.div.withConfig({displayName:"savedTemplates__Wrapper",componentId:"sc-1bm5y87-0"})(["height:100%;padding-top:5px;overflow-y:scroll;overflow-x:hidden;min-height:96px;"]);const bX=function SavedTemplates(e){let{pageSize:t,loadTemplates:n,isLoading:r,...a}=e;const{actions:{deletePageTemplate:o}}=Z(),{savedTemplates:l,setSavedTemplates:i,nextTemplatesToFetch:s}=YW((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates}))),{showSnackbar:p}=(0,Er.useSnackbar)(),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(null),E=(0,u.useRef)();(0,u.useLayoutEffect)((()=>{f(!1)}),[]);const b=(0,u.useCallback)((()=>{s&&n()}),[s,n]),_=(0,u.useCallback)(((e,t)=>{let{templateId:n}=e;t?.stopPropagation(),n&&(f(!0),h(n))}),[]),v=(0,u.useCallback)((()=>o(g).then((()=>{i(l.filter((e=>{let{templateId:t}=e;return t!==g}))),f(!1)})).catch((()=>{p({message:(0,d.__)("Unable to delete the template. Please try again.","web-stories"),dismissible:!0})}))),[o,g,l,p,i]);return c.createElement(EX,{ref:E,tabIndex:-1},!r&&E.current?c.createElement(pX,hX({parentRef:E,pageSize:t,pages:l,handleDelete:_,fetchTemplates:b},a)):c.createElement(pV,null,c.createElement(qK.LoadingSpinner,{animationSize:64,numCircles:8})),m&&c.createElement(y,{isOpen:!0,onClose:()=>f(!1),title:(0,d.__)("Delete Page Template","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:v,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Are you sure you want to delete this template? This action cannot be undone.","web-stories"))))},yX=e=>{if(e.elements.length>1)return!1;const t=(0,Hn.createPage)();if(!(0,u.shallowEqual)(e.backgroundColor?.color,t.backgroundColor?.color))return!1;const n=e.elements.find((e=>e.isBackground));return!(n&&!n.isDefaultBackground)};const _X=function(e){const t=document.createElement("canvas"),n=t.getContext("2d"),r=Number(e.height),a=Number(e.width)/J.PAGE_RATIO,o=(r-a)/2;return t.width=e.width,t.height=a,n.drawImage(e,0,-o),t};var vX,wX,TX;function SX(){return SX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SX.apply(this,arguments)}const SvgIllustration=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",SX({viewBox:"0 0 32 43",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vX||(vX=c.createElement("path",{d:"M21.903 0H4a4 4 0 0 0-4 4v34.4a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4V10.03a4 4 0 0 0-1.187-2.844l-6.097-6.03A4 4 0 0 0 21.903 0Z",fill:"#767E80"})),wX||(wX=c.createElement("path",{d:"m30.146 8.146-5.893-5.893a.5.5 0 0 0-.853.354V8.5a.5.5 0 0 0 .5.5h5.893a.5.5 0 0 0 .353-.854Z",fill:"#ADB1B3"})),TX||(TX=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 29a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12.469c.535 0 .969.434.969.969v2.531H19.5a.969.969 0 0 1 0 1.938h-2.531V24.5a.969.969 0 0 1-1.938 0v-2.531H12.5a.969.969 0 0 1 0-1.938h2.531V17.5c0-.535.434-.969.969-.969Z",fill:"#E4E5E6"})))},CX=(0,c.memo)(SvgIllustration),IX=(0,p.default)(Ve.Text).withConfig({displayName:"templateSave__StyledText",componentId:"sc-vcrsmn-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),xX=p.default.div.withConfig({displayName:"templateSave__IconWrapper",componentId:"sc-vcrsmn-1"})(["width:32px;height:42px;margin-right:29px;"]),AX=p.default.button.withConfig({displayName:"templateSave__SaveButton",componentId:"sc-vcrsmn-2"})(["border:0;background:none;height:56px;width:100%;padding:7px;background-color:",";transition:background-color ",";border-radius:",";display:flex;flex-direction:row;align-items:center;cursor:pointer;&:hover{background-color:",";}"," ",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),f.BUTTON_TRANSITION_TIMING,(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}),(e=>{let{$isDisabled:t,theme:n}=e;return t&&`\n      cursor: default;\n      background-color: ${n.colors.interactiveBg.disable};\n      &:hover {\n        background-color: ${n.colors.interactiveBg.disable};\n      }\n\n      ${xX} svg {\n        path:nth-child(1): ${n.colors.fg.disable};\n        path:nth-child(2) {\n          fill: ${n.colors.fg.tertiary};\n        }\n        path:nth-child(3) {\n          fill: ${n.colors.fg.secondary};\n        }\n      }\n\n      ${IX} {\n        color: ${n.colors.fg.disable};\n      }\n  `}),Hu);const kX=function TemplateSave(e){let{setShowDefaultTemplates:t,updateList:n}=e;const{actions:{addPageTemplate:r}}=Z(),{showSnackbar:a}=(0,Er.useSnackbar)(),{currentPage:o}=xa((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),l=Wc((e=>{let{state:t}=e;return t.pageCanvasMap})),i=(0,u.useMemo)((()=>o&&yX(o)),[o]),s=(0,u.useCallback)((async e=>{if(e.preventDefault(),i)return;let s;const c=l[o.id];if(c){s=_X(c).toDataURL("image/jpeg")}try{const{templateId:e,...t}=o,l=await r({story_data:{...t,id:(0,ue.default)(),version:tr.DATA_VERSION},featured_media:undefined,title:null});s&&(l.pregeneratedPageDataUrl=s),n?.(l),a({message:(0,d.__)("Page Template saved.","web-stories"),dismissable:!0})}catch{a({message:(0,d.__)("Unable to save the template. Please try again.","web-stories"),dismissable:!0})}t(!1)}),[i,r,o,t,a,n,l]);return c.createElement(AX,{"aria-disabled":i,onClick:s,$isDisabled:i},c.createElement(xX,null,c.createElement(CX,{"aria-hidden":!0})),c.createElement(IX,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"},(0,d.__)("Save current page as template","web-stories")))};function OX(){return OX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OX.apply(this,arguments)}const NX=(0,p.default)(cV).withConfig({displayName:"pageTemplatesPane__StyledPane",componentId:"sc-hm7mfr-0"})(["height:100%;padding:0;overflow:hidden;"]),PX=p.default.div.withConfig({displayName:"pageTemplatesPane__PaneInner",componentId:"sc-hm7mfr-1"})(["height:100%;display:flex;flex-direction:column;"]),RX=p.default.div.withConfig({displayName:"pageTemplatesPane__DropDownWrapper",componentId:"sc-hm7mfr-2"})(["text-align:left;margin:28px 16px 17px;"]),MX=p.default.div.withConfig({displayName:"pageTemplatesPane__ButtonWrapper",componentId:"sc-hm7mfr-3"})(["padding:0 1em;margin-top:24px;"]),LX="default",DX="saved",BX=vo.DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT,FX=wo.getItemByKey(BX);const HX=function PageTemplatesPane(e){const{actions:{getCustomPageTemplates:t}}=Z(),{canViewDefaultTemplates:n}=H(),r=Boolean(t),{savedTemplates:a,setSavedTemplates:o,nextTemplatesToFetch:l,setNextTemplatesToFetch:i}=YW((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates,setNextTemplatesToFetch:e.actions.setNextTemplatesToFetch}))),[s,p]=(0,u.useState)(null===FX?n:n&&FX),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(!1),E=(0,u.useCallback)((e=>{o((t=>[e,...t||[]])),f(e.id),wo.setItemByKey(BX,!1)}),[o]),b=(0,u.useCallback)((()=>{l&&(h(!0),t(l).then((e=>{let{templates:t,hasMore:n}=e;const r=t.map((e=>{let{version:t,templateId:n,...r}=e;const a={pages:[r]},o=(0,tr.migrate)(a,t||25);return{templateId:n,version:tr.DATA_VERSION,...o.pages[0]}}));o((e=>[...e||[],...r])),i(!!n&&l+1)})).catch((e=>{(0,O.trackError)("saved_templates",e.message),i(!1),o((e=>e??[]))})).finally((()=>h(!1))))}),[t,l,o,i]);(0,u.useEffect)((()=>{a||s||b()}),[a,b,s]),(0,u.useEffect)((()=>{let e=null;return m&&(e=setTimeout((()=>{f(null)}),1e3)),()=>clearTimeout(e)}),[m]);const y=[];n&&y.push({value:LX,label:(0,d.__)("Default templates","web-stories")}),r&&y.push({value:DX,label:(0,d.__)("Saved templates","web-stories")});const _=(0,u.useMemo)((()=>({width:158,height:Math.round(158/J.PAGE_RATIO),containerHeight:Math.round(158/J.FULLBLEED_RATIO)})),[]);return c.createElement(NX,OX({id:$K},e),c.createElement(PX,null,c.createElement(c.Fragment,null,r&&c.createElement(MX,null,c.createElement(kX,{setShowDefaultTemplates:p,updateList:E})),c.createElement(RX,null,y.length>1&&c.createElement(xA,{options:y,selectedValue:s?LX:DX,onMenuItemClick:(e,t)=>{const n=t===LX;s!==n&&(p(LX===t),wo.setItemByKey(BX,n))},"aria-label":(0,d.__)("Select templates type","web-stories")}))),s?c.createElement(gX,{pageSize:_}):c.createElement(bX,{pageSize:_,highlightedTemplate:m,loadTemplates:b,isLoading:g})))};const UX=function PageTemplatesIcon(){return c.createElement(Tg,{title:(0,d.__)("Page templates library","web-stories")})},zX=dV("shopping");function GX(){return GX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GX.apply(this,arguments)}const jX=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"shoppingPane__HelperText",componentId:"sc-14o47kz-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const YX=function ShoppingPane(e){const t=(0,S.useFeature)("shoppingIntegration"),{actions:{getProducts:n}}=Z(),r=xa((e=>{let{state:{meta:{isSaving:t}}}=e;return t})),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(!1),[s,p]=(0,u.useState)([]);(0,u.useEffect)((()=>{(async()=>{i(!0);const e=await n();p(e.map((e=>({name:e.productTitle,id:e.productId,product:e})))),i(!1)})()}),[n]);const g=(0,u.useCallback)((async e=>(await n(e)).map((e=>({name:e.productTitle,id:e.productId,product:e})))),[n]),{insertElement:h}=YW((e=>({insertElement:e.actions.insertElement}))),E=(0,u.useCallback)((()=>{h("product",{width:25,height:25,product:a}),o(null)}),[h,a]);if(!t)return null;const b={hasSearch:!0,lightMode:!0,onChange:e=>{let{product:t}=e;o(t)},getOptionsByQuery:g,selectedId:a?.productId,dropDownLabel:(0,d.__)("Product","web-stories"),placeholder:l?(0,d.__)("Loading…","web-stories"):"",disabled:!!l||r,primaryOptions:l?[]:s,zIndex:10};return c.createElement(cV,GX({id:zX},e),c.createElement(fx,null,c.createElement(jX,null,(0,d.__)('Select a product to add to the page. It will be displayed as a "dot" on the page, as well as in the page attachment.',"web-stories"))),c.createElement(fx,null,c.createElement(FN.default.DropDown,GX({options:s,searchResultsLabel:(0,d.__)("Search results","web-stories"),"aria-label":(0,d.__)("Product","web-stories")},b))),c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:E,disabled:!a},(0,d.__)("Insert product","web-stories")))};var ZX,WX,VX;function $X(){return $X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$X.apply(this,arguments)}const SvgShopping=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ZX||(ZX=c.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),WX||(WX=c.createElement("path",{d:"m21.41 11.41-8.83-8.83c-.37-.37-.88-.58-1.41-.58H4c-1.1 0-2 .9-2 2v7.17c0 .53.21 1.04.59 1.41l8.83 8.83c.78.78 2.05.78 2.83 0l7.17-7.17c.78-.78.78-2.04-.01-2.83zM12.83 20 4 11.17V4h7.17L20 12.83 12.83 20z"})),VX||(VX=c.createElement("circle",{cx:6.5,cy:6.5,r:1.5})))},qX=(0,c.memo)(SvgShopping),KX=(0,p.default)(qX).withConfig({displayName:"shoppingIcon__StyledIcon",componentId:"sc-1yb9xu9-0"})(["width:24px !important;height:24px !important;"]);const XX=function ShoppingIcon(){return c.createElement(KX,{title:(0,d.__)("Shopping library","web-stories")})},QX={icon:sq,tooltip:(0,d.__)("Media","web-stories"),placement:_d.PLACEMENT.BOTTOM_START,Pane:iq,id:Fm},JX={icon:Sq,tooltip:(0,d.__)("Third-party media","web-stories"),Pane:Tq,id:Hm},eQ={icon:jK,tooltip:(0,d.__)("Text","web-stories"),Pane:GK,id:Um},tQ={icon:Gq,tooltip:(0,d.__)("Shapes & Stickers","web-stories"),Pane:zq,id:zm},nQ={icon:VK,tooltip:(0,d.__)("Elements","web-stories"),Pane:WK,id:Gm},rQ={icon:UX,tooltip:(0,d.__)("Page Templates","web-stories"),Pane:HX,id:jm},aQ={icon:XX,tooltip:(0,d.__)("Shopping","web-stories"),Pane:YX,id:Ym},oQ=new Set([nQ,QX,JX,rQ,tQ,eQ,aQ].map((e=>e.id)));const lQ=function LibraryProvider(e){let{children:t}=e;const{showMedia3p:n,canViewDefaultTemplates:r}=H(),{actions:{getMedia:a,getCustomPageTemplates:o}}=Z(),l=(0,S.useFeature)("shoppingIntegration"),i=(0,S.useFeature)("showElementsTab"),s=Boolean(o),d=r||s,p=Boolean(a),[m,f]=(0,u.useState)({}),[g,h]=(0,u.useState)({}),[E,b]=(0,u.useState)(null),[y,_]=(0,u.useState)(1),[v,w]=(0,u.useState)(!1),T=(0,u.useCallback)((e=>b((t=>(0,VW.default)("function"==typeof e?e(t):e,"templateId")))),[]),C=(0,u.useCallback)((e=>{b((t=>t.map((t=>t.templateId===e.templateId?{...t,...e}:t))))}),[]),I=(0,u.useMemo)((()=>[p&&QX,n&&JX,eQ,tQ,i&&nQ,l&&aQ,d&&rQ].filter(Boolean)),[n,i,p,d,l]),[x,A]=(0,u.useState)(I[0].id),k=ls(),{insertTextSet:N,insertTextSetByOffset:P}=ZZ(v),{highlightedTab:R}=Hp((e=>{let{section:t}=e;return{highlightedTab:t}}));(0,u.useEffect)((()=>{oQ.has(R)&&(A(R),(0,O.trackEvent)("quick_action_tab_change",{name:R}))}),[R]);const M=(0,u.useRef)(null),L=(0,u.useRef)(null),D=(0,u.useRef)(null),B=(0,u.useRef)(null),F=(0,u.useRef)(null),U=(0,u.useRef)(null),z=(0,u.useRef)(null),G=(0,u.useMemo)((()=>({[QX.id]:M,[JX.id]:L,[eQ.id]:D,[tQ.id]:B,[nQ.id]:F,[rQ.id]:U,[aQ.id]:z})),[]),j=(0,u.useMemo)((()=>({state:{areTextSetsLoading:g,tab:x,tabRefs:G,textSets:m,savedTemplates:E,nextTemplatesToFetch:y,shouldUseSmartColor:v},actions:{setTab:A,insertElement:k,insertTextSet:N,insertTextSetByOffset:P,setSavedTemplates:T,updateSavedTemplate:C,setNextTemplatesToFetch:_,setShouldUseSmartColor:w},data:{tabs:I}})),[g,x,G,m,E,k,N,P,I,y,_,v,T,C]);return(0,u.useEffect)((()=>{let e=!0;return x!==eQ.id||Object.keys(m).length||async function(){const t=(0,O.getTimeTracker)("load_text_sets");h(!0);const n=await async function(){const e=await Promise.all(["cover","step","section_header","editorial","contact","table","list","quote"].map((async e=>[e,await WW(e)])));return Object.fromEntries(e)}();t(),e&&(f(n),h(!1))}(),()=>{e=!1}}),[x,m]),c.createElement(jW.Provider,{value:j},t)},MediaButton=()=>{const{onSelect:e}=ZW();return c.createElement(yx,{renderButton:e=>c.createElement(cP.default,{onClick:e},SW.UPLOAD_IMAGE_OR_VIDEO),onInsert:e})};const iQ=function EmptyStateMenu(){const{setHighlights:e}=Hp((e=>{let{setHighlights:t}=e;return{setHighlights:t}}));return c.createElement(c.Fragment,null,c.createElement(cP.default,{onClick:()=>{e({highlight:Vm.MEDIA})}},SW.CHOOSE_IMAGE_OR_VIDEO),c.createElement(lQ,null,c.createElement(MediaButton,null)),c.createElement(cP.default,{onClick:()=>{e({highlight:Vm.PAGE_TEMPLATES})}},SW.BROWSE_PAGE_TEMPLATES),c.createElement(cP.default,{onClick:()=>{e({highlight:Vm.MEDIA3P})}},SW.BROWSE_STOCK_IMAGES_AND_VIDEO))},sQ=p.default.div.withConfig({displayName:"rightClickMenu__RightClickMenuContainer",componentId:"sc-11e09ag-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0})),cQ=()=>{const{isRTL:e}=H(),{selectedElements:t,isThisEmptyStory:n}=xa((e=>({selectedElements:e.state.selectedElements,isThisEmptyStory:DZ(e.state.pages)}))),{isMenuOpen:r,menuPosition:a,onCloseMenu:o,maskRef:l}=sc(),i=(0,u.useRef)(),s=e=>{e.preventDefault(),e.stopPropagation()},m=(0,u.useMemo)((()=>{if(n)return iQ;if(t.length>1)return MW;const e=t?.[0];if(e?.isDefaultBackground)return DW;switch(e?.type){case Hn.ELEMENT_TYPES.IMAGE:case Hn.ELEMENT_TYPES.VIDEO:case Hn.ELEMENT_TYPES.GIF:return e?.isBackground?DW:RW;case Hn.ELEMENT_TYPES.SHAPE:return FW;case Hn.ELEMENT_TYPES.TEXT:return GW;case Hn.ELEMENT_TYPES.STICKER:return UW;default:return DW}}),[t,n]);return(0,u.useEffect)((()=>{const e=i.current;return e.addEventListener("contextmenu",s),()=>{e.removeEventListener("contextmenu",s)}}),[i]),(0,u.createPortal)(c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(sQ,{position:a,ref:i},c.createElement(Tu,null,c.createElement(YN.default,{"data-testid":"right-click-context-menu",isOpen:r,onDismiss:o,"aria-label":(0,d.__)("Context Menu for the selected element","web-stories"),maskRef:l,onMouseDown:e=>e.stopPropagation(),isRTL:e},c.createElement(m,{parentMenuRef:i}))))),document.body)};function dQ(){return dQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dQ.apply(this,arguments)}const uQ=function LibraryPanes(){const{tab:e,tabs:t}=YW((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{actions:{getMedia:n}}=Z(),r=Boolean(n),a=Hp((e=>{let{...t}=e;return t})),o=a[QX.id],l=a[JX.id],i=a[eQ.id];return t.map((t=>{let{id:n}=t;const a=n===e,s={key:n,isActive:a,"aria-labelledby":uV(n)};if(!a)return c.createElement(cV,dQ({key:n},s));switch(n){case QX.id:return r?c.createElement(pQ,dQ({},s,{$_css:o?.showEffect&&A_.FLASH})):null;case JX.id:return c.createElement(mQ,dQ({},s,{$_css2:l?.showEffect&&A_.FLASH}));case tQ.id:return c.createElement(zq,s);case eQ.id:return c.createElement(fQ,dQ({},s,{$_css3:i?.showEffect&&A_.FLASH}));case nQ.id:return c.createElement(WK,s);case rQ.id:return c.createElement(HX,s);case aQ.id:return c.createElement(YX,s);default:return null}}))};var pQ=(0,p.default)(iq).withConfig({displayName:"libraryPanes___StyledMediaPane",componentId:"sc-g5zq8j-0"})(["",""],(e=>e.$_css)),mQ=(0,p.default)(Tq).withConfig({displayName:"libraryPanes___StyledMedia3pPane",componentId:"sc-g5zq8j-1"})(["",""],(e=>e.$_css2)),fQ=(0,p.default)(GK).withConfig({displayName:"libraryPanes___StyledTextPane",componentId:"sc-g5zq8j-2"})(["",""],(e=>e.$_css3));const gQ=p.default.section.attrs({"aria-label":(0,d.__)("Library","web-stories"),"data-testid":"libraryLayout"}).withConfig({displayName:"libraryLayout__Layout",componentId:"sc-6ze1kl-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),hQ=p.default.nav.attrs({"aria-label":(0,d.__)("Library tabs","web-stories")}).withConfig({displayName:"libraryLayout__TabsArea",componentId:"sc-6ze1kl-1"})(["padding:0 4px;"]),EQ=p.default.div.withConfig({displayName:"libraryLayout__LibraryPaneContainer",componentId:"sc-6ze1kl-2"})(["height:100%;min-height:0;"]);const bQ=function LibraryLayout(){const{setTab:e,tab:t,tabRefs:n,tabs:r}=YW((e=>({tab:e.state.tab,tabRefs:e.state.tabRefs,setTab:e.actions.setTab,tabs:e.data.tabs}))),{highlight:a,resetHighlight:o}=Hp((e=>({highlight:{[QX.id]:e[Vm.MEDIA],[JX.id]:e[Vm.MEDIA3P],[eQ.id]:e[Vm.TEXT_SET]},resetHighlight:e.onFocusOut}))),l=(0,u.useCallback)((t=>{e(t),o(),(0,O.trackEvent)("library_tab_change",{name:t})}),[e,o]);return c.createElement(gQ,null,c.createElement(hQ,null,c.createElement(Im,{label:(0,d.__)("Element Library Selection","web-stories"),tabs:r,tabRefs:n,tab:t,onTabChange:l,onTabRefUpdated:(e,t)=>{const n=a[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:uV,getAriaControlsId:dV,shortcut:"mod+option+1"})),c.createElement(EQ,null,c.createElement(uQ,null)))},yQ="edit-story-library-upload-message";const _Q=function LibraryUploadDropTarget(e){let{children:t}=e;const{uploadMedia:n}=vi((e=>{let{actions:{uploadMedia:t}}=e;return{uploadMedia:t}})),r=(0,u.useCallback)((e=>{n(e)}),[n]);return c.createElement(rm,{onDrop:r,labelledBy:yQ},t,c.createElement(gm,{id:yQ,message:(0,d.__)("Upload to media library","web-stories")}))};const vQ=function Library(){return c.createElement(lQ,null,c.createElement(_Q,null,c.createElement(bQ,null)))};const wQ=function(){return c.createElement(jE,{title:(0,d.__)("Link","web-stories")})};const TQ=function AnimationIcon(){return c.createElement(Qg,{title:(0,d.__)("Animation","web-stories")})},SQ={id:zp,icon:function SelectionIcon(){return c.createElement(vg.default,{title:(0,d.__)("Selection","web-stories")})},tooltip:(0,d.__)("Selection","web-stories")},CQ={id:Gp,icon:wQ,tooltip:(0,d.__)("Link","web-stories")},IQ={id:jp,icon:TQ,tooltip:(0,d.__)("Animation","web-stories")},xQ=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const AQ=function TextSelectionIcon(){return c.createElement(IE.default,{title:(0,d.__)("Text selection","web-stories")})};const kQ=function ImageSelectionIcon(){return c.createElement(Vb,{title:(0,d.__)("Image selection","web-stories")})};const OQ=function VideoSelectionIcon(){return c.createElement(i_.default,{title:(0,d.__)("Video selection","web-stories")})};const NQ=function ShapeSelectionIcon(){return c.createElement(Ly,{title:(0,d.__)("Shape selection","web-stories")})};const PQ=function MultiSelectionIcon(){return c.createElement(wh,{title:(0,d.__)("Multi selection","web-stories")})},RQ=new Set([SQ.id,CQ.id,IQ.id]);const MQ=function StyleProvider(e){let{children:t}=e;const{selectedElements:n}=xa((e=>{let{state:t}=e;return{selectedElements:t.selectedElements}})),{tab:r}=Hp((e=>({tab:e.section})));(0,u.useEffect)((()=>{RQ.has(r)&&l(r)}),[r]);const a=(0,u.useRef)(null),[o,l]=(0,u.useState)(SQ.id),i=(0,u.useRef)(null),s=(0,u.useRef)(null),d=(0,u.useRef)(null),p=(0,u.useMemo)((()=>({[SQ.id]:i,[CQ.id]:s,[IQ.id]:d})),[]);let m=PQ;const f=[...new Set(n.map((e=>{let{type:t}=e;return t})))];1===f.length?("text"===f[0]&&(m=AQ),("image"===f[0]||n[0].isBackground)&&(m=kQ),"video"===f[0]&&(m=OQ),"shape"!==f[0]&&"sticker"!==f[0]||(m=NQ)):m=PQ;const g={state:{tab:o},refs:{styleRef:a,tabRefs:p},actions:{setTab:l},data:{tabs:[{...SQ,icon:m}]}};return n[0]?.isBackground||n[0]?.isDefaultBackground||g.data.tabs.push(CQ),n[0]?.isDefaultBackground||g.data.tabs.push(IQ),(0,u.useEffect)((()=>{g.data.tabs.find((e=>e.id===o))||l(SQ.id)}),[g.data.tabs,o]),c.createElement(xQ.Provider,{value:g},t)};const LQ=function(e){return(0,u.useContextSelector)(xQ,e??u.identity)};const DQ=function(){const e=(0,u.useRef)([]),t=(0,u.useCallback)((t=>{const n=e.current;return n.push(t),()=>{n.splice(n.indexOf(t),1)}}),[]);return(0,u.useMemo)((()=>[e.current,t]),[t])};function BQ(){return BQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BQ.apply(this,arguments)}const FQ=p.default.form.withConfig({displayName:"designPanel__Form",componentId:"sc-14jgzfz-0"})(["padding:0;margin:0;"]),HQ=p.default.input.attrs({type:"submit"}).withConfig({displayName:"designPanel__AutoSubmitButton",componentId:"sc-14jgzfz-1"})(["display:none;"]);const UQ=function(e){let{panelType:t,selectedElements:n,onSetProperties:r,registerSubmitHandler:a,...o}=e;const l=(0,u.useRef)(null),[i,s]=DQ(),d=(0,u.useMemo)((()=>({isMultiple:n.length>1,registerPresubmitHandler:s})),[n,s]),[p,m]=(0,u.useState)({}),f=(0,u.useMemo)((()=>n.map((e=>({...e,...p[e.id]})))),[n,p]),g=(0,u.useCallback)((e=>{if(0===Object.keys(e).length)return;const t=e;i.length>0&&n.forEach((n=>{const r=c_(n,e[n.id],!0);let a=r;i.forEach((e=>{const t=e({...n,...a},r,n);a={...a,...t}})),t[n.id]=a})),r((e=>t[e.id]))}),[i,n,r]),h=a((0,u.useCallback)((e=>{e&&(e.preventDefault(),m({})),g(p)}),[g,p])),E=(0,u.useCallback)((()=>{setTimeout((()=>{const e=l.current;e&&e.dispatchEvent(new window.Event("submit",{cancelable:!0,bubbles:!0}))}))}),[]),b=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m((t=>{const r={};return n.forEach((n=>{const a={...n,...t[n.id]},o=c_(a,e,!1);r[n.id]={...t[n.id],...o}})),r})),t&&E()}),[n,E]),y=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b((r=>{const a=r[e]||n;return{[e]:t?{...a,...c_(a,t,!1)}:null}}),r)}),[b]),_=t;return c.createElement(FQ,{ref:l,onSubmit:h},c.createElement(HQ,null),c.createElement(Lx.Provider,{value:d},c.createElement(_,BQ({selectedElements:f,submittedSelectedElements:n,pushUpdate:b,pushUpdateForObject:y,submit:E},o))))},zQ=Object.values(Up.default);const GQ=function(e){if(0===e.length)return[];if(1===e.length&&e[0].isBackground){const t=[];return!e[0].isDefaultBackground&&(t.push({type:Up.default.PAGE_BACKGROUND,Panel:oz}),t.push({type:Up.default.FILTER,Panel:mU}),t.push({type:Up.default.ANIMATION,Panel:jH})),"video"===e[0].type?(t.push({type:Up.default.VIDEO_OPTIONS,Panel:XG}),t.push({type:Up.default.CAPTIONS,Panel:aU}),t.push({type:Up.default.VIDEO_ACCESSIBILITY,Panel:jG})):["gif","image"].includes(e[0].type)?t.push({type:Up.default.IMAGE_ACCESSIBILITY,Panel:EU}):t.unshift({type:Up.default.PAGE_BACKGROUND,Panel:oz}),t.push({type:Up.default.PAGE_ATTACHMENT,Panel:VU}),t.push({type:Up.default.PAGE_BACKGROUND_AUDIO,Panel:JG}),t}return e.map((e=>{let{type:t}=e;return Hn.elementTypes[t].panels})).reduce(((e,t)=>{return n=t,e.filter((e=>n.includes(e)));var n}),zQ).map((e=>{switch(e){case Up.default.ANIMATION:return{type:e,Panel:jH};case Up.default.PAGE_BACKGROUND:return null;case Up.default.FILTER:return{type:e,Panel:mU};case Up.default.SIZE_POSITION:return{type:e,Panel:Iz};case Up.default.LINK:return{type:e,Panel:UU};case Up.default.TEXT_STYLE:return{type:e,Panel:DG};case Up.default.SHAPE_STYLE:return{type:e,Panel:iz};case Up.default.BORDER:return{type:e,Panel:JH};case Up.default.VIDEO_OPTIONS:return{type:e,Panel:XG};case Up.default.CAPTIONS:return{type:e,Panel:aU};case Up.default.VIDEO_ACCESSIBILITY:return{type:e,Panel:jG};case Up.default.IMAGE_ACCESSIBILITY:return{type:e,Panel:EU};case Up.default.ELEMENT_ALIGNMENT:return{type:e,Panel:dU};case Up.default.PRODUCT:return{type:e,Panel:tj};default:throw new Error(`Unknown panel: ${e}`)}})).filter((e=>e))};const jQ=function(){const{selectedElementIds:e,selectedElements:t,selectedElementAnimations:n,deleteSelectedElements:r,updateElementsById:a,updateAnimationState:o}=xa((e=>{let{state:{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a,updateElementsById:o,updateAnimationState:l}}=e;return{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r,deleteSelectedElements:a,updateElementsById:o,updateAnimationState:l}})),l=(0,u.useMemo)((()=>GQ(t)),[t]),[i,s]=DQ(),c=(0,u.useCallback)((t=>{a({elementIds:e,properties:e=>c_(e,t,!0)})}),[e,a]),d=(0,u.useCallback)((e=>t=>(i.forEach((n=>n(c,e,t))),t)),[c,i]);return(0,u.useEffect)((()=>{const e={},t=s(((t,n,r)=>{c===t&&(e[n]=r)}));return()=>{t(),Object.values(e).forEach((e=>e()))}}),[c,s]),(0,u.useMemo)((()=>({panels:l,createSubmitHandlerForPanel:d,panelProperties:{onSetProperties:c,deleteSelectedElements:r,selectedElements:t,selectedElementAnimations:n,updateAnimationState:o}})),[l,d,c,r,t,n,o])};function YQ(){return YQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YQ.apply(this,arguments)}const ZQ=(0,p.default)(cV).withConfig({displayName:"stylePanes__StyledPane",componentId:"sc-18fi38s-0"})(["height:100%;padding:0;overflow-y:auto;"]);const WQ=function StylePanes(){const{tab:e,tabs:t}=LQ((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{panels:n,createSubmitHandlerForPanel:r,panelProperties:a}=jQ(),o=(0,u.useCallback)(((e,t)=>{const o=n.filter((t=>{let{type:n}=t;return e.includes(n)})).map((e=>{let{Panel:t,type:n}=e;return c.createElement(UQ,YQ({key:n,panelType:t,registerSubmitHandler:r(n)},a))}));return c.createElement(ZQ,YQ({id:dV(t.key)},t),o)}),[n,r,a]);return t.map((t=>{let{id:n}=t;const r=n===e,a={key:n,isActive:r,"aria-labelledby":uV(n)};if(!r)return c.createElement(cV,YQ({key:n},a));switch(n){case SQ.id:case CQ.id:case IQ.id:return o(Vp[n],a);default:return null}}))},VQ=p.default.section.attrs({"aria-label":(0,d.__)("Style","web-stories"),"data-testid":"styleLayout"}).withConfig({displayName:"styleLayout__Layout",componentId:"sc-1ihuio6-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),$Q=p.default.nav.attrs({"aria-label":(0,d.__)("Style tabs","web-stories")}).withConfig({displayName:"styleLayout__TabsArea",componentId:"sc-1ihuio6-1"})(["padding:0 4px;"]),qQ=(0,p.default)(Im).withConfig({displayName:"styleLayout__UnjustifiedTabView",componentId:"sc-1ihuio6-2"})(["justify-content:center;"]),KQ=p.default.div.withConfig({displayName:"styleLayout__StylePaneContainer",componentId:"sc-1ihuio6-3"})(["height:100%;overflow-y:auto;min-height:0;"]),XQ=p.default.div.withConfig({displayName:"styleLayout__NoSelection",componentId:"sc-1ihuio6-4"})(["height:100%;display:flex;justify-content:center;align-items:center;"]),QQ=(0,p.default)(Ve.Text).withConfig({displayName:"styleLayout__Note",componentId:"sc-1ihuio6-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const JQ=function StyleLayout(){const{state:{tab:e},actions:{setTab:t},refs:{tabRefs:n},data:{tabs:r}}=LQ(),{selectedElementIds:a}=xa((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds}})),{highlight:o,resetHighlight:l}=Hp((e=>({highlight:{[SQ.id]:e[Vm.STYLE],[CQ.id]:e[Vm.STYLE],[IQ.id]:e[Vm.STYLE]},resetHighlight:e.onFocusOut}))),i=(0,u.useCallback)((e=>{t(e),l(),(0,O.trackEvent)("style_tab_change",{name:e})}),[t,l]);return 0===a.length?c.createElement(XQ,null,c.createElement(QQ,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,d.__)("Nothing selected","web-stories"))):c.createElement(VQ,null,c.createElement($Q,null,c.createElement(qQ,{label:(0,d.__)("Style Selection","web-stories"),tabs:r,tabRefs:n,tab:e,onTabChange:i,onTabRefUpdated:(e,t)=>{const n=o[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:uV,getAriaControlsId:dV})),c.createElement(KQ,null,c.createElement(WQ,null)))};const eJ=function Style(){return c.createElement(MQ,null,c.createElement(JQ,null))},tJ=[{id:$p,title:(0,d.__)("Insert","web-stories"),Pane:vQ},{id:qp,title:(0,d.__)("Style","web-stories"),Pane:eJ}],nJ=new Set([$p,Kp,qp]);const rJ=function SidebarProvider(e){let{sidebarTabs:t,children:n}=e;const{actions:{getAuthors:r}}=Z(),{selectedElementIds:a,currentPage:o}=xa((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds,currentPage:t.currentPage}})),{tab:l,highlight:i}=Hp((e=>({tab:e.tab,highlight:e[Vm.STYLE_PANE]})));(0,u.useEffect)((()=>{nJ.has(l)&&(p(l),(0,O.trackEvent)("quick_action_tab_change",{name:l}))}),[l]);const s=(0,u.useRef)(null),[d,p]=(0,u.useState)($p),[m,f]=(0,u.useState)([]),[g,h]=(0,u.useState)(null),E=(0,u.useRef)(),b=(0,u.useRef)(d),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useMemo)((()=>({[$p]:y,[qp]:_,[Kp]:v})),[]),[T,S]=(0,u.useState)(!1),C=(0,u.useCallback)((e=>{E.current=e}),[]);(0,u.useResizeEffect)(E,(e=>{let{height:t}=e;return h(t)}),[]),(0,u.useEffect)((()=>{a.length>0&&b.current===Kp&&p(qp)}),[a]),(0,u.useEffect)((()=>{b.current===Kp&&p(qp)}),[o]),(0,u.useEffect)((()=>{const e=_.current;e&&i?.focus&&i?.showEffect&&e.focus()}),[i]);const I=(0,u.useCallback)((()=>{T||0!==m.length||(S(!0),r().then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));f(t)})).finally((()=>{S(!1)})))}),[T,m.length,r]),x=(0,u.useMemo)((()=>[...tJ,t?.document&&{id:Kp,...t.document}].filter(Boolean)),[t]),A=(0,u.useMemo)((()=>({tabs:x,modalSidebarTab:t?.publishModal&&{id:"publish_modal_document",...t.publishModal}})),[x,t]),k={state:{tab:d,tabRefs:w,users:m,sidebarContentHeight:g,isUsersLoading:T},refs:{sidebar:s},actions:{setTab:p,loadUsers:I,setSidebarContentNode:C},data:A};return c.createElement(xm.Provider,{value:k},n)},aJ=(0,I.withOverlay)(p.default.section.attrs({"aria-label":(0,d.__)("Web Stories Editor","web-stories")}).withConfig({displayName:"layout__Editor",componentId:"sc-9gpyr-0"})([""," background-color:",";position:relative;max-height:100vh;height:100%;width:100%;display:grid;grid:'sidebar   canv          ' 1fr 'sidebar   supplementary ' auto / ","px minmax(","px,1fr);"],Bu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.bg.primary}),360,570));const oJ=function(e){let{header:t,footer:n={},sidebarTabs:r,children:a}=e;const o=(0,Er.useSnackbar)((e=>{let{removeSnack:t,currentSnacks:n,placement:r}=e;return{onRemove:t,notifications:n,placement:r}}));return c.createElement(c.Fragment,null,c.createElement(ts,null,c.createElement(ChecklistCheckpointProvider,null,c.createElement($m,null,c.createElement(rJ,{sidebarTabs:r},c.createElement(aJ,{zIndex:3},c.createElement(ks,null,c.createElement(pW,null,c.createElement(eW,{header:t,footer:n}),c.createElement(cQ,null))),a))))),c.createElement(GN.Snackbar.Container,o))};var lJ=n(43246),iJ=n(89511);window.wp.domReady;const sJ=function PostPublishDialog(){const{embedPostLink:e,link:t,isFreshlyPublished:n}=xa((e=>{let{state:{story:{embedPostLink:t,link:n},meta:{isFreshlyPublished:r}}}=e;return{embedPostLink:t,link:n,isFreshlyPublished:r}})),[r,a]=(0,u.useState)(!1);(0,u.useEffect)((()=>a(Boolean(n))),[n]);const o=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"add_story_to_new_post")}),[]),l=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"view_story")}),[]),i=(0,u.useCallback)((()=>a(!1)),[]),s=e?(0,d.__)("Add to new post","web-stories"):"";return c.createElement(y,{isOpen:r,onClose:i,title:(0,d.__)("Story published.","web-stories"),secondaryText:(0,d.__)("Dismiss","web-stories"),primaryText:s,onPrimary:o,primaryRest:{href:e}},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:t,target:"_blank",rel:"noopener noreferrer",onClick:l})}},(0,d.__)("Your story has been successfully published! <a>View story</a>.","web-stories"))),e&&c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},
/* translators: 'it' refers to a web story. */
(0,d.__)("Would you like to include it on a new post?","web-stories")))},cJ=(0,u.createContext)({state:{},actions:{}});const dJ=function(e){return(0,u.useContextSelector)(cJ,e??u.identity)},uJ=p.default.nav.withConfig({displayName:"buttons__ButtonList",componentId:"sc-1h0vadn-0"})(["display:flex;justify-content:flex-end;padding:1em;height:100%;"]),pJ=p.default.div.withConfig({displayName:"buttons__List",componentId:"sc-1h0vadn-1"})(["display:flex;align-items:center;gap:8px;"]),mJ=p.default.div.withConfig({displayName:"buttons__Spinner",componentId:"sc-1h0vadn-2"})(["position:absolute;top:0;"]),fJ=p.default.div.withConfig({displayName:"buttons__IconWithSpinner",componentId:"sc-1h0vadn-3"})(["position:relative;"]);function Loading(){return c.createElement(mJ,null,c.createElement(FT.default,{size:32}))}function DraftButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(tO,{hasUpdates:n,forceIsSaving:t}),c.createElement(Jk,{forceIsSaving:t}))}function PendingButtons(e){let{forceIsSaving:t,hasUpdates:n,canPublish:r}=e;return c.createElement(c.Fragment,null,c.createElement(eO,{forceIsSaving:t}),r&&c.createElement(tO,{hasUpdates:n,forceIsSaving:t}),c.createElement(Jk,{forceIsSaving:t}))}function PublishedButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(eO,{forceIsSaving:t}),c.createElement(tO,{hasUpdates:n,forceIsSaving:t}))}const gJ=function(){const{status:e,canPublish:t,isSaving:n}=xa((e=>{let{state:{story:{status:t},meta:{isSaving:n},capabilities:r}}=e;return{status:t,isSaving:n,canPublish:Boolean(r?.publish)}})),r="pending"===e,a="draft"===e||!e,o=a||r,{hasMetaBoxes:l,isSavingMetaBoxes:i}=dJ((e=>{let{state:{hasMetaBoxes:t,isSavingMetaBoxes:n}}=e;return{hasMetaBoxes:t,isSavingMetaBoxes:n}}));return c.createElement(uJ,null,c.createElement(pJ,null,c.createElement(Undo,null),c.createElement(Redo,null),c.createElement(fJ,null,c.createElement(Ad,{forceIsSaving:i}),n&&c.createElement(Loading,null)),a&&c.createElement(DraftButtons,{forceIsSaving:i,hasUpdates:l}),r&&c.createElement(PendingButtons,{forceIsSaving:i,hasUpdates:l,canPublish:t}),!o&&c.createElement(PublishedButtons,{forceIsSaving:i,hasUpdates:l})))},hJ=p.default.header.attrs({role:"group","aria-label":(0,d.__)("Story canvas header","web-stories")}).withConfig({displayName:"header__Background",componentId:"sc-1i9ezrs-0"})(["display:flex;align-items:center;justify-content:space-between;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),EJ=p.default.div.withConfig({displayName:"header__Head",componentId:"sc-1i9ezrs-1"})(["flex:1 1 auto;padding:1em;"]),bJ=p.default.div.withConfig({displayName:"header__ButtonCell",componentId:"sc-1i9ezrs-2"})(["grid-area:buttons;"]);const yJ=(0,u.memo)((function HeaderLayout(){return c.createElement(hJ,null,c.createElement(EJ,null,c.createElement(rO,null)),c.createElement(bJ,null,c.createElement(gJ,null)))})),_J=p.default.div.withConfig({displayName:"menuItem__Box",componentId:"sc-1wx1c0e-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]),vJ=p.default.div.withConfig({displayName:"menuItem__Item",componentId:"sc-1wx1c0e-1"})([""]);const wJ=function(){const{metaBoxesVisible:e,toggleMetaBoxesVisible:t,hasMetaBoxes:n}=dJ((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible,toggleMetaBoxesVisible:n.toggleMetaBoxesVisible}})),r=(0,u.useCallback)((()=>{t(),(0,O.trackEvent)("meta_boxes_toggled",{status:e?"visible":"hidden"})}),[e,t]);return n?c.createElement(vJ,null,c.createElement(_J,null,c.createElement(Tooltip,{title:(0,d.__)("Third-Party Meta Boxes","web-stories"),placement:_d.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:r,"aria-label":(0,d.__)("Third-Party Meta Boxes","web-stories")},c.createElement(vE,null))))):null},TJ=p.default.div.withConfig({displayName:"metaBoxesArea__Wrapper",componentId:"sc-nk2qm0-0"})(["position:relative;&__container,.inside{box-sizing:content-box;}#poststuff{margin:0 auto;padding-top:0;min-width:auto;}#poststuff h3.hndle,#poststuff .stuffbox > h3,#poststuff h2.hndle{color:",";font-size:14px;font-weight:500;outline:none;padding:15px;width:100%;}.postbox{border:0;color:inherit;margin-bottom:0;}.postbox > .hndle,.postbox .postbox-header{background:",";color:",";border-bottom:1px solid ",";}.postbox .handlediv{height:44px;width:44px;}.postbox .handlediv .toggle-indicator{color:",";}.postbox .handle-order-higher,.postbox .handle-order-lower{color:",";&[aria-disabled='true']{color:",";}}.is-hidden{display:none;}"],(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.white,.04)}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,We.rgba)(t.colors.standard.white,.3)})),SJ=p.default.div.withConfig({displayName:"metaBoxesArea__Spinner",componentId:"sc-nk2qm0-1"})(["position:absolute;top:10px;right:100px;z-index:1;"]);const CJ=function MetaBoxesArea(e){let{location:t}=e;const n=(0,u.useRef)(),r=(0,u.useRef)(),{isSaving:a}=xa((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving}}));return(0,u.useEffect)((()=>{const e=document.querySelector(`.metabox-location-${t}`);return n.current=e,n.current&&r.current&&r.current.appendChild(n.current),()=>{document.querySelector("#metaboxes").appendChild(e)}})),c.createElement(TJ,{className:`web-stories-meta-boxes-area-${t}`},a&&c.createElement(SJ,null,c.createElement(FT.default,{size:30})),c.createElement("div",{ref:r}))},IJ=window.wp.apiFetch;const xJ=function(e){let{story:t,isSavingStory:n,isAutoSavingStory:r}=e;const{hasMetaBoxes:a,locations:o,isSavingMetaBoxes:l,setIsSavingMetaBoxes:i}=dJ((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,locations:t.locations,isSavingMetaBoxes:t.isSavingMetaBoxes,setIsSavingMetaBoxes:n.setIsSavingMetaBoxes}})),{api:{metaBoxes:s}}=H(),c=(0,u.usePrevious)(n),d=(0,u.usePrevious)(r);(0,u.useEffect)((()=>{!a||n||r||l||!c||d||async function(){window.tinyMCE?.triggerSave();const e=document.querySelector(".metabox-base-form"),n=[new window.FormData(e||void 0),...o.map((e=>new window.FormData(document.querySelector(`.metabox-location-${e}`)||void 0)))].reduce(((e,t)=>{for(const[n,r]of t)e.append(n,r);return e}),new window.FormData);i(!0),await function(e,t,n){return[!!e.comment_status&&["comment_status",e.comment_status],!!e.ping_status&&["ping_status",e.ping_status],!!e.sticky&&["sticky",e.sticky],!!e.author&&["post_author",e.author.id]].filter(Boolean).forEach((e=>{let[n,r]=e;return t.append(n,r)})),IJ({url:n,method:"POST",body:t,parse:!1})}(t,n,s),i(!1)}()}),[a,t,n,c,r,d,l,i,o,s])},AJ=p.default.div.withConfig({displayName:"metaBoxes__Wrapper",componentId:"sc-1gguxet-0"})([""]),kJ=p.default.div.withConfig({displayName:"metaBoxes__Area",componentId:"sc-1gguxet-1"})(["grid-area:",";position:relative;overflow:hidden;z-index:2;"],(e=>{let{area:t}=e;return t})),OJ=(0,p.default)(kJ).attrs({area:"supplementary"}).withConfig({displayName:"metaBoxes__MetaBoxesContainer",componentId:"sc-1gguxet-2"})(["overflow-y:auto;"]);const NJ=function MetaBoxes(){const{metaBoxesVisible:e,hasMetaBoxes:t}=dJ((e=>{let{state:t}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible}})),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(null),{postType:o,metaBoxes:l={}}=H(),{pages:i,isSavingStory:s,isAutoSavingStory:d,story:p}=xa((e=>{let{state:{meta:{isSavingStory:t,isAutoSavingStory:n},story:r,pages:a}}=e;return{pages:a,isSavingStory:t,isAutoSavingStory:n,story:r}}));if(xJ({isSavingStory:s,isAutoSavingStory:d,story:p}),(0,u.useEffect)((()=>{let e;return!n&&t&&i.length>0&&(e=setTimeout((()=>{a.current=document.getElementById("primary-menu-items"),r(null!==a.current)}))),()=>{clearTimeout(e)}}),[i,t,n]),(0,u.useEffect)((()=>{const e=setTimeout((()=>{window.postboxes?.page!==o&&window.postboxes?.add_postbox_toggles(o)}));return()=>{clearTimeout(e)}}),[o]),!t)return null;const m=Object.keys(l);return c.createElement(OJ,null,e&&c.createElement(AJ,null,m.map((e=>c.createElement(CJ,{key:e,location:e})))),n&&(0,u.createPortal)(c.createElement(wJ,null),a.current))};const PJ=function MetaBoxesProvider(e){let{children:t}=e;const{metaBoxes:n={}}=H(),[r,a]=(0,u.useState)(!1),[o,l]=(0,u.useState)(!1),i=(0,u.useCallback)((()=>a((e=>!e))),[a]),s=Object.keys(n).some((e=>Boolean(n[e]?.length))),d=Object.keys(n),p=(0,u.useMemo)((()=>({state:{isSavingMetaBoxes:o,metaBoxesVisible:r,metaBoxes:n,locations:d,hasMetaBoxes:s},actions:{toggleMetaBoxesVisible:i,setIsSavingMetaBoxes:l}})),[o,r,l,i,n,d,s]);return c.createElement(cJ.Provider,{value:p},t)};function RJ(e){return IJ({path:e})}function MJ(e,t){return IJ({path:e,data:{id:t},method:"POST"})}var LJ=n(4504);const DJ={embedWebStories:{title:(0,d.__)("Embed Web Stories","web-stories"),figureSrcImg:"images/help-center/story_embed_module_1",figureAlt:(0,d.__)("Graphic showing embed functionality","web-stories"),description:[(0,d.__)("When you create a new post in WordPress, you can embed any of your Stories. <a>Learn more</a>","web-stories")],href:"https://wp.stories.google/docs/best-practices/"}},BJ="public",FJ="private",HJ="protected",UJ={PUBLISH:"publish",FUTURE:"future",PRIVATE:"private",DRAFT:"draft"},zJ="Y-m-d\\TH:i:s",GJ=()=>n.e(2392).then(n.bind(n,73));const jJ=function PublishTime(){const{date:e,modified:t,status:n,updateStory:r}=xa((e=>{let{state:{story:{date:t,modified:n,status:r}},actions:{updateStory:a}}=e;return{date:t,modified:n,status:r,updateStory:a}})),a=Fd(),{isRTL:o}=H(),l=(0,d.__)("d/m/Y","web-stories"),[i,s]=(0,u.useState)(!1),p=(0,u.useRef)(),m=(0,u.useRef)();(0,nr.useKeyDownEffect)(m,{key:["space","enter"]},(()=>{s((e=>!e))}),[]),(0,u.useFocusOut)(p,(()=>s(!1)),[i]);const f=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&i&&s(!1);const n=e?(0,Md.default)(new Date(e),zJ):e;r({properties:{date:n}})}),[i,r]),g=["draft","pending","auto-draft"].includes(n)&&(e===t||null===e),h=Date.now(),E=g?(0,d.__)("Immediately","web-stories"):(0,Md.default)(e||h,l)+" "+Bd(e||h);return c.createElement(c.Fragment,null,c.createElement(fx,null,c.createElement(LJ.default,{dropDownLabel:(0,d.__)("Publish","web-stories"),"aria-pressed":i,"aria-haspopup":!0,"aria-expanded":i,"aria-label":(0,d.__)("Story publish time","web-stories"),onSelectClick:e=>{e.preventDefault(),i||s(!0)},ref:m,activeItemLabel:E,selectButtonStylesOverride:Hu,onPointerEnter:()=>GJ(),onFocus:()=>GJ()})),c.createElement(PT.Popup,{topOffset:32,anchor:m,isOpen:i,isRTL:o,zIndex:10,renderContents:t=>{let{propagateDimensionChange:r}=t;return c.createElement(oA,{value:g?h:e,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(e,t)},onViewChange:()=>r(),is12Hour:a,forwardedRef:p,onClose:()=>s(!1),canReset:["draft","pending","auto-draft"].includes(n)&&!g})}}))};function YJ(){return YJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YJ.apply(this,arguments)}const ZJ=function Author(){const{actions:{getAuthors:e}}=Z(),{state:{users:t,isUsersLoading:n},actions:{loadUsers:r}}=Am(),{isSaving:a,author:o,updateStory:l}=xa((e=>{let{state:{meta:{isSaving:t},story:{author:n={}}},actions:{updateStory:r}}=e;return{isSaving:t,author:n,updateStory:r}})),[i,s]=(0,u.useState)(null),[p,m]=(0,u.useState)(null);(0,u.useEffect)((()=>{r()}),[r]);const f=(0,u.useCallback)((t=>e(t).then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));s(t)}))),[e]);(0,u.useEffect)((()=>{if(t?.length){const e=t.find((e=>{let{id:t}=e;return o.id===t}));m(e?t:[o,...t])}}),[o,t]);const g=n||!p,h={hasSearch:!0,lightMode:!0,onChange:(0,u.useCallback)((e=>{let{id:t,name:n}=e;l({properties:{author:{id:t,name:n}}})}),[l]),getOptionsByQuery:f,selectedId:o.id,dropDownLabel:(0,d.__)("Author","web-stories"),placeholder:g?(0,d.__)("Loading…","web-stories"):"",disabled:!!g||a,primaryOptions:g?[]:p,zIndex:10};return c.createElement(fx,null,c.createElement(FN.default.DropDown,YJ({options:i,searchResultsLabel:(0,d.__)("Search results","web-stories"),dropdownButtonLabel:(0,d.__)("Author","web-stories"),title:(0,d.__)("Available authors","web-stories")},h)))};function WJ(){return WJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WJ.apply(this,arguments)}const VJ=p.default.div.withConfig({displayName:"publish__LabelWrapper",componentId:"sc-c431y8-0"})(["height:40px;"]),$J=(0,p.default)(Ve.Text).attrs({as:"label",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"publish__Label",componentId:"sc-c431y8-1"})(["color:",";font-size:14px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),qJ=p.default.div.withConfig({displayName:"publish__MediaWrapper",componentId:"sc-c431y8-2"})(["display:flex;align-items:center;margin-bottom:20px;margin-top:4px;height:96px;"]),KJ=(0,p.default)(dx).withConfig({displayName:"publish__StyledMedia",componentId:"sc-c431y8-3"})(["width:","px;height:","px;"],(e=>{let{$width:t}=e;return t}),(e=>{let{$height:t}=e;return t})),XJ=(0,p.default)(fx).attrs({spaceBetween:!1}).withConfig({displayName:"publish__HighlightRow",componentId:"sc-c431y8-4"})(["position:relative;&::after{content:'';position:absolute;top:-10px;bottom:-10px;left:-20px;right:-10px;"," pointer-events:none;}"],(e=>{let{isHighlighted:t}=e;return t&&A_.FLASH})),QJ=p.default.div.withConfig({displayName:"publish__MediaInputWrapper",componentId:"sc-c431y8-5"})(["height:160px;"]),JJ=p.default.div.withConfig({displayName:"publish__DropdownWrapper",componentId:"sc-c431y8-6"})(["position:relative;width:138px;margin-left:30px;margin-top:3px;"]),e0=p.default.img.withConfig({displayName:"publish__LogoImg",componentId:"sc-c431y8-7"})(["object-fit:cover;width:100%;height:100%;max-width:96px;max-height:96px;"]);const t0=function PublishPanel(e){let{nameOverride:t}=e;const{state:{users:n}}=Am(),{api:{publisherLogos:r}}=H(),{getPublisherLogos:a,addPublisherLogo:o}=i,{allowedMimeTypes:{image:l},dashboardSettingsLink:s,capabilities:{hasUploadMediaAction:p,canManageSettings:m},MediaUpload:f}=H(),g=(0,u.useMemo)((()=>l.map((e=>Ot(e))).flat()),[l]),[h,E]=(0,u.useState)([]);(0,u.useEffect)((()=>{a(r).then(E)}),[a,r]);const{highlightPoster:b,highlightLogo:y,resetHighlight:_}=Hp((e=>({highlightPoster:e[Vm.POSTER],highlightLogo:e[Vm.PUBLISHER_LOGO],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{featuredMedia:v,publisherLogo:w,updateStory:T,capabilities:S}=xa((e=>{let{state:{story:{featuredMedia:t={id:0,url:"",height:0,width:0},publisherLogo:n={id:0,url:"",height:0,width:0}},capabilities:r},actions:{updateStory:a}}=e;return{featuredMedia:t,publisherLogo:n,updateStory:a,capabilities:r}})),C=(0,u.useCallback)((e=>T({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width}}})),[T]),I=e=>{let{id:t,src:n}=e;const a={id:t,url:n};o(r,t),E((e=>[...e,a])),x(a)},x=e=>{T({properties:{publisherLogo:{id:e.id,url:e.url}}})},A=e=>{let t=(0,d.__)("No file types are currently supported.","web-stories");return g.length&&(t=(0,Ze.default)(e,(0,It.default)(g))),t},k=A(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as publisher logo.","web-stories")),O=A(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories")),N=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return n.props?n:c.createElement(FN.default.Option,WJ({value:n.id,ref:t},r),c.createElement(e0,{src:n.url,alt:"",decoding:"async",crossOrigin:"anonymous"}))})),P=e=>c.createElement(FN.default.Option,{onClick:e,"aria-label":(0,d.__)("Add new","web-stories")},c.createElement(lm,{height:32,width:32}),c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Add new","web-stories"))),R=[...h];if(p){const e={width:96,height:96};R.unshift(c.createElement(f,{onSelect:I,onSelectErrorMessage:k,type:l,render:P,title:(0,d.__)("Select as publisher logo","web-stories"),buttonInsertText:(0,d.__)("Select as publisher logo","web-stories"),cropParams:e}))}return c.createElement(VA,{name:t||"publishing",collapsedByDefault:!1,isPersistable:!(y||b)},c.createElement(hk,null,(0,d.__)("Publishing","web-stories")),c.createElement(_k,null,S?.publish&&c.createElement(jJ,null),S?.["assign-author"]&&n&&c.createElement(ZJ,null),c.createElement(XJ,{isHighlighted:b?.showEffect||y?.showEffect,onAnimationEnd:()=>_()},c.createElement(QJ,null,c.createElement(qJ,null,c.createElement(KJ,{ref:e=>{e&&b?.focus&&b?.showEffect&&e.focus()},$width:72,$height:96,cropParams:{width:640,height:853},value:v?.url,onChange:C,title:(0,d.__)("Select as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:l,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:O,imgProps:v,canUpload:p})),c.createElement(VJ,null,c.createElement($J,null,(0,d.__)("Poster image","web-stories")),c.createElement(sA,null))),c.createElement(JJ,null,c.createElement(qJ,null,c.createElement(FN.default.DropDown,{options:R,primaryOptions:R,onChange:x,title:(0,d.__)("Available publisher logos","web-stories"),dropdownButtonLabel:(0,d.__)("Publisher Logo","web-stories"),renderer:N,activeItemRenderer:()=>{const e=h.length?(0,d.__)("Select logo","web-stories"):(0,d.__)("No logo","web-stories");return w.id?c.createElement(e0,{src:w.url,alt:""}):c.createElement(Ve.Text,{as:"span",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},e)},selectedId:w.id,zIndex:10,disabled:!R.length,ref:e=>{e&&y?.focus&&y?.showEffect&&e.focus()}})),c.createElement(VJ,null,c.createElement($J,null,(0,d.__)("Publisher Logo","web-stories")),c.createElement(fx,null,c.createElement(sA,null),m&&c.createElement(jd.Link,{rel:"noopener noreferrer",target:"_blank",href:s,size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Manage","web-stories"))))))))};function n0(){return n0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n0.apply(this,arguments)}const r0=p.default.li.withConfig({displayName:"status__StyledListItem",componentId:"sc-1pq370j-0"})(["position:relative;padding:6px 8px;margin:4px 8px;align-items:center;border-radius:4px;cursor:pointer;"," &:hover{background-color:",";}"],Fu.focusableOutlineCSS,g.theme.colors.border.defaultNormal),a0=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__LabelText",componentId:"sc-1pq370j-1"})(["font-size:14px;color:",";"],g.theme.colors.fg.primary),o0=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__HelperText",componentId:"sc-1pq370j-2"})(["color:",";"],g.theme.colors.fg.tertiary),l0=(0,u.forwardRef)(((e,t)=>{let{option:n,isSelected:r,...a}=e;return c.createElement(r0,n0({ref:t,active:r},a),c.createElement(a0,null,n.label),c.createElement("br",null),c.createElement(o0,null,n.helper))}));const i0=function StatusPanel(e){let{nameOverride:t,popupZIndex:n,canCollapse:r,isPersistable:a,...o}=e;const{status:l="",password:i,updateStory:s,saveStory:p,capabilities:m,editLink:f,title:g,storyId:h,visibility:E}=xa((e=>{let{state:{story:{status:t,password:n,editLink:r,title:a,storyId:o,visibility:l},capabilities:i},actions:{updateStory:s,saveStory:c}}=e;return{status:t,password:n,updateStory:s,saveStory:c,capabilities:i,editLink:r,title:a,storyId:o,visibility:l}})),b=cc();(0,u.useEffect)((()=>{i?s({properties:{visibility:HJ}}):l!==UJ.PRIVATE?E||s({properties:{visibility:BJ}}):s({properties:{visibility:FJ}})}),[i,l,s,E]);const y=[{value:BJ,label:(0,d.__)("Public","web-stories"),helper:(0,d.__)("Visible to everyone","web-stories")}];m?.publish&&(y.push({value:FJ,label:(0,d.__)("Private","web-stories"),helper:(0,d.__)("Visible to site admins & editors only","web-stories"),disabled:b&&E!==FJ}),y.push({value:HJ,label:(0,d.__)("Password Protected","web-stories"),helper:(0,d.__)("Visible only to those with the password.","web-stories")}));const _=(0,u.useCallback)((e=>{s({properties:{password:e.target.value}})}),[s]),v=yr(h,f),w=(0,u.useCallback)((()=>{const e={status:UJ.PRIVATE,password:"",visibility:FJ};(0,O.trackEvent)("publish_story",{status:UJ.PRIVATE,title_length:g.length}),v(),p(e)}),[g.length,v,p]),T=[UJ.PUBLISH,UJ.FUTURE,UJ.PRIVATE].includes(l),S=(0,u.useCallback)(((e,t)=>{const n=t;if(FJ===n&&!T&&!window.confirm((0,d.__)("Would you like to privately publish this story now?","web-stories")))return;const r={};switch(n){case BJ:r.status=E===FJ?UJ.DRAFT:l,r.password="",r.visibility=BJ;break;case FJ:return void w();case HJ:r.status=E===FJ?UJ.DRAFT:l,r.password=i||"",r.visibility=HJ}s({properties:r})}),[l,E,i,s,w,T]);return c.createElement(wk,n0({name:t||"status",title:(0,d.__)("Visibility","web-stories"),canCollapse:r,isPersistable:a,collapsedByDefault:!1},o),c.createElement(c.Fragment,null,c.createElement(fx,null,c.createElement(_A.DropDown,{options:y,selectedValue:E,onMenuItemClick:S,popupZIndex:n,disabled:y.length<=1,renderItem:l0,hint:y.find((e=>E===e.value))?.helper})),E===HJ&&c.createElement(fx,null,c.createElement(hT,{"aria-label":(0,d.__)("Password","web-stories"),value:i,onChange:_,placeholder:(0,d.__)("Enter a password","web-stories")}))))};function PublishModalDocumentPane(){return c.createElement(c.Fragment,null,c.createElement(t0,{nameOverride:"storyDetailsPublishing"}),c.createElement(pO,{nameOverride:"storyDetailsExcerpt"}),c.createElement(iO,{nameOverride:"storyDetailsPageAdvancement"}),c.createElement(LO,{nameOverride:"storyDetailsBackgroundAudio"}),c.createElement(TN,{nameOverride:"storyDetailsTaxonomies"}))}const s0=(0,p.default)(i0).withConfig({displayName:"documentPane__IsolatedPanel",componentId:"sc-3jx0y8-0"})(["padding:4px 4px 8px;"]);function IsolatedStatusPanel(){return c.createElement(s0,{nameOverride:"storyDetailsStatus",canCollapse:!1,isPersistable:!1,popupZIndex:11})}const c0=function DocumentPane(){return c.createElement(c.Fragment,null,c.createElement(i0,null),c.createElement(t0,null),c.createElement(Sk,null),c.createElement(pO,null),c.createElement(iO,null),c.createElement(LO,null),c.createElement(TN,null))},d0=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__CheckboxContainer",componentId:"sc-mjnlj7-0"})(["display:flex;align-items:flex-start;"]),u0=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__ButtonContainer",componentId:"sc-mjnlj7-1"})(["display:flex;align-items:center;justify-content:center;margin-top:16px;"]),p0=(0,p.default)(Ve.Text).attrs({as:"span",isBold:!0}).withConfig({displayName:"videoOptimizationCheckbox__BoldText",componentId:"sc-mjnlj7-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),m0=(0,p.default)(Ve.Text).attrs({size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"videoOptimizationCheckbox__DescriptionText",componentId:"sc-mjnlj7-3"})(["color:",";margin-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),f0=(0,p.default)(m0).withConfig({displayName:"videoOptimizationCheckbox__CheckboxLabel",componentId:"sc-mjnlj7-4"})(["margin-left:8px;margin-bottom:0;line-height:20px;cursor:pointer;"]);const g0=function VideoOptimizationCheckbox(){const e=Sp(),{capabilities:{hasUploadMediaAction:t}={},dashboardSettingsLink:n}=H(),[r,a]=(0,u.useState)(!1),o=(0,u.useRef)(),{currentUser:l,toggleWebStoriesMediaOptimization:i}=Na((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,toggleWebStoriesMediaOptimization:n.toggleWebStoriesMediaOptimization}})),s=l?.meta?.web_stories_media_optimization,p=!s&&t,g=(0,u.useCallback)((()=>{a(!0),i()}),[i]),{isSaving:h,saveStory:E}=xa((e=>{let{state:t,actions:n}=e;return{isSaving:t.meta.isSaving,saveStory:n.saveStory}}));return(0,u.useEffect)((()=>{r&&o.current.focus()}),[r]),(p||r)&&e?c.createElement(Rv,{title:(0,d.__)("Optimize all videos in the Story to ensure smooth playback.","web-stories"),footer:r?c.createElement(c.Fragment,null,c.createElement(DefaultFooterText,null,c.createElement(Gd.default,{mapping:{b:c.createElement(p0,null)}},(0,d.__)("Automatic video optimization enabled. <b>Reload the page</b> to apply changes.","web-stories"))),c.createElement(u0,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:async()=>{await E(),window.location.reload(!0)},disabled:h,ref:o},(0,d.__)("Save & Reload","web-stories")))):c.createElement(d0,null,c.createElement(OC.Checkbox,{id:"automatic-video-optimization-toggle",checked:l?.meta?.web_stories_media_optimization,onChange:g}),c.createElement(f0,{forwardedAs:"label",htmlFor:"automatic-video-optimization-toggle"},c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:e=>(0,O.trackClick)(e,"click_video_optimization_settings"),href:n,isBold:!0})}},(0,d.__)("Enable automatic optimization. Change this any time in <a>Settings</a>.","web-stories"))))}):null};const h0=function Accessibility(){const{hasUploadMediaAction:e}=H((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(ew,null),c.createElement(hw,null),c.createElement(ww,null),e&&c.createElement(_w,null),c.createElement(Bv,null),c.createElement(Lv,null),c.createElement(Hv,null),c.createElement(g0,null))};const E0=function Design(){const{hasUploadMediaAction:e}=H((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(pw,null),c.createElement(lw,null),c.createElement(nw,null),c.createElement(aw,null),e&&c.createElement(Iw,null),e&&c.createElement(jv,null))},b0=()=>{const e=Sp(),{generalSettingsLink:t,publisherName:n}=H((e=>{let{metadata:t,generalSettingsLink:n}=e;return{publisherName:t?.publisher,generalSettingsLink:n}})),r=n?.trim().length>0,{title:a}=tu.storyMissingPublisherName;return yu("StoryMissingPublisherName",!r),!r&&e&&c.createElement(Rv,{title:a,footer:c.createElement(DefaultFooterText,null,c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{href:t,rel:"noreferrer",target:"_blank",size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your site title is used when your Story appears on Google. You can set your site title by going to <a>General Settings</a>.","web-stories")))})};const y0=function Priority(){const{canManageSettings:e,hasUploadMediaAction:t}=H((e=>{let{capabilities:t}=e;return{canManageSettings:t.canManageSettings,hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(uw,null),e&&c.createElement(b0,null),c.createElement(fw,null),c.createElement(dw,null),t&&c.createElement(StoryPosterAttached,null),t&&c.createElement(mw,null),t&&c.createElement(iw,null),t&&c.createElement(sw,null),t&&c.createElement(Sw,null),c.createElement(Mw,null),c.createElement(cw,null))};function _0(){return _0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_0.apply(this,arguments)}const v0=p.default.div.withConfig({displayName:"footer__Panel",componentId:"sc-6wcfz2-0"})(["padding:16px 0 24px 0;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),w0=p.default.ul.withConfig({displayName:"footer__Links",componentId:"sc-6wcfz2-1"})(["margin:8px 0 0 0;padding:0;list-style-position:inside;list-style-type:none;"]),T0=p.default.li.withConfig({displayName:"footer__ListItem",componentId:"sc-6wcfz2-2"})([""," &::before{content:'- ';}&,& > *{font-weight:700;}"],Bu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})));function S0(e){let{children:t,...n}=e;return c.createElement(T0,null,c.createElement(jd.Link,_0({},n,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}),t))}const C0=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),I0=(0,d.__)("https://youtube.com/playlist?list=PLfVPq9A6B0RNoQ3HTE9LQzgAdVzcb7tmt","web-stories");function x0(){const e=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_support_page")}),[]),t=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_website_docs")}),[]),n=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_storytime_channel")}),[]);return c.createElement(v0,null,c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover more resources to get the most out of Web Stories. Read our start guide or visit our support forum to get answers to your questions.","web-stories")),c.createElement(w0,null,c.createElement(S0,{href:"https://wp.stories.google/docs/getting-started/",target:"_blank",rel:"noreferrer",onClick:t},(0,d.__)("Read Start Guide","web-stories")),c.createElement(S0,{href:C0,target:"_blank",rel:"noreferrer",onClick:e},(0,d.__)("Visit Support Forums","web-stories")),c.createElement(S0,{href:I0,target:"_blank",rel:"noreferrer",onClick:n},(0,d.__)("Storytime YouTube Series","web-stories"))))}const A0=function(){return c.createElement(PJ,null,c.createElement(oJ,{header:c.createElement(yJ,null),footer:{secondaryMenu:{helpCenter:{Footer:x0},checklist:{Priority:y0,Design:E0,Accessibility:h0}}},sidebarTabs:{document:{title:(0,d.__)("Document","web-stories"),Pane:c0},publishModal:{DocumentPane:PublishModalDocumentPane,IsolatedStatusPanel}}},c.createElement(NJ,null)))};var k0=n(51048);const O0=e=>{const{src:t,url:n,mime:r,alt:a,date:o,id:l,featured_media:i,featured_media_src:{src:s,width:c,height:d,generated:u}="",media_details:{width:p,height:m,length:f,length_formatted:g,sizes:h={}}={},web_stories_media_source:E,web_stories_is_muted:b,web_stories_base_color:y,web_stories_blurhash:_,trim_data:v}=e,w=Object.entries(h).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,k0.snakeToCamelCaseObjectKeys)(r),e}),{});return Q({baseColor:y,blurHash:_,mimeType:r,creationDate:o,src:n||t,...ee({width:p,height:m,posterGenerated:u,posterWidth:c,posterHeight:d}),poster:s,posterId:i,id:l,length:f,lengthFormatted:g,alt:a,sizes:w,local:!1,isExternal:!1,isOptimized:"video-optimization"===E,isMuted:b,trimData:v})},N0=(e,t,n,r,a,o)=>(!0!==e||!0!==t)&&((!0!==e||r!==o)&&((!0!==t||n!==a)&&((n!==a||r!==o)&&!(Math.abs(n/r-a/o)<Number.EPSILON)))),P0=(e,t)=>{const n=t.get("control"),r=Boolean(parseInt(n.params.flex_width)),a=Boolean(parseInt(n.params.flex_height)),o=e.get("width"),l=e.get("height");let i=parseInt(n.params.width),s=parseInt(n.params.height);const c=i/s,d=i,u=s;t.set("canSkipCrop",!n.mustBeCropped(r,a,i,s,o,l)),o/l>c?(s=l,i=s*c):(i=o,s=i/c);const p=(o-i)/2,m=(l-s)/2,f={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:o,imageHeight:l,minWidth:d>i?i:d,minHeight:u>s?s:u,x1:p,y1:m,x2:i+p,y2:s+m};return!1===a&&!1===r&&(f.aspectRatio=i+":"+s),!0===a&&(delete f.minHeight,f.maxWidth=o),!0===r&&(delete f.minWidth,f.maxHeight=l),f},R0=window.wp?.media?.controller?.Cropper?.extend?.({doCrop:function(e){const t=e.get("cropDetails"),n=this.get("control"),r=t.width/t.height;return n.params.flex_width&&n.params.flex_height?(t.dst_width=t.width,t.dst_height=t.height):(t.dst_width=n.params.flex_width?n.params.height*r:n.params.width,t.dst_height=n.params.flex_height?n.params.width/r:n.params.height),window.wp.ajax.post("crop-image",{nonce:e.get("nonces").edit,id:e.get("id"),context:n.id,cropDetails:t})}}),M0=R0,L0={height:0,width:0,flex_width:!1,flex_height:!1};function D0(e){let{title:t=(0,d.__)("Upload to Story","web-stories"),buttonInsertText:n=(0,d.__)("Insert into page","web-stories"),onSelect:r,onSelectErrorMessage:a=(0,d.__)("Unable to use this file type.","web-stories"),onClose:o,onPermissionError:l,type:i="",multiple:s=!1,cropParams:c}=e;const{actions:{updateMedia:p}}=Z(),{capabilities:{hasUploadMediaAction:m}}=H(),{showSnackbar:f}=(0,Er.useSnackbar)();(0,u.useEffect)((()=>{try{window.wp.Uploader.prototype.success=e=>{let{attributes:t}=e;p(t.id,{mediaSource:"editor",altText:t.alt||t.title})}}catch(e){}}),[p]);const g=(0,u.useCallback)((e=>{if((0,O.trackEvent)("open_media_modal"),!m)return l&&l(),void e.preventDefault();const c=window.wp.media({title:t,library:{type:i},button:{text:n},multiple:s});c.once("select",(()=>{const e=c.state().get("selection").first().toJSON();!Array.isArray(i)||i.includes(e.mime)?(e.alt=e.alt||e.title,r(O0(e))):f({message:a})})),o&&c.once("close",o),c.once("content:activate:browse",(()=>{c.content?.get()?.collection?._requery(!0),c.content?.get()?.options?.selection?.reset()})),c.open(),e.preventDefault()}),[m,f,l,o,r,n,a,s,i,t]),h=(0,u.useCallback)((e=>{if((0,O.trackEvent)("open_media_crop_modal"),!m)return l&&l(),void e.preventDefault();const d={...L0,...c},u={id:"control-id",params:d,mustBeCropped:N0},g={text:n,close:!1},h=window.wp.media({button:g,states:[new window.wp.media.controller.Library({title:t,library:window.wp.media.query({type:i}),button:g,multiple:s,suggestedWidth:d.width,suggestedHeight:d.height}),M0&&new M0({imgSelectOptions:P0,control:u})]});h.once("cropped",(e=>{if(e?.id){const t=e.alt||e.title;p(e.id,{mediaSource:"editor",altText:t}),e.alt=t}r(O0(e))})),h.once("skippedcrop",(()=>{const e=h.state().get("selection").first().toJSON();e.alt=e.alt||e.title,r(O0(e))})),h.once("select",(()=>{const e=h.state().get("selection").first().toJSON();if(Array.isArray(i)&&!i.includes(e.mime))return h.close(),void f({message:a});u.params.width!==e.width||u.params.height!==e.height||u.params.flex_width||u.params.flex_height?h.setState("cropper"):(e.alt=e.alt||e.title,r(O0(e)),h.close())})),o&&h.once("close",o),h.once("content:activate:browse",(()=>{h.content?.get()?.collection?._requery(!0),h.content?.get()?.options?.selection?.reset()})),h.open(),e.preventDefault()}),[m,c,n,t,i,s,r,o,l,p,f,a]);return(0,u.useMemo)((()=>c?h:g),[c,h,g])}D0.propTypes={title:ha.string,buttonInsertText:ha.string,onSelect:ha.func.isRequired,onSelectErrorMessage:ha.string,onClose:ha.func,onPermissionError:ha.func,type:ha.oneOfType([ha.string,ha.arrayOf(ha.string)]),cropParams:ha.object,multiple:ha.bool};const B0=D0;function MediaUpload(e){let{render:t,...n}=e;return t(B0(n))}MediaUpload.propTypes={render:ha.func.isRequired,...B0.propTypes};const F0=MediaUpload;var H0=n(6389);function U0(e,t){return IJ({path:`${t}${e}/lock/`,method:"POST"})}const z0=p.default.img.withConfig({displayName:"shared__Img",componentId:"sc-1djlecd-0"})(["float:left;margin:0px 10px 10px 0px;"]);const G0=function PostLockDialog(e){let{isOpen:t,onClose:n,user:r,dashboardLink:a,previewLink:o,showTakeOver:l=!1}=e;const i=(0,d.__)("Story is locked","web-stories"),s=l?(0,Ze.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story. Do you want to take over?","web-stories"),r?.name):(0,Ze.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story.","web-stories"),r?.name);return c.createElement(y,{isOpen:t,onClose:n,title:i,contentLabel:i,actions:c.createElement(c.Fragment,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,href:a},(0,d.__)("Dashboard","web-stories")),c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,href:o,target:"_blank",rel:"noreferrer"},(0,d.__)("Preview","web-stories")),l&&c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:n},(0,d.__)("Take over","web-stories")))},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r?.avatar&&c.createElement(z0,{src:r.avatar,alt:r.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),s))};const j0=function PostTakeOverDialog(e){let{isOpen:t,user:n,dashboardLink:r,onClose:a}=e;const o=(0,d.__)("Someone else has taken over this story.","web-stories"),l=(0,Ze.default)(
/* translators: %s: user's name */
(0,d.__)("%s now has editing control of this story.","web-stories"),n?.name);return c.createElement(y,{isOpen:t,title:o,contentLabel:o,onClose:a,actions:c.createElement(m.Button,{type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE,href:r},(0,d.__)("Dashboard","web-stories"))},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.avatar&&c.createElement(z0,{src:n.avatar,alt:n.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),l))};const Y0=function PostLock(){const{currentUser:e}=Na((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),{storyId:t,dashboardLink:n,nonce:r,postLock:{interval:a,showLockedDialog:o},api:{stories:l,storyLocking:i}}=H(),{previewLink:s,lockUser:d}=xa((e=>{let{state:{story:{previewLink:t,extras:{lockUser:n={}}={}}}}=e;return{previewLink:t,lockUser:n}})),{enablePostLockingTakeOver:p}=(0,S.useFeatures)(),[m,f]=(0,u.useState)(!0),[g,h]=(0,u.useState)({}),[E,b]=(0,u.useState)(r),y=(0,u.useCallback)((()=>{p&&(h({}),U0(t,l))}),[p,t,l]),_=(0,u.useMemo)((()=>Boolean(Object.keys(e).length)),[e]),v=(0,u.useCallback)((()=>{o&&_&&function(e,t){const n=(0,H0.default)(`${t}${e}/lock/`,{_embed:"author"});return IJ({path:n})}(t,l).then((n=>{let{locked:r,nonce:a,_embedded:o}=n;const i={id:o?.author?.[0]?.id||0,name:o?.author?.[0]?.name||"",avatar:o?.author?.[0]?.avatar_urls?.[96]||""};r&&i?.id&&i?.id!==e.id?h(i):U0(t,l),b(a)})).catch((e=>{(0,O.trackError)("post_lock",e.message)}))}),[h,t,l,e,o,_]),w=(0,u.useRef)(v);return(0,u.useEffect)((()=>{w.current=v}),[v,_]),(0,u.useEffect)((()=>{o&&_&&d?.id&&d?.id!==e.id&&h(d)}),[d,e,_,o]),(0,u.useEffect)((()=>{function e(){o&&g?.id&&E&&function(e,t,n){const r=new window.FormData;r.append("_wpnonce",t);const a=(0,H0.default)(n,{_method:"DELETE"});window.navigator.sendBeacon?.(a,r)}(0,E,i)}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t,o,g,E,i]),(0,u.useEffect)((()=>{const e=setInterval((()=>{a&&_&&(w.current(),f(!1))}),1e3*a);return()=>clearInterval(e)}),[a,_]),o&&g?m?c.createElement(G0,{isOpen:Boolean(g?.id),user:g,onClose:y,previewLink:s,dashboardLink:n,showTakeOver:p}):p?c.createElement(j0,{isOpen:Boolean(g?.id),user:g,dashboardLink:n,onClose:y}):null:null};const Z0=function(e){return"__WEB_STORIES_ENCODED__"+btoa(encodeURIComponent(e))};const W0=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories");const V0=function StatusCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_support_page")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to save your story","web-stories"),contentLabel:(0,d.__)("Unable to save your story","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:W0,target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We are currently unable to save your story, any changes you make may be lost. This may be due to temporary issues connecting to WordPress. <a>Submit a new support topic</a> for additional help.","web-stories"))))};const $0=function StatusCheck(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>t(!1)),[]),{api:{statusCheck:r},encodeMarkup:a}=H();return(0,u.useEffect)((()=>{(function(e,t,n){return IJ({path:t,data:{content:n?Z0(e):e},method:"POST"})})(Qr({storyId:1,title:"Story!",author:{id:1,name:"John Doe"},slug:"story",publisherLogo:{id:1,url:"https://example.com/logo.png",height:0,width:0},defaultPageDuration:7,status:"publish",date:"2020-04-10T07:06:26",modified:"",excerpt:"",featuredMedia:{id:123,url:"https://example.com/image.png",width:123,height:456},password:"",globalStoryStyles:""},[{type:"page",id:"2",elements:[]}],{publisher:"Web Stories"}),r,a).catch((e=>{t(!0),(0,O.trackError)("status_check",e.message)}))}),[a,r]),c.createElement(V0,{isOpen:e,onClose:n})};const q0=function CorsCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_cors_check_docs")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to load media","web-stories"),contentLabel:(0,d.__)("Unable to load media","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs/troubleshooting/common-issues/",target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We detected a potential misconfiguration that prevents media items from loading correctly. This may be due to media being hosted on an external CDN. <a>Learn how to address this</a>.","web-stories"))))},K0=vo.CORS_CHECK_DIALOG_DISMISSED;const X0=function CorsCheck(){const[e,t]=(0,u.useState)(!1),{actions:{getMediaForCorsCheck:n}}=Z(),r=(0,S.useFeature)("enableCORSCheck"),a=(0,u.useCallback)((()=>{t(!1),wo.setItemByKey(K0,!0)}),[]),o=Boolean(wo.getItemByKey(K0));return(0,u.useEffect)((()=>{(async()=>{if(!r||o)return;let e;try{e=await n()}catch(e){return}if(e?.length)try{await Promise.all([...new Set(e.filter((e=>!e.startsWith(location.origin))))].map((e=>fetch(e,{method:"HEAD"}))))}catch(e){t(!0),(0,O.trackError)("cors_check",e.message)}})()}),[]),c.createElement(q0,{isOpen:e,onClose:a})},Q0=p.default.div.withConfig({displayName:"fontCheckDialog__DialogContent",componentId:"sc-5gbbgj-0"})(["display:grid;row-gap:20px;"]),J0=(0,p.default)(Yg).withConfig({displayName:"fontCheckDialog__ChevronRight",componentId:"sc-5gbbgj-1"})(["width:32px;height:32px;"]),e1=(0,p.default)(J0).withConfig({displayName:"fontCheckDialog__ChevronLeft",componentId:"sc-5gbbgj-2"})(["transform:rotate(180deg);"]),t1=(0,p.default)(jd.Link).withConfig({displayName:"fontCheckDialog__StyledLink",componentId:"sc-5gbbgj-3"})(["display:flex;color:",";align-items:center;font-weight:normal;margin:0 auto 0 0;"],(e=>{let{theme:t}=e;return t.colors.standard.black})),n1=(0,p.default)(m.Button).withConfig({displayName:"fontCheckDialog__StyledButton",componentId:"sc-5gbbgj-4"})(["margin-left:16px;"]),r1=p.default.div.withConfig({displayName:"fontCheckDialog__ActionsWrap",componentId:"sc-5gbbgj-5"})(["display:flex;align-self:flex-end;width:100%;"]),FontCheckDialog=e=>{let{isOpen:t,defaultCloseAction:n,missingFont:r,closeDialog:a}=e;const{dashboardLink:o,dashboardSettingsLink:l,isRTL:i}=H(),[s,p]=(0,u.useState)(Hn.TEXT_ELEMENT_DEFAULT_FONT),{updateElementsByFontFamily:m}=xa((e=>{let{actions:t}=e;return{updateElementsByFontFamily:t.updateElementsByFontFamily}})),g=(0,u.useCallback)((e=>{(0,O.trackEvent)("font_check_cancel"),n(e)}),[n]),h=(0,u.useCallback)((e=>{(0,O.trackClick)(e,"click_font_check_settings")}),[]),E=(0,u.useCallback)((()=>{(0,O.trackEvent)("font_check_replace_default"),m({family:r,properties:{font:Hn.TEXT_ELEMENT_DEFAULT_FONT}}),a()}),[a,r,m]),b=(0,u.useCallback)((()=>{(0,O.trackEvent)("font_check_replace_selected"),m({family:r,properties:{font:s}}),a()}),[s,a,r,m]),_=i?J0:e1;return c.createElement(y,{isOpen:t,onClose:g,title:(0,d.__)("Missing Fonts","web-stories"),contentLabel:(0,d.__)("Missing Fonts","web-stories"),actions:c.createElement(r1,null,c.createElement(t1,{href:o},c.createElement(_,null),(0,d.__)("Back to dashboard","web-stories")),c.createElement(n1,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:E},(0,d.__)("Open anyway","web-stories")),c.createElement(n1,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:b},(0,d.__)("Replace font","web-stories")))},c.createElement(Q0,null,c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This story contains the following font that is no longer available:","web-stories")),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},r),c.createElement("div",null,c.createElement(Gd.default,{mapping:{a:c.createElement(jd.Link,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:h,href:l,isBold:!0})}},(0,d.__)("To replace this font with your own or re-add it, go to <a>Settings</a>. To replace this font with a default, open the story.","web-stories"))),c.createElement(Ve.Text,{size:$e.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Or, choose replacement font below:","web-stories")),c.createElement(zN,{zIndex:10,currentValue:s.family,onChange:p})))},a1=()=>{const{dashboardLink:e}=H(),{isStoryLoaded:t}=xa((e=>{let{state:{pages:t}}=e;return{isStoryLoaded:t.length>0}})),n=xa((e=>{let{state:{pages:t}}=e;return t})),{actions:{getFonts:r}}=Z(),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((()=>{window.location=e}),[e]);return(0,u.useEffect)((()=>{(async()=>{if(!t)return;const e=eK(n),a=await r({include:e.join(",")}),l=e.filter((e=>!new Set(a.map((e=>e.family))).has(e)));l&&l.length>=1&&(i(!0),o(l[0]))})()}),[t,n,r]),c.createElement(FontCheckDialog,{isOpen:l,missingFont:a||"",defaultCloseAction:s,closeDialog:()=>i(!1)})};function o1(e,t){return IJ({path:(0,H0.default)(e.api.users,{per_page:"100",who:"authors",search:t})}).then((e=>e.map((e=>(delete e._links,(0,k0.snakeToCamelCaseObjectKeys)(e))))))}const l1=["id","title","status","slug","date","modified","excerpt","link","story_data","preview_link","edit_link","embed_post_link","permalink_template","style_presets","password"].join(","),i1="wp:featuredmedia,wp:lockuser,author,wp:publisherlogo,wp:term",s1=["id","date_gmt","media_details","mime_type","featured_media","featured_media_src","alt_text","source_url","meta","web_stories_media_source","web_stories_is_muted","body","status","headers"].join(",");const c1=function(e){const{_embedded:t={},_links:n={},...r}=e,a={...(0,k0.snakeToCamelCaseObjectKeys)(r,["story_data"]),author:{id:t?.author?.[0].id||0,name:t?.author?.[0].name||""},capabilities:{},extras:{lockUser:{id:t?.["wp:lockuser"]?.[0].id||0,name:t?.["wp:lockuser"]?.[0].name||"",avatar:t?.["wp:lockuser"]?.[0].avatar_urls?.[96]||""}},featuredMedia:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""},publisherLogo:{id:t?.["wp:publisherlogo"]?.[0].id||0,height:t?.["wp:publisherlogo"]?.[0]?.media_details?.height||0,width:t?.["wp:publisherlogo"]?.[0]?.media_details?.width||0,url:t?.["wp:publisherlogo"]?.[0]?.source_url||""},taxonomies:n?.["wp:term"]?.map((e=>{let{taxonomy:t}=e;return t}))||[],terms:t?.["wp:term"]||[]};for(const e of Object.keys(n)){if(!e.startsWith("wp:action-"))continue;const t=e.replace("wp:action-","");a.capabilities[t]=!0}return a};function d1(e,t){const n=(0,H0.default)(`${e.api.stories}${t}/`,{context:"edit",_embed:i1,_fields:l1});return IJ({path:n}).then(c1)}const u1=(e,t)=>{let{pages:n,featuredMedia:r,globalStoryStyles:a,publisherLogo:o,autoAdvance:l,defaultPageDuration:i,currentStoryStyles:s,backgroundAudio:c,content:d,author:u,...p}=e;return{story_data:{version:tr.DATA_VERSION,pages:n,autoAdvance:l,defaultPageDuration:i,currentStoryStyles:s,backgroundAudio:c},featured_media:r.id,style_presets:a,meta:{web_stories_publisher_logo:o?.id},publisher_logo:o,content:t?Z0(d):d,author:u.id,...p}};function p1(e,t){const{storyId:n}=t,r=u1(t,e.encodeMarkup),a=(0,H0.default)(`${e.api.stories}${n}/`,{_fields:["status","slug","link","preview_link","edit_link","embed_post_link"].join(","),_embed:i1});return IJ({path:a,data:r,method:"POST"}).then((e=>{const{_embedded:t={},...n}=e;return{...(0,k0.snakeToCamelCaseObjectKeys)(n),featuredMedia:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""}}}))}function m1(e,t){const{storyId:n}=t,r=u1(t,e.encodeMarkup);return IJ({path:`${e.api.stories}${n}/autosaves/`,data:r,method:"POST"}).then((e=>(0,k0.snakeToCamelCaseObjectKeys)(e,["story_data"])))}const f1=function(e){const{mime_type:t,web_stories_media_source:n}=e;return"gif-conversion"===n?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a},mime_type:o,featured_media:l,featured_media_src:{src:i,width:s,height:c,generated:d},alt_text:u,source_url:p,meta:{web_stories_base_color:m,web_stories_blurhash:f}}=e;return Q({baseColor:m,blurHash:f,type:"gif",mimeType:"image/gif",creationDate:n,src:p,...ee({width:r,height:a,posterGenerated:d,posterWidth:s,posterHeight:c}),posterId:l,poster:i,id:t,alt:u,local:!1,isOptimized:!0,isExternal:!1,output:{mimeType:o,src:p}})}(e):"image"===X(t)?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,sizes:o={}}={},mime_type:l,alt_text:i,source_url:s,meta:{web_stories_base_color:c,web_stories_blurhash:d}}=e,u=Object.entries(o).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,k0.snakeToCamelCaseObjectKeys)(r),e}),{});return Q({baseColor:c,blurHash:d,mimeType:l,creationDate:n,src:s,width:r,height:a,id:t,alt:i,sizes:u,local:!1,isExternal:!1})}(e):function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,length:o,length_formatted:l},mime_type:i,featured_media:s,featured_media_src:{src:c,width:d,height:u,generated:p},web_stories_is_muted:m,alt_text:f,source_url:g,web_stories_media_source:h,meta:{web_stories_trim_data:E,web_stories_base_color:b,web_stories_blurhash:y}}=e;return Q({baseColor:b,blurHash:y,mimeType:i,creationDate:n,src:g,...ee({width:r,height:a,posterGenerated:p,posterWidth:d,posterHeight:u}),poster:c,posterId:s,id:t,length:o,lengthFormatted:l,alt:f,local:!1,isExternal:!1,isOptimized:"video-optimization"===h,isMuted:m,trimData:E})}(e)},g1=(e,t,n)=>{if("object"==typeof n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&g1(e,`${t}[${r}]`,n[r]);else e.append(t,n)},h1=g1;function E1(e,t){let{mediaType:n,searchTerm:r,pagingNum:a,cacheBust:o}=t,l=(0,H0.default)(e.api.media,{context:"edit",per_page:50,page:a,_web_stories_envelope:!0,_fields:s1});return n&&(l=(0,H0.default)(l,{media_type:n})),r&&(l=(0,H0.default)(l,{search:r})),o&&(l=(0,H0.default)(l,{cache_bust:!0})),IJ({path:l}).then((e=>{let{body:t,headers:n}=e;return{data:t.map(f1),headers:{...n,totalItems:n["X-WP-Total"],totalPages:n["X-WP-TotalPages"]}}}))}function b1(e){const t=(0,H0.default)(e.api.media,{context:"edit",per_page:10,_fields:"source_url"});return IJ({path:t}).then((e=>e.map((e=>e.source_url))))}function y1(e,t){const n=(0,H0.default)(`${e.api.media}${t}/`,{context:"edit",_fields:s1});return IJ({path:n}).then(f1)}async function _1(e,t){const n=(0,H0.default)(`${e.api.media}${t}/`,{context:"edit",_fields:"meta.web_stories_muted_id"}),r=await IJ({path:n});return r?.meta?.web_stories_muted_id?y1(e,r.meta.web_stories_muted_id):null}async function v1(e,t){const n=(0,H0.default)(`${e.api.media}${t}/`,{context:"edit",_fields:"meta.web_stories_optimized_id"}),r=await IJ({path:n});return r?.meta?.web_stories_optimized_id?y1(e,r.meta.web_stories_optimized_id):null}async function w1(e,t){const n=(0,H0.default)(`${e.api.media}${t}/`,{context:"edit",_fields:"featured_media"}),r=await IJ({path:n});return r?.featured_media?y1(e,r.featured_media):null}function T1(e,t,n){const{originalId:r,mediaId:a,storyId:o,templateId:l,isMuted:i,mediaSource:s,trimData:c,baseColor:d,blurHash:u}=n,p={web_stories_media_source:s,web_stories_is_muted:i,post:l||o||a,original_id:r,web_stories_trim_data:c,web_stories_base_color:d,web_stories_blurhash:u};Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]}));const m=new window.FormData;return m.append("file",t,t.name||t.type.replace("/",".")),Object.entries(p).forEach((e=>{let[t,n]=e;return h1(m,t,n)})),IJ({path:e.api.media,body:m,method:"POST"}).then((e=>f1(e)))}function S1(e,t,n){const{baseColor:r,blurHash:a,isMuted:o,mediaSource:l,optimizedId:i,mutedId:s,posterId:c,storyId:d,altText:u}=n,p={meta:{web_stories_base_color:r,web_stories_blurhash:a,web_stories_optimized_id:i,web_stories_muted_id:s,web_stories_poster_id:c},web_stories_is_muted:o,web_stories_media_source:l,featured_media:c,post:d,alt_text:u};return Object.entries(p.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete p.meta[t]})),Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]})),IJ({path:`${e.api.media}${t}/`,data:p,method:"POST"}).then(f1)}function C1(e,t){IJ({path:(0,H0.default)(`${e.api.media}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function I1(e,t){const n=(0,H0.default)(e.api.link,{url:t});return IJ({path:n})}const x1=["id","story_data","body","headers"],A1="wp:featuredmedia";function k1(e){const{_embedded:t={},id:n,story_data:r={}}=e;return{id:n,elements:[],...r,templateId:n,image:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""}}}function O1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=100,r=(0,H0.default)(e.api.pageTemplates,{context:"edit",per_page:n,page:t,_web_stories_envelope:!0,_fields:x1,_embed:A1});return IJ({path:r}).then((e=>{let{headers:n,body:r}=e;const a=parseInt(n["X-WP-TotalPages"]);return{templates:r.map(k1),hasMore:a>t}}))}function N1(e,t){return IJ({path:`${e.api.pageTemplates}/`,data:{...t,status:"publish"},method:"POST"}).then(k1)}function P1(e,t,n){return IJ({path:`${e.api.pageTemplates}${t}/`,data:{...n},method:"POST"}).then(k1)}function R1(e,t){return IJ({path:(0,H0.default)(`${e.api.pageTemplates}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function M1(e){return{id:e.id,trackingOptin:e.meta.web_stories_tracking_optin,onboarding:e.meta.web_stories_onboarding,mediaOptimization:e.meta.web_stories_media_optimization}}function L1(e){return IJ({path:e.api.currentUser}).then(M1)}function D1(e,t){const{trackingOptin:n,onboarding:r,mediaOptimization:a}=t,o={meta:{web_stories_tracking_optin:n,web_stories_onboarding:r,web_stories_media_optimization:a}};return Object.entries(o.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete o.meta[t]})),IJ({path:e.api.currentUser,method:"POST",data:o}).then(M1)}function B1(e,t){const n=(0,H0.default)(e.api.hotlink,{url:t});return IJ({path:n}).then(k0.snakeToCamelCaseObjectKeys)}function F1(e,t){return(0,H0.default)(e.api.proxy,{url:t,_wpnonce:e.nonce})}async function H1(e){const t=await IJ({path:(0,H0.default)(e.api.taxonomies,{type:e.postType,context:"edit"})});return Object.values(t).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,k0.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function U1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return IJ({url:(0,H0.default)(t,n)})}function z1(e,t,n){return IJ({url:(0,H0.default)(t,n),method:"POST"})}function G1(e,t){let{include:n,search:r,service:a}=t,o=(0,H0.default)(`${e.api.fonts}`,{search:r,service:a});const l=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(",").filter(Boolean).map((e=>`include[]=${encodeURI(e)}`)).join("&")}(n);return l.length>0&&(o+=o.includes("?")?`&${l}`:`?${l}`),IJ({path:o})}function j1(e,t){return IJ({path:(0,H0.default)(e.api.products,{per_page:100,search:t})})}const Y1=(0,p.createGlobalStyle)([".","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}"],T.OVERLAY_CLASS,32,160,T.OVERLAY_CLASS,36);window.webStories=window.webStories||{},window.webStories.initializeStoryEditor=(e,t,n)=>{const r=document.getElementById(e);(0,lJ.setAppElement)(r),(0,Rd.updateSettings)(t.locale),(0,O.initializeTracking)("Editor"),Dn.default.forEach(Hn.registerElementType),n.story=n.story?c1(n.story):null;const a={...t,apiCallbacks:(0,iJ.default)(s,t),additionalTips:DJ,MediaUpload:F0,styleConstants:{topOffset:32,leftOffset:36}};(0,u.render)(c.createElement(u.StrictMode,null,c.createElement(sd,{config:a,initialEdits:n},c.createElement(Y1,null),c.createElement(A0,null),c.createElement(sJ,null),c.createElement($0,null),c.createElement(X0,null),c.createElement(a1,null),c.createElement(Y0,null))),r)}}},l={};function __webpack_require__(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=o,__webpack_require__.amdO={},e=[],__webpack_require__.O=(t,n,r,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],l=!0,i=0;i<n.length;i++)(!1&a||o>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[i])))?n.splice(i--,1):(l=!1,a<o&&(o=a));if(l){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},__webpack_require__.F={},__webpack_require__.E=e=>{Object.keys(__webpack_require__.F).map((t=>{__webpack_require__.F[t](e)}))},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);__webpack_require__.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,__webpack_require__.d(a,o),a},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",341:"chunk-react-color",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1197:"chunk-web-animations-js",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2392:"chunk-react-calendar",2454:"chunk-web-stories-template-6",2476:"chunk-web-stories-textset-0",2558:"chunk-web-stories-template-53-metaData",2563:"chunk-web-stories-textset-4",2634:"chunk-web-stories-textset-3",2761:"chunk-web-stories-textset-7",2776:"chunk-web-stories-template-9-metaData",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3182:"chunk-html-to-image",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3871:"chunk-web-stories-textset-2",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5575:"chunk-resize-observer-polyfill",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7098:"chunk-ffmpeg",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7498:"chunk-colorthief",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7611:"chunk-web-stories-textset-6",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8624:"chunk-focus-visible",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9027:"chunk-web-stories-textset-1",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21",9843:"chunk-web-stories-textset-5"}[e]+".js?v="+{8:"630c1889289a99774048",69:"ee8bf6a37ece865f9fde",274:"710a01518d1067f23be6",341:"597ffe224231a7f155d4",354:"66eb73d014ae08863c5a",410:"a2cea421b37c3939178f",533:"7031543bbf0ac9875728",824:"4d74a8f1e0b73ad85fe0",827:"4f4dc18fab8674b3fa25",884:"d121f5f5280f132b5597",907:"115412b76456b223c423",1049:"78b470e071dc0f3e466c",1066:"a635c0f83fd51db6ac06",1197:"45f526a251ead370165a",1231:"e6a8a2bd20f3a38a61aa",1340:"658339eae27be828c9d2",1380:"2ca16dfc5daadd31e068",1403:"88b6b87bdb2c9e25e03e",1738:"843b9a56e3af78fd769d",1789:"7e532bf5deced1c96a99",1813:"38319dc6a0a3f890b221",1847:"a4057b4c746081be9263",1858:"1f475c4ff9afaf285917",1970:"78b7a2bd8812f2bf6406",2068:"231dcd26b94b85a75f6d",2167:"63718570f9ee6fc4c997",2191:"9e9359bd105429600d80",2235:"235e98e7f0a194e663df",2246:"ad654f9224067fefa563",2319:"de459568067e6a86c7ac",2338:"04e1ee5d5b8612037c2a",2374:"bdfd30cc435b8733776b",2392:"fe88e944141fdcaf426f",2454:"dd0556e8e1ce28ad8f5d",2476:"72a85088ca7dfba752af",2558:"dd3a56a23eef473743c2",2563:"838b1aa7caf779da7c99",2634:"ed500d18f05369972ad7",2761:"59f11ab8dc60c66befab",2776:"2a94f2790f69801857f7",2830:"f8c41181823fb6e56a2a",2880:"f4970c07a2daa0f08217",2894:"d72ef1b8371f0de9d4b7",3041:"acafde2d8f1a6980eb81",3182:"366847cef960fbf44a89",3194:"76e25e1bb5380222d1e6",3245:"1df7eca93fe379e64a12",3289:"667fa6d0a0f6165df08a",3304:"74bad8c55f80f9627393",3441:"da701ed759f2028dd2ca",3529:"67fd5655bd72ef1f9e4e",3710:"89a9840238a06d067487",3772:"97bba6dbdc989f3f0079",3777:"ff9ca2f6e22cfd38b210",3864:"205a38118d76188f1497",3871:"bedde163307df2880668",3969:"15645c1e2b185526edc5",4051:"a3859c6f25fb906796aa",4142:"7c41a777dafe70d23a53",4178:"1bb9fee64db965ad4c77",4386:"912d7753fe4fee5f338e",4585:"934e6e9b938e8e0c0832",4874:"8d02e508eb5953a8f03e",5016:"416c3be02c2ca809fc3f",5040:"a94288e9bef7d20a66b0",5157:"23343032ecef4717c115",5312:"31796ef0ce5822fed43d",5372:"8cff45ed4d0f60a1881d",5397:"59ce47b435a56f9e93f6",5432:"1a361e3a3c3faeeaeca0",5535:"ccfe00318c800127b676",5543:"94565856660cf179d32a",5553:"46ade91fdf2e8a4501d5",5570:"1a2bca995e7c5853b966",5573:"d11139be60f7b14c9ffc",5575:"a97a5e5ec0e812a389ed",5748:"e2097d5470b0ff553b78",5835:"e26cdddb2dc71a384d91",6053:"cd8f59acf99cb495fe77",6188:"f789dc8138a0a310573f",6204:"ffa8c4d1cc9dd090d896",6271:"49df2acd6d02d6aebdb7",6305:"f8bb7423de5e3aabca11",6311:"efd3cdbbbecec5cdafa2",6353:"78c4ce9232efce7cc087",6406:"b354318000216e2b1e09",6428:"fe7d639bd7c33f47f984",6500:"5a5652c3dd7c0c678efa",6517:"d27cdbf4c13c2d5d56c9",6539:"64a365f05a34a2adf367",6592:"fce6e4bbcac42159a242",6641:"bade12d3bb5f6781a58f",6766:"1bc7a9e7a79469a5af79",6841:"8c96e794cd956fae957a",6852:"615b2a27635b00b72590",7098:"c7dbceed752536f08148",7131:"1ba4f104ed9cf83b61fb",7314:"979d5b962e46e47de7f7",7343:"ba703316b992c32e8f92",7346:"3950ca8706e598667021",7399:"f5202425f7e474f8457b",7441:"04081314626c71b83755",7498:"afa32aef6dfc12d11c81",7502:"1ab9f731481924d296b4",7528:"8d631193e3fc67f254d9",7586:"6c78018b47129c7c483e",7588:"ed34aaadc0ad2abddde5",7611:"c8b175a30de5d1e0a1de",7685:"49748e29ef614eab5cbd",7798:"a03fe4c4b1d6abf8541f",7799:"388e7903cd5e0447281a",7863:"582b6c2ce8eaad76fc82",7952:"f206bee0645c91e855ef",8022:"0822bcf03c934917351e",8189:"37686cfc4a640c7e0f40",8203:"9ad50fae3abebdacf570",8257:"1584aaaa978f2a0a6d6e",8344:"1e41c6842559154c2b32",8422:"3f42e89ce0dd7e802975",8551:"2ee2ba6799dfc33197dc",8624:"705c5bfc48fb43676444",8768:"04036e7d0f2b8b2c1b24",8856:"7e61600bafdf93fbef22",9027:"d3a975da990d0b55d520",9074:"c956f3be9f5f3f084d97",9233:"32ef5d28d2adca4b8d6c",9288:"de8000d065d577c73e53",9302:"b0227828b5a500a82b1d",9375:"41a6095cbe70256cfb67",9393:"363f78c9382ef94434e8",9557:"39986c27dabeda720306",9591:"c2ee88aece953cf5d2d3",9603:"b8047e1aff6110d2c964",9607:"fba4b2dbb12906cd92a7",9700:"04f98a4a978ff923a212",9738:"d8b00ffb3193a85920f1",9811:"febe1f76de11227a2633",9843:"4884066861008ef7dc1c"}[e]),__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="web-stories-wp:",__webpack_require__.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var l,i;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){l=d;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,__webpack_require__.nc&&l.setAttribute("nonce",__webpack_require__.nc),l.setAttribute("data-webpack",a+n),l.src=e),r[e]=[t];var u=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var a=r[e];if(delete r[e],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),i&&document.head.appendChild(l)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",(()=>{var e={9078:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,r[1](l)}}),"chunk-"+t,t)}},__webpack_require__.F.j=t=>{if(!__webpack_require__.o(e,t)||void 0===e[t]){e[t]=null;var n=document.createElement("link");__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.rel="prefetch",n.as="script",n.href=__webpack_require__.p+__webpack_require__.u(t),document.head.appendChild(n)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,l,i]=n,s=0;if(o.some((t=>0!==e[t]))){for(r in l)__webpack_require__.o(l,r)&&(__webpack_require__.m[r]=l[r]);if(i)var c=i(__webpack_require__)}for(t&&t(n);s<o.length;s++)a=o[s],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},n=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.O(0,[9078],(()=>{__webpack_require__.E(7498)}),5);var i=__webpack_require__.O(void 0,[5756,5825,4610,9860],(()=>__webpack_require__(50542)));i=__webpack_require__.O(i)})();